"use strict";(self.webpackChunkretail_usa=self.webpackChunkretail_usa||[]).push([[3818],{3818:(st,h,r)=>{r.r(h),r.d(h,{PlacesJourneyBundleModule:()=>ot});var e=r(5e3),l=r(9808),C=r(5357),B=r(7579),O=r(9646),N=r(4004),Q=r(9300),V=r(3900),$=r(262),b=r(8729),L=r(5460),T=r(5413),S=r(9287),y=r(4619),U=r(5173),f=r(3508),P=r(5622),v=r(4951),I=r(7002),E=r(3075),R=r(7605);const z=["bbMapsearch"];function j(n,s){if(1&n&&(e.ynx(0),e._uU(1),e._UZ(2,"br"),e.BQk()),2&n){const t=s.$implicit,i=e.oxw(2);e.xp6(1),e.AsE("",i.toLocaleTime(t.open)," - ",i.toLocaleTime(t.close),"")}}function q(n,s){if(1&n&&(e.ynx(0),e.YNc(1,j,3,2,"ng-container",6),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.hours)}}function X(n,s){1&n&&(e.TgZ(0,"span"),e.SDv(1,7),e.qZA())}const ee=function(n,s){return{"bb-text-semi-bold":n,"bb-text-support":s}},te=function(){return[]};function ne(n,s){if(1&n&&(e.TgZ(0,"li"),e._UZ(1,"bb-work-times",14),e.qZA()),2&n){const t=s.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("day",t)("hours",i.getWorkTimes(t,(null==i.place?null:i.place.hours)||e.DdM(2,te)))}}function ie(n,s){if(1&n&&(e.TgZ(0,"div",7)(1,"div",8),e._UZ(2,"bb-icon-ui",9),e.TgZ(3,"span",10),e.SDv(4,11),e.qZA()(),e.TgZ(5,"ul",12),e.YNc(6,ne,2,3,"li",13),e.qZA()()),2&n){const t=e.oxw();e.xp6(6),e.Q6J("ngForOf",t.weekDay)}}function oe(n,s){if(1&n&&(e.TgZ(0,"div",19),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t)," ")}}function se(n,s){if(1&n&&(e.TgZ(0,"div")(1,"div",8),e._UZ(2,"bb-icon-ui",15),e.TgZ(3,"span",10),e.SDv(4,16),e.qZA()(),e.TgZ(5,"div",17),e.YNc(6,oe,3,3,"div",18),e.qZA()()),2&n){const t=e.oxw();e.xp6(6),e.Q6J("ngForOf",null==t.place?null:t.place.services)}}const _e=["transM"],ae=["transKm"],ce=["transFt"],re=["transMi"];function le(n,s){if(1&n&&(e.TgZ(0,"span"),e._uU(1,", "),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&n){const t=e.oxw(3).$implicit;e.xp6(3),e.Oqu(t.address.addressLine2)}}function pe(n,s){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",t.address.postalCode," ")}}function de(n,s){if(1&n&&(e.TgZ(0,"div")(1,"span"),e._uU(2),e.qZA(),e.YNc(3,le,4,1,"span",21),e.YNc(4,pe,2,1,"div",21),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.Oqu(t.address.addressLine1),e.xp6(1),e.Q6J("ngIf",t.address.addressLine2),e.xp6(1),e.Q6J("ngIf",t.address.postalCode)}}function ue(n,s){if(1&n&&(e.TgZ(0,"div",24),e._UZ(1,"bb-icon-ui",25),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(3),e.Oqu(i.formatDistance(t.distance))}}function Ee(n,s){if(1&n&&(e.TgZ(0,"div",26)(1,"span"),e.SDv(2,27),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA()()),2&n){const t=s.ngIf;e.xp6(4),e.Oqu(t)}}function ge(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",14),e.NdJ("click",function(){const _=e.CHM(t).isOpen,a=e.oxw().$implicit;return e.oxw().onListItemClick(_,a)}),e.TgZ(1,"div",15)(2,"div",16),e._UZ(3,"bb-icon-ui",17),e.TgZ(4,"span",18),e._uU(5),e.qZA()(),e._UZ(6,"bb-icon-ui",19),e.qZA(),e.TgZ(7,"div",20),e.YNc(8,de,5,3,"div",21),e.YNc(9,ue,4,1,"div",22),e.YNc(10,Ee,5,1,"div",23),e.qZA()()}if(2&n){const t=s.isOpen,i=e.oxw().$implicit,o=e.oxw();e.ekj("bb-block--md",t),e.uIk("aria-expanded",t),e.xp6(3),e.Q6J("name",o.getPlaceTypeIcon(i.placeType)),e.xp6(2),e.Oqu(i.name),e.xp6(1),e.Q6J("name",t?"toggle-up":"toggle-down"),e.xp6(2),e.Q6J("ngIf",i.address),e.xp6(1),e.Q6J("ngIf",void 0!==i.distance),e.xp6(1),e.Q6J("ngIf",o.getClosingHour(i.hours))}}function Se(n,s){if(1&n&&e._UZ(0,"bb-place-details",28),2&n){const t=e.oxw().$implicit;e.Q6J("place",t)}}function Ae(n,s){if(1&n&&(e.TgZ(0,"bb-collapsible-ui",11),e.YNc(1,ge,11,9,"ng-template",12),e.YNc(2,Se,1,1,"ng-template",13),e.qZA()),2&n){const t=s.$implicit,i=e.oxw();e.Q6J("isOpen",t.id===i.selectedPlaceId)}}const me=["bbMapContainer"],fe=[[["","bbMapHeader",""]],[["","bbMapFooter",""]]],Me=["[bbMapHeader]","[bbMapFooter]"],Ce=["bbMapInfoWindowContent"];function be(n,s){if(1&n&&(e.TgZ(0,"div")(1,"p",4),e._uU(2),e.qZA(),e.TgZ(3,"div"),e._uU(4),e.qZA()()),2&n){const t=s.$implicit;e.uIk("data-place-id",t.id),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.lnq(" ",null==t.address?null:t.address.addressLine1,", ",null==t.address?null:t.address.postalCode," ",null==t.address?null:t.address.addressLine2," ")}}const he=["groupBtns"];function Be(n,s){1&n&&e.GkF(0)}function Oe(n,s){if(1&n&&(e.TgZ(0,"div",26),e._UZ(1,"bb-icon-ui",27),e.TgZ(2,"span",28),e.SDv(3,29),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(3),e.pQV(t.currentLocation),e.QtT(3)}}function Ne(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"bb-input-checkbox-ui",33),e.NdJ("change",function(){e.CHM(t),e.oxw();const o=e.MAs(1),_=e.oxw(3);return _.handleTypeSearch(_.filterTypes(o.value))}),e.TgZ(1,"span"),e.SDv(2,34),e.qZA()()}if(2&n){const t=s.$implicit;e.Q6J("name",t),e.xp6(2),e.pQV(t),e.QtT(2)}}function Le(n,s){if(1&n&&(e.TgZ(0,"form",30,31),e.YNc(2,Ne,3,2,"bb-input-checkbox-ui",32),e.qZA()),2&n){const t=e.oxw(3);e.xp6(2),e.Q6J("ngForOf",t.placeTypes)}}function Te(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"bb-places-list",35),e.NdJ("selected",function(o){return e.CHM(t),e.oxw(4).updatePlaceSelection(o)}),e.ALo(2,"async"),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(3).places,i=e.oxw();e.xp6(1),e.Q6J("radius",i.config.radius)("locations",t)("selectedPlaceId",e.lcZ(2,6,i.selectedPlaceId)||void 0)("currentPosition",i.currentPosition)("isMetric",i.isMetric)("placeTypes",i.config.placeTypes)}}function ye(n,s){if(1&n&&(e.ynx(0),e.YNc(1,Te,3,8,"ng-container",10),e.BQk()),2&n){const t=e.oxw(2).places;e.oxw();const i=e.MAs(9);e.xp6(1),e.Q6J("ngIf",t.length)("ngIfElse",i)}}const D=function(n){return{active:n}};function Ue(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",11)(2,"bb-map-search-ui",12),e.NdJ("mapSearch",function(o){return e.CHM(t),e.oxw(2).handleMapSearch(o)}),e.qZA(),e.YNc(3,Oe,4,1,"div",13),e.YNc(4,Le,3,1,"form",14),e.TgZ(5,"div",15,16)(7,"div",17)(8,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).selectedView="list"}),e.SDv(9,19),e.qZA(),e.TgZ(10,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).selectedView="map"}),e.SDv(11,21),e.qZA()()(),e.TgZ(12,"div",22)(13,"div",23),e.YNc(14,ye,2,2,"ng-container",10),e.qZA()()(),e.TgZ(15,"div",24)(16,"bb-map-wrapper",25),e.NdJ("update",function(o){return e.CHM(t),e.oxw(2).locationUpdate(o)})("selected",function(o){return e.CHM(t),e.oxw(2).updatePlaceSelection(o)})("mapReady",function(){return e.CHM(t),e.oxw(2).onMapReady()}),e.ALo(17,"async"),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw().places,i=e.oxw(),o=e.MAs(11);e.xp6(2),e.Q6J("config",i.mapConfig),e.xp6(1),e.Q6J("ngIf",i.currentLocation),e.xp6(1),e.Q6J("ngIf",t&&t.length),e.xp6(4),e.Q6J("ngClass",e.VKq(21,D,"list"===i.selectedView)),e.xp6(2),e.Q6J("ngClass",e.VKq(23,D,"map"===i.selectedView)),e.xp6(2),e.Q6J("hidden","map"===i.selectedView),e.xp6(1),e.Q6J("ngClass",t&&t.length?"":"bb-places-list--empty"),e.xp6(1),e.Q6J("ngIf",t)("ngIfElse",o),e.xp6(1),e.Q6J("hidden","list"===i.selectedView),e.xp6(1),e.Q6J("apiKey",i.config.apiKey)("config",i.mapConfig)("mapZoom",i.config.mapZoom)("latitude",i.latitude)("longitude",i.longitude)("icons",i.markerIcon)("locations",t)("enableInfoWindow",!!i.smallScreen)("selectedPlaceId",e.lcZ(17,19,i.selectedPlaceId)||void 0)}}function Pe(n,s){if(1&n&&(e.TgZ(0,"div",7)(1,"div",8)(2,"div",9),e.YNc(3,Ue,18,25,"ng-container",10),e.qZA()()()),2&n){const t=e.oxw(),i=e.MAs(13);e.xp6(2),e.ekj("bb-stack--center",t.error),e.xp6(1),e.Q6J("ngIf",!t.error)("ngIfElse",i)}}function ve(n,s){1&n&&e._UZ(0,"bb-empty-state-ui",36)}function Ie(n,s){1&n&&e._UZ(0,"bb-loading-indicator-ui")}function Re(n,s){1&n&&e._UZ(0,"bb-empty-state-ui",39)}function De(n,s){if(1&n&&(e.TgZ(0,"bb-common-error-state-ui",37),e.YNc(1,Re,1,0,"ng-template",null,38,e.W1O),e.qZA()),2&n){const t=e.MAs(2);e.Q6J("error",t)}}const Je=function(n){return{"bb-heading-widget bb-heading-widget--de-elevated":n}},we=function(n){return{"container--drag-up container-fluid":n}},Ke=function(n){return{places:n}},Ge=["*"],J=new e.OlP("PlacesJourneyConfiguration injection token");var A=(()=>{return(n=A||(A={})).METRIC="metric",n.US_IMPERIAL="imperial",A;var n})();const w={apiKey:"",placeTypes:{},mapZoom:15,latitude:52.3760992,longitude:4.900779,radius:2,limitList:100,measurementSystem:A.METRIC,deElevatedHeader:!1};let K=(()=>{class n{constructor(t){t=t||{},this._config=Object.assign(Object.assign({},w),t)}get defaults(){return w}get apiKey(){return this._config.apiKey}get placeTypes(){return this._config.placeTypes}get mapZoom(){return this._config.mapZoom}get latitude(){return this._config.latitude}get longitude(){return this._config.longitude}get radius(){return this._config.radius}get limitList(){return this._config.limitList}get measurementSystem(){return this._config.measurementSystem}get deElevatedHeader(){return this._config.deElevatedHeader}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(J,8))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),xe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-places-journey"]],features:[e._Bn([K])],decls:1,vars:0,template:function(t,i){1&t&&e._UZ(0,"router-outlet")},directives:[C.lC],encapsulation:2}),n})();const Fe="bbDefaultPlaceType",Ze=n=>{const s=n.error;if(s&&s.errors&&s.errors[0]&&s.errors[0].message)return s.errors[0].message};var g=(()=>{return(n=g||(g={}))[n.HTTP=1]="HTTP",n[n.HTTPS=2]="HTTPS",n[n.AUTO=3]="AUTO",g;var n})();let m=(()=>{class n{constructor(){this.scriptID="bbGoogleMapsApiScript",this.callbackName="bbMapsAPILoader",this.apiLoadPromiseName="bbMapsAPILoaderPromise",this.windowRef=window,this.documentRef=document,this.configValue={}}get config(){return this.configValue}set config(t){this.configValue=t}get loadAPIPromise(){return this.windowRef[this.apiLoadPromiseName]}assignScriptLoadingPromise(t){this.windowRef[this.apiLoadPromiseName]=new Promise((i,o)=>{this.windowRef[this.callbackName]=()=>{i()},t.onerror=_=>{o(_)}})}getScriptSrc(t){let o="";switch(this.configValue&&this.configValue.protocol||g.HTTPS){case g.HTTP:o="http:";break;case g.HTTPS:o="https:"}const _=this.configValue.hostAndPath||"maps.googleapis.com/maps/api/js",a=this.configValue.libraries||[];-1===a.indexOf("places")&&(this.configValue.libraries=[...a,"places"]);const c={v:this.configValue.apiVersion||"quarterly",callback:t,key:this.configValue.apiKey,client:this.configValue.clientId,channel:this.configValue.channel,libraries:this.configValue.libraries,region:this.configValue.region,language:this.configValue.language};return`${o}//${_}?${Object.keys(c).filter(d=>void 0!==c[d]).filter(d=>!Array.isArray(c[d])||Array.isArray(c[d])&&c[d].length>0).map(d=>{let p=c[d];return Array.isArray(p)&&(p=p.join(",")),`${d}=${p}`}).join("&")}`}load(){const t=this.windowRef;if(t.google&&t.google.maps)return Promise.resolve();if(this.loadAPIPromise)return this.loadAPIPromise;const i=this.documentRef.createElement("script");return i.type="text/javascript",i.async=!0,i.defer=!0,i.id=this.scriptID,i.src=this.getScriptSrc(this.callbackName),this.assignScriptLoadingPromise(i),this.documentRef.body.appendChild(i),this.loadAPIPromise}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),x=(()=>{class n{constructor(t){this.placesDataHttpService=t}getPlaces(t){return this.placesDataHttpService.getPlaces(t).pipe((0,N.U)(i=>i||[]))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(b.VG))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),Ve=(()=>{class n{constructor(t){this.loader=t,this.options={},this.config={},this.mapSearch=new e.vpe}onSearchButtonClick(){const t=this.searchBox.inputField;!t||(google.maps.event.trigger(t.nativeElement,"focus",{}),google.maps.event.trigger(t.nativeElement,"keydown",{keyCode:40,stopPropagation:()=>{},preventDefault:()=>{}}),google.maps.event.trigger(t.nativeElement,"keydown",{keyCode:13}))}ngOnInit(){this.loader.config=this.config,this.loader.load().then(()=>{const t=this.searchBox.inputField;if(!t)return;const i=new google.maps.places.Autocomplete(t.nativeElement,this.options);i.addListener("place_changed",()=>{const o=i.getPlace();o.geometry&&this.mapSearch.emit(o)})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-map-search-ui"]],viewQuery:function(t,i){if(1&t&&e.Gf(z,7),2&t){let o;e.iGM(o=e.CRH())&&(i.searchBox=o.first)}},inputs:{options:"options",config:"config"},outputs:{mapSearch:"mapSearch"},decls:3,vars:1,consts:function(){let s,t;return s="Search Branch and Street Names",t="Search Branch and Street Name",[[1,"bb-block","bb-block--md"],["placeholder",s,"aria-label",t,3,"showSearch","submit"],["bbMapsearch",""]]},template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"bb-search-box-ui",1,2),e.NdJ("submit",function(){return i.onSearchButtonClick()}),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("showSearch",!0))},directives:[T.B],encapsulation:2,changeDetection:0}),n})();var M=(()=>{return(n=M||(M={}))[n.Monday=1]="Monday",n[n.Tuesday=2]="Tuesday",n[n.Wednesday=3]="Wednesday",n[n.Thursday=4]="Thursday",n[n.Friday=5]="Friday",n[n.Saturday=6]="Saturday",n[n.Sunday=7]="Sunday",M;var n})();let F=(()=>{class n{constructor(t){this.datePipe=t,this.day=0,this.hours=[]}toLocaleTime(t){return this.datePipe.transform(new Date("2000-01-01T"+t),"shortTime")||t}isToday(t,i=(new Date).getDay()){return t===(i||7)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.uU))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-work-times"]],inputs:{day:"day",hours:"hours"},features:[e._Bn([l.uU])],decls:7,vars:7,consts:function(){let s,t,i;return s="{VAR_SELECT, select, 1 {Monday} 2 {Tuesday} 3 {Wednesday} 4 {Thursday} 5 {Friday} 6 {Saturday} 7 {Sunday}}",s=e.Zx4(s,{VAR_SELECT:"\ufffd0\ufffd"}),t=" " + s + " ",i="Closed",[[1,"row","bb-place-timetable",3,"ngClass"],[1,"col-md-5"],t,[1,"col-md-7"],[4,"ngIf","ngIfElse"],["closed",""],[4,"ngFor","ngForOf"],i]},template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"span",1),e.SDv(2,2),e.qZA(),e.TgZ(3,"span",3),e.YNc(4,q,2,1,"ng-container",4),e.qZA()(),e.YNc(5,X,2,0,"ng-template",null,5,e.W1O)),2&t){const o=e.MAs(6);e.Q6J("ngClass",e.WLB(4,ee,i.isToday(i.day),!i.isToday(i.day))),e.xp6(2),e.pQV(i.day),e.QtT(2),e.xp6(2),e.Q6J("ngIf",i.hours.length)("ngIfElse",o)}},directives:[l.mk,l.O5,l.sg],encapsulation:2,changeDetection:0}),n})(),k=(()=>{class n{get weekDay(){const t=Object.keys(M);return t.slice(0,t.length/2).map(i=>+i)}getWorkTimes(t,i){return i.filter(o=>o.day===t)}getFullAddress(t){return t?encodeURI(`${t.postalCode} ${t.addressLine1}`):""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-place-details"]],inputs:{place:"place"},features:[e._Bn([l.uU])],decls:7,vars:3,consts:function(){let s,t,i,o,_,a;return s="Get Directions on google maps",t="" + "\ufffd#4\ufffd" + "" + "\ufffd/#4\ufffd" + " Get Directions ",i=" Opening Hours ",o="Opening Hours",_=" Available Services ",a="Available Services",[[1,"bb-place-details"],["aria-label",s,1,"bb-block","bb-block--md"],["target","_blank","rel","noopener",1,"btn","btn-sm","btn-outline-primary",3,"href"],t,["name","navigation","size","md"],["class","bb-block bb-block--md",4,"ngIf"],[4,"ngIf"],[1,"bb-block","bb-block--md"],[1,"bb-stack","bb-stack--density-sm"],["name","access-time",1,"bb-stack__item"],[1,"bb-stack__item","bb-text-semi-bold"],i,["aria-label",o,"tabindex","0",1,"bb-list","bb-list--density-none"],[4,"ngFor","ngForOf"],[3,"day","hours"],["name","supervisor-account",1,"bb-stack__item"],_,["aria-label",a,"tabindex","0"],["class","bb-place-services bb-text-support",4,"ngFor","ngForOf"],[1,"bb-place-services","bb-text-support"]]},template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"a",2),e.tHW(3,3),e._UZ(4,"bb-icon-ui",4),e.N_p(),e.qZA()(),e.YNc(5,ie,7,1,"div",5),e.YNc(6,se,7,1,"div",6),e.qZA()),2&t&&(e.xp6(2),e.Q6J("href","https://www.google.com/maps/dir//"+i.getFullAddress(i.place&&i.place.address),e.LSH),e.xp6(3),e.Q6J("ngIf",null==i.place?null:i.place.hours),e.xp6(1),e.Q6J("ngIf",null==i.place||null==i.place.services?null:i.place.services.length))},directives:[S.o,F,l.O5,l.sg],pipes:[l.rS],encapsulation:2,changeDetection:0}),n})(),W=(()=>{class n{constructor(t){this.element=t,t.nativeElement.tabIndex=0}eventListener(t){this.element.nativeElement.click(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq))},n.\u0275dir=e.lG2({type:n,selectors:[["","bbKeyboardAccessibility",""]],hostBindings:function(t,i){1&t&&e.NdJ("keydown.enter",function(_){return i.eventListener(_)})("keydown.space",function(_){return i.eventListener(_)})}}),n})(),Y=(()=>{class n{constructor(t){this.datePipe=t,this.radius=1,this.isMetric=!0,this.placeTypes={},this.selected=new e.vpe,this.places=[]}set locations(t){this.places=t.map(i=>Object.assign(Object.assign({},i),{distance:this.calculateDistance(i)})).sort((i,o)=>(i.distance||0)-(o.distance||0))}calculateDistance(t){if("undefined"==typeof google||void 0===this.currentPosition)return;const i=new google.maps.LatLng(this.currentPosition.lat,this.currentPosition.lng),o=new google.maps.LatLng(t.latitude,t.longitude),_=google.maps.geometry.spherical.computeDistanceBetween(i,o);return this.isMetric?_:3.28084*_}isStillOpen(t,i=new Date){const[o,_]=t.split(":").map(u=>+u),a=i.getHours(),c=i.getMinutes();return a<o||a===o&&c<_}getDistanceUnits(){return this.isMetric?[this.transM.nativeElement.textContent,this.transKm.nativeElement.textContent]:[this.transFt.nativeElement.textContent,this.transMi.nativeElement.textContent]}onListItemClick(t,i){this.selected.emit(t?{id:"",latitude:0,longitude:0}:i)}getClosingHour(t,i=new Date){if(!t)return;const o=i.getDay()||7,_=t.find(a=>a.day===o);return _&&this.isStillOpen(_.close,i)&&this.datePipe.transform(new Date("2000-01-01T"+_.close),"shortTime")||void 0}getPlaceTypeIcon(t){return t&&this.placeTypes[t]&&this.placeTypes[t].iconName?this.placeTypes[t].iconName:"map"}formatDistance(t){const i=this.getDistanceUnits(),o=this.isMetric?1e3:5280;let _=Math.round(t),a=i[0];return t>=o&&(a=i[1],_/=o,_=_>=10?Math.round(_):Math.round(10*_)/10),`${_} ${a}`}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.uU))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-places-list"]],viewQuery:function(t,i){if(1&t&&(e.Gf(_e,7),e.Gf(ae,7),e.Gf(ce,7),e.Gf(re,7)),2&t){let o;e.iGM(o=e.CRH())&&(i.transM=o.first),e.iGM(o=e.CRH())&&(i.transKm=o.first),e.iGM(o=e.CRH())&&(i.transFt=o.first),e.iGM(o=e.CRH())&&(i.transMi=o.first)}},inputs:{radius:"radius",locations:"locations",selectedPlaceId:"selectedPlaceId",currentPosition:"currentPosition",isMetric:"isMetric",placeTypes:"placeTypes"},outputs:{selected:"selected"},features:[e._Bn([l.uU])],decls:14,vars:2,consts:function(){let s,t,i,o,_;return s="m",t="km",i="ft",o="mi",_="Open Today until ",[[1,"bb-list","bb-list--density-md",3,"closeOthers"],["class","bb-list__item d-block","role","tree",3,"isOpen",4,"ngFor","ngForOf"],[1,"ng-cloak"],["transM",""],s,["transKm",""],t,["transFt",""],i,["transMi",""],o,["role","tree",1,"bb-list__item","d-block",3,"isOpen"],["bbCollapsibleHeader",""],["bbCollapsibleBody",""],["role","treeitem","bbKeyboardAccessibility","",1,"bb-block",3,"click"],[1,"bb-stack","bb-place-info"],[1,"bb-inline-stack","bb-inline-stack--density-sm"],["size","md",1,"bb-inline-stack__item",3,"name"],[1,"bb-text-semi-bold"],["size","md",1,"bb-stack__item","bb-stack__item--push-right",3,"name"],[1,"bb-place-info__subtitle","bb-subtitle"],[4,"ngIf"],["class","bb-text-support bb-inline-stack",4,"ngIf"],["class","bb-text-support",4,"ngIf"],[1,"bb-text-support","bb-inline-stack"],["name","near-me","size","sm",1,"bb-inline-stack__item"],[1,"bb-text-support"],_,[3,"place"]]},template:function(t,i){1&t&&(e.TgZ(0,"bb-collapsible-accordion-ui",0),e.YNc(1,Ae,3,1,"bb-collapsible-ui",1),e.qZA(),e.TgZ(2,"span",2,3),e.SDv(4,4),e.qZA(),e.TgZ(5,"span",2,5),e.SDv(7,6),e.qZA(),e.TgZ(8,"span",2,7),e.SDv(10,8),e.qZA(),e.TgZ(11,"span",2,9),e.SDv(13,10),e.qZA()),2&t&&(e.Q6J("closeOthers",!0),e.xp6(1),e.Q6J("ngForOf",i.places))},directives:[U.j,f.tB,S.o,k,l.sg,f.gM,W,l.O5,f.rJ],encapsulation:2,changeDetection:0}),n})(),H=(()=>{class n{constructor(t){this.loader=t}createMap(t,i,o={}){return this.loader.config=o,this.loader.load().then(()=>{this.map=new google.maps.Map(t,i)})}setMapOptions(t){this.map.setOptions(t)}createMarker(t={},i=!0){return i&&(t.map=this.map),new google.maps.Marker(t)}createInfoWindow(t){return new google.maps.InfoWindow(t)}openInfoWindow(t,i){return t.open(this.map,i)}onMapEvent(t,i){this.map.addListener(t,o=>i(o))}setCenter(t){return this.map.setCenter(t)}getZoom(){return this.map.getZoom()}getBounds(){return this.map.getBounds()}getMapTypeId(){return this.map.getMapTypeId()}setZoom(t){return this.map.setZoom(t)}getCenter(){return this.map.getCenter()}panTo(t){return this.map.panTo(t)}panBy(t,i){return this.map.panBy(t,i)}fitBounds(t){return this.map.fitBounds(t)}panToBounds(t){return this.map.panToBounds(t)}triggerMapEvent(t){return google.maps.event.trigger(this.map,t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(m))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),$e=(()=>{class n{constructor(t){this.helpers=t,this.options={},this.config={},this.mapReady=new e.vpe}get mapHelpers(){return this.helpers}ngOnInit(){this.helpers.createMap(this.mapContainer.nativeElement,this.options,this.config).then(()=>this.mapReady.emit(this))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(H))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-map-ui"]],viewQuery:function(t,i){if(1&t&&e.Gf(me,7),2&t){let o;e.iGM(o=e.CRH())&&(i.mapContainer=o.first)}},inputs:{options:"options",config:"config"},outputs:{mapReady:"mapReady"},ngContentSelectors:Me,decls:4,vars:0,consts:[[1,"bb-map"],["bbMapContainer",""]],template:function(t,i){1&t&&(e.F$t(fe),e.Hsn(0),e._UZ(1,"div",0,1),e.Hsn(3,1))},encapsulation:2,changeDetection:0}),n})(),Z=(()=>{class n{constructor(){this.apiKey="",this.config={},this.mapZoom=0,this.latitude=0,this.longitude=0,this.enableInfoWindow=!1,this.icons={},this.update=new e.vpe,this.selected=new e.vpe,this.locate=new e.vpe,this.mapReady=new e.vpe,this.markers=[]}set locations(t){this.places=t,this.mapHelpers&&this.drawMarkers()}set selectedPlaceId(t){this.selectedId=t,this.mapHelpers&&this.drawMarkers()}getInfoWindowContent(t){const o=this.template.nativeElement.querySelector(`div[data-place-id='${t}']`);return o?o.innerHTML:""}getDistance(t){return t?google.maps.geometry.spherical.computeDistanceBetween(t.getNorthEast(),t.getSouthWest())/1e3:0}emitMapUpdate(){if(!this.mapHelpers)return;const t=this.mapHelpers.getCenter();this.update.emit({latitude:t.lat(),longitude:t.lng(),radius:Math.ceil(this.getDistance(this.mapHelpers.getBounds())/2)})}setCurrentLocationMarker(t){!this.mapHelpers||this.mapHelpers.createMarker({position:t,clickable:!1,icon:this.currentLocationIconOptions,locationId:""})}markerClicklistener(t,i){const o=this.mapHelpers;if(this.enableInfoWindow){this.infoWindow&&this.infoWindow.close();const _=this.getInfoWindowContent(i.id);this.infoWindow=o.createInfoWindow({content:_}),o.openInfoWindow(this.infoWindow,t)}this.mapHelpers&&this.selected.emit(t.locationId===this.selectedId?{id:"",latitude:0,longitude:0}:this.places.find(_=>_.id===t.locationId))}drawMarkers(){if(!Array.isArray(this.places))return;const t=this.places.map(o=>o.id),i=[];this.markers.forEach(o=>{t.includes(o.locationId)?i.push(o):o.setMap(null)}),this.markers=i,this.places.forEach(o=>{let _=this.markers.find(a=>a.locationId===o.id);void 0===_&&(_=this.createMarker(o),this.markers.push(_),_.addListener("click",()=>this.markerClicklistener(_,o))),this.selectedId&&t.includes(this.selectedId)?o.id===this.selectedId?(_.setOpacity(1),_.setIcon({url:_.getIcon().url,scaledSize:new google.maps.Size(60,60)})):(_.setOpacity(.5),_.setIcon({url:_.getIcon().url})):(_.setOpacity(1),_.setIcon({url:_.getIcon().url}))})}createMarker(t){const i=this.mapHelpers,o={lat:t.latitude,lng:t.longitude},_=this.icons&&Object.keys(this.icons).length?this.icons[Object.keys(this.icons)[0]]:void 0,a=t.placeType&&this.icons&&this.icons[t.placeType]?this.icons[t.placeType]:_;let c={position:o,locationId:t.id,title:"map marker"};return a&&(c=Object.assign(Object.assign({},c),{icon:{url:a}})),i.createMarker(c)}get locations(){return this.places||[]}get selectedPlaceId(){return this.selectedId}get options(){return{center:{lat:this.latitude,lng:this.longitude},zoom:this.mapZoom,disableDefaultUI:!0,zoomControl:!0,styles:[{featureType:"poi",stylers:[{visibility:"off"}]}]}}setMapOptions(t){if(this.mapHelpers=t.mapHelpers,this.mapHelpers.setMapOptions({mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP]}}),this.mapHelpers.onMapEvent("idle",()=>this.emitMapUpdate()),this.currentLocationIconOptions={path:google.maps.SymbolPath.CIRCLE,fillColor:"#4285F4",fillOpacity:1,scale:6,strokeColor:"white",strokeWeight:2},"geolocation"in navigator){const i=this.mapHelpers;navigator.geolocation.getCurrentPosition(o=>{const _={lat:o.coords.latitude,lng:o.coords.longitude};i.setCenter(_),this.setCurrentLocationMarker(_),this.locate.emit(_)})}this.mapReady.emit()}ngOnChanges(t){!this.mapHelpers||(t.latitude||t.longitude)&&this.mapHelpers.setCenter({lat:t.latitude?t.latitude.currentValue:this.latitude,lng:t.longitude?t.longitude.currentValue:this.longitude})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-map-wrapper"]],viewQuery:function(t,i){if(1&t&&e.Gf(Ce,5),2&t){let o;e.iGM(o=e.CRH())&&(i.template=o.first)}},inputs:{apiKey:"apiKey",config:"config",mapZoom:"mapZoom",latitude:"latitude",longitude:"longitude",enableInfoWindow:"enableInfoWindow",icons:"icons",locations:"locations",selectedPlaceId:"selectedPlaceId"},outputs:{update:"update",selected:"selected",locate:"locate",mapReady:"mapReady"},features:[e.TTD],decls:4,vars:3,consts:[[3,"options","config","mapReady"],["hidden",""],["bbMapInfoWindowContent",""],[4,"ngFor","ngForOf"],[1,"bb-text-semi-bold"]],template:function(t,i){1&t&&(e.TgZ(0,"bb-map-ui",0),e.NdJ("mapReady",function(_){return i.setMapOptions(_)}),e.qZA(),e.TgZ(1,"div",1,2),e.YNc(3,be,5,5,"div",3),e.qZA()),2&t&&(e.Q6J("options",i.options)("config",i.config),e.xp6(3),e.Q6J("ngForOf",i.places))},directives:[$e,l.sg],encapsulation:2,changeDetection:0}),n})();const qe={path:"",component:xe,children:[{path:"",component:(()=>{class n{constructor(t,i,o,_){this.config=t,this.service=i,this.cd=o,this.loader=_,this.selectedView="list",this.latitude=0,this.longitude=0,this.radius=1,this.types=[],this.mapConfigObject={},this.mapParamsSubject=new B.x,this.mapParams=this.mapParamsSubject.asObservable(),this.locations=this.mapParams.pipe((0,Q.h)(a=>void 0!==a),(0,V.w)(a=>this.service.getPlaces(a)),(0,N.U)(a=>this.config.limitList?a.slice(0,this.config.limitList):a),(0,$.K)(a=>(this.handleError(a),(0,O.of)([])))),this.selectedPlaceId=new B.x,this.resolveAsset=a=>{const c=this.placeTypes.find(u=>u===a);return c&&this.config.placeTypes[c].markerUrl||"assets/bb-places-journey-ang/bb-default-marker.svg"},this.latitude=this.config.latitude,this.longitude=this.config.longitude,this.radius=this.config.radius,this.limitList=this.config.limitList}set groupBtns(t){this.groupBtnRef=t,setTimeout(()=>{!this.groupBtnRef||(this.smallScreen="none"!==window.getComputedStyle(this.groupBtnRef.nativeElement).display)},0)}loadApi(t={}){return this.loader.config=t,this.loader.load().then(()=>{this.geocoder=new google.maps.Geocoder})}getCurrentLocation(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(t=>{this.currentPosition={lat:t.coords.latitude,lng:t.coords.longitude},this.geocoder&&this.geocoder.geocode({location:this.currentPosition},(i,o)=>{if(o===google.maps.GeocoderStatus.OK&&i[0]){const _=i[0].address_components.filter(a=>a.types.find(c=>"route"===c));this.currentLocation=_[0].long_name||i[0].formatted_address}})})}handleError(t){this.error=(n=>n.error instanceof ErrorEvent?{message:"An unexpected error occurred"}:n.status&&`${n.status}`.startsWith("4")?{message:Ze(n)||`Error ${n.status}`}:{message:"An unexpected server error occurred"})(t)}get groupBtns(){return this.groupBtnRef}get mapConfig(){return this.mapConfigObject}get placeTypes(){return Object.keys(this.config.placeTypes)}get markerIcon(){const t=[Fe].concat(this.placeTypes),i=t.map(_=>this.resolveAsset(_)),o={};for(let _=0;_<i.length;_++)o[t[_]]=i[_];return o}get icons(){return(0,O.of)(this.markerIcon)}get isMetric(){return this.config.measurementSystem!==A.METRIC}filterTypes(t){const i=[];return Object.keys(t).forEach(o=>{t[o]&&i.push(o)}),i}locationUpdate(t){this.latitude=t.latitude,this.longitude=t.longitude,this.radius=t.radius||this.config.radius,this.types=t.types||this.types,this.cd.detectChanges(),this.mapParamsSubject.next(Object.assign(Object.assign({},t),{radius:this.config.radius,types:this.types}))}handleTypeSearch(t){this.locationUpdate({latitude:this.latitude,longitude:this.longitude,radius:this.radius,types:t})}handleMapSearch(t){!t.geometry||this.locationUpdate({latitude:t.geometry.location.lat(),longitude:t.geometry.location.lng(),radius:this.config.radius,types:this.types})}updatePlaceSelection(t){this.selectedPlaceId.next(t.id)}onMapReady(){this.limitList=void 0,this.locationUpdate({latitude:this.latitude,longitude:this.longitude,radius:this.radius,types:this.types})}ngOnInit(){this.mapConfigObject={apiKey:this.config.apiKey,libraries:["geometry"]},this.loadApi(this.mapConfigObject).then(()=>{this.getCurrentLocation()}),this.locationUpdate({latitude:this.config.latitude,longitude:this.config.longitude,radius:this.config.radius})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(K),e.Y36(x),e.Y36(e.sBO),e.Y36(m))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-places-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(he,5),2&t){let o;e.iGM(o=e.CRH())&&(i.groupBtns=o.first)}},features:[e._Bn([m])],ngContentSelectors:Ge,decls:14,vars:13,consts:function(){let s,t,i,o,_,a,c,u,d;return s="Find Branches and ATMs",t=" List ",i=" Map ",o="Current Location - " + "\ufffd0\ufffd" + "",_="{VAR_SELECT, select, atm {ATM's} branch {Branches}}",_=e.Zx4(_,{VAR_SELECT:"\ufffd0\ufffd"}),a="No Locations Found",c="We couldn\u2019t find any branches or ATMs in this region. Try moving the map or searching for a city or branch.",u="Page couldn\u2019t load",d="Try to reload the page or contact the system administrator.",[[3,"ngClass"],["headingType","h1","heading",s,3,"headingClasses"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["placesContainer",""],["emptyState",""],["loadingState",""],["errorState",""],[1,"card"],[1,"card-body"],[1,"row"],[4,"ngIf","ngIfElse"],[1,"col-md-6"],[3,"config","mapSearch"],["class","bb-inline-stack bb-text-support bb-block bb-block--md",4,"ngIf"],["class","bb-block bb-block--md bb-stack bb-stack--density-xl",4,"ngIf"],[1,"bb-text-align-center","bb-block","bb-block--md","d-md-none"],["groupBtns",""],[1,"btn-group","btn-group-toggle","bb-block","bb-block--full-width"],["name","list",1,"btn","btn-secondary",3,"ngClass","click"],t,[1,"btn","btn-secondary",3,"ngClass","click"],i,[1,"d-md-block",3,"hidden"],[1,"bb-places-list",3,"ngClass"],[1,"col-md-6","d-md-block",3,"hidden"],[3,"apiKey","config","mapZoom","latitude","longitude","icons","locations","enableInfoWindow","selectedPlaceId","update","selected","mapReady"],[1,"bb-inline-stack","bb-text-support","bb-block","bb-block--md"],["name","my-location",1,"bb-inline-stack__item"],[1,"bb-inline-stack__item"],o,[1,"bb-block","bb-block--md","bb-stack","bb-stack--density-xl"],["placeTypeFilterForm","ngForm"],["ngModel","","class","bb-stack__item",3,"name","change",4,"ngFor","ngForOf"],["ngModel","",1,"bb-stack__item",3,"name","change"],_,[3,"radius","locations","selectedPlaceId","currentPosition","isMetric","placeTypes","selected"],["title",a,"subtitle",c,"iconSize","xxl","iconModifier","place",1,"bb-text-align-center"],[3,"error"],["errorCustomTemplate",""],["title",u,"subtitle",d,"iconSize","xxl","iconModifier","error",1,"bb-text-align-center"]]},template:function(t,i){if(1&t&&(e.F$t(),e.TgZ(0,"div",0),e._UZ(1,"bb-header-ui",1),e.Hsn(2),e.qZA(),e.TgZ(3,"div",0),e.YNc(4,Be,1,0,"ng-container",2),e.ALo(5,"async"),e.qZA(),e.YNc(6,Pe,4,4,"ng-template",null,3,e.W1O),e.YNc(8,ve,1,0,"ng-template",null,4,e.W1O),e.YNc(10,Ie,1,0,"ng-template",null,5,e.W1O),e.YNc(12,De,3,1,"ng-template",null,6,e.W1O)),2&t){const o=e.MAs(7);e.Q6J("ngClass",e.VKq(7,Je,i.config.deElevatedHeader)),e.xp6(1),e.Q6J("headingClasses",i.config.deElevatedHeader?"bb-heading-widget__heading":"bb-heading-widget__heading px-0 pb-5"),e.xp6(2),e.Q6J("ngClass",e.VKq(9,we,i.config.deElevatedHeader)),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(11,Ke,e.lcZ(5,5,i.locations)))}},directives:[L.G,Ve,S.o,y.r,Y,Z,P.s,v.Q,I.v,l.mk,l.tP,l.O5,E._Y,E.JL,E.F,l.sg,E.JJ,E.On],pipes:[l.Ov],encapsulation:2,changeDetection:0}),n})(),data:{title:"Places"}}]},Xe=[L.O,P.P,I.N,v.p,S.Q,R.hJ,(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[m,H],imports:[[l.ez,T.F,R.hJ,S.Q]]}),n})(),f.d8,U.H,y.b];let et=(()=>{class n{static forRoot(t={route:qe}){return{ngModule:n,providers:[(0,C.co)([t.route])]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[x,b.VG],imports:[[l.ez,E.u5,C.Bz,...Xe]]}),n})();var tt=r(1520),nt=r(570);const it=[{provide:J,useValue:{latitude:40.72345,longitude:-73.9924,mapZoom:12,apiKey:tt.N.googleApiKey,placeTypes:{branch:{iconName:"account",markerUrl:"assets/bb-places-journey-ang/branch-marker.svg"},atm:{iconName:"credit-card",markerUrl:"assets/bb-places-journey-ang/atm-marker.svg"}}}},{provide:b.if,useExisting:nt.W1}];let ot=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[it],imports:[[et.forRoot()]]}),n})()}}]);