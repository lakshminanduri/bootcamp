(self.webpackChunkretail_usa=self.webpackChunkretail_usa||[]).push([[8274],{9025:(Ct,Y,s)=>{"use strict";s.r(Y),s.d(Y,{AccountStatementRetailJourneyBundleModule:()=>Aa});var r=s(4004),t=s(5e3);s(3032);const nt=e=>(e=>void 0!==e.id)(e[0])?e[0].id:e[0];var O=(()=>{return(e=O||(O={})).BODY="body",e.RESPONSE="response",e.EVENT="event",O;var e})();const J=new t.OlP("ACCOUNT_STATEMENT_CATEGORIES"),M={Account:"Account","Credit Card":"Credit Card",Mortgage:"Mortgage","Tax Form":"Tax Form",LOC:"LOC",EELOC:"EELOC"},W=()=>new Date(0),h=()=>new Date((new Date).setHours(0,0,0,0)),k=()=>h().getFullYear(),$=()=>h().getMonth(),p=()=>h().getDate(),g=()=>h().getDay(),f=e=>(e+6)%7,R=()=>new Date(k(),3*Math.floor($()/3)-3,1),T=()=>new Date(h().setDate(p()-7-f(g()))),Et=e=>({year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()});var v=(()=>{return(e=v||(v={})).Today="Today",e.Yesterday="Yesterday",e.ThisWeek="This week",e.LastWeek="Last week",e.ThisMonth="This month",e.LastMonth="Last month",e.ThisQuarter="This quarter",e.LastQuarter="Last quarter",e.ThisYear="This year",e.AllTime="All time",v;var e})();const ae={[v.AllTime]:()=>({from:void 0,to:void 0}),[v.Today]:()=>({from:h(),to:h()}),[v.Yesterday]:()=>({from:new Date(h().setDate(h().getDate()-1)),to:new Date(h().setDate(h().getDate()-1))}),[v.ThisWeek]:()=>({from:new Date(h().setDate(p()-f(g()))),to:h()}),[v.LastWeek]:()=>({from:T(),to:new Date(T().setDate(T().getDate()+6))}),[v.ThisMonth]:()=>({from:new Date(k(),$(),1),to:h()}),[v.LastMonth]:()=>({from:new Date(k(),$()-1,1),to:new Date(h().setDate(0))}),[v.ThisQuarter]:()=>({from:new Date(k(),3*Math.floor($()/3),1),to:h()}),[v.LastQuarter]:()=>({from:R(),to:new Date(R().getFullYear(),R().getMonth()+3,0)}),[v.ThisYear]:()=>({from:new Date(k(),0,1),to:h()})},vt=new Error("Response body not set"),_e=new t.OlP("MIME_TYPE_EXTENSIONS");var F=(()=>{return(e=F||(F={})).IDLE="IDLE",e.LOADING="LOADING",e.LOADING_MORE="LOADING_MORE",e.LOADING_FILTERED="LOADING_FILTERED",e.LOADING_TABLE="LOADING_TABLE",F;var e})(),at=(()=>{return(e=at||(at={})).Pagination="PAGINATION",e.LoadMore="LOAD_MORE",at;var e})();const ce=e=>{const o=e.get("x-total-count");return o&&parseInt(o,10)||0};var Mt=s(7579),mt=s(1135),gt=s(9841),_t=s(3900),bt=s(9300),ln=s(8372),un=s(1884),X=s(5357),pt=s(9779),se=s(6331),re=s(4619),le=s(2908),d=s(9808),G=s(3075),q=s(5622),ct=s(4951),st=s(7605),Dt=s(3508),Bt=s(4058),Ft=s(8612),Lt=s(6966),rt=s(9287),Ot=s(9565),ue=s(8639),Sn=s(7159),An=s(7656),Se=s(194),ht=s(3922),Rt=s(5893),wt=s(5556);function dn(e,o){if(1&e&&(t.ynx(0),t._uU(1),t.TgZ(2,"span",13),t.SDv(3,14),t.qZA(),t.BQk()),2&e){const n=t.oxw().items;t.xp6(1),t.hij(" ",n.length," ")}}function En(e,o){if(1&e&&(t.TgZ(0,"bb-ellipsis-ui")(1,"span",13),t._uU(2),t.ALo(3,"async"),t.qZA()()),2&e){const n=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,1,n.multiSelectLabelText$)," ")}}function mn(e,o){if(1&e&&(t.TgZ(0,"div",6)(1,"div",7)(2,"span",8),t.SDv(3,9),t.qZA()(),t.TgZ(4,"div",10),t.YNc(5,dn,4,1,"ng-container",11),t.YNc(6,En,4,3,"ng-template",null,12,t.W1O),t.qZA()()),2&e){const n=o.items,i=t.MAs(7),a=t.oxw(2);t.xp6(3),t.pQV(n.length)(a._accounts.length===n.length?"All":n.length),t.QtT(3),t.xp6(2),t.Q6J("ngIf",a._accounts.length===n.length)("ngIfElse",i)}}function gn(e,o){1&e&&t.YNc(0,mn,8,4,"ng-template",5)}function pn(e,o){1&e&&t.GkF(0)}const xt=function(e){return{$implicit:e}};function Tn(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"div",16)(2,"div",17)(3,"bb-input-checkbox-ui",18),t.NdJ("click",function(i){return i.preventDefault()}),t.qZA()(),t.TgZ(4,"div",19),t.YNc(5,pn,1,0,"ng-container",20),t.qZA()(),t.BQk()),2&e){const n=t.oxw(),i=n.index,a=n.item$,_=n.item;t.oxw(2);const c=t.MAs(9);t.xp6(3),t.Q6J("id",i)("ngModel",a.selected),t.xp6(2),t.Q6J("ngTemplateOutlet",c)("ngTemplateOutletContext",t.VKq(4,xt,_))}}function Cn(e,o){1&e&&t.GkF(0)}function fn(e,o){if(1&e&&(t.ynx(0),t.YNc(1,Cn,1,0,"ng-container",20),t.BQk()),2&e){const n=t.oxw().item;t.oxw(2);const i=t.MAs(9);t.xp6(1),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(2,xt,n))}}function Mn(e,o){if(1&e&&(t.YNc(0,Tn,6,6,"ng-container",3),t.YNc(1,fn,2,4,"ng-container",3)),2&e){const n=t.oxw(2);t.Q6J("ngIf",n.multiple),t.xp6(1),t.Q6J("ngIf",!n.multiple)}}function bn(e,o){1&e&&t.YNc(0,Mn,2,2,"ng-template",15)}function Dn(e,o){1&e&&t.GkF(0)}function Bn(e,o){if(1&e&&t.YNc(0,Dn,1,0,"ng-container",20),2&e){const n=o.item;t.oxw(2);const i=t.MAs(9);t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(2,xt,n))}}function On(e,o){1&e&&t.YNc(0,Bn,1,4,"ng-template",21)}function hn(e,o){if(1&e&&t._UZ(0,"bb-product-item-basic-account-ui",22),2&e){const n=o.$implicit,i=t.oxw();t.Q6J("title",n.name)("productNumber",n.number)("type",n.type)("amount",n.bookedBalance||n.principalAmount||n.currentInvestmentValue)("currency",n.currency)("active",n.selected)("favorite",i.isFavorite(n))}}const Nn=["filterButton"];function Un(e,o){1&e&&(t.TgZ(0,"span"),t.SDv(1,12),t.qZA())}function In(e,o){1&e&&(t.TgZ(0,"span"),t.SDv(1,13),t.qZA())}const yn=function(e){return{active:e}};function vn(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"button",7,8),t.NdJ("click",function(){return t.CHM(n),t.oxw().toggle()}),t._UZ(2,"bb-icon-ui",9),t.YNc(3,Un,2,0,"span",10),t.YNc(4,In,2,0,"ng-template",null,11,t.W1O),t.qZA()}if(2&e){const n=t.MAs(5),i=t.oxw().isOpen,a=t.oxw();t.Q6J("color",a.filtersApplied&&!i?"primary":"secondary")("ngClass",t.VKq(5,yn,i)),t.xp6(2),t.Q6J("cropped",!0),t.xp6(1),t.Q6J("ngIf",a.filtersApplied)("ngIfElse",n)}}function Fn(e,o){if(1&e&&t._UZ(0,"bb-dropdown-single-select-option-ui",25),2&e){const n=t.oxw(3);t.Q6J("value",n.filterDatePeriods.Today)}}function Ln(e,o){if(1&e&&t._UZ(0,"bb-dropdown-single-select-option-ui",26),2&e){const n=t.oxw(3);t.Q6J("value",n.filterDatePeriods.Yesterday)}}function Rn(e,o){if(1&e&&t._UZ(0,"bb-dropdown-single-select-option-ui",27),2&e){const n=t.oxw(3);t.Q6J("value",n.filterDatePeriods.ThisWeek)}}function wn(e,o){if(1&e&&t._UZ(0,"bb-dropdown-single-select-option-ui",28),2&e){const n=t.oxw(3);t.Q6J("value",n.filterDatePeriods.LastWeek)}}function xn(e,o){if(1&e&&t._UZ(0,"bb-dropdown-single-select-option-ui",29),2&e){const n=t.oxw(3);t.Q6J("value",n.filterDatePeriods.ThisMonth)}}function Pn(e,o){if(1&e&&t._UZ(0,"bb-dropdown-single-select-option-ui",30),2&e){const n=t.oxw(3);t.Q6J("value",n.filterDatePeriods.LastMonth)}}function Hn(e,o){if(1&e&&t._UZ(0,"bb-dropdown-single-select-option-ui",31),2&e){const n=t.oxw(3);t.Q6J("value",n.filterDatePeriods.ThisQuarter)}}function Kn(e,o){if(1&e&&t._UZ(0,"bb-dropdown-single-select-option-ui",32),2&e){const n=t.oxw(3);t.Q6J("value",n.filterDatePeriods.LastQuarter)}}function kn(e,o){if(1&e&&t._UZ(0,"bb-dropdown-single-select-option-ui",33),2&e){const n=t.oxw(3);t.Q6J("value",n.filterDatePeriods.ThisYear)}}function Jn(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"bb-dropdown-single-select-ui",14),t.NdJ("change",function(){return t.CHM(n),t.oxw(2).setCustomFilter()}),t.YNc(1,Fn,1,1,"bb-dropdown-single-select-option-ui",15),t.YNc(2,Ln,1,1,"bb-dropdown-single-select-option-ui",16),t.YNc(3,Rn,1,1,"bb-dropdown-single-select-option-ui",17),t.YNc(4,wn,1,1,"bb-dropdown-single-select-option-ui",18),t.YNc(5,xn,1,1,"bb-dropdown-single-select-option-ui",19),t.YNc(6,Pn,1,1,"bb-dropdown-single-select-option-ui",20),t.YNc(7,Hn,1,1,"bb-dropdown-single-select-option-ui",21),t.YNc(8,Kn,1,1,"bb-dropdown-single-select-option-ui",22),t.YNc(9,kn,1,1,"bb-dropdown-single-select-option-ui",23),t._UZ(10,"bb-dropdown-single-select-option-ui",24),t.qZA()}if(2&e){const n=t.oxw(2);t.Q6J("required",!1),t.uIk("data-role","dropdown-single-select"),t.xp6(1),t.Q6J("ngIf",-1!==(null==n.datePeriodsToDisplay?null:n.datePeriodsToDisplay.indexOf(n.filterDatePeriods.Today))),t.xp6(1),t.Q6J("ngIf",-1!==(null==n.datePeriodsToDisplay?null:n.datePeriodsToDisplay.indexOf(n.filterDatePeriods.Yesterday))),t.xp6(1),t.Q6J("ngIf",-1!==(null==n.datePeriodsToDisplay?null:n.datePeriodsToDisplay.indexOf(n.filterDatePeriods.ThisWeek))),t.xp6(1),t.Q6J("ngIf",-1!==(null==n.datePeriodsToDisplay?null:n.datePeriodsToDisplay.indexOf(n.filterDatePeriods.LastWeek))),t.xp6(1),t.Q6J("ngIf",-1!==(null==n.datePeriodsToDisplay?null:n.datePeriodsToDisplay.indexOf(n.filterDatePeriods.ThisMonth))),t.xp6(1),t.Q6J("ngIf",-1!==(null==n.datePeriodsToDisplay?null:n.datePeriodsToDisplay.indexOf(n.filterDatePeriods.LastMonth))),t.xp6(1),t.Q6J("ngIf",-1!==(null==n.datePeriodsToDisplay?null:n.datePeriodsToDisplay.indexOf(n.filterDatePeriods.ThisQuarter))),t.xp6(1),t.Q6J("ngIf",-1!==(null==n.datePeriodsToDisplay?null:n.datePeriodsToDisplay.indexOf(n.filterDatePeriods.LastQuarter))),t.xp6(1),t.Q6J("ngIf",-1!==(null==n.datePeriodsToDisplay?null:n.datePeriodsToDisplay.indexOf(n.filterDatePeriods.ThisYear))),t.xp6(1),t.Q6J("value",n.filterDatePeriods.AllTime)}}function Wn(e,o){if(1&e&&(t.TgZ(0,"div",3)(1,"div",4),t.YNc(2,vn,6,7,"button",5),t.YNc(3,Jn,11,12,"bb-dropdown-single-select-ui",6),t.qZA()()),2&e){const n=t.oxw();t.xp6(2),t.Q6J("ngIf",n.showBookDate||n.showCategory),t.xp6(1),t.Q6J("ngIf",n.showCustomPeriodDropdown&&n.showBookDate)}}function $n(e,o){if(1&e&&(t.TgZ(0,"div",44)(1,"div",45),t._UZ(2,"bb-input-datepicker-ui",46),t.TgZ(3,"bb-input-validation-message-ui",47)(4,"span",48),t.SDv(5,49),t.qZA()(),t.TgZ(6,"bb-input-validation-message-ui",47)(7,"span",50),t.SDv(8,51),t.qZA()()()()),2&e){const n=t.oxw(2);t.xp6(2),t.Q6J("rangeSelection",!0)("minDate",n.datePreferences.minimalDate)("maxDate",n.datePreferences.maximumDate),t.uIk("aria-invalid",n.filterForm.controls.bookDate.hasError("invalidDateFormat")),t.xp6(1),t.Q6J("showErrors",n.filterForm.controls.bookDate.hasError("invalidDateFormat")),t.xp6(3),t.Q6J("showErrors",!n.filterForm.controls.bookDate.hasError("invalidDateFormat")&&!n.filterForm.untouched&&(n.filterForm.controls.bookDate.hasError("dateGreaterThanMaxDate")||n.filterForm.controls.bookDate.hasError("dateLessThanMinDate")))}}function Gn(e,o){if(1&e&&t._UZ(0,"bb-dropdown-multi-select-option-ui",55),2&e){const n=o.$implicit,i=t.oxw(4);t.Q6J("label",i.accountStatementCategories[n]||n)("value",n)}}function Zn(e,o){if(1&e&&(t.TgZ(0,"bb-dropdown-multi-select-ui",53),t.YNc(1,Gn,1,2,"bb-dropdown-multi-select-option-ui",54),t.qZA()),2&e){const n=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",n.categories)}}function Qn(e,o){if(1&e&&(t.ynx(0),t.YNc(1,Zn,2,1,"bb-dropdown-multi-select-ui",52),t.BQk()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==n.categories?null:n.categories.length)}}function Yn(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"button",56),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).resetFormData()}),t.SDv(1,57),t.qZA()}}function zn(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",34)(1,"div",35),t.YNc(2,$n,9,6,"div",36),t.YNc(3,Qn,2,1,"ng-container",37),t.qZA(),t.TgZ(4,"div",38)(5,"button",39),t.NdJ("click",function(){const _=t.CHM(n).toggle;return t.oxw().onSubmit(),_()}),t.SDv(6,40),t.qZA(),t.TgZ(7,"button",41),t.NdJ("click",function(){const _=t.CHM(n).toggle,c=t.oxw();return _(),c.focusFilterButton()}),t.SDv(8,42),t.qZA(),t.YNc(9,Yn,2,0,"button",43),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(2),t.Q6J("ngIf",n.showBookDate),t.xp6(1),t.Q6J("ngIf",n.showCategory),t.xp6(2),t.Q6J("disabled",n.filterForm.pristine||n.filterForm.invalid),t.xp6(4),t.Q6J("ngIf",n.filterForm.dirty||n.filtersApplied)}}function jn(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",5)(1,"button",6),t.NdJ("bbAccountStatementDownloadDocFailure",function(a){return t.CHM(n),t.oxw(2).onDownloadDocFailure(a)}),t._UZ(2,"bb-icon-ui",7),t.qZA()()}if(2&e){t.oxw();const n=t.MAs(3),i=t.oxw();t.Q6J("bbTooltip",n)("placement",i.tooltipPlacement),t.xp6(1),t.Q6J("circle",!0)("bbAccountStatementDownloadDoc",i.documents[0]),t.uIk("aria-describedby",i.describedByElementId)}}function Vn(e,o){if(1&e&&(t.ynx(0),t.SDv(1,9),t.BQk()),2&e){const n=t.oxw(3);t.xp6(1),t.pQV(n.mimeTypeExtensions[n.documents[0].contentType]),t.QtT(1)}}function Xn(e,o){1&e&&t.SDv(0,10)}function qn(e,o){if(1&e&&(t.YNc(0,Vn,2,1,"ng-container",0),t.YNc(1,Xn,1,0,"ng-template",null,8,t.W1O)),2&e){const n=t.MAs(2),i=t.oxw(2);t.Q6J("ngIf",i.mimeTypeExtensions[i.documents[0].contentType])("ngIfElse",n)}}function to(e,o){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const n=t.oxw(),i=n.index,a=n.$implicit,_=t.oxw(4);t.uIk("aria-labelledby","dropdown-item-download-file-"+i),t.xp6(1),t.hij(" ",_.mimeTypeExtensions[a.contentType]," ")}}function eo(e,o){if(1&e&&t.SDv(0,19),2&e){const n=t.oxw().index;t.pQV(n+1),t.QtT(0)}}function no(e,o){if(1&e&&(t.TgZ(0,"span"),t.SDv(1,20),t.qZA()),2&e){const n=t.oxw().$implicit,i=t.oxw(4);t.xp6(1),t.pQV(i.mimeTypeExtensions[n.contentType]),t.QtT(1)}}function oo(e,o){if(1&e&&t.SDv(0,21),2&e){const n=t.oxw().index;t.pQV(n+1),t.QtT(0)}}function io(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"a",15),t.NdJ("click",function(a){return a.preventDefault()})("bbAccountStatementDownloadDocFailure",function(a){return t.CHM(n),t.oxw(4).onDownloadDocFailure(a)}),t.YNc(1,to,2,2,"span",0),t.YNc(2,eo,1,1,"ng-template",null,16,t.W1O),t.TgZ(4,"div",17),t.YNc(5,no,2,1,"span",0),t.YNc(6,oo,1,1,"ng-template",null,18,t.W1O),t.qZA()()}if(2&e){const n=o.$implicit,i=o.index,a=t.MAs(3),_=t.MAs(7),c=t.oxw(4);t.Q6J("bbAccountStatementDownloadDoc",n),t.xp6(1),t.Q6J("ngIf",c.mimeTypeExtensions[n.contentType])("ngIfElse",a),t.xp6(3),t.MGl("id","dropdown-item-download-file-",i,""),t.xp6(1),t.Q6J("ngIf",c.mimeTypeExtensions[n.contentType])("ngIfElse",_)}}function ao(e,o){if(1&e&&t.YNc(0,io,8,6,"a",14),2&e){const n=t.oxw(3);t.Q6J("ngForOf",n.documents)}}function _o(e,o){if(1&e&&(t.TgZ(0,"div",11)(1,"bb-dropdown-menu-ui",12),t.YNc(2,ao,1,1,"ng-template",13),t.qZA()()),2&e){const n=t.oxw(2);t.Q6J("placement",n.tooltipPlacement),t.xp6(1),t.Q6J("btnCircle",!0),t.uIk("aria-describedby",n.describedByElementId)}}function co(e,o){if(1&e&&(t.ynx(0),t.YNc(1,jn,3,5,"div",2),t.YNc(2,qn,3,2,"ng-template",null,3,t.W1O),t.YNc(4,_o,3,3,"ng-template",null,4,t.W1O),t.BQk()),2&e){const n=t.MAs(5),i=t.oxw();t.xp6(1),t.Q6J("ngIf",1===i.documents.length)("ngIfElse",n)}}function so(e,o){if(1&e&&(t.TgZ(0,"div",22),t._UZ(1,"bb-icon-ui",23),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.uIk("aria-describedby",n.describedByElementId)}}function ro(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",1)(1,"button",2),t.NdJ("click",function(){return t.CHM(n),t.oxw().viewOnline()}),t._UZ(2,"bb-icon-ui",3),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("circle",!0),t.uIk("aria-describedby",n.describedByElementId)}}function lo(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"th",11),t.ALo(2,"getDirection"),t.TgZ(3,"span",12),t._uU(4),t.qZA()(),t.BQk()),2&e){const n=o.$implicit,i=t.oxw(2);t.xp6(1),t.Q2q("data-role","account-statement-table__",n.key,"-header"),t.Q6J("bbSortable",n.sortable?n.key:void 0)("direction",t.xi3(2,4,n.key,i.sortingParams)),t.xp6(3),t.Oqu(n.name)}}function uo(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"td",23),t._uU(2),t.ALo(3,"bbDate"),t.qZA(),t.BQk()),2&e){const n=t.oxw(2).$implicit;t.xp6(2),t.hij(" ",t.xi3(3,1,n.date,"shortDate")," ")}}function So(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"td",24),t._uU(2),t.qZA(),t.BQk()),2&e){const n=t.oxw(2).$implicit,i=t.oxw(3);t.xp6(2),t.hij(" ",i.accountStatementCategories[n.category||""]||n.category," ")}}function Ao(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"td",25)(2,"div"),t._uU(3),t.qZA()(),t.BQk()),2&e){const n=t.oxw(2).$implicit;t.xp6(3),t.hij(" ",n.description," ")}}function Eo(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"td",26)(2,"div"),t._uU(3),t.qZA(),t.TgZ(4,"div",27),t._uU(5),t.qZA()(),t.BQk()),2&e){const n=t.oxw(2).$implicit;t.xp6(3),t.Oqu(n.accountName),t.xp6(2),t.hij(" ",n.accountNumber," ")}}function mo(e,o){1&e&&(t.ynx(0),t._UZ(1,"td"),t.BQk())}function go(e,o){1&e&&(t.ynx(0,20),t.YNc(1,uo,4,4,"ng-container",21),t.YNc(2,So,3,1,"ng-container",21),t.YNc(3,Ao,4,1,"ng-container",21),t.YNc(4,Eo,6,2,"ng-container",21),t.YNc(5,mo,2,0,"ng-container",22),t.BQk()),2&e&&(t.Q6J("ngSwitch",o.$implicit.key),t.xp6(1),t.Q6J("ngSwitchCase","date"),t.xp6(1),t.Q6J("ngSwitchCase","category"),t.xp6(1),t.Q6J("ngSwitchCase","description"),t.xp6(1),t.Q6J("ngSwitchCase","accountName"))}function po(e,o){if(1&e&&(t.TgZ(0,"span",28),t.SDv(1,29),t.ALo(2,"bbDate"),t.qZA()),2&e){const n=t.oxw(),a=n.$implicit;t.MGl("id","describe-preview-by-",n.index,""),t.xp6(2),t.pQV(a.accountName)(t.xi3(2,3,a.date,"fullDate")),t.QtT(1)}}function To(e,o){if(1&e&&t._UZ(0,"bb-account-statement-view-online",30),2&e){const n=t.oxw(),a=n.$implicit;t.MGl("describedByElementId","describe-preview-by-",n.index,""),t.Q6J("documents",a.documents)}}function Co(e,o){if(1&e&&(t.ynx(0),t.SDv(1,33),t.ALo(2,"bbDate"),t.BQk()),2&e){const n=t.oxw(2).$implicit,i=t.oxw(3);t.xp6(2),t.pQV(i.mimeTypeExtensions[(null==n.documents[0]?null:n.documents[0].contentType)||""])(n.accountName)(t.xi3(2,3,n.date,"fullDate")),t.QtT(1)}}function fo(e,o){if(1&e&&(t.SDv(0,34),t.ALo(1,"bbDate")),2&e){const n=t.oxw(2).$implicit;t.xp6(1),t.pQV(n.accountName)(t.xi3(1,2,n.date,"fullDate")),t.QtT(0)}}function Mo(e,o){if(1&e&&(t.TgZ(0,"span",28),t.YNc(1,Co,3,6,"ng-container",31),t.YNc(2,fo,2,5,"ng-template",null,32,t.W1O),t.qZA()),2&e){const n=t.MAs(3),i=t.oxw(),_=i.$implicit;t.MGl("id","describe-download-by-",i.index,""),t.xp6(1),t.Q6J("ngIf",1===(null==_.documents?null:_.documents.length))("ngIfElse",n)}}function bo(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"div",40)(2,"div",41),t.SDv(3,42),t.qZA(),t.TgZ(4,"div"),t._uU(5),t.ALo(6,"bbDate"),t.qZA()(),t.BQk()),2&e){const n=t.oxw(3).$implicit;t.xp6(5),t.Oqu(t.xi3(6,1,n.date,"shortDate"))}}function Do(e,o){if(1&e&&t._UZ(0,"bb-account-statement-view-online",43),2&e){const n=t.oxw(3),a=n.$implicit;t.MGl("describedByElementId","describe-preview-by-",n.index,""),t.Q6J("documents",a.documents)}}function Bo(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",36)(1,"div",37),t.YNc(2,bo,7,4,"ng-container",21),t.YNc(3,Do,1,2,"bb-account-statement-view-online",38),t.TgZ(4,"bb-account-statement-downloads",39),t.NdJ("downloadFailure",function(a){return t.CHM(n),t.oxw(5).onDownloadFailure(a)}),t.qZA()()()}if(2&e){const n=t.oxw(2),i=n.$implicit,a=n.index,_=t.oxw(3);t.xp6(2),t.Q6J("ngSwitchCase","date"),t.xp6(1),t.Q6J("ngIf",i.documents.length>0),t.xp6(1),t.MGl("describedByElementId","describe-download-by-",a,""),t.Q6J("documents",i.documents)("mimeTypeExtensions",_.mimeTypeExtensions)}}function Oo(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"div",41),t.SDv(2,44),t.qZA(),t.TgZ(3,"div",36),t._uU(4),t.qZA(),t.BQk()),2&e){const n=t.oxw(2).$implicit;t.xp6(4),t.hij(" ",n.category," ")}}function ho(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"div",41),t.SDv(2,45),t.qZA(),t.TgZ(3,"div",36),t._uU(4),t.qZA(),t.BQk()),2&e){const n=t.oxw(2).$implicit;t.xp6(4),t.hij(" ",n.description," ")}}function No(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"div",41),t.SDv(2,46),t.qZA(),t.TgZ(3,"div",36),t._uU(4),t.qZA(),t.TgZ(5,"div",41),t.SDv(6,47),t.qZA(),t.TgZ(7,"div",48),t._uU(8),t.qZA(),t.BQk()),2&e){const n=t.oxw(2).$implicit;t.xp6(4),t.hij(" ",n.accountName," "),t.xp6(4),t.hij(" ",n.accountNumber," ")}}function Uo(e,o){if(1&e&&(t.ynx(0,20),t.YNc(1,Bo,5,5,"div",35),t.YNc(2,Oo,5,1,"ng-container",21),t.YNc(3,ho,5,1,"ng-container",21),t.YNc(4,No,9,2,"ng-container",21),t.BQk()),2&e){const i=o.first;t.Q6J("ngSwitch",o.$implicit.key),t.xp6(1),t.Q6J("ngIf",i),t.xp6(1),t.Q6J("ngSwitchCase","category"),t.xp6(1),t.Q6J("ngSwitchCase","description"),t.xp6(1),t.Q6J("ngSwitchCase","accountName")}}function Io(e,o){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"tr",13),t.YNc(2,go,6,5,"ng-container",14),t.TgZ(3,"td",15),t.YNc(4,po,3,6,"span",16),t.YNc(5,To,1,2,"bb-account-statement-view-online",17),t.qZA(),t.TgZ(6,"td",15),t.YNc(7,Mo,4,3,"span",16),t.TgZ(8,"bb-account-statement-downloads",18),t.NdJ("downloadFailure",function(a){return t.CHM(n),t.oxw(3).onDownloadFailure(a)}),t.qZA()()(),t.TgZ(9,"div",19),t.YNc(10,Uo,5,5,"ng-container",14),t.qZA(),t.BQk()}if(2&e){const n=o.$implicit,i=o.index,a=t.oxw(3);t.xp6(2),t.Q6J("ngForOf",a.tableConfig),t.xp6(2),t.Q6J("ngIf",null==n.documents?null:n.documents.length),t.xp6(1),t.Q6J("ngIf",n.documents.length>0),t.xp6(2),t.Q6J("ngIf",null==n.documents?null:n.documents.length),t.xp6(1),t.MGl("describedByElementId","describe-download-by-",i,""),t.Q6J("documents",n.documents)("mimeTypeExtensions",a.mimeTypeExtensions),t.xp6(2),t.Q6J("ngForOf",a.tableConfig)}}function yo(e,o){if(1&e&&(t.TgZ(0,"tbody"),t.YNc(1,Io,11,8,"ng-container",4),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",n.accountStatements)}}function vo(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"table",2),t.NdJ("sort",function(a){return t.CHM(n),t.oxw().onSort(a)}),t.TgZ(1,"thead")(2,"tr",3),t.YNc(3,lo,5,7,"ng-container",4),t.TgZ(4,"th",5)(5,"span",6),t.SDv(6,7),t.qZA()(),t.TgZ(7,"th",5)(8,"span",8),t.SDv(9,9),t.qZA()()()(),t.YNc(10,yo,2,1,"tbody",10),t.qZA()}if(2&e){const n=t.oxw();t.Q6J("bbTable",n.accountStatements),t.xp6(3),t.Q6J("ngForOf",n.tableConfig),t.xp6(7),t.Q6J("ngIf",!n.loading)}}function Fo(e,o){1&e&&t._UZ(0,"bb-loading-indicator-ui",49)}let Lo=(()=>{class e{constructor(n){this.route=n,this.id="bb-account-statement-account-selector-"+e.idCounter++,this.size=50,this.multiple=!1,this.markFirst=!1,this.searchable=!1,this.multiSelectLabelLimit=15,this.loading=!1,this.placeholder="",this.extendedDetails=!1,this.paramsChange=new t.vpe,this.selectedAccountIds=new t.vpe,this.scrollPosition=new Mt.x,this.searchDebounced=new Mt.x,this.subscriptions=[],this._accounts=[],this.accounts=new mt.X([]),this.accountsTotal=new mt.X(0),this.accountsLoaded=new mt.X(0),this.accountIds=new mt.X([]),this.favoriteFirst=!1,this.debounceTime=300,this.accountsForVirtualScroll=100,this.accountsBeforeLoadingMore=5,this.virtualScroll=this.accountsTotal.pipe((0,r.U)(i=>i>=this.accountsForVirtualScroll)),this.selectedItems=(0,gt.a)([this.accounts,this.accountIds]).pipe((0,r.U)(([i,a])=>this.multiple?i?i.filter(_=>a.includes(_.id)):[]:i?i.find(_=>_.id===a[0]):void 0)),this.multiSelectLabelText$=this.selectedItems.pipe((0,r.U)(i=>Array.isArray(i)?i:[]),(0,r.U)(i=>{let a=i.map(_=>_.displayName).join(", ");return i.length>this.multiSelectLabelLimit&&(a=i.slice(0,this.multiSelectLabelLimit).map(_=>_.displayName).join(", ").concat("...")),a})),this.loadMore=(0,gt.a)([this.accountsLoaded,this.accountsTotal]).pipe((0,_t.w)(([i,a])=>this.scrollPosition.pipe((0,bt.h)(_=>!_||_.end>=i-this.accountsBeforeLoadingMore),(0,bt.h)(()=>i<a&&!this.loading)))),this.searchByAlias=(i,a)=>[a.displayName].map(_=>(_||"").toLowerCase()).some(_=>_.includes(i.toLowerCase())),this.isFavorite=i=>{const a=i.userPreferences&&i.userPreferences.favorite;return null!=a?a:"favorite"in i?i.favorite:void 0}}set accountsObject(n){this._accounts=n.items,this.accounts.next(n.items),this.accountsTotal.next(n.count),this.accountsLoaded.next(n.items.length)}set routeIds(n){this.accountIds.next(n)}ngOnInit(){const n=this.searchDebounced.pipe((0,ln.b)(this.debounceTime),(0,un.x)()).subscribe(a=>this.setSearchTerm(a)),i=this.loadMore.subscribe(()=>this.loadMoreAccounts());this.subscriptions.push(n,i)}loadMoreAccounts(){this.paramsChange.emit({from:this.currentParams.from?this.currentParams.from+1:1})}setSearchTerm(n){this.paramsChange.emit({from:0,searchTerm:n})}change(n){!this.isProductsummaryItem(n)||(Array.isArray(n)?this.selectedAccountIds.emit(n.map(i=>i.id).join(",")):this.selectedAccountIds.emit(n.id))}isProductsummaryItem(n){return!(!Array.isArray(n)||0!==n.length)||"id"in(Array.isArray(n)?n[0]:n)}scroll(n){n.end&&this.scrollPosition.next(n)}scrollToEnd(){this.scrollPosition.next()}filter(n=""){n||this.search()}search(n=""){this.searchDebounced.next(n)}ngOnDestroy(){this.subscriptions.forEach(n=>n.unsubscribe())}}return e.idCounter=0,e.\u0275fac=function(n){return new(n||e)(t.Y36(X.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-account-picker"]],inputs:{size:"size",multiple:"multiple",markFirst:"markFirst",searchable:"searchable",multiSelectLabelLimit:"multiSelectLabelLimit",loading:"loading",placeholder:"placeholder",extendedDetails:"extendedDetails",accountsObject:"accountsObject",routeIds:"routeIds",currentParams:"currentParams",favoriteFirst:"favoriteFirst"},outputs:{paramsChange:"paramsChange",selectedAccountIds:"selectedAccountIds"},decls:10,vars:21,consts:function(){let o,n,i;return o=" Account selector dropdown\n",n="{VAR_PLURAL, plural, =1 {1 account selected} other {{INTERPOLATION}\n            accounts selected}}",n=t.Zx4(n,{VAR_PLURAL:"\ufffd0\ufffd",INTERPOLATION:"\ufffd1\ufffd"}),i=" accounts ",[["data-role","account-selector-label",1,"sr-only"],o,[3,"id","virtualScroll","items","multiple","closeOnSelect","groupByFn","selectedItems","searchable","markFirst","loading","searchFunc","aria-labelledby","placeholder","change","scroll","scrollToEnd","filterChange","search","clearSearch"],[4,"ngIf"],["itemBasic",""],["bbCustomMultiSelectedItemsLabel",""],[1,"bb-account-selector__selected"],[1,"bb-account-selector__selected-accounts-number","bb-text-bold"],["data-role","selected-accounts-count"],n,[1,"bb-account-selector__selected-accounts","bb-text-subtitle"],[4,"ngIf","ngIfElse"],["selectedAccountsTemplate",""],[1,"bb-account-selector__selected-account"],i,["bbCustomOptionItem",""],[1,"bb-stack"],[1,"bb-stack__item","multiple-accounts-item-checkbox"],[3,"id","ngModel","click"],[1,"bb-stack__item","bb-stack__item--fill","bb-ellipsis","bb-ellipsis--single-line"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["bbCustomSingleSelectedItemLabel",""],[3,"title","productNumber","type","amount","currency","active","favorite"]]},template:function(n,i){1&n&&(t.TgZ(0,"span",0),t.SDv(1,1),t.qZA(),t.TgZ(2,"bb-account-selector-ui",2),t.NdJ("change",function(_){return i.change(_)})("scroll",function(_){return i.scroll(_)})("scrollToEnd",function(){return i.scrollToEnd()})("filterChange",function(_){return i.filter(_)})("search",function(_){return i.search(_)})("clearSearch",function(){return i.search()}),t.ALo(3,"async"),t.ALo(4,"async"),t.YNc(5,gn,1,0,null,3),t.YNc(6,bn,1,0,null,3),t.YNc(7,On,1,0,null,3),t.qZA(),t.YNc(8,hn,1,7,"ng-template",null,4,t.W1O)),2&n&&(t.uIk("id",i.id+"-label"),t.xp6(2),t.Q6J("id",i.id)("virtualScroll",!0===t.lcZ(3,17,i.virtualScroll))("items",i._accounts)("multiple",i.multiple)("closeOnSelect",!i.multiple)("groupByFn",i.favoriteFirst?i.isFavorite:void 0)("selectedItems",t.lcZ(4,19,i.selectedItems))("searchable",i.searchable)("markFirst",i.markFirst)("loading",i.loading)("searchFunc",i.searchByAlias)("aria-labelledby",i.id+"-label")("placeholder",i.placeholder),t.xp6(3),t.Q6J("ngIf",i.extendedDetails),t.xp6(1),t.Q6J("ngIf",i.extendedDetails),t.xp6(1),t.Q6J("ngIf",i.extendedDetails))},directives:[pt.vI,se.SN,re.r,le.mB,d.O5,pt.vS,pt.tD,G.JJ,G.On,d.tP,pt.xD],pipes:[d.Ov],encapsulation:2}),e})(),Ro=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[re.b,le.gn,ct.p,q.P,d.ez,G.u5,pt.db,se.OG]]}),e})(),wo=(()=>{class e{constructor(n,i){this.fb=n,this.accountStatementCategories=i,this.showCustomPeriodDropdown=!1,this.pageSize=0,this.filtersApplied=!1,this.filterParams={},this.categories=[],this.datePeriodsToDisplay=[],this.tableConfig=[],this.submitForm=new t.vpe,this.resetForm=new t.vpe,this.showCategory=!0,this.showBookDate=!0,this.filterDatePeriods=v}ngOnInit(){this.createForm(),this.updateFiltersVisibility()}createForm(){this.filterForm=this.fb.group({categories:[this.filterParams.category||[]],bookDate:this.filterParams.dateFrom?{from:this.filterParams.dateFrom,to:this.filterParams.dateTo}:""}),this.showCustomPeriodDropdown&&this.filterForm.addControl("customFilterPeriods",new G.NI(this.filterParams.datePeriod))}focusFilterButton(){this.filterButton&&this.filterButton.nativeElement.focus()}applyFormData(){const n=this.filterForm.get("bookDate"),i=this.filterForm.get("customFilterPeriods"),a=this.filterForm.get("categories"),_=i&&i.value,c=a&&a.value,{from:S,to:D}=n&&n.value||{};this.submitForm.emit({dateFrom:S,dateTo:D,datePeriod:_,category:c}),this.filterForm.markAsPristine()}resetFormData(){this.filterForm.reset(),this.resetForm.emit({category:void 0,dateFrom:void 0,dateTo:void 0}),this.showCustomPeriodDropdown&&this.filterForm.reset({customFilterPeriods:this.filterDatePeriods.AllTime}),this.focusFilterButton()}onSubmit(){const n=this.filterForm.get("customFilterPeriods");n&&this.filterForm.controls.bookDate.touched&&n.reset(),this.applyFormData(),this.focusFilterButton()}setCustomFilter(){const n=this.filterForm.get("customFilterPeriods"),i=this.filterForm.get("bookDate"),_=ae[n&&n.value](),c=_.from&&_.from.toISOString(),S=_.to&&_.to.toISOString();i&&i.setValue(c&&S?{from:c,to:S}:""),this.applyFormData()}updateFiltersVisibility(){this.showBookDate=this.tableConfig.some(n=>"date"===n.key),this.showCategory=this.tableConfig.some(n=>"category"===n.key)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(G.qu),t.Y36(J))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-base-filters"]],viewQuery:function(n,i){if(1&n&&t.Gf(Nn,5),2&n){let a;t.iGM(a=t.CRH())&&(i.filterButton=a.first)}},inputs:{showCustomPeriodDropdown:"showCustomPeriodDropdown",pageSize:"pageSize",filtersApplied:"filtersApplied",filterParams:"filterParams",categories:"categories",datePreferences:"datePreferences",datePeriodsToDisplay:"datePeriodsToDisplay",tableConfig:"tableConfig"},outputs:{submitForm:"submitForm",resetForm:"resetForm"},decls:4,vars:1,consts:function(){let o,n,i,a,_,c,S,D,u,C,U,m,x,Q,ot,lt,et,P,H,ut,oe,tn;return o="Custom",n=" Filters applied ",i=" Filter ",a="Today",_="Yesterday",c="This week",S="Last week",D="This month",u="Last month",C="This quarter",U="Last quarter",m="This year",x="All time",Q=" Apply ",ot=" Close ",lt="Date range",et="Book date",P="Invalid date format",H="The selected dates include values outside the allowed date range. Please select a date interval in the permitted time frame.",ut="Select product category",oe="Category",tn=" Clear all ",[[3,"formGroup"],["bbCollapsibleHeader",""],["bbCollapsibleBody",""],[1,"bb-block","px-2"],[1,"bb-stack","bb-stack--wrap","card-section","py-0"],["class","bb-stack__item bb-stack__item--spacing-lg bb-stack__item--push-left-sm-down bb-stack__break--sm-down bb-block bb-block--md-md-down","bbButton","","data-role","collapsible-filter-btn",3,"color","ngClass","click",4,"ngIf"],["class","bb-stack__item bb-stack__break--sm-down","formControlName","customFilterPeriods","placeholder",o,3,"required","change",4,"ngIf"],["bbButton","","data-role","collapsible-filter-btn",1,"bb-stack__item","bb-stack__item--spacing-lg","bb-stack__item--push-left-sm-down","bb-stack__break--sm-down","bb-block","bb-block--md-md-down",3,"color","ngClass","click"],["filterButton",""],["name","filter",3,"cropped"],[4,"ngIf","ngIfElse"],["filterButtonTextDefault",""],n,i,["formControlName","customFilterPeriods","placeholder",o,1,"bb-stack__item","bb-stack__break--sm-down",3,"required","change"],["label",a,3,"value",4,"ngIf"],["label",_,3,"value",4,"ngIf"],["label",c,3,"value",4,"ngIf"],["label",S,3,"value",4,"ngIf"],["label",D,3,"value",4,"ngIf"],["label",u,3,"value",4,"ngIf"],["label",C,3,"value",4,"ngIf"],["label",U,3,"value",4,"ngIf"],["label",m,3,"value",4,"ngIf"],["label",x,3,"value"],["label",a,3,"value"],["label",_,3,"value"],["label",c,3,"value"],["label",S,3,"value"],["label",D,3,"value"],["label",u,3,"value"],["label",C,3,"value"],["label",U,3,"value"],["label",m,3,"value"],["data-role","filter-form",1,"card-body","account-statements-filter__form-container","px-4","mt-6"],[1,"row"],["class","bb-block bb-block--md col-12 col-lg-6 col-sm-6 account-statements-filter__date-field-column",4,"ngIf"],[4,"ngIf"],[1,"bb-button-bar--reverse","pt-5"],["bbButton","","type","submit","buttonSize","sm","data-role","apply",1,"bb-button-bar__button",3,"disabled","click"],Q,["bbButton","","color","secondary","buttonSize","sm","data-role","close",1,"bb-button-bar__button",3,"click"],ot,["bbButton","","color","link","buttonSize","sm","class","bb-button-bar__button","data-role","clear-all",3,"click",4,"ngIf"],[1,"bb-block","bb-block--md","col-12","col-lg-6","col-sm-6","account-statements-filter__date-field-column"],[1,"account-statements-filter__date-field-wrapper"],["label",lt,"labelClasses","form-label","aria-label",et,"formControlName","bookDate","data-role","book-date",3,"rangeSelection","minDate","maxDate"],["aria-live","polite",1,"account-statements-filter__validation-message",3,"showErrors"],["data-role","invalid-book-date-error-message"],P,["data-role","invalid-book-date-limit-error-message"],H,["formControlName","categories","class","bb-block bb-block--md col-12 col-lg-6 col-sm-6","data-role","categories-filter","placeholder",ut,"label",oe,4,"ngIf"],["formControlName","categories","data-role","categories-filter","placeholder",ut,"label",oe,1,"bb-block","bb-block--md","col-12","col-lg-6","col-sm-6"],[3,"label","value",4,"ngFor","ngForOf"],[3,"label","value"],["bbButton","","color","link","buttonSize","sm","data-role","clear-all",1,"bb-button-bar__button",3,"click"],tn]},template:function(n,i){1&n&&(t.TgZ(0,"bb-collapsible-ui")(1,"form",0),t.YNc(2,Wn,4,2,"ng-template",1),t.YNc(3,zn,10,4,"ng-template",2),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("formGroup",i.filterForm))},directives:[Dt.tB,rt.o,Lt.Pp,Lt.MM,Ot.sO,ue.d,Ft.QW,Ft.gy,G._Y,G.JL,G.sg,Dt.gM,d.O5,st.Hq,d.mk,G.JJ,G.u,G.Q7,Dt.rJ,Ot.Mt,Ot.jC,d.sg],encapsulation:2}),e})();const xo=[An.XC,st.hJ,Dt.d8,Bt.CK,rt.Q,Ot.tE,ue.w,Sn.LZ,Ft.Bj,Lt.CS];let Po=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.ez,G.UX,...xo]]}),e})(),Pt=(()=>{class e{constructor(n){this.document=n}simulateLinkClick(n,i){const a=i.createElement("a");for(const[_,c]of Object.entries(n))a.setAttribute(_,c);i.appendChild(this.document.body,a),a.click(),i.removeChild(this.document.body,a)}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(d.K0))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),Ho=(()=>{class e{constructor(n,i){this.domService=n,this.renderer=i,this.doc={},this.filename="",this.downloadFailure=new t.vpe}onClick(){this.downloadDoc(this.doc)}downloadDoc(n){if(n.url){const i=(e=>new RegExp(/\?.+=.*/g).test(e))(n.url)?`${n.url}&inline=false`:`${n.url}?inline=false`;this.domService.simulateLinkClick({href:i},this.renderer)}}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(Pt),t.Y36(t.Qsj))},e.\u0275dir=t.lG2({type:e,selectors:[["","bbAccountStatementDownloadDoc",""]],hostBindings:function(n,i){1&n&&t.NdJ("click",function(){return i.onClick()})("keydown.enter",function(){return i.onClick()})("keydown.space",function(){return i.onClick()})},inputs:{doc:["bbAccountStatementDownloadDoc","doc"],filename:["bbAccountStatementDownloadDocFilename","filename"]},outputs:{downloadFailure:"bbAccountStatementDownloadDocFailure"}}),e})(),Ae=(()=>{class e{constructor(){this.documents=[],this.mimeTypeExtensions={},this.downloadFailure=new t.vpe,this.describedByElementId="",this.tooltipPlacement="top"}onDownloadDocFailure(n){this.downloadFailure.emit(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-downloads"]],inputs:{documents:"documents",mimeTypeExtensions:"mimeTypeExtensions",describedByElementId:"describedByElementId",tooltipPlacement:"tooltipPlacement"},outputs:{downloadFailure:"downloadFailure"},decls:3,vars:2,consts:function(){let o,n,i,a,_,c,S,D,u;return o="Download one available format",n=" Download - " + "\ufffd0\ufffd" + " ",i=" Download - File ",a="Show downloads actions",_="Show download actions",c=" File " + "\ufffd0\ufffd" + " ",S=" Download as " + "\ufffd0\ufffd" + " ",D=" Download unknown extension file " + "\ufffd0\ufffd" + " ",u="Download is not supported for this statement, please contact the bank",[[4,"ngIf","ngIfElse"],["emptyState",""],["data-role","account-statement-table__download--single","triggers","hover focus",3,"bbTooltip","placement",4,"ngIf","ngIfElse"],["singleDownloadTooltip",""],["documentsToDownload",""],["data-role","account-statement-table__download--single","triggers","hover focus",3,"bbTooltip","placement"],["bbButton","","color","link","aria-label",o,"data-role","download-one",3,"circle","bbAccountStatementDownloadDoc","bbAccountStatementDownloadDocFailure"],["name","get-app","size","md"],["singleDownloadTooltipNoExtension",""],n,i,["triggers","hover focus","data-role","account-statement-table__download--multiple","bbTooltip",a,3,"placement"],["data-role","as-dropdown-menu","icon","get-app","btnColor","link","container","body","dropDownButtonLabel",_,3,"btnCircle"],["bbDropdownMenuItem",""],["rel","noopener","role","menuitem","class","dropdown-item","data-role","download-statement","href","",3,"bbAccountStatementDownloadDoc","click","bbAccountStatementDownloadDocFailure",4,"ngFor","ngForOf"],["rel","noopener","role","menuitem","data-role","download-statement","href","",1,"dropdown-item",3,"bbAccountStatementDownloadDoc","click","bbAccountStatementDownloadDocFailure"],["dropdownItemNoExtension",""],[1,"sr-only",3,"id"],["dropdownItemAriaLabelNoExtension",""],c,S,D,["data-role","account-statement-table__download--empty","triggers","hover focus","placement","bottom","bbTooltip",u],["data-role","empty-state","name","warning","color","warning","tabindex","0"]]},template:function(n,i){if(1&n&&(t.YNc(0,co,6,2,"ng-container",0),t.YNc(1,so,2,1,"ng-template",null,1,t.W1O)),2&n){const a=t.MAs(2);t.Q6J("ngIf",i.documents.length)("ngIfElse",a)}},directives:[rt.o,Bt.N9,d.O5,Rt.i,st.Hq,Ho,Bt.i4,d.sg],encapsulation:2,changeDetection:0}),e})(),de=(()=>{class e{constructor(n,i){this.domService=n,this.renderer=i,this.describedByElementId=""}set documents(n){this.documentPDF=n.find(i=>"application/pdf"===i.contentType)}viewOnline(){var n;this.domService.simulateLinkClick({target:"_blank",href:(null===(n=this.documentPDF)||void 0===n?void 0:n.url)||""},this.renderer)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(Pt),t.Y36(t.Qsj))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-view-online"]],inputs:{describedByElementId:"describedByElementId",documents:"documents"},decls:1,vars:1,consts:function(){let o,n;return o="Preview",n="View online",[["triggers","hover focus","bbTooltip",o,4,"ngIf"],["triggers","hover focus","bbTooltip",o],["bbButton","","color","link","aria-label",n,"data-role","view-online",3,"circle","click"],["name","open-in-new"]]},template:function(n,i){1&n&&t.YNc(0,ro,3,2,"div",0),2&n&&t.Q6J("ngIf",i.documentPDF)},directives:[rt.o,d.O5,Rt.i,st.Hq],encapsulation:2,changeDetection:0}),e})(),Ko=(()=>{class e{transform(n,i){return i&&i.column===n?i.direction:""}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=t.Yjl({name:"getDirection",type:e,pure:!0}),e})(),Ee=(()=>{class e{constructor(n,i){this.accountStatementCategories=n,this.mimeTypeExtensions=i,this.accountStatements=[],this.loading=!1,this.tableConfig=[],this.sortEvent=new t.vpe,this.downloadFailureEvent=new t.vpe}onSort(n){this.sortEvent.emit(n)}onDownloadFailure(n){this.downloadFailureEvent.emit(n)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(J),t.Y36(_e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-base-table"]],inputs:{accountStatements:"accountStatements",sortingParams:"sortingParams",loading:"loading",tableConfig:"tableConfig"},outputs:{sortEvent:"sortEvent",downloadFailureEvent:"downloadFailureEvent"},features:[t._Bn([wt.gq,Pt])],decls:2,vars:2,consts:function(){let o,n,i,a,_,c,S,D,u,C,U;return o="Account statements table",n="Preview",i="Download",a=" Preview for account " + "\ufffd0\ufffd" + " and book date " + "\ufffd1\ufffd" + " ",_=" Download " + "\ufffd0\ufffd" + " for account " + "\ufffd1\ufffd" + " and book date " + "\ufffd2\ufffd" + " ",c=" Show download actions for account " + "\ufffd0\ufffd" + " and book date " + "\ufffd1\ufffd" + " ",S=" Book date ",D=" Category ",u=" Description ",C=" Account name ",U=" Account number ",[["class","table","aria-label",o,"bbTableFocus","",3,"bbTable","sort",4,"ngIf"],["loaderSize","lg","data-role","account-statements-table__loading",4,"ngIf"],["aria-label",o,"bbTableFocus","",1,"table",3,"bbTable","sort"],[1,"d-sm-table-row","d-none"],[4,"ngFor","ngForOf"],["scope","col",1,"bb-text-align-center"],["data-role","preview-thead",1,"th-content"],n,["data-role","download-thead",1,"th-content"],i,[4,"ngIf"],["scope","col",3,"bbSortable","direction"],[1,"th-content"],["data-role","account-statements-table__row",1,"d-sm-table-row","d-none"],[3,"ngSwitch",4,"ngFor","ngForOf"],[1,"bb-text-align-center"],["class","sr-only",3,"id",4,"ngIf"],["data-role","account-statement-table__preview",3,"documents","describedByElementId",4,"ngIf"],[3,"describedByElementId","documents","mimeTypeExtensions","downloadFailure"],[1,"d-sm-none","bb-list__item"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["data-role","date-td"],["data-role","category-td"],["data-role","description-td"],["data-role","account-name-td",1,"text-break"],[1,"bb-text-support"],[1,"sr-only",3,"id"],a,["data-role","account-statement-table__preview",3,"documents","describedByElementId"],[4,"ngIf","ngIfElse"],["multipleDownloadDocumentsDescription",""],_,c,["class","bb-block bb-block--md",4,"ngIf"],[1,"bb-block","bb-block--md"],[1,"bb-stack","bb-stack--align-top"],["class","bb-stack__item bb-stack__item--push-right",3,"documents","describedByElementId",4,"ngIf"],["tooltipPlacement","top-right",1,"bb-stack__item",3,"describedByElementId","documents","mimeTypeExtensions","downloadFailure"],[1,"bb-stack__item"],[1,"bb-block","bb-block--xs","bb-text-semi-bold"],S,[1,"bb-stack__item","bb-stack__item--push-right",3,"documents","describedByElementId"],D,u,C,U,[1,"text-break"],["loaderSize","lg","data-role","account-statements-table__loading"]]},template:function(n,i){1&n&&(t.YNc(0,vo,11,3,"table",0),t.YNc(1,Fo,1,0,"bb-loading-indicator-ui",1)),2&n&&(t.Q6J("ngIf",i.tableConfig),t.xp6(1),t.Q6J("ngIf",i.loading))},directives:[de,Ae,ct.Q,d.O5,ht.au,ht.xi,d.sg,ht.B9,d.RF,d.n9,d.ED],pipes:[Ko,Se.y],encapsulation:2,changeDetection:0}),e})();const ko=[st.hJ,rt.Q,ht.U$,ct.p,Se.G,Bt.CK,Rt.z];let Jo=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.ez,...ko]]}),e})();const Ht=new t.OlP("columnConfig");var Tt=s(5633),Nt=s(4544),y=(s(4554),s(9646)),me=s(5460),Kt=s(6072),kt=s(2843),Wo=s(590),ge=s(1365),Ut=s(262),$o=s(520),l=s(538),Z=s(7218);const Yo={businessFunction:"Product Summary",resourceName:"Product Summary",privilege:"view"},Wt=e=>null!==e.body;let yt=(()=>{class e{constructor(n,i,a,_){this.productSummaryHttpService=n,this.accountStatementsHttpService=i,this.http=a,this.locale=_}getAccounts(n){return this.productSummaryHttpService.getArrangementsByBusinessFunction(Object.assign(Object.assign(Object.assign({},Yo),{favoriteFirst:!0}),n),O.RESPONSE).pipe((0,_t.w)(i=>Wt(i)?(0,y.of)(i):(0,kt._)(vt)))}getAccountStatementsForMultipleAccounts(n){return this.accountStatementsHttpService.postAccountStatements(n,O.RESPONSE).pipe((0,_t.w)(i=>Wt(i)&&Array.isArray(i.body)?(0,y.of)(i):(0,kt._)(vt)))}getAccountStatementsForSingleAccount(n){return this.accountStatementsHttpService.getAccountStatements(n,O.RESPONSE).pipe((0,_t.w)(i=>Wt(i)&&Array.isArray(i.body)?(0,y.of)(i):(0,kt._)(vt)))}loadCategories(){return this.accountStatementsHttpService.getCategories(O.RESPONSE).pipe((0,r.U)(({body:n})=>{if(null===n)throw new Error("Response does not contain body");return n.categories}))}getAccountStatementDownloadUrl(n){return this.accountStatementsHttpService.downloadAccountStatementsUrl({uid:n})}downloadFile(n){return this.http.get(n,{responseType:"arraybuffer",observe:"response"})}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(Nt.IK),t.LFG(Tt.gJ),t.LFG($o.eN),t.LFG(t.soG))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();const fe=(0,l.PH)("[AS Account Statements] Initialize state",(0,l.Ky)()),$t=(0,l.PH)("[AS Account Statements] Load Account Statements for multiple accounts",(0,l.Ky)()),Gt=(0,l.PH)("[AS Account Statements] Load Account Statements",(0,l.Ky)()),Zt=(0,l.PH)("[AS Account Statements] Load Account Statements Success",(0,l.Ky)()),Qt=(0,l.PH)("[AS Account Statements] Load Account Statements Failure",(0,l.Ky)()),Me={data:[],totalCount:0,loading:F.IDLE,error:void 0,accountIds:[],filterParams:{datePeriod:v.AllTime},from:0,size:0,widgetPreferences:{minimalDate:W(),maximumDate:h()}},zo=(e,o)=>o.accountIds&&o.accountIds!==e.accountIds?F.LOADING:o.filterParams&&o.filterParams!==e.filterParams?F.LOADING_FILTERED:o.append?F.LOADING_MORE:o.sortingParams&&o.sortingParams!==e.sortingParams||null!=o.from&&o.from!==e.from?F.LOADING_TABLE:F.LOADING,jo=(0,l.Lq)(Me,(0,l.on)(fe,(e,o)=>Object.assign(Object.assign({},e),{method:o.method,size:o.size,widgetPreferences:Object.assign(Object.assign({},e.widgetPreferences),o.widgetPreferences)})),(0,l.on)(Gt,$t,(e,o)=>Object.assign(Object.assign({},e),{loading:zo(e,o),error:void 0})),(0,l.on)(Zt,(e,o)=>{const{accountStatements:n,accountIds:i,filterParams:a,from:_,sortingParams:c,totalCount:S,append:D}=o,u=D?e.data:[];return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),{loading:F.IDLE,data:[...u,...n],totalCount:S}),i&&{accountIds:i}),a&&{filterParams:a}),c&&{sortingParams:c}),_&&{from:_})}),(0,l.on)(Qt,(e,o)=>Object.assign(Object.assign({},e),{error:o.error,loading:F.IDLE}))),Yt=(0,l.PH)("[AS Account Statements] Load Accounts ",(0,l.Ky)()),be=(0,l.PH)("[AS Account Statements] Load Accounts Success",(0,l.Ky)()),De=(0,l.PH)("[AS Account Statements] Load Accounts Failure",(0,l.Ky)()),zt={count:0,items:[],params:{},error:void 0,loading:!1},Xo=(0,l.Lq)(zt,(0,l.on)(Yt,(e,{params:o})=>Object.assign(Object.assign({},e),{params:o,loading:!0})),(0,l.on)(be,(e,{accounts:o})=>{const{count:n,items:i,params:a}=o;return Object.assign(Object.assign({},e),{items:ti(e.items,i,e.params.paginationType,a.from||0),count:n,params:a,error:void 0,loading:!1})}),(0,l.on)(De,(e,{error:o})=>Object.assign(Object.assign({},e),{items:[],error:o,loading:!1})));function ti(e,o,n,i){return e&&o&&n===at.LoadMore&&0!==i?[...e,...o]:o}const Be=(0,l.PH)("[AS Account Statements] Load Categories for Business"),Oe=(0,l.PH)("[AS Account Statements] Load Categories for Business Success",(0,l.Ky)()),he=(0,l.PH)("[AS Account Statements] Load Categories for Business Failure",(0,l.Ky)()),ei=(0,l.Lq)({data:[],error:void 0},(0,l.on)(Oe,(e,{categories:o})=>Object.assign(Object.assign({},e),{data:o})),(0,l.on)(he,(e,{error:o})=>Object.assign(Object.assign({},e),{data:[],error:o}))),Ue="accountStatements",oi={accountStatements:function Vo(e,o){return jo(e,o)},categories:function ni(e,o){return ei(e,o)},accounts:function qo(e=zt,o){return Xo(e,o)}},jt=(0,l.ZF)(Ue),tt=(0,l.P1)(jt,e=>e.accountStatements),ii=(0,l.P1)(tt,e=>e.data),ai=(0,l.P1)(tt,e=>e.loading),_i=(0,l.P1)(tt,e=>e.error),ci=(0,l.P1)(tt,e=>e.totalCount),Ie=(0,l.P1)(tt,e=>e.accountIds),Vt=(0,l.P1)(tt,e=>({from:e.from,size:e.size})),Xt=(0,l.P1)(tt,e=>e.sortingParams),qt=(0,l.P1)(tt,e=>e.filterParams),te=(0,l.P1)(tt,e=>e.widgetPreferences),si=(0,l.P1)(tt,e=>e.method),ee=(0,l.P1)(jt,e=>e.accounts),ye=(0,l.P1)(ee,e=>({items:e.items,count:e.count,params:e.params})),ve=(0,l.P1)(ee,e=>e.error),Fe=(0,l.P1)(ee,e=>e.loading),Le=(0,l.P1)(jt,e=>e.categories),ri=(0,l.P1)(Le,e=>e.data);(0,l.P1)(Le,e=>e.error);let At=(()=>{class e{constructor(n){this.store=n,this.accountStatements$=this.store.select(ii),this.accountStatementsLoading$=this.store.select(ai),this.accountStatementsError$=this.store.select(_i),this.accountStatementsTotalCount$=this.store.select(ci),this.accountStatementsPaginationParams$=this.store.select(Vt),this.accountStatementsSortingParams$=this.store.select(Xt),this.accountStatementsFilterParams$=this.store.select(qt),this.accountStatementsWidgetPreferences$=this.store.select(te),this.categories$=this.store.select(ri),this.accounts$=this.store.select(ye),this.accountsLoading$=this.store.select(Fe),this.accountsError$=this.store.select(ve)}initializeState(n){this.store.dispatch(fe(n))}dispatchLoadAccountStatements(n){this.store.select(si).pipe((0,Wo.P)(i=>!!i)).subscribe(i=>{"get"===i&&this.store.dispatch(Gt(n)),"post"===i&&this.store.dispatch($t(n))})}dispatchLoadCategories(){this.store.dispatch(Be())}dispatchLoadAccounts(n){this.store.dispatch(Yt({params:n}))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(l.yh))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),Re=(()=>{class e{constructor(n){this.productSummaryDataHttpService=n}getAccounts(n){const i=n.from||0,{paginationType:a}=n,_=function Go(e,o){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&o.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)o.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n}(n,["paginationType"]);return this.productSummaryDataHttpService.getArrangementsByBusinessFunction(_,"response").pipe((0,r.U)(c=>this.mapResponseWithCount(c,{from:i,paginationType:a})))}mapResponseWithCount(n,i){if(null===n.body)throw new Error;const a=n.headers?n.headers.get("x-total-count"):void 0;return{count:a?parseInt(a,10):n.body.length||0,items:n.body||[],params:i}}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(Nt.IK))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),li=(()=>{class e{constructor(n,i,a){this.actions$=n,this.dataService=i,this.store=a,this.accountStatementsForMultipleAccounts$=(0,Z.GW)(()=>this.actions$.pipe((0,Z.l4)($t),(0,ge.M)(this.store.select(Ie),this.store.select(qt),this.store.select(Xt),this.store.select(Vt),this.store.select(te)),(0,_t.w)(([_,c,S,D,u,C])=>{var U;const{dateFrom:m,dateTo:x,category:Q}=Object.assign(Object.assign({},S),_.filterParams),{minimalDate:ot,maximumDate:lt}=C||{},et={size:u.size,from:null!==(U=_.from)&&void 0!==U?U:u.from},P=Object.assign(Object.assign({},D),_.sortingParams);return this.dataService.getAccountStatementsForMultipleAccounts({accountStatementsPostRequest:{accountIds:_.accountIds||c,dateFrom:this._hasDate(m,ot)?this._getFormattedDate(m,ot):void 0,dateTo:this._hasDate(x,lt)?this._getFormattedDate(x,lt):void 0,category:Q,from:null==et?void 0:et.from,size:et.size,direction:(null==P?void 0:P.direction)?this._mapSortingDirection(P.direction):void 0,orderBy:null==P?void 0:P.column}}).pipe((0,r.U)(H=>Zt(Object.assign({accountStatements:H.body,totalCount:ce(H.headers)},_))),(0,Ut.K)(H=>(0,y.of)(Qt({error:H}))))}))),this.accountStatements$=(0,Z.GW)(()=>this.actions$.pipe((0,Z.l4)(Gt),(0,ge.M)(this.store.select(Ie),this.store.select(qt),this.store.select(Xt),this.store.select(Vt),this.store.select(te)),(0,_t.w)(([_,c,S,D,u,C])=>{var U,m;const{dateFrom:x,dateTo:Q,category:ot}=Object.assign(Object.assign({},S),_.filterParams),{minimalDate:lt,maximumDate:et}=C||{},P={size:u.size,from:null!==(U=_.from)&&void 0!==U?U:u.from},H=Object.assign(Object.assign({},D),_.sortingParams);return this.dataService.getAccountStatementsForSingleAccount({accountId:(null===(m=_.accountIds)||void 0===m?void 0:m[0])||c[0],dateFrom:this._hasDate(x,lt)?this._getFormattedDate(x,lt):void 0,dateTo:this._hasDate(Q,et)?this._getFormattedDate(Q,et):void 0,category:ot,from:null==P?void 0:P.from,size:P.size,direction:(null==H?void 0:H.direction)?this._mapSortingDirection(H.direction):void 0,orderBy:null==H?void 0:H.column}).pipe((0,r.U)(ut=>Zt(Object.assign({accountStatements:ut.body,totalCount:ce(ut.headers)},_))),(0,Ut.K)(ut=>(0,y.of)(Qt({error:ut}))))}))),this._hasDate=(_,c)=>!(!_&&!c),this._getFormattedDate=(_,c)=>{const S=_||c;return S&&(0,d.p6)(new Date(S),"yyyy-MM-dd","en-US")},this._mapSortingDirection=_=>"asc"===_?Tt.LT.DirectionEnum.ASC:Tt.LT.DirectionEnum.DESC}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(Z.eX),t.LFG(yt),t.LFG(l.yh))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),ui=(()=>{class e{constructor(n,i){this.actions$=n,this.dataService=i,this.loadAccounts$=(0,Z.GW)(()=>this.actions$.pipe((0,Z.l4)(Yt),(0,_t.w)(a=>this.dataService.getAccounts(a.params).pipe((0,r.U)(_=>be({accounts:_})),(0,Ut.K)(_=>(0,y.of)(De(_)))))))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(Z.eX),t.LFG(Re))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),Si=(()=>{class e{constructor(n,i){this.actions$=n,this.dataService=i,this.loadCategories$=(0,Z.GW)(()=>this.actions$.pipe((0,Z.l4)(Be),(0,_t.w)(()=>this.dataService.loadCategories().pipe((0,r.U)(a=>Oe({categories:a})),(0,Ut.K)(a=>(0,y.of)(he({error:a})))))))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(Z.eX),t.LFG(yt))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),Ai=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[yt,Re],imports:[[l.Aw.forFeature(Ue,oi),Z.sQ.forFeature([li,Si,ui])]]}),e})();var di=s(6451),Ei=s(8675),mi=s(4782),we=s(2722),xe=s(7287),Pe=s(7921);function gi(e,o){1&e&&(t.ynx(0),t.TgZ(1,"div",1)(2,"div",2),t._UZ(3,"bb-loading-indicator-ui"),t.qZA()(),t.BQk())}function pi(e,o){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"bb-account-statement-account-picker",3),t.NdJ("paramsChange",function(a){return t.CHM(n),t.oxw(2).onParamsChange(a)})("selectedAccountIds",function(a){return t.CHM(n),t.oxw(2).onSelectAccount(a)}),t.ALo(2,"async"),t.ALo(3,"async"),t.qZA(),t.BQk()}if(2&e){const n=t.oxw().ngIf,i=t.oxw();t.xp6(1),t.Q6J("accountsObject",n)("size",i.size)("markFirst",i.selectFirst)("loading",!0===t.lcZ(2,11,i.loading$))("routeIds",t.lcZ(3,13,i.routeAccountIds))("currentParams",i.params)("multiple",i.multiple)("favoriteFirst",i.favoriteFirst)("searchable",i.searchable)("extendedDetails",i.extendedDetails)("multiSelectLabelLimit",i.multiSelectLabelLimit)}}function Ti(e,o){if(1&e&&(t.ynx(0),t.YNc(1,gi,4,0,"ng-container",0),t.ALo(2,"async"),t.YNc(3,pi,4,15,"ng-container",0),t.BQk()),2&e){const n=o.ngIf,i=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,i.loading$)&&!n.items.length),t.xp6(2),t.Q6J("ngIf",n.items.length)}}function Ci(e,o){1&e&&(t.ynx(0),t.TgZ(1,"div",1),t._UZ(2,"bb-empty-state-ui",4),t.qZA(),t.BQk())}const fi=function(e){return{"d-sm-none":e}};function Mi(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"bb-load-button-ui",5),t.NdJ("paramChange",function(a){return t.CHM(n),t.oxw(3).loadMore(a)}),t.ALo(1,"async"),t.ALo(2,"async"),t.TgZ(3,"span"),t.SDv(4,6),t.qZA()()}if(2&e){const n=t.oxw(2).ngIf,i=t.oxw();t.Q6J("ngClass",t.VKq(9,fi,i.paginationType!==i.paginationTypes.LoadMore))("isLoading",t.lcZ(1,5,i.accountStatementsLoading$)===i.loadingStates.LOADING_MORE)("size",n.size)("from",n.from)("totalCount",t.lcZ(2,7,i.totalCount$))}}const bi=function(e){return{"d-none d-sm-block":e}};function Di(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"bb-pagination-ui",7),t.NdJ("pageChange",function(a){return t.CHM(n),t.oxw(3).handlePageChange(a)}),t.ALo(1,"async"),t.qZA()}if(2&e){const n=t.oxw(2).ngIf,i=t.oxw();t.Q6J("ngClass",t.VKq(8,bi,i.loadMoreOnMobileView))("page",n.from)("itemsPerPage",n.size)("totalItems",t.lcZ(1,6,i.totalCount$))("boundaryLinks",!0)("directionLinks",!0)}}function Bi(e,o){if(1&e&&(t.TgZ(0,"div",2),t.YNc(1,Mi,5,11,"bb-load-button-ui",3),t.YNc(2,Di,2,10,"bb-pagination-ui",4),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.paginationType===n.paginationTypes.LoadMore||n.loadMoreOnMobileView),t.xp6(1),t.Q6J("ngIf",n.paginationType===n.paginationTypes.Pagination)}}function Oi(e,o){if(1&e&&(t.ynx(0),t.YNc(1,Bi,3,2,"div",1),t.ALo(2,"async"),t.BQk()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,n.accountStatementsLoading$)!==n.loadingStates.LOADING_TABLE)}}function hi(e,o){1&e&&(t.ynx(0),t.Hsn(1,1),t.Hsn(2,2),t.BQk())}function Ni(e,o){if(1&e&&(t.ynx(0),t.YNc(1,hi,3,0,"ng-container",1),t.ALo(2,"async"),t.BQk()),2&e){const n=t.oxw(5),i=t.MAs(10);let a;t.xp6(1),t.Q6J("ngIf",null==(a=t.lcZ(2,2,n.accountStatements$))?null:a.length)("ngIfElse",i)}}function Ui(e,o){if(1&e&&(t.ynx(0),t.Hsn(1),t.YNc(2,Ni,3,4,"ng-container",1),t.ALo(3,"async"),t.BQk()),2&e){const n=t.oxw(4),i=t.MAs(4);t.xp6(2),t.Q6J("ngIf",t.lcZ(3,2,n.accountStatementsLoading$)!==n.loadingStates.LOADING_FILTERED)("ngIfElse",i)}}function Ii(e,o){if(1&e&&(t.ynx(0),t.YNc(1,Ui,4,4,"ng-container",1),t.ALo(2,"async"),t.ALo(3,"async"),t.BQk()),2&e){const n=t.oxw(3),i=t.MAs(6);let a;t.xp6(1),t.Q6J("ngIf",(null==(a=t.lcZ(2,2,n.accountStatements$))?null:a.length)||t.lcZ(3,4,n.filtersApplied$))("ngIfElse",i)}}function yi(e,o){if(1&e&&(t.ynx(0),t.YNc(1,Ii,4,6,"ng-container",1),t.ALo(2,"async"),t.BQk()),2&e){const n=t.oxw(2),i=t.MAs(4);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,n.accountStatementsLoading$)!==n.loadingStates.LOADING)("ngIfElse",i)}}function vi(e,o){1&e&&t.GkF(0)}function Fi(e,o){if(1&e&&(t.ynx(0),t.YNc(1,vi,1,0,"ng-container",11),t.BQk()),2&e){t.oxw(2);const n=t.MAs(12);t.xp6(1),t.Q6J("ngTemplateOutlet",n)}}function Li(e,o){1&e&&t.GkF(0)}function Ri(e,o){if(1&e&&(t.ynx(0),t.YNc(1,Li,1,0,"ng-container",11),t.BQk()),2&e){t.oxw(2);const n=t.MAs(14);t.xp6(1),t.Q6J("ngTemplateOutlet",n)}}function wi(e,o){if(1&e&&(t.ynx(0)(1,8),t.ALo(2,"async"),t.YNc(3,yi,3,4,"ng-container",9),t.YNc(4,Fi,2,1,"ng-container",9),t.YNc(5,Ri,2,1,"ng-container",10),t.BQk()()),2&e){const n=t.oxw();let i;t.xp6(1),t.Q6J("ngSwitch",null==(i=t.lcZ(2,3,n.accountIds$))?null:i.length),t.xp6(2),t.Q6J("ngSwitchCase",1),t.xp6(1),t.Q6J("ngSwitchCase",0)}}function xi(e,o){1&e&&t._UZ(0,"bb-account-statement-loading-state")}function Pi(e,o){1&e&&t._UZ(0,"bb-account-statement-empty-state")}function Hi(e,o){1&e&&t._UZ(0,"bb-account-statement-error-state")}function Ki(e,o){1&e&&t._UZ(0,"bb-account-statement-filtered-empty-state")}function ki(e,o){1&e&&t._UZ(0,"bb-account-statement-no-accounts-error-state")}function Ji(e,o){1&e&&t._UZ(0,"bb-account-statement-no-multiple-accounts-error-state")}const Wi=[[["","filters",""]],[["","table",""]],[["","pagination",""]]],$i=["[filters]","[table]","[pagination]"];let Gi=(()=>{class e{constructor(n,i,a,_){this.activatedRoute=n,this.router=i,this.route=a,this.store=_,this.size=50,this.multiple=!1,this.multiSelectLabelLimit=15,this.productSummaryBusinessFunction="Product Summary,Product Summary Limited View",this.productSummaryResourceName="Product Summary",this.selectFirst=!1,this.favoriteFirst=!1,this.searchable=!1,this.extendedDetails=!1,this.params={from:0,searchTerm:"",size:0,businessFunction:"",resourceName:"",privilege:"view",paginationType:at.LoadMore,favoriteFirst:!0},this.routeAccountIds=this.getRouteParameter(this.route,"selectedAccount").pipe((0,Ei.O)(""),(0,r.U)(c=>c?c.split(","):[])),this.accounts=(0,gt.a)([this.store.accounts$,this.routeAccountIds]).pipe((0,mi.d)(),(0,r.U)(([c,S])=>((null==c?void 0:c.items.length)&&this.selectFirst&&0===S.length&&this.onSelectAccount(c.items[0].id),c))),this.loading$=this.store.accountsLoading$,this.error$=this.store.accountsError$}ngOnInit(){this.params=Object.assign(Object.assign({},this.params),{size:this.size,businessFunction:this.productSummaryBusinessFunction,resourceName:this.productSummaryResourceName}),this.store.dispatchLoadAccounts(this.params)}onParamsChange(n){this.params=Object.assign(Object.assign({},this.params),n),this.store.dispatchLoadAccounts(this.params)}onSelectAccount(n){this.router.navigate([".",{selectedAccount:n}],{relativeTo:this.activatedRoute.parent})}getRouteParameter(n,i){const a=n.paramMap.pipe((0,r.U)(c=>c.get(i))),_=n.parent?[a,this.getRouteParameter(n.parent,i)]:[a];return(0,gt.a)(_).pipe((0,r.U)(c=>c[0]||c[1]),(0,r.U)(c=>null!=c?c:""))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(X.gz),t.Y36(X.F0),t.Y36(X.gz),t.Y36(At))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-account-picker-container"]],inputs:{size:"size",multiple:"multiple",multiSelectLabelLimit:"multiSelectLabelLimit",productSummaryBusinessFunction:"productSummaryBusinessFunction",productSummaryResourceName:"productSummaryResourceName",selectFirst:"selectFirst",favoriteFirst:"favoriteFirst",searchable:"searchable",extendedDetails:"extendedDetails"},features:[t._Bn([At])],decls:4,vars:6,consts:function(){let o,n,i;return o="Select an account",n="Try to reload the page or contact the system administrator.",i="Account list is not loading",[[4,"ngIf"],[1,"card"],[1,"bb-block","bb-block--xs"],["placeholder",o,3,"accountsObject","size","markFirst","loading","routeIds","currentParams","multiple","favoriteFirst","searchable","extendedDetails","multiSelectLabelLimit","paramsChange","selectedAccountIds"],["data-role","accounts-error-state","iconSize","xxl","iconModifier","error","subtitle",n,"title",i,1,"bb-state-container"]]},template:function(n,i){1&n&&(t.YNc(0,Ti,4,4,"ng-container",0),t.ALo(1,"async"),t.YNc(2,Ci,3,0,"ng-container",0),t.ALo(3,"async")),2&n&&(t.Q6J("ngIf",t.lcZ(1,2,i.accounts)),t.xp6(2),t.Q6J("ngIf",t.lcZ(3,4,i.error$)))},directives:[ct.Q,Lo,q.s,d.O5],pipes:[d.Ov],encapsulation:2}),e})(),He=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[Ro,d.ez,q.P,ct.p]]}),e})(),Zi=(()=>{class e{constructor(n,i){this.store=n,this.tableConfig=i,this.showCustomPeriodDropdown=!1,this.accountStatementsFilterParams$=this.store.accountStatementsFilterParams$,this.categories$=this.store.categories$,this.filtersApplied$=this.store.accountStatementsFilterParams$.pipe((0,r.U)(a=>!(!a.dateFrom||!a.dateTo)||!!(a.category&&a.category.length>0))),this.datePreferences$=this.initializeDatePreferences,this.datePeriodsToDisplay$=this.initializeFilterDatePeriods,this.destroy$=new Mt.x}ngOnInit(){this.tableConfig.some(i=>"category"===i.key)&&this.store.dispatchLoadCategories()}applyFormData(n){const{dateFrom:i,dateTo:a,datePeriod:_,category:c}=n;this.store.dispatchLoadAccountStatements({from:0,filterParams:{dateFrom:i,dateTo:a||i,datePeriod:_||void 0,category:c||void 0}})}resetForm(){this.store.dispatchLoadAccountStatements({from:0,filterParams:{dateFrom:void 0,dateTo:void 0,datePeriod:v.AllTime,category:void 0}})}get initializeDatePreferences(){return this.store.accountStatementsWidgetPreferences$.pipe((0,r.U)(n=>({minimalDate:Et(n.minimalDate),maximumDate:Et(n.maximumDate)})))}get initializeFilterDatePeriods(){return this.store.accountStatementsWidgetPreferences$.pipe((0,r.U)(n=>Object.values(v).filter(a=>ae[a]().from>=n.minimalDate)))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(At),t.Y36(Ht))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-filters-container"]],inputs:{showCustomPeriodDropdown:"showCustomPeriodDropdown"},decls:6,vars:17,consts:[[3,"tableConfig","filterParams","categories","filtersApplied","datePreferences","showCustomPeriodDropdown","datePeriodsToDisplay","submitForm","resetForm"]],template:function(n,i){1&n&&(t.TgZ(0,"bb-account-statement-base-filters",0),t.NdJ("submitForm",function(_){return i.applyFormData(_)})("resetForm",function(){return i.resetForm()}),t.ALo(1,"async"),t.ALo(2,"async"),t.ALo(3,"async"),t.ALo(4,"async"),t.ALo(5,"async"),t.qZA()),2&n&&t.Q6J("tableConfig",i.tableConfig)("filterParams",t.lcZ(1,7,i.accountStatementsFilterParams$))("categories",t.lcZ(2,9,i.categories$))("filtersApplied",t.lcZ(3,11,i.filtersApplied$))("datePreferences",t.lcZ(4,13,i.datePreferences$))("showCustomPeriodDropdown",i.showCustomPeriodDropdown)("datePeriodsToDisplay",t.lcZ(5,15,i.datePeriodsToDisplay$))},directives:[wo],pipes:[d.Ov],encapsulation:2}),e})(),Ke=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.ez,Po]]}),e})(),Qi=(()=>{class e{constructor(n){this.store=n,this.loadMoreOnMobileView=!1,this.totalCount$=this.store.accountStatementsTotalCount$,this.accountStatementsLoading$=this.store.accountStatementsLoading$,this.paginationParams$=this.store.accountStatementsPaginationParams$,this.loadingStates=F,this.paginationTypes=at}loadMore(n){this.store.dispatchLoadAccountStatements({from:n.from,append:!0})}handlePageChange(n){this.store.dispatchLoadAccountStatements({from:n})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(At))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-pagination-container"]],inputs:{paginationType:"paginationType",loadMoreOnMobileView:"loadMoreOnMobileView"},decls:2,vars:3,consts:function(){let o;return o="Load more",[[4,"ngIf"],["class","bb-text-align-center",4,"ngIf"],[1,"bb-text-align-center"],["color","link","data-role","load-more-button",3,"ngClass","isLoading","size","from","totalCount","paramChange",4,"ngIf"],["data-role","pagination",3,"ngClass","page","itemsPerPage","totalItems","boundaryLinks","directionLinks","pageChange",4,"ngIf"],["color","link","data-role","load-more-button",3,"ngClass","isLoading","size","from","totalCount","paramChange"],o,["data-role","pagination",3,"ngClass","page","itemsPerPage","totalItems","boundaryLinks","directionLinks","pageChange"]]},template:function(n,i){1&n&&(t.YNc(0,Oi,3,3,"ng-container",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,i.paginationParams$))},directives:[xe.K,Pe.Jb,d.O5,d.mk],pipes:[d.Ov],encapsulation:2,changeDetection:0}),e})(),ke=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.ez,xe.C,Pe.u3]]}),e})(),Yi=(()=>{class e{constructor(n,i,a,_){this.store=n,this.dataService=i,this.notificationsService=a,this.tableConfig=_,this.accountStatements$=this.store.accountStatements$.pipe((0,r.U)(c=>c.map(S=>this.mapAccountStatement(S)))),this.accountStatementsLoading$=this.store.accountStatementsLoading$,this.sortingParams$=this.store.accountStatementsSortingParams$,this.loadingStates=F}onSort(n){this.store.dispatchLoadAccountStatements({sortingParams:n,from:0})}onDownloadFailure(n){const i="The statement cannot be downloaded now, please try again later";n&&this.notificationsService.showNotification({header:i,message:"",modifier:"error",ttl:this.notificationDismissTime})}mapAccountStatement(n){return Object.assign(Object.assign({},n),{documents:n.documents.map(i=>Object.assign(Object.assign({},i),{url:this.getDocumentLink(i)}))})}getDocumentLink(n){return n.url||this.dataService.getAccountStatementDownloadUrl(n.uid||"")}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(At),t.Y36(yt),t.Y36(wt.gq),t.Y36(Ht))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-table-container"]],inputs:{notificationDismissTime:"notificationDismissTime"},decls:6,vars:10,consts:[[1,"bb-block"],[1,"px-5","py-2"],[3,"tableConfig","sortingParams","accountStatements","loading","sortEvent","downloadFailureEvent"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"bb-account-statement-base-table",2),t.NdJ("sortEvent",function(_){return i.onSort(_)})("downloadFailureEvent",function(_){return i.onDownloadFailure(_)}),t.ALo(3,"async"),t.ALo(4,"async"),t.ALo(5,"async"),t.qZA()()()),2&n&&(t.xp6(2),t.Q6J("tableConfig",i.tableConfig)("sortingParams",t.lcZ(3,4,i.sortingParams$))("accountStatements",t.lcZ(4,6,i.accountStatements$))("loading",t.lcZ(5,8,i.accountStatementsLoading$)===i.loadingStates.LOADING_TABLE))},directives:[Ee],pipes:[d.Ov],encapsulation:2,changeDetection:0}),e})(),Je=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.ez,Jo]]}),e})(),We=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-empty-state"]],decls:1,vars:0,consts:function(){let o,n;return o="No account statements found",n="You don't have any account statements to be displayed for this account.",[["iconSize","xxl","iconModifier","description","data-role","account-statements-empty-state","title",o,"subtitle",n,1,"bb-state-container"]]},template:function(n,i){1&n&&t._UZ(0,"bb-empty-state-ui",0)},directives:[q.s],encapsulation:2,changeDetection:0}),e})(),$e=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-error-state"]],decls:1,vars:0,consts:function(){let o,n;return o="Account statements are not loading",n="Try to reload the page or contact the system administrator.",[["iconSize","xxl","iconModifier","error","data-role","account-statements-error-state","title",o,"subtitle",n,1,"bb-state-container"]]},template:function(n,i){1&n&&t._UZ(0,"bb-empty-state-ui",0)},directives:[q.s],encapsulation:2,changeDetection:0}),e})(),Ge=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-filtered-empty-state"]],decls:1,vars:0,consts:function(){let o,n;return o="No Results Found",n="We can\u2019t find what you\u2019re looking for. Please try a different criteria.",[["iconSize","xxl","iconModifier","search","data-role","account-statements-filters-empty-state","title",o,"subtitle",n,1,"bb-state-container"]]},template:function(n,i){1&n&&t._UZ(0,"bb-empty-state-ui",0)},directives:[q.s],encapsulation:2,changeDetection:0}),e})(),Ze=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-loading-state"]],decls:1,vars:0,consts:[["data-role","account-statements-main__loading","loaderSize","lg"]],template:function(n,i){1&n&&t._UZ(0,"bb-loading-indicator-ui",0)},directives:[ct.Q],encapsulation:2,changeDetection:0}),e})(),Qe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-no-accounts-error-state"]],decls:1,vars:0,consts:function(){let o,n;return o="You did not select an account yet",n="No statements to show. You need to select a bank account first.",[["data-role","account-statements-error-no-accounts","iconSize","xxl","iconModifier","current-accounts","title",o,"subtitle",n,1,"bb-state-container"]]},template:function(n,i){1&n&&t._UZ(0,"bb-empty-state-ui",0)},directives:[q.s],encapsulation:2,changeDetection:0}),e})(),Ye=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-no-multiple-accounts-error-state"]],decls:1,vars:0,consts:function(){let o,n;return o="You have selected multiple accounts",n="Please select only one account to display the account information.",[["data-role","account-statements-error-multiple-accounts","iconSize","xxl","iconModifier","error-outline","iconClasses","text-muted","title",o,"subtitle",n]]},template:function(n,i){1&n&&t._UZ(0,"bb-empty-state-ui",0)},directives:[q.s],encapsulation:2,changeDetection:0}),e})();const zi=[ct.p,q.P,wt.PQ];let ji=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.ez,...zi]]}),e})(),Vi=(()=>{class e{constructor(n,i){this.route=n,this.store=i,this.relativeDateLimit=0,this.absoluteDateLimit="",this.accountStatements$=this.store.accountStatements$,this.accountStatementsLoading$=this.store.accountStatementsLoading$,this.accountStatementsError$=this.store.accountStatementsError$,this.loadingStates=F,this.filtersApplied$=this.store.accountStatementsFilterParams$.pipe((0,r.U)(a=>!(!a.dateFrom||!a.dateTo)||!!(a.category&&a.category.length>0))),this.destroy$=new Mt.x,this.accountId$=new mt.X(""),this.accountIds$=(0,di.T)(((e,o)=>this.route.paramMap.pipe((0,r.U)(n=>n.get("selectedAccount")||void 0)))(),this.accountId$.pipe((0,bt.h)(a=>!!a))).pipe((0,r.U)(a=>((e,o)=>e?e.trim().split(","):[])(a)))}ngOnInit(){var n;const i={column:this.sortingOrder,direction:null===(n=this.sortingDirection)||void 0===n?void 0:n.toLowerCase()};this.initializeMinimalDateFilterLimit.pipe((0,we.R)(this.destroy$)).subscribe(a=>{const _={minimalDate:a,maximumDate:h()};this.store.initializeState({method:this.loadMethod,size:this.pageSize,widgetPreferences:_})}),this.accountIds$.pipe((0,we.R)(this.destroy$),(0,bt.h)(({length:a})=>1===a)).subscribe(a=>{this.store.dispatchLoadAccountStatements({accountIds:[nt(a)],sortingParams:i,from:0,filterParams:{datePeriod:v.AllTime}})})}get initializeMinimalDateFilterLimit(){return(0,y.of)(((e="",o=0)=>{let n=W();return(e=>[/([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/,/([12]\d{3}\.(0[1-9]|1[0-2])\.(0[1-9]|[12]\d|3[01]))/,/([12]\d{3}\/(0[1-9]|1[0-2])\/(0[1-9]|[12]\d|3[01]))/].some(n=>n.test(e)))(e)&&((e,o=new Date(0),n=new Date)=>{const i=new Date(e);return!isNaN(i.getTime())&&i>=o&&i<=n})(e)?n=new Date(e):""===e&&((e,o=new Date(0),n=new Date)=>e>0&&e<=((e,o)=>{const n=12*(o.getFullYear()-e.getFullYear())-e.getMonth()+o.getMonth();return n<=0?0:n})(o,n))(o)&&(n=new Date,n.setMonth(n.getMonth()-o)),n})(this.absoluteDateLimit,this.relativeDateLimit))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(X.gz),t.Y36(At))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-statements-container"]],inputs:{pageSize:"pageSize",sortingOrder:"sortingOrder",sortingDirection:"sortingDirection",loadMethod:"loadMethod",relativeDateLimit:"relativeDateLimit",absoluteDateLimit:"absoluteDateLimit"},features:[t._Bn([At])],ngContentSelectors:$i,decls:15,vars:4,consts:[["aria-live","polite","data-role","account-statements-container"],[4,"ngIf","ngIfElse"],["loadingState",""],["accountStatementsEmptyState",""],["accountStatementsErrorState",""],["accountStatementsFilteredEmptyState",""],["accountStatementsNoAccountsError",""],["accountStatementsMultipleAccountsError",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngTemplateOutlet"]],template:function(n,i){if(1&n&&(t.F$t(Wi),t.TgZ(0,"div",0),t.YNc(1,wi,6,5,"ng-container",1),t.ALo(2,"async"),t.qZA(),t.YNc(3,xi,1,0,"ng-template",null,2,t.W1O),t.YNc(5,Pi,1,0,"ng-template",null,3,t.W1O),t.YNc(7,Hi,1,0,"ng-template",null,4,t.W1O),t.YNc(9,Ki,1,0,"ng-template",null,5,t.W1O),t.YNc(11,ki,1,0,"ng-template",null,6,t.W1O),t.YNc(13,Ji,1,0,"ng-template",null,7,t.W1O)),2&n){const a=t.MAs(8);t.xp6(1),t.Q6J("ngIf",void 0===t.lcZ(2,2,i.accountStatementsError$))("ngIfElse",a)}},directives:[Ze,We,$e,Ge,Qe,Ye,d.O5,d.RF,d.n9,d.tP,d.ED],pipes:[d.Ov],encapsulation:2}),e})(),ze=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.ez,ct.p,q.P,ji]]}),e})();const Xi=[He,ze,Ke,Je,ke];let qi=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[Ai,...Xi],He,ze,Ke,Je,ke]}),e})();function ta(e,o){if(1&e&&(t._UZ(0,"bb-account-statement-manage-statements-link",4),t.ALo(1,"async")),2&e){const n=t.oxw(2);t.Q6J("url",t.lcZ(1,1,n.manageStatementsNavigationUrl$))}}function ea(e,o){if(1&e&&(t.ynx(0),t.GkF(1),t.YNc(2,ta,2,3,"bb-account-statement-manage-statements-link",3),t.ALo(3,"async"),t.BQk()),2&e){const n=t.oxw();t.xp6(2),t.Q6J("bbIfEntitlements",t.lcZ(3,1,n.entitlementsRequired$))}}function na(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"div",1),t._UZ(2,"bb-account-statement-account-picker-container",2),t.qZA(),t.TgZ(3,"div",3)(4,"div",4)(5,"bb-account-statement-statements-container",5),t._UZ(6,"bb-account-statement-filters-container",6)(7,"bb-account-statement-table-container",7)(8,"bb-account-statement-pagination-container",8),t.qZA()()(),t.BQk()),2&e){const n=o.ngIf;t.xp6(2),t.Q6J("size",9999)("selectFirst",!0)("productSummaryBusinessFunction",n.config.productSummaryBusinessFunction)("productSummaryResourceName",n.config.productSummaryResourceName),t.xp6(3),t.Q6J("pageSize",n.config.pageSize)("loadMethod","get")("absoluteDateLimit",n.config.absoluteDateLimit)("relativeDateLimit",n.config.relativeDateLimit)("sortingDirection",n.config.sortingDirection)("sortingOrder",n.config.sortingOrder),t.xp6(2),t.Q6J("notificationDismissTime",n.config.notificationDismissTime),t.xp6(1),t.Q6J("paginationType",n.config.paginationType)}}const oa={productSummaryBusinessFunction:"Product Summary",productSummaryResourceName:"Product Summary",showManageStatementsNavigation:!1,hideManageStatementsNavigationWhenMissingPermissions:!1,manageStatementsNavigationUrl:"/manage-statements",absoluteDateLimit:"",notificationDismissTime:5,paginationType:at.LoadMore,pageSize:24,relativeDateLimit:0,sortingDirection:"DESC",sortingOrder:"date"},je=new t.OlP("AccountStatementRetailJourneyConfiguration injection token");let ne=(()=>{class e{constructor(n){this.staticConfig=Object.assign(Object.assign({},oa),n)}get absoluteDateLimit(){return(0,y.of)(this.staticConfig.absoluteDateLimit)}get notificationDismissTime(){return(0,y.of)(this.staticConfig.notificationDismissTime)}get paginationType(){return(0,y.of)(this.staticConfig.paginationType)}get pageSize(){return(0,y.of)(this.staticConfig.pageSize)}get relativeDateLimit(){return(0,y.of)(this.staticConfig.relativeDateLimit)}get sortingDirection(){return(0,y.of)(this.staticConfig.sortingDirection)}get sortingOrder(){return(0,y.of)(this.staticConfig.sortingOrder)}get showManageStatementsNavigation(){return(0,y.of)(this.staticConfig.showManageStatementsNavigation)}get hideManageStatementsNavigationWhenMissingPermissions(){return(0,y.of)(this.staticConfig.hideManageStatementsNavigationWhenMissingPermissions)}get manageStatementsNavigationUrl(){return(0,y.of)(this.staticConfig.manageStatementsNavigationUrl)}get allConfig(){return(0,y.of)(Object.assign({},this.staticConfig))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(je,8))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),ia=(()=>{class e{constructor(){this.url=""}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-manage-statements-link"]],inputs:{url:"url"},decls:4,vars:1,consts:function(){let o;return o="Manage statements",[["bbButton","","color","link","data-role","account-statement-heading__manage-statements",1,"bb-heading-widget__button","bb-button--xs-hide-text","w-auto",3,"routerLink"],["name","settings"],[1,"ml-1"],o]},template:function(n,i){1&n&&(t.TgZ(0,"button",0),t._UZ(1,"bb-icon-ui",1),t.TgZ(2,"span",2),t.SDv(3,3),t.qZA()()),2&n&&t.Q6J("routerLink",i.url)},directives:[rt.o,st.Hq,X.rH],encapsulation:2,changeDetection:0}),e})();const aa={path:"",component:(()=>{class e{constructor(n){this.config=n,this.showManageStatementsNavigation$=this.config.showManageStatementsNavigation,this.manageStatementsNavigationUrl$=this.config.manageStatementsNavigationUrl,this.entitlementsRequired$=this.config.hideManageStatementsNavigationWhenMissingPermissions.pipe((0,r.U)(i=>"AccountStatements.ManageStatements."+(i?"edit":"view")))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(ne))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-retail-journey"]],features:[t._Bn([ne])],decls:5,vars:3,consts:function(){let o;return o="Account Statements",[[1,"bb-heading-widget","px-0","pb-4","flex-row","align-items-center"],["headingType","h1","headingClasses","bb-heading-widget__heading","heading",o],[4,"ngIf"],[3,"url",4,"bbIfEntitlements"],[3,"url"]]},template:function(n,i){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"bb-header-ui",1),t.YNc(2,ea,4,3,"ng-container",2),t.ALo(3,"async"),t.qZA(),t._UZ(4,"router-outlet")),2&n&&(t.xp6(2),t.Q6J("ngIf",!0===t.lcZ(3,1,i.showManageStatementsNavigation$)))},directives:[me.G,ia,d.O5,Kt.BE,X.lC],pipes:[d.Ov],encapsulation:2}),e})(),canActivate:[Kt.GW],data:{entitlements:"AccountStatements.ManageStatements.view"},children:[{path:"",component:(()=>{class e{constructor(n){this.configService=n,this.vm$=(0,gt.a)([this.configService.allConfig]).pipe((0,r.U)(([i])=>({config:i})))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(ne))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-retail-view"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"bb-block","bb-block--xl"],[3,"size","selectFirst","productSummaryBusinessFunction","productSummaryResourceName"],[1,"card"],[1,"card-body","px-0"],[3,"pageSize","loadMethod","absoluteDateLimit","relativeDateLimit","sortingDirection","sortingOrder"],["filters",""],["table","",3,"notificationDismissTime"],["pagination","",3,"paginationType"]],template:function(n,i){1&n&&(t.YNc(0,na,9,12,"ng-container",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,i.vm$))},directives:[Gi,Vi,Zi,Yi,Qi,d.O5],pipes:[d.Ov],encapsulation:2}),e})()},{path:"**",redirectTo:"",pathMatch:"full"}]};let _a=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[X.Bz,st.hJ,rt.Q]]}),e})();const ca=[{key:"date",name:"Book date",sortable:!0},{key:"category",name:"Category",sortable:!0},{key:"description",name:"Description",sortable:!0}],sa=[me.O,rt.Q,st.hJ],ra={provide:J,useValue:M},la={provide:_e,useValue:{"application/pdf":"PDF","text/csv":"CSV","text/plain":"TXT","application/rtf":"RTF","application/msword":"DOC","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"DOC","application/vnd.ms-excel":"XLS","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"XLS","application/xml":"XML","image/png":"PNG","image/jpeg":"JPG","image/gif":"GIF","image/tiff":"TIFF","binary/octet-stream":"File"}},ua={provide:Ht,useValue:ca};let Sa=(()=>{class e{static forRoot(n={routes:aa}){return{ngModule:e,providers:[(0,X.co)([n.routes]),ra,la,ua,Nt.IK,Tt.gJ]}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.ez,X.Bz,Kt.Gl,...sa,qi,_a]]}),e})();var qe=s(570);let Aa=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[{provide:je,useValue:{showManageStatementsNavigation:!0,manageStatementsNavigationUrl:"/self-service/manage-statements"}},{provide:Tt.m9,useExisting:qe.wi},{provide:Nt.xd,useExisting:qe.MI}],imports:[[Sa.forRoot()]]}),e})()},4554:()=>{},3032:()=>{},1089:(Ct,Y,s)=>{"use strict";s.d(Y,{A:()=>$,J:()=>p});var r=s(5e3),t=s(3075),L=s(9300),z=s(2722),j=s(9144),nt=s(1135),O=s(7579),J=s(9841),M=s(4619),W=s(9808);function h(g,f){1&g&&r.Hsn(0,0,["*ngIf","!label"])}const k=["*"];let $=(()=>{class g extends j.rA{constructor(b,B){super(b),this.cd=b,this.controlContainer=B,this.indeterminate=!1,this.skip$=new nt.X(!1),this.unsubscribe$=new O.x}ngAfterContentChecked(){this.controlContainer.control&&this.control!==this.controlContainer.control&&(this.control=this.controlContainer.control,this.checkState(this.control.value),(0,J.a)(this.control.valueChanges,this.skip$).pipe((0,L.h)(([b,B])=>!B),(0,z.R)(this.unsubscribe$)).subscribe({next:([b])=>this.checkState(b)}))}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}onValueChange(){const b=B=>{Object.keys(B.value).forEach(R=>B.controls[R]instanceof t.cw?b(B.controls[R]):B.controls[R].setValue(this.value))};this.control&&(this.skip$.next(!0),b(this.control),this.skip$.next(!1)),super.onValueChange()}isDisabled(){return!!this.control&&Object.keys(this.control.controls).every(b=>this.control&&this.control.controls&&this.control.controls[b]&&this.control.controls[b].disabled||!1)}checkState(b){const B=St=>{const ft=K=>"object"==typeof K&&null!==K?St.call(Object.keys(K).map(A=>K[A]),ft):!!K;return K=>St.call(Object.keys(K).map(A=>K[A]),ft)},R=B(Array.prototype.every)(b),it=B(Array.prototype.some)(b);this.indeterminate=it&&!R,this.writeValue(R)}}return g.\u0275fac=function(b){return new(b||g)(r.Y36(r.sBO),r.Y36(t.gN))},g.\u0275cmp=r.Xpm({type:g,selectors:[["bb-checkbox-group-ui"]],features:[r._Bn([{provide:t.JU,useExisting:(0,r.Gpc)(()=>g),multi:!0}]),r.qOj],ngContentSelectors:k,decls:2,vars:6,consts:[[3,"label","aria-label","indeterminate","ngModel","disabled","indeterminateChange","ngModelChange","change"],[4,"ngIf"]],template:function(b,B){1&b&&(r.F$t(),r.TgZ(0,"bb-input-checkbox-ui",0),r.NdJ("indeterminateChange",function(it){return B.indeterminate=it})("ngModelChange",function(it){return B.value=it})("change",function(){return B.onValueChange()}),r.YNc(1,h,1,0,"ng-content",1),r.qZA()),2&b&&(r.Q6J("label",B.label)("aria-label",!B.label&&B.ariaLabel||null)("indeterminate",B.indeterminate)("ngModel",B.value)("disabled",B.isDisabled()),r.xp6(1),r.Q6J("ngIf",!B.label))},directives:[M.r,t.JJ,t.On,W.O5],encapsulation:2,changeDetection:0}),g})(),p=(()=>{class g{}return g.\u0275fac=function(b){return new(b||g)},g.\u0275mod=r.oAB({type:g}),g.\u0275inj=r.cJS({imports:[[W.ez,M.b,t.u5,j.$B]]}),g})()},3823:(Ct,Y,s)=>{"use strict";s.d(Y,{Z:()=>j,_:()=>nt});var r=s(5e3),t=s(9808);let j=(()=>{class O{constructor(M,W){this.renderer=M,this.elementRef=W,this.negativeClass="bb-amount--negative",this.positiveClass="bb-amount--positive",this.amountValue=0,this.highlightValue=!0}set amount(M){this.amountValue="number"==typeof M?M:parseFloat(M)}set bbHighlight(M){this.highlightValue=""===M||M}get isPositive(){return this.amountValue>=0}ngOnChanges(M){M.negativeClass&&this.renderer.removeClass(this.elementRef.nativeElement,M.negativeClass.previousValue),M.positiveClass&&this.renderer.removeClass(this.elementRef.nativeElement,M.positiveClass.previousValue),(M.amount||M.highlight||M.bbHighlight)&&(this.renderer.removeClass(this.elementRef.nativeElement,this.negativeClass),this.renderer.removeClass(this.elementRef.nativeElement,this.positiveClass)),this.highlightValue&&this.renderer.addClass(this.elementRef.nativeElement,this.isPositive?this.positiveClass:this.negativeClass)}}return O.\u0275fac=function(M){return new(M||O)(r.Y36(r.Qsj),r.Y36(r.SBq))},O.\u0275dir=r.lG2({type:O,selectors:[["","bbHighlight",""]],inputs:{amount:"amount",bbHighlight:"bbHighlight",negativeClass:"negativeClass",positiveClass:"positiveClass"},features:[r.TTD]}),O})(),nt=(()=>{class O{}return O.\u0275fac=function(M){return new(M||O)},O.\u0275mod=r.oAB({type:O}),O.\u0275inj=r.cJS({imports:[[t.ez]]}),O})()},7159:(Ct,Y,s)=>{"use strict";s.d(Y,{LZ:()=>K});var r=s(5e3),t=s(3075),L=s(1089),z=s(4619),j=s(9287),nt=s(9808);let K=(()=>{class A{}return A.\u0275fac=function(E){return new(E||A)},A.\u0275mod=r.oAB({type:A}),A.\u0275inj=r.cJS({imports:[[nt.ez,t.UX,z.b,j.Q,L.J]]}),A})()},7921:(Ct,Y,s)=>{"use strict";s.d(Y,{Jb:()=>k,UX:()=>$,u3:()=>$});var r=s(9808),t=s(5e3),L=s(7656),z=s(9287);function j(p,g){if(1&p&&(t.TgZ(0,"span",8),t._uU(1),t.qZA(),t.TgZ(2,"span",9),t.SDv(3,10),t.qZA()),2&p){const f=g.$implicit;t.xp6(1),t.Oqu(f),t.xp6(2),t.pQV(f),t.QtT(3)}}function nt(p,g){1&p&&t._UZ(0,"bb-icon-ui",11)}function O(p,g){1&p&&t._UZ(0,"bb-icon-ui",12)}function J(p,g){1&p&&t._UZ(0,"bb-icon-ui",13)}function M(p,g){1&p&&t._UZ(0,"bb-icon-ui",14)}function W(p,g){1&p&&(t.TgZ(0,"span",15),t._uU(1,"..."),t.qZA())}function h(p,g){if(1&p){const f=t.EpF();t.TgZ(0,"ngb-pagination",1),t.NdJ("pageChange",function(B){return t.CHM(f),t.oxw().onPageChange(B)}),t.YNc(1,j,4,2,"ng-template",2),t.YNc(2,nt,1,0,"ng-template",3),t.YNc(3,O,1,0,"ng-template",4),t.YNc(4,J,1,0,"ng-template",5),t.YNc(5,M,1,0,"ng-template",6),t.YNc(6,W,2,0,"ng-template",7),t.qZA()}if(2&p){const f=t.oxw();t.Q6J("boundaryLinks",f.boundaryLinks)("collectionSize",f.totalItems)("directionLinks",f.directionLinks)("maxSize",f.maxNavPages)("pageSize",f.itemsPerPage)("page",f.page+1)("rotate",!0)}}let k=(()=>{class p{constructor(){this.page=1,this.boundaryLinks=!1,this.directionLinks=!1,this.totalItems=0,this.itemsPerPage=10,this.maxNavPages=5,this.pageChange=new t.vpe}onPageChange(f){this.pageChange.emit(f-1)}}return p.\u0275fac=function(f){return new(f||p)},p.\u0275cmp=t.Xpm({type:p,selectors:[["bb-pagination-ui"]],inputs:{page:"page",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",totalItems:"totalItems",itemsPerPage:"itemsPerPage",maxNavPages:"maxNavPages"},outputs:{pageChange:"pageChange"},features:[t._Bn([L.pM])],decls:1,vars:1,consts:function(){let g;return g="page " + "\ufffd0\ufffd" + "",[["class","d-flex justify-content-center bb-pagination",3,"boundaryLinks","collectionSize","directionLinks","maxSize","pageSize","page","rotate","pageChange",4,"ngIf"],[1,"d-flex","justify-content-center","bb-pagination",3,"boundaryLinks","collectionSize","directionLinks","maxSize","pageSize","page","rotate","pageChange"],["ngbPaginationNumber",""],["ngbPaginationFirst",""],["ngbPaginationPrevious",""],["ngbPaginationNext",""],["ngbPaginationLast",""],["ngbPaginationEllipsis",""],["aria-hidden","true"],[1,"sr-only"],g,["data-role","pagination-icon-first","size","md","name","first-page"],["data-role","pagination-icon-previous","size","md","name","chevron-left"],["data-role","pagination-icon-next","size","md","name","chevron-right"],["data-role","pagination-icon-last","size","md","name","last-page"],["data-role","pagination-ellipsis",1,"bb-pagination__ellipsis"]]},template:function(f,b){1&f&&t.YNc(0,h,7,7,"ngb-pagination",0),2&f&&t.Q6J("ngIf",+b.itemsPerPage<+b.totalItems)},directives:[L.N9,z.o,r.O5,L.LD,L.eC,L.ju,L.GZ,L.pV,L.tg],encapsulation:2}),p})(),$=(()=>{class p{}return p.\u0275fac=function(f){return new(f||p)},p.\u0275mod=t.oAB({type:p}),p.\u0275inj=t.cJS({imports:[[r.ez,L.jF,z.Q]]}),p})()}}]);