(self.webpackChunkretail_usa=self.webpackChunkretail_usa||[]).push([[4738],{2674:()=>{},4738:(Jt,Je,d)=>{"use strict";d.d(Je,{UB:()=>ft,Ol:()=>Yt,KH:()=>Me,tc:()=>de,Op:()=>Dt,qx:()=>Tt,xy:()=>ne,IE:()=>ht,Ok:()=>Ae,$c:()=>ce,nL:()=>ue,Hx:()=>te,zh:()=>u,Nm:()=>K,J6:()=>U,yA:()=>O,Gu:()=>C,N$:()=>se,ag:()=>v,Oq:()=>Ee,JR:()=>ie,sV:()=>re,hi:()=>Nt,y7:()=>bt,X8:()=>Oe,QS:()=>ge,Kn:()=>ye,X$:()=>Be});var e=d(5e3),m=d(9808),T=d(5357),N=d(3075),L=d(8505),P=d(1135),b=d(4004),D=d(262),h=d(9646),Ke=d(9841),F=d(3900),x=d(590),Y=d(7579),we=d(2722),y=(d(2674),d(6305));var H=d(5556),G=d(4951),q=d(5622),I=d(7605),R=d(5460),k=d(7555),j=d(9633),z=d(3759),$=d(8639),Q=d(6966),A=d(429),le=d(1892),He=d(7656);const Ge=["successHeader"],qe=["errorHeader"];function ke(n,a){1&n&&(e.TgZ(0,"div"),e._UZ(1,"bb-loading-indicator-ui",5),e.qZA())}function je(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",6),e._UZ(2,"bb-empty-state-ui",7),e.TgZ(3,"div",8)(4,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw().enrolUser()}),e.SDv(5,10),e.qZA()()()()}}function ze(n,a){1&n&&(e.TgZ(0,"span"),e.SDv(1,11),e.qZA())}function $e(n,a){1&n&&(e.TgZ(0,"span"),e.SDv(1,12),e.qZA())}function Qe(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",23),e.SDv(2,24),e.qZA(),e.TgZ(3,"div",25),e._uU(4),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(4),e.hij(" ",null==t.paymentReview||null==t.paymentReview.paymentAccount?null:t.paymentReview.paymentAccount.accountNickName," ")}}function Ve(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",26),e.SDv(2,27),e.qZA(),e.TgZ(3,"div",28),e._uU(4),e.ALo(5,"paymentCardNumber"),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(4),e.hij(" ",e.xi3(5,1,null==t.paymentReview?null:t.paymentReview.payeeAccountNumber,t.accountNumberFormatConfig)," ")}}function Xe(n,a){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Oqu(null==t?null:t.address2)}}function et(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",29),e.SDv(2,30),e.qZA(),e.TgZ(3,"div",31)(4,"div"),e._uU(5),e.qZA(),e.YNc(6,Xe,2,1,"div",3),e.TgZ(7,"div"),e._uU(8),e.qZA()(),e.BQk()),2&n){const t=a.ngIf;e.xp6(5),e.Oqu(null==t?null:t.address1),e.xp6(1),e.Q6J("ngIf",null==t?null:t.address2),e.xp6(2),e.lnq("",null==t?null:t.city,"\xa0",null==t?null:t.state,"\xa0",null==t?null:t.postalCode,"")}}function tt(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",32),e.SDv(2,33),e.qZA(),e.TgZ(3,"div",34),e._uU(4),e.ALo(5,"currency"),e.qZA(),e.TgZ(6,"div",35),e.SDv(7,36),e.qZA(),e.TgZ(8,"div",1),e._UZ(9,"bb-amount-ui",37),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(4),e.hij(" ",e.Dn7(5,3,null==t.paymentReview||null==t.paymentReview.fee?null:t.paymentReview.fee.amount,null==t.paymentReview||null==t.paymentReview.fee?null:t.paymentReview.fee.currencyCode,"symbol-narrow")," "),e.xp6(5),e.Q6J("amount",t.totalAmount)("currency",null==t.paymentReview||null==t.paymentReview.amount?null:t.paymentReview.amount.currencyCode)}}function nt(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",38),e.SDv(2,39),e.qZA(),e.TgZ(3,"div",40),e._uU(4),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(4),e.Oqu(null==t.paymentReview?null:t.paymentReview.paymentMemo)}}function _t(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",41),e.SDv(2,42),e.qZA(),e.TgZ(3,"div",43),e.SDv(4,44),e.qZA(),e.TgZ(5,"div",45),e._uU(6),e.ALo(7,"date"),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(6),e.hij(" ",e.xi3(7,1,null==t.paymentReview?null:t.paymentReview.paymentDate,"fullDate")," ")}}function at(n,a){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Oqu(null==t?null:t.address2)}}function ot(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",46),e.SDv(2,47),e.qZA(),e.TgZ(3,"div",48)(4,"div"),e._uU(5),e.qZA(),e.YNc(6,at,2,1,"div",3),e.TgZ(7,"div"),e._uU(8),e.qZA()(),e.BQk()),2&n){const t=a.ngIf;e.xp6(5),e.Oqu(null==t?null:t.address1),e.xp6(1),e.Q6J("ngIf",null==t?null:t.address2),e.xp6(2),e.lnq("",null==t?null:t.city,"\xa0",null==t?null:t.state,"\xa0",null==t?null:t.postalCode,"")}}function lt(n,a){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.frequencyLabel)}}function it(n,a){if(1&n&&(e.TgZ(0,"span"),e.SDv(1,59),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.pQV(null==t.paymentReview?null:t.paymentReview.frequency),e.QtT(1)}}function rt(n,a){if(1&n&&(e.TgZ(0,"span"),e.SDv(1,60),e.ALo(2,"date"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.pQV(null==t.paymentReview?null:t.paymentReview.numberOfInstances)(null==t.paymentReview?null:t.paymentReview.numberOfInstances)(e.xi3(2,3,t.getEndDate(null==t.paymentReview?null:t.paymentReview.paymentDate,null==t.paymentReview?null:t.paymentReview.numberOfInstances,null==t.paymentReview?null:t.paymentReview.frequency),"longDate")),e.QtT(1)}}function st(n,a){1&n&&(e.TgZ(0,"span"),e.SDv(1,61),e.qZA())}function Et(n,a){1&n&&(e.TgZ(0,"div",62),e.SDv(1,63),e.qZA())}function St(n,a){1&n&&(e.TgZ(0,"li",64),e.SDv(1,65),e.qZA())}function dt(n,a){1&n&&(e.TgZ(0,"li",66),e.SDv(1,67),e.qZA())}function ct(n,a){1&n&&(e.TgZ(0,"li",68),e.SDv(1,69),e.qZA())}function At(n,a){if(1&n&&(e.TgZ(0,"div",41),e.YNc(1,lt,2,1,"ng-container",21),e.YNc(2,it,2,1,"ng-template",null,49,e.W1O),e.qZA(),e.TgZ(4,"div",43),e.SDv(5,50),e.qZA(),e.TgZ(6,"div",45),e._uU(7),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"div",51),e.SDv(10,52),e.qZA(),e.TgZ(11,"div",53),e.YNc(12,rt,3,6,"span",21),e.YNc(13,st,2,0,"ng-template",null,54,e.W1O),e.qZA(),e.YNc(15,Et,2,0,"div",55),e.TgZ(16,"div")(17,"ul"),e.YNc(18,St,2,0,"li",56),e.YNc(19,dt,2,0,"li",57),e.YNc(20,ct,2,0,"li",58),e.qZA()()),2&n){const t=e.MAs(3),_=e.MAs(14),o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.frequencyLabel)("ngIfElse",t),e.xp6(6),e.hij(" ",e.xi3(8,9,null==o.paymentReview?null:o.paymentReview.paymentDate,"fullDate")," "),e.xp6(5),e.Q6J("ngIf",null==o.paymentReview?null:o.paymentReview.numberOfInstances)("ngIfElse",_),e.xp6(3),e.Q6J("ngIf",(null==o.paymentReview?null:o.paymentReview.paymentScheduledAlert)||(null==o.paymentReview?null:o.paymentReview.paymentSentAlert)||(null==o.paymentReview?null:o.paymentReview.modelExpirationAlert)),e.xp6(3),e.Q6J("ngIf",null==o.paymentReview?null:o.paymentReview.paymentScheduledAlert),e.xp6(1),e.Q6J("ngIf",null==o.paymentReview?null:o.paymentReview.paymentSentAlert),e.xp6(1),e.Q6J("ngIf",null==o.paymentReview?null:o.paymentReview.modelExpirationAlert)}}const V=function(n,a){return[n,a]};function Mt(n,a){1&n&&e._UZ(0,"bb-header-ui",4)}function ut(n,a){1&n&&(e.TgZ(0,"span",5),e.SDv(1,6),e.qZA())}function Ot(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().cancelModal()}),e.SDv(1,8),e.qZA(),e.TgZ(2,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw().confirmModal()}),e.SDv(3,10),e.qZA()}}function Bt(n,a){1&n&&e._UZ(0,"bb-header-ui",4)}function yt(n,a){1&n&&(e.TgZ(0,"span",5),e.SDv(1,6),e.qZA())}function pt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().cancelModal()}),e.SDv(1,8),e.qZA(),e.TgZ(2,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw().confirmModal()}),e.SDv(3,10),e.qZA()}}function mt(n,a){1&n&&e._UZ(0,"bb-header-ui",5)}function Ct(n,a){if(1&n&&(e.TgZ(0,"span",6),e.SDv(1,7),e.qZA()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.pQV((null==t?null:t.nickName)||(null==t?null:t.name)),e.QtT(1)}}function gt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).cancelModal()}),e.SDv(1,9),e.qZA(),e.TgZ(2,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).confirmModal()}),e.SDv(3,11),e.qZA()}}function Lt(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"bb-modal-ui",1),e.NdJ("cancel",function(){return e.CHM(t),e.oxw().cancelModal()}),e.TgZ(2,"bb-modal-header-ui"),e.YNc(3,mt,1,0,"ng-template",2),e.qZA(),e.TgZ(4,"bb-modal-body-ui"),e.YNc(5,Ct,2,1,"ng-template",3),e.qZA(),e.TgZ(6,"bb-modal-footer-ui"),e.YNc(7,gt,4,0,"ng-template",4),e.qZA()(),e.BQk()}2&n&&(e.xp6(1),e.Q6J("isOpen",!0))}const ie={length:0,maskRange:[0,0],segments:0},re={length:9,maskRange:[0,5],segments:0},se="oneOff",Ee="recurring",X="enrolment";var U=(()=>{return(n=U||(U={})).Never="never",n.On="on",n.After="after",U;var n})(),O=(()=>{return(n=O||(O={})).Once="ONCE",n.Weekly="WEEKLY",n.Biweekly="EVERY_2_WEEKS",n.Monthly="MONTHLY",n.EveryTwoWeeks="EVERY_2_WEEKS",n.SemiMonthly="TWICE_A_MONTH",n.EveryFourWeeks="EVERY_4_WEEKS",n.EveryTwoMonths="EVERY_2_MONTHS",n.Quarterly="EVERY_3_MONTHS",n.EverySixMonths="EVERY_6_MONTHS",n.Annually="ANNUALLY",O;var n})(),v=(()=>{return(n=v||(v={})).Regular="REGULAR_PAYMENT",n.Overnight="OVERNIGHT_CHECK",n.Expedited="EXPEDITED_PAYMENT",n.Other="OTHER",v;var n})(),C=(()=>{return(n=C||(C={}))[n.Loading=0]="Loading",n[n.Error=1]="Error",n[n.Inactive=2]="Inactive",C;var n})(),K=(()=>{return(n=K||(K={})).ASC="ASC",n.DESC="DESC",K;var n})();class ft{constructor(a,t){this.router=a,this.location=t}canDeactivate(a,t,_,o){const l=this.allowedNextRoutes.some(r=>r.test(o.url)),i=this.allowedPreviousRoutes.some(r=>r.test(_.url));return l&&i&&_.url!==o.url||a.openModal().pipe((0,L.b)(r=>{if(!r){const E=this.router.createUrlTree([],t);this.location.go(E.toString())}}))}}const Se=[{name:"Weekly",value:O.Weekly},{name:"Every two weeks",value:O.Biweekly},{name:"Monthly",value:O.Monthly}],bt=[{name:"Once",value:O.Once},...Se],Nt={emitEvent:!1},It=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"];let ee=(()=>{class n{constructor(t,_,o){this.dataService=t,this.route=_,this.router=o,this.previousRoute=new P.X(void 0),this.getRoutePath=(l,i)=>(l.snapshot&&l.snapshot.routeConfig&&l.snapshot.routeConfig.path&&(i+="/"+l.snapshot.routeConfig.path),l.firstChild?this.getRoutePath(l.firstChild,i):i)}enrolUser(){return this.dataService.postBillPayEnrolment("response").pipe((0,b.U)(t=>204===t.status),(0,D.K)(t=>(0,h.of)(204===t.status)))}isEnrolled(){return this.dataService.getBillPayEnrolment().pipe((0,b.U)(t=>t.enrolment.enrolled),(0,D.K)(()=>(0,h.of)(!1)))}getCurrentRoute(){return this.getRoutePath(this.route,"")}redirectUser(t){t&&!t.includes(X)?this.router.navigateByUrl(t):this.router.navigate(["./"])}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(y.YL),e.LFG(T.gz),e.LFG(T.F0))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),de=(()=>{class n{constructor(t,_){this.router=t,this.enrolmentService=_}canActivate(t,_){return this.enrolmentService.isEnrolled().pipe((0,b.U)(o=>{const l=this.enrolmentService.getCurrentRoute();if(!o&&!(null==l?void 0:l.endsWith(X))){this.enrolmentService.previousRoute.next(_.url);const i=t.pathFromRoot.map(s=>{var S;return null===(S=null==s?void 0:s.routeConfig)||void 0===S?void 0:S.path}).filter(s=>!!s);return this.router.navigate([...i,X]),!1}return!0}))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(T.F0),e.LFG(ee))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ce=(()=>{class n{constructor(t){this.locale=t,this.decimalSeparator=(0,m.dv)(this.locale,m.wE.CurrencyDecimal)}paymentRecurringToFormState(t,_){const o=t.recurring&&Se.find(i=>i.value===t.frequency),l=t.numberOfInstances?U.After:U.Never;return Object.assign(Object.assign({},this.parsePaymentCommonResponse(t,_)),{schedule:Object.assign({repeat:t.numberOfInstances,endType:l,startDate:t.paymentDate,alertPendingCheckbox:t.paymentScheduledAlert||!1,alertSentCheckbox:t.paymentSentAlert||!1,alertLastPendingCheckbox:t.modelExpirationAlert||!1},o&&{frequency:o.value})})}paymentOneOffToFormState(t,_){return Object.assign(Object.assign({},this.parsePaymentCommonResponse(t,_)),{schedule:{startDate:t.paymentDate,alertPendingCheckbox:!1,alertSentCheckbox:!1,alertLastPendingCheckbox:!1,frequency:O.Once}})}paymentFormStateToReview({accountFrom:t,payeeTo:_,amount:o,memo:l,schedule:i,overnightDeliveryAddress:s}){return Object.assign(Object.assign(Object.assign(Object.assign({amount:{amount:o.amount.replace(this.decimalSeparator,"."),currencyCode:o.currency},paymentDate:i.paymentServiceDate||i.startDate,paymentAccount:t,recurring:i.frequency!==O.Once},l&&{paymentMemo:l}),s&&{overnightDeliveryAddress:s}),this.parsePaymentFormPayee(_)),this.parsePaymentFormSchedule(i))}paymentAndPayeeResponsesToReview(t,_){return Object.assign(Object.assign({},this.paymentResponseToReview(t)),_.address&&{address:_.address})}paymentResponseToReview(t){var i=function We(n,a){var t={};for(var _ in n)Object.prototype.hasOwnProperty.call(n,_)&&a.indexOf(_)<0&&(t[_]=n[_]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(_=Object.getOwnPropertySymbols(n);o<_.length;o++)a.indexOf(_[o])<0&&Object.prototype.propertyIsEnumerable.call(n,_[o])&&(t[_[o]]=n[_[o]])}return t}(t,["id","status","ebillID"]);return i}parsePaymentFormPayee(t){return Object.assign(Object.assign({payeeID:t.id,payeeName:t.name},t.accountNumber&&{payeeAccountNumber:t.accountNumber}),t.nickName&&{payeeNickName:t.nickName})}parsePaymentFormSchedule(t){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.getScheduleFee(t)&&{fee:this.getScheduleFee(t)}),t.repeat&&{numberOfInstances:t.repeat}),t.frequency!==O.Once&&{frequency:t.frequency}),t.alertPendingCheckbox&&{paymentScheduledAlert:t.alertPendingCheckbox}),t.alertSentCheckbox&&{paymentSentAlert:t.alertSentCheckbox}),t.alertLastPendingCheckbox&&{modelExpirationAlert:t.alertLastPendingCheckbox})}getScheduleFee(t){return t.paymentService&&(t.paymentService.index===v.Expedited||t.paymentService.index===v.Overnight)&&t.paymentService.service&&t.paymentService.service.fee||void 0}parsePaymentCommonResponse(t,_){const o=_.find(i=>i.id===t.payeeID),l=t.amount&&{currency:t.amount.currencyCode,amount:t.amount.amount.replace(this.decimalSeparator,".")};return Object.assign(Object.assign(Object.assign(Object.assign({paymentId:t.id},t.amount&&{amount:l}),o&&{payeeTo:o}),t.paymentAccount&&{accountFrom:t.paymentAccount}),t.paymentMemo&&{memo:t.paymentMemo})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(e.soG))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),te=(()=>{class n{get today(){return this.getLocalISODate(new Date)}estimatedEndDate(t,_,o=0){const l=new Date(t);switch(_){case O.Monthly:return l.setMonth(l.getMonth()+o);case O.Biweekly:return new Date(l.setDate(l.getDate()-1)).setHours(0,0,0)+864e5*o*14;case O.Weekly:return new Date(l.setDate(l.getDate()-1)).setHours(0,0,0)+864e5*o*7;default:return l.getTime()}}estimatedOccurences(t,_,o){const l=new Date(t),i=new Date(_);switch(o){case O.Monthly:return this.toMonthDifference(l,i);case O.Biweekly:return Math.ceil(this.toDaysDifference(l,i)/14);case O.Weekly:return Math.ceil(this.toDaysDifference(l,i)/7);default:return 1}}estimatedPaymentServiceDate(t,_){const o=t&&t.find(l=>!(!l||l.paymentServiceType!==_));return o?new Date(o.cutoffTime).getTime()<new Date(o.earliestPaymentDate).getTime()?this.getLocalISODate(o.earliestPaymentDate):this.getLocalISODate(o.nextPaymentDate):this.today}toMonthDifference(t,_){const o=_.getMonth(),l=t.getMonth(),i=_.getDate(),s=t.getDate(),S=new Date(_.getFullYear(),o+1,0).getDate(),r=new Date(t.getFullYear(),l+1,0).getDate();let E=12*(_.getFullYear()-t.getFullYear())-l+o-1;return E=E<=0?0:E,E+(s<=i&&l!==o||s===r&&i===S&&l!==o?2:1)}toDaysDifference(t,_){const o=_.getTime()-t.getTime(),l=Math.ceil(Math.abs(o)/864e5);return o<0?0:l?l+1:1}getLocalISODate(t){if("string"==typeof t&&/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/g.test(t))return t;const o=new Date(t),l=6e4*o.getTimezoneOffset();return new Date(o.getTime()+l).toISOString()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),u=(()=>{class n{static checkForProperty(t,_){let o=[];return o="string"==typeof t?t.split("."):t,o.reduce((l,i)=>l&&l[i]?l[i]:void 0,_)}static generateId(){return Math.floor(Math.random()*Date.now()).toString()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n{constructor(t,_,o,l){this.paymentData=t,this.accountsData=_,this.payeesSummaryData=o,this.locale=l,this.currentPayeesLoadingState=C.Inactive,this.currentAccountsLoadingState=C.Inactive,this.reload=new P.X(void 0),this.decimalSeparator=(0,m.dv)(this.locale,m.wE.CurrencyDecimal)}get payeesLoadingState(){return this.currentPayeesLoadingState}get accountsLoadingState(){return this.currentAccountsLoadingState}getOneOffPayment(t){return this.paymentData.getPaymentById({id:t}).pipe((0,b.U)(_=>_.payment))}getRecurringPayment(t){return this.paymentData.getRecurringPaymentById({id:t}).pipe((0,b.U)(_=>_.payment))}getPayeesAndAccounts(){return(0,Ke.a)([this.getPayees(),this.getAccounts()]).pipe((0,b.U)(([t,_])=>Object.assign(Object.assign({},t),_)))}createPayment(t){return t.schedule.frequency===O.Once?this.paymentData.postBillPayPayments({billPayPaymentsPostRequestBody:{payments:[this.toPaymentRequest(t)]}}):this.paymentData.postBillPayRecurringPayments({billPayRecurringPaymentsPostRequestBody:{payment:this.toRecurringPaymentRequest(t)}})}updatePaymentRecurring(t,_){return this.paymentData.putRecurringPaymentById({id:_,recurringPaymentByIdPutRequestBody:{payment:this.toRecurringPaymentRequest(t)}})}updatePaymentOneOff(t,_){return this.paymentData.putPaymentById({id:_,paymentByIdPutRequestBody:{payment:this.toPaymentRequest(t)}})}getPayees(){return this.reload.asObservable().pipe((0,L.b)(()=>this.currentPayeesLoadingState=C.Loading),(0,F.w)(()=>this.payeesSummaryData.getBillPayPayeesSummary()),(0,L.b)(()=>this.currentPayeesLoadingState=C.Inactive),(0,D.K)(()=>(this.currentPayeesLoadingState=C.Error,(0,h.of)(void 0))))}getAccounts(){return this.reload.asObservable().pipe((0,L.b)(()=>this.currentAccountsLoadingState=C.Loading),(0,F.w)(()=>this.accountsData.getBillPayAccounts()),(0,L.b)(()=>this.currentAccountsLoadingState=C.Inactive),(0,D.K)(()=>(this.currentAccountsLoadingState=C.Error,(0,h.of)(void 0))))}toShortISODate(t){return(0,m.p6)(t,"yyyy-MM-dd",this.locale)}toPaymentRequest({payeeTo:{id:t},accountFrom:{accountNumber:_,routingNumber:o,accountType:l,id:i},amount:s,memo:S,schedule:r,overnightDeliveryAddress:E}){return Object.assign(Object.assign(Object.assign(Object.assign({payeeID:t,paymentAccount:Object.assign(Object.assign({},i&&{id:i}),{accountNumber:_,routingNumber:o,accountType:l})},r.paymentService&&r.paymentService.service&&{paymentServiceType:r.paymentService.service.paymentServiceType}),{amount:{amount:s.amount.replace(this.decimalSeparator,"."),currencyCode:s.currency},paymentDate:this.toShortISODate(r.startDate)}),S&&{paymentMemo:S}),E&&{overnightDeliveryAddress:Object.assign({address1:E.address1,state:E.state,city:E.city,postalCode:E.postalCode},E.address2&&{address2:E.address2})})}toRecurringPaymentRequest({payeeTo:{id:t},accountFrom:{accountNumber:_,routingNumber:o,accountType:l,id:i},amount:s,schedule:S,memo:r}){return Object.assign(Object.assign(Object.assign(Object.assign({payeeID:t,paymentAccount:Object.assign(Object.assign({},i&&{id:i}),{accountNumber:_,routingNumber:o,accountType:l}),amount:{amount:s.amount.replace(this.decimalSeparator,"."),currencyCode:s.currency}},r&&{paymentMemo:r}),{paymentDate:this.toShortISODate(S.startDate)}),S.repeat&&{numberOfInstances:S.repeat}),{frequency:S.frequency,paymentScheduledAlert:S.alertPendingCheckbox,paymentSentAlert:S.alertSentCheckbox,modelExpirationAlert:S.alertLastPendingCheckbox})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(y.D6),e.LFG(y.xu),e.LFG(y.r1),e.LFG(e.soG))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n{constructor(t,_,o){this.billpayEnrolmentService=t,this.cd=_,this.notificationService=o,this.enrolmentFailed=!1,this.loading=!1,this.notificationHeaderSuccessTemplate="",this.notificationHeaderErrorTemplate=""}ngOnInit(){this.loading=!0,this.billpayEnrolmentService.isEnrolled().pipe((0,x.P)()).subscribe(t=>{t?(this.loading=!1,this.redirectUser()):this.enrolUser()},()=>{this.onEnrolFail(),this.cd.markForCheck()})}enrolUser(){this.loading=!0,this.enrolmentFailed=!1,this.billpayEnrolmentService.enrolUser().pipe((0,x.P)()).subscribe(t=>{t?this.onEnrolSuccess():this.onEnrolFail(),this.cd.markForCheck()})}onEnrolSuccess(){this.loading=!1,this.notificationService.showNotification({header:this.notificationHeaderSuccessTemplate,message:"",modifier:"success",ttl:this.notificationDismissTime}),this.redirectUser()}onEnrolFail(){this.loading=!1,this.enrolmentFailed=!0,this.notificationService.showNotification({header:this.notificationHeaderErrorTemplate,message:"",modifier:"error",ttl:this.notificationDismissTime})}redirectUser(){this.billpayEnrolmentService.previousRoute.pipe((0,x.P)()).subscribe(t=>{this.billpayEnrolmentService.redirectUser(t||"")})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ee),e.Y36(e.sBO),e.Y36(H.gq))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-billpay-enrolment"]],viewQuery:function(t,_){if(1&t&&(e.Gf(Ge,5),e.Gf(qe,5)),2&t){let o;e.iGM(o=e.CRH())&&(_.notificationHeaderSuccessTemplate=o.first),e.iGM(o=e.CRH())&&(_.notificationHeaderErrorTemplate=o.first)}},inputs:{notificationDismissTime:"notificationDismissTime"},decls:8,vars:2,consts:function(){let a,t,_,o,l,i;return a="Enrolling in the bill pay service...",t="Try enrolling again or contact support",_="Enrolment failed",o=" Try enrolling again ",l="Enrolment successful",i="Enrolment failed",[[1,"card","card-lg"],[1,"card-body"],[4,"ngIf"],["successHeader",""],["errorHeader",""],["text",a,"loaderSize","lg"],[1,"bb-state-container"],["data-role","error-state","iconSize","xxl","iconColor","danger","iconModifier","error-outline","subtitle",t,"title",_],[1,"bb-state-container__footer"],["bbButton","","data-role","button-enrolment-retry",3,"click"],o,l,i]},template:function(t,_){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,ke,2,0,"div",2),e.YNc(3,je,6,0,"div",2),e.qZA()(),e.YNc(4,ze,2,0,"ng-template",null,3,e.W1O),e.YNc(6,$e,2,0,"ng-template",null,4,e.W1O)),2&t&&(e.xp6(2),e.Q6J("ngIf",_.loading),e.xp6(1),e.Q6J("ngIf",_.enrolmentFailed))},directives:[G.Q,q.s,m.O5,I.Hq],encapsulation:2,changeDetection:0}),n})(),ue=(()=>{class n{constructor(t){this.scheduleService=t,this.accountNumberMask=!0}get totalAmount(){return(Number(this.paymentReview&&this.paymentReview.fee&&this.paymentReview.fee.amount)||0)+(Number(this.paymentReview&&this.paymentReview.amount&&this.paymentReview.amount.amount)||0)}get accountNumberFormatConfig(){return this.accountNumberMask?re:ie}getEndDate(t,_,o){return this.scheduleService.estimatedEndDate(t,o,_)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(te))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-billpay-payment-review-card"]],inputs:{paymentReview:"paymentReview",accountNumberMask:"accountNumberMask",frequencyLabel:"frequencyLabel"},decls:38,vars:16,consts:function(){let a,t,_,o,l,i,s,S,r,E,p,M,g,f,B,Le,fe,be,Ne,Ie,Re,w,Ue,W,ve,Pe,De,he,Ye,Te;return a="From",t=" Account type ",_="{VAR_SELECT, select, CD_ACCOUNT {CD account} CHECKING_ACCOUNT {Checking account} SAVINGS_ACCOUNT {Savings account} LOAN_ACCOUNT {Loan account} OTHER_ACCOUNT {Other account}}",_=e.Zx4(_,{VAR_SELECT:"\ufffd0\ufffd"}),o=" " + _ + " ",l=" Account number ",i="To",s=" Payee name ",S="Payment details",r=" Amount ",E=" Frequency ",p=" Account name ",M=" Payee account number ",g=" Payee address ",f=" Expedited payment fee ",B=" Total amount ",Le=" Memo ",fe=" Once ",be=" Deliver payment by ",Ne=" Overnight check address ",Ie=" Deliver first payment by ",Re=" Ending ",w="{VAR_SELECT, select, ONCE {Once} WEEKLY {Weekly} EVERY_2_WEEKS {Every two weeks} MONTHLY {Monthly} EVERY_4_WEEKS {Every for weeks} TWICE_A_MONTH {Semi monthly} EVERY_2_MONTHS {Every two months} EVERY_3_MONTHS {Every three months} EVERY_6_MONTHS {Every six months} ANNUALLY {Annually}}",w=e.Zx4(w,{VAR_SELECT:"\ufffd0\ufffd"}),Ue=" " + w + " ",W="{VAR_PLURAL, plural, =1 {{INTERPOLATION} payment } other {{INTERPOLATION} payments }}",W=e.Zx4(W,{VAR_PLURAL:"\ufffd0\ufffd",INTERPOLATION:"\ufffd1\ufffd"}),ve="After " + W + " (estimated " + "\ufffd2\ufffd" + ")",Pe="Never ",De=" Notify me ",he=" When a payment is pending ",Ye=" When a payment has been sent ",Te=" When the last payment is pending ",[[1,"bb-block","bb-block--xl"],[1,"bb-block","bb-block--md"],["data-role","from-title","headingClasses","h3","headingType","h2","heading",a],[4,"ngIf"],["data-role","account-type-label",1,"bb-text-bold"],t,["data-role","account-type",1,"bb-block","bb-block--md"],o,["data-role","account-number-label",1,"bb-text-bold"],l,["data-role","account-number"],["headingType","h2","headingClasses","h3","heading",i,"data-role","to-title"],["data-role","payee-name-label",1,"bb-text-bold"],s,["data-role","payee-name",1,"bb-block","bb-block--md"],["headingType","h3","heading",S,"data-role","payment-details-title"],["data-role","amount-label",1,"bb-text-bold"],r,["data-role","amount",3,"amount","currency"],["data-role","frequency-label",1,"bb-text-bold"],E,[4,"ngIf","ngIfElse"],["recurringFrequency",""],["data-role","account-name-label",1,"bb-text-bold"],p,["data-role","account-name",1,"bb-block","bb-block--md"],["data-role","payee-account-number-label",1,"bb-text-bold"],M,["data-role","payee-account-number",1,"bb-block","bb-block--md"],["data-role","payee-address-label",1,"bb-text-bold"],g,["data-role","payee-address",1,"bb-block","bb-block--md"],["data-role","fee-label",1,"bb-text-bold"],f,["data-role","fee-amount",1,"bb-block","bb-block--md"],["data-role","total-amount-label",1,"bb-text-bold"],B,["data-role","total-amount",3,"amount","currency"],["data-role","memo-label",1,"bb-text-bold"],Le,["data-role","memo",1,"bb-block","bb-block--md"],["data-role","frequency",1,"bb-block","bb-block--md"],fe,["data-role","deliver-by",1,"bb-text-bold"],be,["data-role","deliver-date",1,"bb-block","bb-block--md"],["data-role","overnight-address-label",1,"bb-text-bold"],Ne,["data-role","overnight-address",1,"bb-block","bb-block--md"],["defaultLabels",""],Ie,["data-role","ending-label",1,"bb-text-bold"],Re,["data-role","ending",1,"bb-block","bb-block--md"],["neverEnding",""],["class","bb-text-bold","data-role","notify-label",4,"ngIf"],["data-role","alertPendingCheckbox",4,"ngIf"],["data-role","alertSentCheckbox",4,"ngIf"],["data-role","alertLastPendingCheckbox",4,"ngIf"],Ue,ve,Pe,["data-role","notify-label",1,"bb-text-bold"],De,["data-role","alertPendingCheckbox"],he,["data-role","alertSentCheckbox"],Ye,["data-role","alertLastPendingCheckbox"],Te]},template:function(t,_){if(1&t&&(e.TgZ(0,"section",0)(1,"div",1),e._UZ(2,"bb-header-ui",2),e.qZA(),e.YNc(3,Qe,5,1,"ng-container",3),e.TgZ(4,"div",4),e.SDv(5,5),e.qZA(),e.TgZ(6,"div",6),e.SDv(7,7),e.qZA(),e.TgZ(8,"div",8),e.SDv(9,9),e.qZA(),e.TgZ(10,"div",10),e._uU(11),e.ALo(12,"paymentCardNumber"),e.qZA()(),e.TgZ(13,"section",0)(14,"div",1),e._UZ(15,"bb-header-ui",11),e.qZA(),e.TgZ(16,"div",12),e.SDv(17,13),e.qZA(),e.TgZ(18,"div",14)(19,"span"),e._uU(20),e.qZA()(),e.YNc(21,Ve,6,4,"ng-container",3),e.YNc(22,et,9,5,"ng-container",3),e.qZA(),e.TgZ(23,"section")(24,"div",1),e._UZ(25,"bb-header-ui",15),e.qZA(),e.TgZ(26,"div",16),e.SDv(27,17),e.qZA(),e.TgZ(28,"div",1),e._UZ(29,"bb-amount-ui",18),e.qZA(),e.YNc(30,tt,10,7,"ng-container",3),e.YNc(31,nt,5,1,"ng-container",3),e.TgZ(32,"div",19),e.SDv(33,20),e.qZA(),e.YNc(34,_t,8,4,"ng-container",21),e.YNc(35,ot,9,5,"ng-container",3),e.YNc(36,At,21,12,"ng-template",null,22,e.W1O),e.qZA()),2&t){const o=e.MAs(37);e.xp6(3),e.Q6J("ngIf",null==_.paymentReview||null==_.paymentReview.paymentAccount?null:_.paymentReview.paymentAccount.accountNickName),e.xp6(4),e.pQV(null==_.paymentReview||null==_.paymentReview.paymentAccount?null:_.paymentReview.paymentAccount.accountType),e.QtT(7),e.xp6(4),e.hij(" ",e.xi3(12,13,null==_.paymentReview||null==_.paymentReview.paymentAccount?null:_.paymentReview.paymentAccount.accountNumber,_.accountNumberFormatConfig)," "),e.xp6(9),e.Oqu((null==_.paymentReview?null:_.paymentReview.payeeNickName)&&(null==_.paymentReview?null:_.paymentReview.payeeNickName)+" ("+(null==_.paymentReview?null:_.paymentReview.payeeName)+")"||(null==_.paymentReview?null:_.paymentReview.payeeName)),e.xp6(1),e.Q6J("ngIf",null==_.paymentReview?null:_.paymentReview.payeeAccountNumber),e.xp6(1),e.Q6J("ngIf",null==_.paymentReview?null:_.paymentReview.address),e.xp6(7),e.Q6J("amount",null==_.paymentReview||null==_.paymentReview.amount?null:_.paymentReview.amount.amount)("currency",null==_.paymentReview||null==_.paymentReview.amount?null:_.paymentReview.amount.currencyCode),e.xp6(1),e.Q6J("ngIf",null==_.paymentReview?null:_.paymentReview.fee),e.xp6(1),e.Q6J("ngIf",null==_.paymentReview?null:_.paymentReview.paymentMemo),e.xp6(3),e.Q6J("ngIf",!(null!=_.paymentReview&&_.paymentReview.recurring))("ngIfElse",o),e.xp6(1),e.Q6J("ngIf",null==_.paymentReview?null:_.paymentReview.overnightDeliveryAddress)}},directives:[R.G,k.G4,m.O5],pipes:[j.V9,m.H9,m.uU],encapsulation:2,changeDetection:0}),n})(),Oe=(()=>{class n{constructor(t){this.controlContainer=t,this.states=It,this.address1RequiredId=u.generateId(),this.address1MaxLengthId=u.generateId(),this.address2MaxLengthId=u.generateId(),this.cityRequiredId=u.generateId(),this.cityMaxlengthId=u.generateId(),this.stateLengthId=u.generateId(),this.postalCodeRequiredId=u.generateId(),this.postalCodePatternId=u.generateId(),this.labelId=u.generateId()}ngAfterContentInit(){this.formGroup=this.controlContainer.control}hasError(t,_){const o=this.formGroup&&this.formGroup.get(t);return!!o&&o.hasError(_)&&o.touched}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(N.gN))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-billpay-address-form"]],decls:37,vars:34,consts:function(){let a,t,_,o,l,i,s,S,r,E,p,M,g,f;return a="Address line 1",t=" Please enter a street number and name ",_=" Address may not be over forty characters ",o="Address line 2",l=" (Optional)",i=" Address may not be over forty characters ",s="City",S=" Please enter a City ",r=" City may not be over thirty-two characters ",E="State",p=" Please enter a State ",M="ZIP Code",g=" Please enter a Zip Code ",f=" ZIP code should be 5 or 9 digits long ",[[3,"formGroup"],[1,"bb-block","bb-block--md"],[1,"bb-form-field","bb-form-field--md"],["formControlName","address1","data-role","address1-input","label",a,3,"aria-describedby"],["role","alert","data-role","address1-error-required",3,"showErrors","messageId"],t,["role","alert","data-role","address1-error-maxlength",3,"showErrors","messageId"],_,["data-role","address2-input-label",1,"bb-label"],o,[1,"bb-text-default","bb-text-support"],l,["formControlName","address2","data-role","address2-input",3,"aria-labelledby","aria-describedby"],["role","alert","data-role","address2-error-maxlength",3,"showErrors","messageId"],i,[1,"bb-form-field","bb-form-field--sm"],["formControlName","city","data-role","city-input","label",s,3,"aria-describedby"],["role","alert","data-role","city-error-required",3,"showErrors","messageId"],S,["role","alert","data-role","city-error-maxlength",3,"showErrors","messageId"],r,[1,"bb-form-field","bb-form-field--xs"],["label",E,"formControlName","state","data-role","state-select",3,"options","aria-describedby"],["role","alert","data-role","state-error-required",3,"showErrors","messageId"],p,["formControlName","postalCode","data-role","postal-code-input","label",M,3,"aria-describedby"],["role","alert","data-role","postal-code-error-required",3,"showErrors","messageId"],g,["role","alert","data-role","postal-code-error-pattern",3,"showErrors","messageId"],f]},template:function(t,_){1&t&&(e.ynx(0,0),e.TgZ(1,"div",1)(2,"div",2),e._UZ(3,"bb-input-text-ui",3),e.qZA(),e.TgZ(4,"bb-input-validation-message-ui",4),e.SDv(5,5),e.qZA(),e.TgZ(6,"bb-input-validation-message-ui",6),e.SDv(7,7),e.qZA()(),e.TgZ(8,"div",1)(9,"div",2)(10,"label",8)(11,"span"),e.SDv(12,9),e.qZA(),e.TgZ(13,"span",10),e.SDv(14,11),e.qZA()(),e._UZ(15,"bb-input-text-ui",12),e.qZA(),e.TgZ(16,"bb-input-validation-message-ui",13),e.SDv(17,14),e.qZA()(),e.TgZ(18,"div",1)(19,"div",15),e._UZ(20,"bb-input-text-ui",16),e.qZA(),e.TgZ(21,"bb-input-validation-message-ui",17),e.SDv(22,18),e.qZA(),e.TgZ(23,"bb-input-validation-message-ui",19),e.SDv(24,20),e.qZA()(),e.TgZ(25,"div",1)(26,"div",21),e._UZ(27,"bb-dropdown-single-select-ui",22),e.qZA(),e.TgZ(28,"bb-input-validation-message-ui",23),e.SDv(29,24),e.qZA()(),e.TgZ(30,"div",1)(31,"div",21),e._UZ(32,"bb-input-text-ui",25),e.qZA(),e.TgZ(33,"bb-input-validation-message-ui",26),e.SDv(34,27),e.qZA(),e.TgZ(35,"bb-input-validation-message-ui",28),e.SDv(36,29),e.qZA()(),e.BQk()),2&t&&(e.Q6J("formGroup",_.formGroup),e.xp6(3),e.Q6J("aria-describedby",e.WLB(25,V,_.address1RequiredId,_.address1MaxLengthId).join(" ")),e.xp6(1),e.Q6J("showErrors",_.hasError("address1","required"))("messageId",_.address1RequiredId),e.xp6(2),e.Q6J("showErrors",_.hasError("address1","maxlength"))("messageId",_.address1MaxLengthId),e.xp6(4),e.uIk("id","bb-address-label"+_.labelId),e.xp6(5),e.Q6J("aria-labelledby","bb-address-label"+_.labelId)("aria-describedby",_.address2MaxLengthId),e.xp6(1),e.Q6J("showErrors",_.hasError("address2","maxlength"))("messageId",_.address2MaxLengthId),e.xp6(4),e.Q6J("aria-describedby",e.WLB(28,V,_.cityRequiredId,_.cityMaxlengthId).join(" ")),e.xp6(1),e.Q6J("showErrors",_.hasError("city","required"))("messageId",_.cityRequiredId),e.xp6(2),e.Q6J("showErrors",_.hasError("city","maxlength"))("messageId",_.cityMaxlengthId),e.xp6(4),e.Q6J("options",_.states)("aria-describedby",_.stateLengthId),e.xp6(1),e.Q6J("showErrors",_.hasError("state","required"))("messageId",_.stateLengthId),e.xp6(4),e.Q6J("aria-describedby",e.WLB(31,V,_.postalCodeRequiredId,_.postalCodePatternId).join(" ")),e.xp6(1),e.Q6J("showErrors",_.hasError("postalCode","required"))("messageId",_.postalCodeRequiredId),e.xp6(2),e.Q6J("showErrors",_.hasError("postalCode","pattern"))("messageId",_.postalCodePatternId))},directives:[z.m,$.d,Q.Pp,N.JL,N.sg,N.JJ,N.u],encapsulation:2}),n})(),Be=(()=>{class n{constructor(){this.resolve=new e.vpe}cancelModal(){this.resolve.emit(!1)}confirmModal(){this.resolve.emit(!0)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-billpay-payee-navigate-modal"]],outputs:{resolve:"resolve"},decls:7,vars:1,consts:function(){let a,t,_,o;return a="Payee cannot be deleted",t="This payee has upcoming payments which must be canceled before deleting.",_=" Keep payee ",o=" View scheduled payments ",[["data-role","payee-navigate-modal",3,"isOpen","cancel"],["bbCustomModalHeader",""],["bbCustomModalBody",""],["bbCustomModalFooter",""],["data-role","payee-navigate-modal-header","headingType","h2","heading",a],["data-role","payee-navigate-modal-body"],t,["bbButton","","color","secondary","data-role","payee-navigate-modal-cancel-button",3,"click"],_,["bbButton","","color","primary","data-role","payee-navigate-modal-confirm-button",3,"click"],o]},template:function(t,_){1&t&&(e.TgZ(0,"bb-modal-ui",0),e.NdJ("cancel",function(){return _.cancelModal()}),e.TgZ(1,"bb-modal-header-ui"),e.YNc(2,Mt,1,0,"ng-template",1),e.qZA(),e.TgZ(3,"bb-modal-body-ui"),e.YNc(4,ut,2,0,"ng-template",2),e.qZA(),e.TgZ(5,"bb-modal-footer-ui"),e.YNc(6,Ot,4,0,"ng-template",3),e.qZA()()),2&t&&e.Q6J("isOpen",!0)},directives:[A.zS,A.Rb,R.G,A.KF,A.YI,A.cA,A.Qd,A.yk,I.Hq],encapsulation:2}),n})(),ye=(()=>{class n{constructor(){this.resolve=new e.vpe}cancelModal(){this.resolve.emit(!1)}confirmModal(){this.resolve.emit(!0)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-billpay-payee-delete-modal"]],outputs:{resolve:"resolve"},decls:7,vars:1,consts:function(){let a,t,_,o;return a="Delete payee?",t="Are you sure you want to delete this payee? This action cannot be undone.",_=" Keep payee ",o=" Delete payee ",[["data-role","payee-delete-modal",3,"isOpen","cancel"],["bbCustomModalHeader",""],["bbCustomModalBody",""],["bbCustomModalFooter",""],["data-role","payee-delete-modal-header","headingType","h2","heading",a],["data-role","payee-delete-modal-body"],t,["bbButton","","color","secondary","data-role","payee-delete-modal-cancel-button",3,"click"],_,["bbButton","","color","danger","data-role","payee-delete-modal-confirm-button",3,"click"],o]},template:function(t,_){1&t&&(e.TgZ(0,"bb-modal-ui",0),e.NdJ("cancel",function(){return _.cancelModal()}),e.TgZ(1,"bb-modal-header-ui"),e.YNc(2,Bt,1,0,"ng-template",1),e.qZA(),e.TgZ(3,"bb-modal-body-ui"),e.YNc(4,yt,2,0,"ng-template",2),e.qZA(),e.TgZ(5,"bb-modal-footer-ui"),e.YNc(6,pt,4,0,"ng-template",3),e.qZA()()),2&t&&e.Q6J("isOpen",!0)},directives:[A.zS,A.Rb,R.G,A.KF,A.YI,A.cA,A.Qd,A.yk,I.Hq],encapsulation:2}),n})();const pe={cancelPendingPayments:!1};let ne=(()=>{class n{constructor(t,_,o,l){this.data=t,this.payverisData=_,this.ebillsData=o,this.payeesSummaryData=l,this.selectedDeletePayeeSource=new P.X(void 0),this.selectedDeleteEbillsSource=new P.X(void 0),this.reload=new P.X(void 0),this.buttonsDisabled=!1,this.currentPayeesLoadingState="",this.iterablePayeeSummaryList=[]}deletePayee(t,_){return _?this.data.deleteElectronicPayeeById(Object.assign(Object.assign({},pe),{id:t})):this.data.deletePayeeById(Object.assign(Object.assign({},pe),{id:t}))}resolveErrors(t){return this.payverisData.postBillPayPayverisResolveEbillErrors({billPayPayverisResolveEbillErrorsPostRequestBody:{payeeID:t}})}deleteEbills(t){return this.ebillsData.deleteBillPayEbills({id:t})}getPayees(){return this.reload.asObservable().pipe((0,L.b)(()=>this.currentPayeesLoadingState="loading"),(0,F.w)(()=>this.payeesSummaryData.getBillPayPayeesSummary().pipe((0,b.U)(Rt))),(0,L.b)(t=>function Ut(n){me(n.ebillsEnabled),me(n.ebillsNotEnabled)}(t)),(0,L.b)(t=>this.createIterablePayeeSummaryList(t)),(0,L.b)(()=>{this.currentPayeesLoadingState=""}),(0,D.K)(()=>(this.currentPayeesLoadingState="error",(0,h.of)(void 0))))}createIterablePayeeSummaryList(t){this.iterablePayeeSummaryList=[];for(let _=0;_<t.ebillsEnabled.length;_++)this.iterablePayeeSummaryList.push(t.ebillsEnabled[_]);for(let _=0;_<t.ebillsNotEnabled.length;_++)this.iterablePayeeSummaryList.push(t.ebillsNotEnabled[_])}reloadPayees(){this.reload.next(void 0)}disableWidgetButtons(){this.buttonsDisabled=!0}enableWidgetButtons(){this.buttonsDisabled=!1}updateSelectedDeletePayee(t){this.selectedDeletePayeeSource.next(t)}updateSelectedDeleteEbills(t){this.selectedDeleteEbillsSource.next(t)}get selectedDeletePayee(){return this.selectedDeletePayeeSource.asObservable()}get selectedDeleteEbills(){return this.selectedDeleteEbillsSource.asObservable()}get payeesLoadingState(){return this.currentPayeesLoadingState}get areButtonsDisabled(){return this.buttonsDisabled}get numberOfPayees(){return this.iterablePayeeSummaryList.length}payeesLoaded(){const t=this;return new Promise(function(_){!function o(){if(""===t.currentPayeesLoadingState)return _(!0);setTimeout(o,100)}()})}findPayeeSummaryById(t){return function Fe(n,a,t,_){return new(t||(t=Promise))(function(l,i){function s(E){try{r(_.next(E))}catch(p){i(p)}}function S(E){try{r(_.throw(E))}catch(p){i(p)}}function r(E){E.done?l(E.value):function o(l){return l instanceof t?l:new t(function(i){i(l)})}(E.value).then(s,S)}r((_=_.apply(n,a||[])).next())})}(this,void 0,void 0,function*(){if(yield this.payeesLoaded())return this.iterablePayeeSummaryList.find(_=>_.id===t)})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(y.cE),e.LFG(y.Du),e.LFG(y.Fe),e.LFG(y.r1))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();function Rt(n){return n.payeeSummaries.reduce((t,_)=>(t[_.ebill&&_.ebill.enabled?"ebillsEnabled":"ebillsNotEnabled"].push(_),t),{ebillsEnabled:[],ebillsNotEnabled:[]})}function me(n){n.sort((a,t)=>Ce(a.name,a.nickName).toLowerCase()>Ce(t.name,t.nickName).toLowerCase()?1:-1)}function Ce(n,a){return a||n}let ge=(()=>{class n{constructor(t){this.payeeListWidgetService=t,this.resolve=new e.vpe}get selectedDeleteEbills$(){return this.payeeListWidgetService.selectedDeleteEbills}cancelModal(){this.resolve.emit(!1)}confirmModal(){this.resolve.emit(!0)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ne))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-billpay-ebills-delete-modal"]],outputs:{resolve:"resolve"},decls:2,vars:3,consts:function(){let a,t,_,o;return a="Stop receiving eBills?",t="Are you sure you want to stop receiving eBills for the payee " + "\ufffd0\ufffd" + "?",_=" Keep eBills ",o=" Stop receiving eBills ",[[4,"ngIf"],["data-role","ebills-delete-modal",3,"isOpen","cancel"],["bbCustomModalHeader",""],["bbCustomModalBody",""],["bbCustomModalFooter",""],["data-role","ebills-delete-modal-header","headingType","h2","heading",a],["data-role","ebills-delete-modal-body"],t,["bbButton","","color","secondary","data-role","ebills-delete-modal-cancel-button",3,"click"],_,["bbButton","","color","danger","data-role","ebills-delete-modal-confirm-button",3,"click"],o]},template:function(t,_){1&t&&(e.YNc(0,Lt,8,1,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,_.selectedDeleteEbills$))},directives:[A.zS,A.Rb,R.G,A.KF,A.YI,m.O5,A.cA,A.Qd,A.yk,I.Hq],pipes:[m.Ov],encapsulation:2}),n})();const vt=[I.hJ,G.p,q.P,H.PQ,R.O,k.i7,j.nj,$.w,Q.CS,A.zk,z.j,le.O],Pt=[ee,de,ce,te,u,Ae,y.YL,y.cE,y.Du,y.Fe,y.r1,y.D6,y.xu];let Dt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[...Pt],imports:[[m.ez,T.Bz,N.UX,...vt],I.hJ,G.p,q.P,H.PQ,R.O,k.i7,j.nj,$.w,Q.CS,A.zk,z.j,le.O]}),n})(),ht=(()=>{class n{constructor(t,_){this.dataService=t,this.dropdownButtonConfig=_,this.RECURRING_PAYMENT=Ee,this.ONE_OFF_PAYMENT=se,this.ebillRetrieveErrorId=u.generateId(),this.noEbillsDueId=u.generateId(),this.ebillsAvailableId=u.generateId(),this.recurringPaymentScheduledIdId=u.generateId(),this.ebillPaymentScheduledId=u.generateId(),this.ebillDueOnId=u.generateId(),this.ebillSupportErrorId=u.generateId(),this.ebillUserActionErrorId=u.generateId(),this.ebillUnknownErrorId=u.generateId(),this.payeeAmountId=u.generateId(),this.destroy$=new Y.x,_.placement="bottom-right"}ngOnDestroy(){this.destroy$.next(void 0),this.destroy$.complete()}handleStopEbills(t){t.preventDefault(),this.dataService.updateSelectedDeleteEbills(this.payeeSummary)}handleDeletePayee(t){t.preventDefault(),this.dataService.updateSelectedDeletePayee(this.payeeSummary&&!this.payeeSummary.nextPayment&&this.payeeSummary||void 0)}get payeeName(){return this.payeeSummary&&(this.payeeSummary.nickName||this.payeeSummary.name)||""}get payeeId(){return this.payeeSummary&&this.payeeSummary.id||""}get areButtonsDisabled(){return this.dataService.areButtonsDisabled}get areRecurringPaymentsScheduled(){const t=this.payeeSummary;return!(!t||!t.hasRecurringPayments)}get areEbillsInErrorState(){return this.isEbillsStatusInError()}get isEbillsErrorUnknown(){return this.ebillErrorEquals("ERROR")}get isEbillsErrorUpdateCredentials(){return this.ebillErrorEquals("UPDATE_CREDENTIALS")}get isEbillsErrorNotSupported(){return this.ebillErrorEquals("NOT_SUPPORTED")}get isEbillsErrorUserAction(){return this.ebillErrorEquals("USER_ACTION")}handleResolveEbillsErrors(){this.payeeSummary&&this.dataService.resolveErrors(this.payeeSummary.id).pipe((0,we.R)(this.destroy$)).subscribe(t=>{this.isEbillEnrolmentFlowRequired(t)?this.handleGetEbills():this.dataService.reloadPayees()})}isEbillEnrolmentFlowRequired(t){return t.accounts&&t.accounts.length>0||t.billers&&t.billers.length>0||t.authentication||t.callBackTime}get areEbillsAvailable(){return this.isEbillCapable()&&!this.isEbillEnabled()}get areEbillsDue(){return this.isEbillEnabled()&&this.hasLatestEbill()&&!this.latestEbillPaid()}get isLatestEbillPaid(){return this.latestEbillPaid()}get areEbillsEnabledButNotDue(){return this.isEbillEnabled()&&!this.hasLatestEbill()&&!this.isEbillsStatusInError()}get ebillLink(){return this.getLatestEbillURL()}get showStopEbills(){return this.isEbillEnabled()}get payeeType(){return this.payeeSummary.electronic?"electronic":"manual"}isEbillsStatusInError(){var t,_;return"ACTIVE"!==(null===(_=null===(t=this.payeeSummary)||void 0===t?void 0:t.ebill)||void 0===_?void 0:_.status)}ebillErrorEquals(t){var _;const o=null===(_=this.payeeSummary)||void 0===_?void 0:_.ebill;return!(!o||o.status!==t)}hasLatestEbill(){var t,_;return!!(null===(_=null===(t=this.payeeSummary)||void 0===t?void 0:t.ebill)||void 0===_?void 0:_.latestBill)}latestEbillPaid(){var t,_,o;return"PAID"===(null===(o=null===(_=null===(t=this.payeeSummary)||void 0===t?void 0:t.ebill)||void 0===_?void 0:_.latestBill)||void 0===o?void 0:o.status)}getLatestEbillURL(){var t,_,o;return(null===(o=null===(_=null===(t=this.payeeSummary)||void 0===t?void 0:t.ebill)||void 0===_?void 0:_.latestBill)||void 0===o?void 0:o.url)||""}isEbillCapable(){var t,_;return!!(null===(_=null===(t=this.payeeSummary)||void 0===t?void 0:t.ebill)||void 0===_?void 0:_.capable)}isEbillEnabled(){var t,_;return!!(null===(_=null===(t=this.payeeSummary)||void 0===t?void 0:t.ebill)||void 0===_?void 0:_.enabled)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ne),e.Y36(He.jL))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],inputs:{payeeSummary:"payeeSummary"},decls:0,vars:0,template:function(t,_){},encapsulation:2}),n})(),Yt=(()=>{class n{constructor(t){this.cdRef=t,this.isDiscardModalOpen=!1,this.modalResolve$=new Y.x}openModal(){return this.isDiscardModalOpen=!0,this.cdRef.detach(),this.cdRef.detectChanges(),this.modalResolve$.asObservable().pipe((0,L.b)(()=>this.cdRef.reattach()))}onModalResolve(t){this.isDiscardModalOpen=!1,this.cdRef.detectChanges(),this.modalResolve$.next(t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(e.sBO))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),Tt=(()=>{class n{constructor(){this._upcommingPaymentsSubject=new Y.x,this.upcommingPaymentsSubject$=this._upcommingPaymentsSubject.asObservable(),this._managePaymentSubject=new Y.x,this.managePaymentSubject$=this._managePaymentSubject.asObservable(),this._managePayeesSubject=new Y.x,this.managePayeesSubject$=this._managePayeesSubject.asObservable()}navigateToPayments(){this._upcommingPaymentsSubject.next(void 0)}navigateToNewPayment(t){this._managePaymentSubject.next(t)}navigateToPayees(){this._managePayeesSubject.next(void 0)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}]);