"use strict";(self.webpackChunkretail_usa=self.webpackChunkretail_usa||[]).push([[9565],{9565:(ve,W,h)=>{h.d(W,{Mt:()=>De,jC:()=>ge,sO:()=>me,tE:()=>fe});var l=h(9808),t=h(5e3),c=h(3075),_=h(7656),L=h(9144),$=h(7605),N=h(9287),E=h(1135),A=h(5091),g=h(4483),y=h(682);const G=function(n,o){return{"is-selected":n,"text-muted":o}},q=function(n,o,e,a,i,r,s){return{"is-range-selected":n,"is-faded":o,"is-faded-from-date":e,"is-hovered":a,"text-muted":i,"from-date":r,"to-date":s}},J=["datePicker"],Y=["datePickerTo"],Z=["datePickerInput"],Q=["datePickerInputRange"],j=["datePickerInputTo"],z=["datePickerButton"],X=["datePickerButtonTo"];function ee(n,o){if(1&n&&(t.TgZ(0,"label",14),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.s9C("for",e.id),t.xp6(1),t.Oqu(e.label)}}function te(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"input",15,16),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.onInputFocus(i.clickOpen)})("focus",function(){t.CHM(e);const i=t.oxw();return i.onInputFocus(i.focusOpen)})("blur",function(i){return t.CHM(e),t.oxw().onControlBlur(i)})("input",function(){t.CHM(e);const i=t.MAs(3),r=t.oxw();return r.rangeSelectionSplit?r.onInputChangeSplitRange(i):r.onInputChange(i)})("closed",function(){return t.CHM(e),t.oxw().onClosed()})("dateSelect",function(i){t.CHM(e);const r=t.oxw();return r.rangeSelectionSplit?r.onRangeDateSelectSplit(i):null})("ngModelChange",function(i){t.CHM(e);const r=t.MAs(3),s=t.oxw();return s.autoMask(r),s.rangeSelectionSplit?null:s.onChange(i)}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(),a=t.MAs(16),i=t.MAs(14),r=t.MAs(3);t.xp6(1),t.s9C("id",e.id),t.Q6J("minDate",e._minDate)("maxDate",e._maxDate)("markDisabled",e.markDisabled)("readOnly",e.readonly)("required",e.required)("navigation",e.navigation)("dayTemplate",e.rangeSelectionSplit?a:i)("displayMonths",e.displayMonths)("formControl",e.dateInput)("placement",e.placement)("positionTarget",r)("restoreFocus",!e.rangeSelectionSplit)("firstDayOfWeek",e.firstDayOfWeek)("autoClose",!e.rangeSelectionSplit)("maxlength",e.maskLength),t.uIk("placeholder",e.placeholder)("aria-labelledby",e.ariaLabelledby)("aria-describedby",e.datepickerDescribedby)("aria-expanded",e.ariaExpanded)("role",e.role)("aria-invalid",e.ariaInvalid)("aria-owns",e.ariaOwns)("aria-activedescendant",e.ariaActivedescendant)("aria-label",!e.label&&e.ariaLabel||null)("data-role","input-date-single")("autocomplete",e.autocomplete)}}function ae(n,o){if(1&n&&(t.TgZ(0,"span"),t.SDv(1,20),t.ALo(2,"date"),t.qZA()),2&n){const e=t.oxw().ngIf;t.xp6(2),t.pQV(t.xi3(2,1,e.date.year+"-"+e.date.month+"-"+e.date.day,"longDate")),t.QtT(1)}}function ie(n,o){if(1&n&&(t.ynx(0),t.SDv(1,21),t.ALo(2,"date"),t.BQk()),2&n){const e=t.oxw(2).ngIf;t.xp6(2),t.pQV(t.xi3(2,1,e.date.year+"-"+e.date.month+"-"+e.date.day,"longDate")),t.QtT(1)}}function ne(n,o){if(1&n&&t.YNc(0,ie,3,4,"ng-container",18),2&n){const e=t.oxw().ngIf;t.Q6J("ngIf",e.date)}}function oe(n,o){if(1&n&&(t.ynx(0),t.YNc(1,ae,3,4,"span",4),t.YNc(2,ne,1,1,"ng-template",null,19,t.W1O),t.BQk()),2&n){const e=o.ngIf,a=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isSelecting)("ngIfElse",a)}}function re(n,o){if(1&n&&(t.TgZ(0,"div",17),t.YNc(1,oe,4,2,"ng-container",18),t.ALo(2,"async"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.hoveredDate$))}}function se(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"input",22,23),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.onInputFocusTo(i.clickOpen)})("focus",function(){t.CHM(e);const i=t.oxw();return i.onInputFocusTo(i.focusOpen)})("blur",function(i){return t.CHM(e),t.oxw().onControlBlur(i)})("input",function(){t.CHM(e);const i=t.MAs(3),r=t.oxw();return r.rangeSelectionSplit?r.onInputChangeSplitRangeTo(i):r.onInputChange(i)})("closed",function(){return t.CHM(e),t.oxw().onClosedTo()})("dateSelect",function(i){t.CHM(e);const r=t.oxw();return r.rangeSelectionSplit?r.onRangeDateSelectSplitTo(i):null})("ngModelChange",function(){t.CHM(e);const i=t.MAs(3);return t.oxw().autoMask(i)}),t.qZA(),t.TgZ(4,"div",6)(5,"button",7,24),t.NdJ("blur",function(i){return t.CHM(e),t.oxw().onControlBlur(i)})("click",function(i){return t.CHM(e),t.oxw().onPickerTogglerClickTo(i)}),t._UZ(7,"bb-icon-ui",9),t.qZA()()()}if(2&n){const e=t.oxw(),a=t.MAs(16);t.xp6(1),t.MGl("id","to_",e.id,""),t.Q6J("minDate",e._minDate)("maxDate",e._maxDate)("markDisabled",e.markDisabled)("readOnly",e.readonly)("required",e.required)("displayMonths",e.displayMonths)("navigation",e.navigation)("restoreFocus",!1)("dayTemplate",a)("dayTemplateData",e.rangeTemplateData)("formControl",e.dateInputTo)("placement",e.placement)("firstDayOfWeek",e.firstDayOfWeek)("autoClose",!e.rangeSelectionSplit),t.uIk("placeholder",e.placeholder)("aria-labelledby",e.ariaLabelledby)("aria-describedby",e.datepickerDescribedby)("aria-expanded",e.ariaExpanded)("role",e.role)("aria-invalid",e.ariaInvalid)("aria-owns",e.ariaOwns)("aria-activedescendant",e.ariaActivedescendant)("aria-label",!e.label&&e.ariaLabel||null)("data-role","input-date-single")("autocomplete",e.autocomplete),t.xp6(4),t.Q6J("color",e.btnColor)("disabled",e.disabled||e.readonly),t.uIk("aria-label",e.ariaLabelForButton)("data-role","toggle-calendar-button"),t.xp6(2),t.Q6J("color",e.iconColor)("name",e.icon)("size",e.iconSize)}}function le(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"input",25,26),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.onInputFocus(i.clickOpen)})("focus",function(){t.CHM(e);const i=t.oxw();return i.onInputFocus(i.focusOpen)})("blur",function(i){return t.CHM(e),t.oxw().onControlBlur(i)})("input",function(){t.CHM(e);const i=t.MAs(1);return t.oxw().onInputChangeRange(i)})("ngModelChange",function(){t.CHM(e);const i=t.MAs(1);return t.oxw().autoMask(i)}),t.qZA(),t.TgZ(2,"input",27,28),t.NdJ("closed",function(){return t.CHM(e),t.oxw().onClosed()})("dateSelect",function(i){return t.CHM(e),t.oxw().onRangeDateSelect(i)}),t.qZA()}if(2&n){const e=t.oxw(),a=t.MAs(3),i=t.MAs(16);t.s9C("id",e.id),t.Q6J("formControl",e.dateInput)("readOnly",e.readonly)("required",e.required)("maxlength",e.maskLength),t.uIk("placeholder",e.placeholder)("aria-label",!e.label&&e.ariaLabel||null)("aria-describedby",e.datepickerDescribedby)("aria-labelledby",e.ariaLabelledby)("aria-expanded",e.ariaExpanded)("role",e.role)("aria-invalid",e.ariaInvalid)("aria-owns",e.ariaOwns)("aria-activedescendant",e.ariaActivedescendant)("data-role","input-date-range"),t.xp6(2),t.Q6J("minDate",e._minDate)("maxDate",e._maxDate)("markDisabled",e.markDisabled)("autoClose",!1)("readOnly",e.readonly)("required",e.required)("firstDayOfWeek",e.firstDayOfWeek)("positionTarget",a)("placement",e.placement)("dayTemplate",i),t.uIk("aria-label",e.label||e.ariaLabel||null)("aria-describedby",e.datepickerDescribedby)("aria-labelledby",e.ariaLabelledby)("aria-expanded",e.ariaExpanded)("role",e.role)("aria-invalid",e.ariaInvalid)("aria-owns",e.ariaOwns)("aria-activedescendant",e.ariaActivedescendant)("data-role","input-datepicker")}}function de(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"bb-input-datepicker-single-day-template-ui",29),t.NdJ("hovered",function(i){return t.CHM(e),t.oxw().onDayHover(i)}),t.qZA()}if(2&n){const e=o.date,a=o.disabled,i=o.selected,r=o.currentMonth,s=o.data,p=t.oxw();t.Q6J("disabled",a)("selected",i)("currentMonth",r)("date",e)("hoveredDate",null!=s&&s.isTo?p.pickerHoveredDayDateTo:p.hoveredDate$.getValue().date)}}function ue(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"bb-input-datepicker-range-day-template-ui",30),t.NdJ("hovered",function(i){return t.CHM(e),t.oxw().onDayHover(i)}),t.qZA()}if(2&n){const e=o.date,a=o.disabled,i=o.currentMonth,r=o.data,s=t.oxw();t.Q6J("date",e)("fromDate",s.fromDate$.getValue())("toDate",s.toDate$.getValue())("splitRange",s.rangeSelectionSplit)("toDateDatepicker",null==r?null:r.isTo)("disabled",a)("currentMonth",i)("hoveredDate",null!=r&&r.isTo?s.pickerHoveredDayDateTo:s.hoveredDate$.getValue().date)}}const ce=function(n,o,e){return{"ng-invalid":n,"ng-touched":o,"bb-input-datepicker__range-split-wrapper":e}},pe=new t.OlP("datepickerI18");let he=(()=>{class n extends _.wf{constructor(e,a){super(),this.datepickerI18=a;const i=(0,l.Mn)(e,l.x.Standalone,l.Tn.Short);this.weekdaysShort=i.map((r,s)=>i[(s+1)%7]),this.monthsShort=(0,l.UT)(e,l.x.Standalone,l.Tn.Abbreviated),this.monthsFull=(0,l.UT)(e,l.x.Standalone,l.Tn.Wide)}getWeekdayLabel(e){return this.datepickerI18?this.datepickerI18.getWeekdayLabel(e):this.weekdaysShort[e-1]}getMonthShortName(e){return this.datepickerI18?this.datepickerI18.getMonthShortName(e):this.monthsShort[e-1]}getMonthFullName(e){return this.datepickerI18?this.datepickerI18.getMonthFullName(e):this.monthsFull[e-1]}getDayAriaLabel(e){return this.datepickerI18?this.datepickerI18.getDayAriaLabel(e):`${e.day}-${e.month}-${e.year}`}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(t.soG),t.LFG(pe,8))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();const w=(n,o)=>!!n&&Object.prototype.hasOwnProperty.call(n,o)&&"number"==typeof n[o],U=n=>w(n,"day")&&w(n,"month")&&w(n,"year");let _e=(()=>{class n extends _.DO{fromModel(e){if(e){const a=new Date(e),i=a.getFullYear();if(i)return{year:i,month:a.getMonth()+1,day:a.getDate()}}return null}toModel(e){return e?"string"==typeof e?e:U(e)?new Date(e.year,e.month-1,e.day).toISOString():Object.prototype.toString.call(e):""}}return n.\u0275fac=function(){let o;return function(a){return(o||(o=t.n5z(n)))(a||n)}}(),n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),f=(()=>{class n extends _.NG{constructor(e,a){super(),this.locale=e,this.datePipe=a}get localeDateFormat(){return this._dateFormat||(0,l.wS)(this.locale,l.tM.Short)}set dateFormat(e){this._dateFormat=e}static getAdaptedYear(e,a,i,r){return e=new Date(e,a-1,i).getFullYear(),r&&r.length<3&&e<1950&&(e+=100),e}static getIndexFromFormat(e,a){return a.findIndex(r=>!Boolean(r.replace(e,"")))}interpretDate(e){const a=new Date(e);if(isNaN(a.getTime()))return;const i=a.getFullYear();return this.getYearLength(e)<3&&i<1950&&!e.includes(String(i))&&1900===new Date("01/01/00").getFullYear()&&a.setFullYear(i+100),a}parse(e){if(!e)return null;const i=this.localeDateFormat.match(/[^GyMLwWdE]/),r=i&&i[0],s=new RegExp("[\\d"+r+"]+");if(r&&!Boolean(e.replace(s,""))){const p=this.getFormatParsedDate(e,this.localeDateFormat,r);if(p)return p}return this.getAngularPipeFormatParseDate(e)}getAngularPipeFormatParseDate(e){let a="";try{a=this.datePipe.transform(e,this.localeDateFormat,void 0,this.locale)||""}catch(r){}const i=this.interpretDate(e);return a&&i?{year:i.getFullYear(),month:i.getMonth()+1,day:i.getDate()}:null}getFormatParsedDate(e,a,i){const r=e.split(i),s=a.split(i);if(3===s.length){const p=n.getIndexFromFormat(/d{1,2}/,s),S=n.getIndexFromFormat(/M{1,5}/,s),d=n.getIndexFromFormat(/y{1,4}/,s);if(p>-1&&S>-1&&d>-1){const u=new Date,v=r[d]?Number(r[d]):u.getFullYear(),m=r[S]?Number(r[S]):u.getMonth()+1,D=r[p]?Number(r[p]):u.getDate();return{day:D,month:m,year:n.getAdaptedYear(v,m,D,r[d])}}}return null}getYearLength(e){const a=String(this.localeDateFormat.match(/[^\w\*]/)),i=e.split(a),s=this.localeDateFormat.toLocaleLowerCase().split(a).findIndex(p=>p.includes("y"));return s>=0&&s<i.length?i[s].length:0}format(e,a=this.localeDateFormat){let i="";return e&&U(e)&&(i=this.datePipe.transform(new Date(e.year,e.month-1,e.day),a,void 0,this.locale)||""),i}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(t.soG),t.LFG(l.uU))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var I=(()=>{return(n=I||(I={}))[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",I;var n})();class b{constructor(o,e){this.formatterHelper=o,this.browserService=e,this.selected=!1,this.disabled=!1,this.hoveredDate=null,this.hovered=new t.vpe,this.isTextMuted=!1,this.isHovered=!1,this.format=a=>this.formatterHelper.format(a),this.isIE=this.browserService.browserIsMSIE()}ngOnChanges(o){var e,a;((null==o?void 0:o.selected)||(null==o?void 0:o.disabled)||(null==o?void 0:o.date)||(null==o?void 0:o.currentMonth))&&(this.isTextMuted=!this.selected&&(this.disabled||(null===(e=this.date)||void 0===e?void 0:e.month)!==+this.currentMonth)),this.isHovered=null===(a=this.date)||void 0===a?void 0:a.equals(this.hoveredDate)}onMouseOut(){this.hovered.emit({date:null,isSelecting:!1})}onMouseOver(){this.hovered.emit({date:this.date,isSelecting:!0})}onKeyUp(o){const e=o.target.textContent,a=this.isIE?Object.values(I).includes(null==o?void 0:o.keyCode):b.hangledKeyCodes.includes(null==o?void 0:o.key);Number(e)===this.date.day&&Number(this.currentMonth)===this.date.month&&a&&this.hovered.emit({date:this.date,isSelecting:!0})}}b.hangledKeyCodes=[y.nx.LEFT,y.nx.UP,y.nx.RIGHT,y.nx.DOWN],b.\u0275fac=function(o){return new(o||b)(t.Y36(f),t.Y36(g.qD))},b.\u0275cmp=t.Xpm({type:b,selectors:[["bb-input-datepicker-single-day-template-ui"]],hostBindings:function(o,e){1&o&&t.NdJ("mouseout",function(){return e.onMouseOut()})("mouseover",function(){return e.onMouseOver()})("keyup",function(i){return e.onKeyUp(i)},!1,t.evT)},inputs:{date:"date",selected:"selected",disabled:"disabled",currentMonth:"currentMonth",hoveredDate:"hoveredDate"},outputs:{hovered:"hovered"},features:[t._Bn([l.uU,f,{provide:_.NG,useExisting:f},g.qD,{provide:g.uP,useFactory:g.WL}]),t.TTD],decls:2,vars:7,consts:[[1,"custom-day","text-center","bb-input-datepicker__single-day",3,"ngClass","dateTime"]],template:function(o,e){1&o&&(t.TgZ(0,"time",0),t._uU(1),t.qZA()),2&o&&(t.Q6J("ngClass",t.WLB(4,G,e.selected,e.isTextMuted))("dateTime",e.format(e.date)),t.uIk("data-role","calendar-date-item"),t.xp6(1),t.hij(" ",null==e.date?null:e.date.day,"\n"))},directives:[l.mk],encapsulation:2,changeDetection:0});var T=(()=>{return(n=T||(T={}))[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",T;var n})();class M{constructor(o,e){this.formatterHelper=o,this.browserService=e,this.disabled=!1,this.fromDate=null,this.toDate=null,this.splitRange=!1,this.toDateDatepicker=!1,this.hoveredDate=null,this.rangeSelect=new t.vpe,this.hovered=new t.vpe,this.firstKey=!0,this.isWithinRangeHover=!1,this.isWithinSelectedRange=!1,this.isTextMuted=!1,this.isHovered=!1,this.isFrom=!1,this.isTo=!1,this.formattedDate="",this.isIE=this.browserService.browserIsMSIE()}get withinHoverRangeSingle(){return!this.toDate&&(this.date.after(this.fromDate)||this.date.equals(this.fromDate))&&(this.date.before(this.hoveredDate)||this.date.equals(this.hoveredDate))}get withinHoverRangeSplitTo(){return(this.date.before(this.hoveredDate)||this.date.equals(this.hoveredDate))&&(this.date.after(this.toDate)||this.date.equals(this.toDate)||this.date.before(this.toDate)&&this.date.after(this.fromDate))&&this.toDateDatepicker}get withinHoverRangeSplitFrom(){return(this.date.after(this.hoveredDate)||this.date.equals(this.hoveredDate))&&this.date.before(this.toDate)&&!this.toDateDatepicker&&this.toDate}ngOnChanges(o){var e,a,i,r;(null==o?void 0:o.hoveredDate)&&(this.isWithinRangeHover=!!(this.isValidRange()&&this.date&&this.hoveredDate&&((this.withinHoverRangeSplitTo||this.withinHoverRangeSplitFrom)&&this.splitRange||this.withinHoverRangeSingle&&this.toDateDatepicker&&this.splitRange||this.withinHoverRangeSingle&&!this.splitRange)),this.isHovered=null===(e=this.date)||void 0===e?void 0:e.equals(this.hoveredDate)),((null==o?void 0:o.fromDate)||(null==o?void 0:o.toDate)||(null==o?void 0:o.date))&&(this.isWithinSelectedRange=this.date&&this.date.before(this.toDate)&&this.date.after(this.fromDate),this.isTo=null===(a=this.date)||void 0===a?void 0:a.equals(this.toDate),this.formattedDate=this.formatterHelper.format(this.date),this.isFrom=null===(i=this.date)||void 0===i?void 0:i.equals(this.fromDate)),this.isTextMuted=!this.isWithinRangeHover&&!this.isWithinSelectedRange&&!this.isFrom&&!this.isTo&&(this.disabled||(null===(r=this.date)||void 0===r?void 0:r.month)!==+this.currentMonth)}onMouseOut(){this.hovered.emit({date:null,isTo:this.toDateDatepicker,isSelecting:!1})}onMouseOver(){this.hovered.emit({date:this.date,isTo:this.toDateDatepicker,isSelecting:!0})}onKeyUp(o){const e=o.target.textContent,a=this.isIE?Object.values(T).includes(null==o?void 0:o.keyCode):M.hangledKeyCodes.includes(null==o?void 0:o.key);Number(e)===this.date.day&&Number(this.currentMonth)===this.date.month&&a&&this.hovered.emit({date:this.date,isTo:this.toDateDatepicker,isSelecting:!0})}isValidRange(){return!this.fromDate||!this.toDate||new _.qj(this.fromDate.year,this.fromDate.month,this.fromDate.day).before(this.toDate)}}M.hangledKeyCodes=[y.nx.LEFT,y.nx.UP,y.nx.RIGHT,y.nx.DOWN],M.\u0275fac=function(o){return new(o||M)(t.Y36(f),t.Y36(g.qD))},M.\u0275cmp=t.Xpm({type:M,selectors:[["bb-input-datepicker-range-day-template-ui"]],hostBindings:function(o,e){1&o&&t.NdJ("mouseout",function(){return e.onMouseOut()})("mouseover",function(){return e.onMouseOver()})("keyup",function(i){return e.onKeyUp(i)},!1,t.evT)},inputs:{date:"date",disabled:"disabled",currentMonth:"currentMonth",fromDate:"fromDate",toDate:"toDate",splitRange:"splitRange",toDateDatepicker:"toDateDatepicker",hoveredDate:"hoveredDate"},outputs:{rangeSelect:"rangeSelect",hovered:"hovered"},features:[t._Bn([l.uU,f,{provide:_.NG,useExisting:f},g.qD,{provide:g.uP,useFactory:g.WL}]),t.TTD],decls:2,vars:12,consts:[[1,"custom-day","text-center","bb-input-datepicker__custom-day",3,"ngClass","dateTime"]],template:function(o,e){1&o&&(t.TgZ(0,"time",0),t._uU(1),t.qZA()),2&o&&(t.Q6J("ngClass",t.Hh0(4,q,e.isWithinSelectedRange,e.isWithinRangeHover,e.isWithinRangeHover&&!e.toDateDatepicker&&e.splitRange,e.isHovered,e.isTextMuted,e.isFrom,e.isTo))("dateTime",e.formattedDate),t.uIk("data-role","calendar-date-item"),t.xp6(1),t.hij(" ",null==e.date?null:e.date.day,"\n"))},directives:[l.mk],encapsulation:2,changeDetection:0});const K=n=>Object.prototype.hasOwnProperty.call(n||{},"from")&&Object.prototype.hasOwnProperty.call(n||{},"to");let me=(()=>{class n extends L.rA{constructor(e,a,i,r,s,p,S){super(i),this.formatterHelper=e,this.el=a,this.cd=i,this.adapter=r,this.renderer2=s,this.domAttrService=p,this.maskPipe=S,this.focusedDate=new t.vpe,this.rangeSelection=!1,this.rangeSelectionSplit=!1,this.clickOpen=!1,this.focusOpen=!1,this._placement="bottom-left",this.datepickerDescribedby="defaultDatepickerDescribedbyLabel",this.ariaLabelForButton="Toggle Date popup",this.icon="calendar-today",this.iconSize="md",this.btnColor="link",this.ariaLabel="Datepicker",this.navigation="arrows",this.displayMonths=1,this.mask=!1,this.maskLength=void 0,this.hoveredDate$=new E.X({date:null}),this.pickerHoveredDayDateTo=null,this.fromDate$=new E.X(null),this.toDate$=new E.X(null),this.inputDateRangeSeparator="-",this.cssClass="bb-input-datepicker-ui",this.createMask=()=>{var d,u,v,m,D,C,k,x,F,O,P,R,B;2!==(null===(u=null===(d=this.overrideDateFormat)||void 0===d?void 0:d.match(/d/g))||void 0===u?void 0:u.length)&&(this.overrideDateFormat=null===(v=this.overrideDateFormat)||void 0===v?void 0:v.replace(/d+/,"dd"));const H=(null===(D=null===(m=this.overrideDateFormat)||void 0===m?void 0:m.match(/M/g))||void 0===D?void 0:D.length)||0;2===H||3===H||(this.overrideDateFormat=H<2?null===(C=this.overrideDateFormat)||void 0===C?void 0:C.replace(/M/,"MM"):null===(k=this.overrideDateFormat)||void 0===k?void 0:k.replace(/M+/,"MMM"));const V=(null===(F=null===(x=this.overrideDateFormat)||void 0===x?void 0:x.match(/y/g))||void 0===F?void 0:F.length)||0;2===V||4===V||(this.overrideDateFormat=V<2?null===(O=this.overrideDateFormat)||void 0===O?void 0:O.replace(/y/,"yy"):null===(P=this.overrideDateFormat)||void 0===P?void 0:P.replace(/y+/,"yyyy")),this.mask=null!==(B=null===(R=this.overrideDateFormat)||void 0===R?void 0:R.replace(/[d|y]/g,"0").replace(/MMM/,"SSS").replace(/MM/,"00"))&&void 0!==B?B:"",this.validateMask()},this.validateMask=()=>{var d,u,v,m,D,C;let k=!0;this.mask.replace(/[0|S|\-|/|,| ]/g,"")&&(k=!1),3!==(null===(u=null===(d=this.overrideDateFormat)||void 0===d?void 0:d.match(/\b(dd|(MM|MMM)|(yy|yyyy))\b/g))||void 0===u?void 0:u.length)&&(k=!1),(null===(v=this.overrideDateFormat)||void 0===v?void 0:v.includes("d"))&&(null===(m=this.overrideDateFormat)||void 0===m?void 0:m.includes("M"))&&(null===(D=this.overrideDateFormat)||void 0===D?void 0:D.includes("y"))||(k=!1),(null===(C=this.overrideDateFormat)||void 0===C?void 0:C.replace(/[d|y]/g,"0").replace(/MMM/,"SSS").replace(/MM/,"00"))!==this.mask&&(k=!1),k?(this.rangeSelection&&(this.mask+=` - ${this.mask}`),this.maskLength=this.mask.length):this.makeMaskUndefined()},this.rangeTemplateData=()=>({isTo:!0}),this.validate=d=>{const u=d.value;return this.parentFormControl||(this.parentFormControl=d),u?this.rangeSelection||this.rangeSelectionSplit?this.validateDateRange(u):this.validateSingleDate(u):null},this.dateInput=new c.NI(null),this.dateInputTo=new c.NI(null)}get placement(){return document.documentElement.clientWidth>320?this._placement:"bottom"}set placement(e){e&&(this._placement=e)}set minDate(e){this._minDate="string"==typeof e?this.adapter.fromModel(e):e}set maxDate(e){this._maxDate="string"==typeof e?this.adapter.fromModel(e):e}get placeholder(){if(void 0===this._placeholder){const e=this.dateFormat.toUpperCase();return this.rangeSelection?`${e} ${this.inputDateRangeSeparator} ${e}`:e}return this._placeholder}set placeholder(e){this._placeholder=void 0!==e?String(e):void 0}set overrideDateFormat(e){this._overrideDateFormat=e,this.formatterHelper.dateFormat=e}get overrideDateFormat(){return this._overrideDateFormat}get dateFormat(){return this.formatterHelper.localeDateFormat}ngOnChanges(e){const{disabled:a}=e;a&&a.currentValue!==a.previousValue&&(this.disabled?this.dateInput.disable():this.dateInput.enable())}ngAfterViewInit(){const e=this.rangeSelection?this.datePickerInputRange:this.datePickerInput;this.domAttrService.moveAriaAttributes(this.el.nativeElement,null==e?void 0:e.nativeElement,this.renderer2),setTimeout(()=>{this.dateInput.setValidators([]),this.dateInput.updateValueAndValidity(),this.cd.markForCheck()}),this.createOrValidateMask()}createOrValidateMask(){this.overrideDateFormat=this.dateFormat,!0===this.mask?this.createMask():this.mask&&this.validateMask()}makeMaskUndefined(){this.mask=void 0,this.maskLength=void 0}autoMask(e){if(!this.mask)return;const{name:a}=e;"date"===a?this.autoFormatMaskedComponent(this.rangeSelection?this.datePickerInputRange:this.datePickerInput):"dateTo"===a&&this.autoFormatMaskedComponent(this.datePickerInputTo)}autoFormatMaskedComponent(e){const a=null==e?void 0:e.nativeElement;let i=a.selectionStart;const r=a.value.length;a.value=this.maskPipe.transform(a.value,this.mask),i+=a.value.length-r,a.selectionStart=i,a.selectionEnd=i}dateEqual(e,a){const i=new Date(e.year,e.month-1,e.day).getTime(),r=new Date(a.year,a.month-1,a.day).getTime();return i===r?0:i>r?1:-1}onInputChange(e){const a="date"===e.name?this.dateInput:this.dateInputTo,{value:i}=e,r=new Date(i),s=this.formatterHelper.interpretDate(i);s&&s.getTime()!==r.getTime()&&a.setValue(s)}onInputChangeRange(e){const{value:a}=e,[i,r]=a.split(this.inputDateRangeSeparator).slice(0,2);this.fromDate$.next(this.formatterHelper.parse(null==i?void 0:i.trim())),this.toDate$.next(this.formatterHelper.parse(null==r?void 0:r.trim())),this.fromDate$.getValue()||this.toDate$.getValue()?this.updateRangeModel(this.fromDate$.getValue(),this.toDate$.getValue()):this.onChange(a)}onInputChangeSplitRange(e){const{value:a}=e;this.fromDate$.next(this.formatterHelper.parse(a&&a.trim())),this.updateRangeModel(this.fromDate$.getValue(),this.toDate$.getValue())}onInputChangeSplitRangeTo(e){const{value:a}=e;this.toDate$.next(this.formatterHelper.parse(a&&a.trim())),this.updateRangeModel(this.fromDate$.getValue(),this.toDate$.getValue())}onInputFocus(e){super.onFocus(),e&&this.datePicker&&(this.bindDocumentEvents(),this.datePicker.open(),(this.rangeSelection||this.rangeSelectionSplit)&&(this.datePicker.startDate=this.toDate$.getValue()))}onInputFocusTo(e){super.onFocus(),e&&this.datePickerTo&&this.datePickerTo.open()}onPickerTogglerClick(e){!this.disabled&&this.datePicker&&(this.bindDocumentEvents(),this.setStartDateOnPicker(this.datePicker),this.datePicker.toggle())}onPickerTogglerClickTo(e){!this.disabled&&this.datePickerTo&&(this.bindDocumentEvents(),this.setStartDateOnPicker(this.datePickerTo),this.datePickerTo.toggle())}setDisabledState(e){e?this.dateInput.disable():this.dateInput.enable(),super.setDisabledState(e)}onControlBlur(e){(!e.relatedTarget||!this.el.nativeElement.contains(e.relatedTarget))&&this.onBlur(e),this.rangeSelection&&(this.toDate$.getValue()&&this.fromDate$.getValue()?this.setRangeInput():this.setDatesTheSame())}onBlur(e){this.blur.emit(e),this.onTouched()}onClosed(){const e=this.hoveredDate$.getValue(),a=null==e?void 0:e.date;a&&this.setSelectedDate({date:a,isSelecting:!1}),this.rangeSelection&&this.datePickerButton?this.datePickerButton.nativeElement.focus():this.rangeSelectionSplit&&this.datePickerTo&&this.datePickerInputTo&&this.datePickerInputTo.nativeElement.focus()}onClosedTo(){void 0!==this.datePickerButtonTo&&this.datePicker&&!this.datePicker.isOpen()&&this.datePickerButtonTo.nativeElement.focus()}onRangeDateSelectSplitTo(e){this.toDate$.next(this.copyDateElement(e)),this.updateRangeModel(this.fromDate$.getValue(),this.toDate$.getValue()),this.onTouched()}onRangeDateSelectSplit(e){this.fromDate$.next(this.copyDateElement(e)),this.updateRangeModel(this.fromDate$.getValue(),this.toDate$.getValue()),this.onTouched()}onRangeDateSelect(e){this.fromDate$.getValue()||this.toDate$.getValue()?this.fromDate$.getValue()&&!this.toDate$.getValue()&&e&&(e.after(this.fromDate$.getValue())||e.equals(this.fromDate$.getValue()))?(this.toDate$.next(this.copyDateElement(e)),setTimeout(()=>this.closeDatePicker(),0)):(this.toDate$.next(null),this.fromDate$.next(this.copyDateElement(e))):this.fromDate$.next(this.copyDateElement(e)),this.updateRangeModel(this.fromDate$.getValue(),this.toDate$.getValue()),this.setRangeInput()}onDayHover(e){e.isTo?this.pickerHoveredDayDateTo=e.date:this.setSelectedDate({date:e.date,isSelecting:e.isSelecting})}writeValue(e){this.rangeSelection||this.rangeSelectionSplit?(K(e)?(e.from&&null===this.validateSingleDate(e.from)?this.fromDate$.next(this.adapter.fromModel(e.from)):this.fromDate$.next(e.from),e.to&&null===this.validateSingleDate(e.to)?this.toDate$.next(this.adapter.fromModel(e.to)):this.toDate$.next(e.to)):(this.fromDate$.next(null),this.toDate$.next(null)),this.rangeSelection?this.setRangeInput():this.rangeSelectionSplit&&(this.dateInput.setValue(this.fromDate$.getValue()?this.adapter.toModel(this.fromDate$.getValue()):null),this.dateInputTo.setValue(this.toDate$.getValue()?this.adapter.toModel(this.toDate$.getValue()):null))):this.dateInput.setValue("string"==typeof e?e:null)}setSelectedDate(e){this.hoveredDate$.next(e),this.focusedDate.emit(e)}setDatesTheSame(){const e=this.fromDate$.getValue();e&&(this.toDate$.next(e),this.updateRangeModel(this.fromDate$.getValue(),this.toDate$.getValue()),this.setRangeInput())}closeDatePicker(){var e;this.datePicker&&(this.datePicker.close(),this.rangeSelection&&(null===(e=this.parentFormControl)||void 0===e||e.updateValueAndValidity()),this.onBlur()),this.datePickerTo&&(this.datePickerTo.close(),this.onBlur()),this.unListenDocumentClick&&this.unListenDocumentClick(),this.unListenDocumentEsc&&this.unListenDocumentEsc()}isValidRange(e,a){return new Date(e).getTime()>new Date(a).getTime()?{invalidDateFormat:!0}:this.isValidMaskPattern()}validateSingleDate(e){const a="string"==typeof e?e:e.toISOString();return/^\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)$/g.test(a)?this.isValidMaskPattern():{invalidDateFormat:!0}}isValidMaskPattern(){return void 0===this.mask?{maskPatternError:!0}:null}handleDocumentEvent(e){e.target&&(!this.el.nativeElement.contains(e.target)||"keyup"===e.type)&&this.closeDatePicker()}bindDocumentEvents(){this.datePicker&&!this.datePicker.isOpen()&&(this.unListenDocumentClick=this.renderer2.listen("document","click",this.handleDocumentEvent.bind(this)),this.unListenDocumentEsc=this.renderer2.listen("document","keyup.escape",this.handleDocumentEvent.bind(this)))}validateDateRange(e){let a=null,i=null,r=null;return K(e)?e.from||e.to||this.isRequired()?!e.to&&e.from||e.to&&!e.from||!e.from&&!e.to&&this.isRequired()?{required:!0}:(e.from&&(i=this.validateSingleDate(e.from)),e.to&&(a=this.validateSingleDate(e.to)),!i&&!a&&e.from&&e.to&&(r=this.isValidRange(e.from,e.to)),a||i||r):null:{invalidDateFormat:!0}}setRangeInput(){var e;if(this.fromDate$.getValue()||this.toDate$.getValue()){const a=this.formatterHelper.format(this.fromDate$.getValue()),i=this.formatterHelper.format(this.toDate$.getValue());this.dateInput.setValue(`${null===a?this.fromDate$.getValue():a} ${this.inputDateRangeSeparator} ${null===i?this.toDate$.getValue():i}`)}else this.dateInput.setValue(null);(null===(e=this.parentFormControl)||void 0===e?void 0:e.touched)&&this.onTouched()}copyDateElement(e){return{year:e.year,month:e.month,day:e.day}}updateRangeModel(e,a){this.onChange({from:e?this.adapter.toModel(e):null,to:a?this.adapter.toModel(a):null})}isRequired(){var e,a;if(null===(e=this.parentFormControl)||void 0===e?void 0:e.validator){const i=null===(a=this.parentFormControl)||void 0===a?void 0:a.validator({});if(i&&i.required)return!0}return!1}setStartDateOnPicker(e){var a,i;let r=null;this.rangeSelection||this.rangeSelectionSplit&&(null===(a=this.fromDate$.getValue())||void 0===a?void 0:a.year)?r=this.fromDate$.getValue():this.rangeSelectionSplit&&(null===(i=this.toDate$.getValue())||void 0===i?void 0:i.year)&&(r=this.toDate$.getValue()),r&&(e.startDate=r)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f),t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(_.DO),t.Y36(t.Qsj),t.Y36(g.JE),t.Y36(A.Iq))},n.\u0275cmp=t.Xpm({type:n,selectors:[["bb-input-datepicker-ui"]],viewQuery:function(e,a){if(1&e&&(t.Gf(J,5),t.Gf(Y,5),t.Gf(Z,5),t.Gf(Q,5),t.Gf(j,5),t.Gf(z,5),t.Gf(X,5)),2&e){let i;t.iGM(i=t.CRH())&&(a.datePicker=i.first),t.iGM(i=t.CRH())&&(a.datePickerTo=i.first),t.iGM(i=t.CRH())&&(a.datePickerInput=i.first),t.iGM(i=t.CRH())&&(a.datePickerInputRange=i.first),t.iGM(i=t.CRH())&&(a.datePickerInputTo=i.first),t.iGM(i=t.CRH())&&(a.datePickerButton=i.first),t.iGM(i=t.CRH())&&(a.datePickerButtonTo=i.first)}},hostVars:1,hostBindings:function(e,a){2&e&&t.uIk("class",a.cssClass)},inputs:{rangeSelection:"rangeSelection",rangeSelectionSplit:"rangeSelectionSplit",clickOpen:"clickOpen",focusOpen:"focusOpen",placement:"placement",datepickerDescribedby:"datepickerDescribedby",ariaLabelForButton:"ariaLabelForButton",minDate:"minDate",maxDate:"maxDate",markDisabled:"markDisabled",icon:"icon",iconSize:"iconSize",iconColor:"iconColor",btnColor:"btnColor",ariaLabel:"ariaLabel",navigation:"navigation",autocomplete:"autocomplete",firstDayOfWeek:"firstDayOfWeek",displayMonths:"displayMonths",mask:"mask",placeholder:"placeholder",overrideDateFormat:"overrideDateFormat"},outputs:{focusedDate:"focusedDate"},features:[t._Bn([l.uU,f,{provide:_.DO,useClass:_e},{provide:_.wf,useClass:he},{provide:_.NG,useExisting:f},{provide:c.JU,useExisting:(0,t.Gpc)(()=>n),multi:!0},{provide:c.Cf,useExisting:(0,t.Gpc)(()=>n),multi:!0},{provide:A.Iq,useClass:A.Iq}]),t.qOj,t.TTD],decls:17,vars:17,consts:function(){let o,e;return o="Selecting date: " + "\ufffd0\ufffd" + "",e="Selected date is" + "\ufffd0\ufffd" + ".",[[1,"bb-input-datepicker__wrapper",3,"ngClass"],["class","bb-input-datepicker__label",3,"for",4,"ngIf"],[1,"input-group","bb-input-datepicker"],["positionTarget",""],[4,"ngIf","ngIfElse"],["class","sr-only","aria-live","polite","id","defaultDatepickerDescribedbyLabel",4,"ngIf"],[1,"input-group-append"],["bbButton","",1,"bb-input-datepicker__calendar-opener-button",3,"color","disabled","blur","click"],["datePickerButton",""],[3,"color","name","size"],["class","input-group bb-input-datepicker",4,"ngIf"],["dateRangeInput",""],["singleDay",""],["rangeDay",""],[1,"bb-input-datepicker__label",3,"for"],["type","text","name","date","ngbDatepicker","",1,"form-control","bb-input-datepicker__input",3,"id","minDate","maxDate","markDisabled","readOnly","required","navigation","dayTemplate","displayMonths","formControl","placement","positionTarget","restoreFocus","firstDayOfWeek","autoClose","maxlength","click","focus","blur","input","closed","dateSelect","ngModelChange"],["datePicker","ngbDatepicker","datePickerInput",""],["aria-live","polite","id","defaultDatepickerDescribedbyLabel",1,"sr-only"],[4,"ngIf"],["selectedDate",""],o,e,["type","text","name","dateTo","ngbDatepicker","",1,"form-control","bb-input-datepicker__input",3,"id","minDate","maxDate","markDisabled","readOnly","required","displayMonths","navigation","restoreFocus","dayTemplate","dayTemplateData","formControl","placement","firstDayOfWeek","autoClose","click","focus","blur","input","closed","dateSelect","ngModelChange"],["datePickerTo","ngbDatepicker","datePickerInputTo",""],["datePickerButtonTo",""],["type","text","name","date",1,"form-control","bb-input-datepicker__range",3,"id","formControl","readOnly","required","maxlength","click","focus","blur","input","ngModelChange"],["datePickerInputRange",""],["type","text","ngbDatepicker","","navigation","arrows",1,"datepicker-input-hidden","bb-input-datepicker__range-input-hidden",3,"minDate","maxDate","markDisabled","autoClose","readOnly","required","firstDayOfWeek","positionTarget","placement","dayTemplate","closed","dateSelect"],["datePicker","ngbDatepicker"],[3,"disabled","selected","currentMonth","date","hoveredDate","hovered"],[3,"date","fromDate","toDate","splitRange","toDateDatepicker","disabled","currentMonth","hoveredDate","hovered"]]},template:function(e,a){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,ee,2,2,"label",1),t.TgZ(2,"div",2,3),t.YNc(4,te,4,27,"ng-container",4),t.YNc(5,re,3,3,"div",5),t.TgZ(6,"div",6)(7,"button",7,8),t.NdJ("blur",function(r){return a.onControlBlur(r)})("click",function(r){return a.onPickerTogglerClick(r)}),t._UZ(9,"bb-icon-ui",9),t.qZA()()(),t.YNc(10,se,8,33,"div",10),t.qZA(),t.YNc(11,le,4,34,"ng-template",null,11,t.W1O),t.YNc(13,de,1,5,"ng-template",null,12,t.W1O),t.YNc(15,ue,1,8,"ng-template",null,13,t.W1O)),2&e){const i=t.MAs(12);t.Q6J("ngClass",t.kEZ(13,ce,null==a.parentFormControl?null:a.parentFormControl.invalid,null==a.parentFormControl?null:a.parentFormControl.touched,a.rangeSelectionSplit)),t.xp6(1),t.Q6J("ngIf",a.label),t.xp6(3),t.Q6J("ngIf",!a.rangeSelection)("ngIfElse",i),t.xp6(1),t.Q6J("ngIf","defaultDatepickerDescribedbyLabel"===a.datepickerDescribedby),t.xp6(2),t.Q6J("color",a.btnColor)("disabled",a.disabled||a.readonly),t.uIk("aria-label",a.ariaLabelForButton)("data-role","toggle-calendar-button"),t.xp6(2),t.Q6J("color",a.iconColor)("name",a.icon)("size",a.iconSize),t.xp6(1),t.Q6J("ngIf",a.rangeSelectionSplit)}},directives:[N.o,b,M,l.mk,l.O5,_.J4,c.Fj,c.Q7,c.JJ,c.oH,c.nD,$.Hq],pipes:[l.Ov,l.uU],encapsulation:2,changeDetection:0}),n})(),De=(()=>{class n{constructor(){this._minDate=-Number.MAX_VALUE,this.onValidatorChange=()=>{}}set minDate(e){if(e){const a="string"==typeof e?new Date(e):new Date(e.year,e.month-1,e.day);this._minDate=a.getTime()}else this._minDate=-Number.MAX_VALUE;this.onValidatorChange()}registerOnValidatorChange(e){this.onValidatorChange=e}validate(e){const a=e.value&&e.value.from?e.value.from:e.value;return a?new Date(a).getTime()>=this._minDate?null:{dateLessThanMinDate:!0}:null}ngOnDestroy(){this.minDate=void 0}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.lG2({type:n,selectors:[["bb-input-datepicker-ui","minDate",""]],inputs:{minDate:"minDate"},features:[t._Bn([{provide:c.Cf,multi:!0,useExisting:(0,t.Gpc)(()=>n)}])]}),n})(),ge=(()=>{class n{constructor(){this._maxDate=Number.MAX_VALUE,this.onValidatorChange=()=>{}}set maxDate(e){if(e){const a="string"==typeof e?new Date(e):new Date(e.year,e.month-1,e.day);this._maxDate=a.getTime()}else this._maxDate=Number.MAX_VALUE;this.onValidatorChange()}registerOnValidatorChange(e){this.onValidatorChange=e}validate(e){const a=e.value&&e.value.to?e.value.to:e.value;return a?new Date(a).getTime()<=this._maxDate?null:{dateGreaterThanMaxDate:!0}:null}ngOnDestroy(){this.maxDate=void 0}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.lG2({type:n,selectors:[["bb-input-datepicker-ui","maxDate",""]],inputs:{maxDate:"maxDate"},features:[t._Bn([{provide:c.Cf,multi:!0,useExisting:(0,t.Gpc)(()=>n)}])]}),n})(),fe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[l.ez,c.UX,c.u5,_.M,$.hJ,N.Q,L.$B],c.u5]}),n})()}}]);