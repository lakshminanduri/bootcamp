(self.webpackChunkretail_usa=self.webpackChunkretail_usa||[]).push([[8426],{1609:(Ee,G,s)=>{"use strict";s.r(G),s.d(G,{AccountsTransactionsJourneyBundleModule:()=>ui});var m=s(9808),f=s(5357),I=s(6072),y=(s(4292),s(4544)),q=s(7120),N=s(2929),U=s(6791),e=s(5e3),_=s(538),W=s(2908),S=s(7605),p=s(4004),u=s(9841),d=s(5698),E=s(7579),k=s(1884),R=s(2722),O=s(9300),xe=s(590),V=s(4813),J=s(1365),ne=s(4782),vt=s(727),yt=s(8675),Rt=s(4351),X=s(6129),Bt=s(4707),ee=s(9646),oe=s(262),w=s(9287),$=s(5460),ie=s(7555),Y=s(429),be=s(7287);var F=s(3075),Ft=s(9774),re=s(682),he=s(8639),Te=s(2658),ae=s(4951),se=s(5622),_e=s(3842),Q=s(1777),Pe=s(6706),Ge=s(5893),Dt=s(9351),D=s(7218),le=s(520);function Qt(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",1),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().pick(r.uuid)}),e._UZ(1,"bb-product-item-basic-account-ui",2),e.qZA()}if(2&n){const t=i.$implicit,o=e.oxw();e.ekj("bb-quick-transfer--selected-bg",t.uuid===o.selected),e.Q6J("disabled",t.uuid===o.selectedCounterPartyAccount),e.xp6(1),e.ekj("bb-quick-transfer--disabled",t.uuid===o.selectedCounterPartyAccount),e.Q6J("highlight",null==o.config||null==o.config.uiComponentProps?null:o.config.uiComponentProps.productItemHighlight)("title",t.name)("amount",null==t?null:t.balance)("productNumber",t.number)("currency",null==t?null:t.currency)("productNumberFormat",null==o.config||null==o.config.uiComponentProps?null:o.config.uiComponentProps.accountNumberFormat)("showCurrencySymbol",!(null==o.config||null==o.config.uiComponentProps||!o.config.uiComponentProps.mapCurrency))("active",!1)}}const xt=["done"];function Kt(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.BQk()),2&n){const t=i.ngIf;e.xp6(2),e.hij("",t.name,".")}}function Jt(n,i){if(1&n&&(e.TgZ(0,"span",16)(1,"span"),e.SDv(2,17),e.qZA(),e._UZ(3,"bb-amount-ui",18),e.TgZ(4,"span"),e.SDv(5,19),e.qZA(),e.YNc(6,Kt,3,1,"ng-container",20),e.ALo(7,"async"),e.qZA()),2&n){const t=i.ngIf,o=e.oxw(2);e.MGl("id","payment-success-description-",o.id,""),e.xp6(3),e.Q6J("currency",t.currency)("amount",t.amount)("mapCurrency",!(null==o.config||null==o.config.uiComponentProps||!o.config.uiComponentProps.mapCurrency))("showPlusSign",!1),e.xp6(3),e.Q6J("ngIf",e.lcZ(7,6,o.toPayee$))}}function Lt(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",3)(2,"div",4)(3,"button",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().restart()}),e._UZ(4,"bb-icon-ui",6),e.qZA()(),e.TgZ(5,"div",7)(6,"picture"),e._UZ(7,"source",8)(8,"img",9),e.qZA(),e._UZ(9,"bb-header-ui",10),e.YNc(10,Jt,8,8,"span",11),e.ALo(11,"async"),e.qZA(),e.TgZ(12,"div",12)(13,"button",13,14),e.NdJ("click",function(){return e.CHM(t),e.oxw().restart()}),e.SDv(15,15),e.qZA()()(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(1),e.bQe("aria-describedby","payment-success-img-",t.id," payment-success-title-",t.id," payment-success-description-",t.id,""),e.xp6(6),e.s9C("srcset",t.successImgNoMotion,e.LSH),e.xp6(1),e.MGl("id","payment-success-img-",t.id,""),e.s9C("srcset",t.successImg+"?"+t.timestamp,e.LSH),e.xp6(1),e.MGl("id","payment-success-title-",t.id,""),e.xp6(1),e.Q6J("ngIf",e.lcZ(11,8,t.amount$))}}function Pt(n,i){if(1&n&&(e.TgZ(0,"div",26),e._UZ(1,"bb-icon-ui",27)(2,"bb-header-ui",28),e.TgZ(3,"span",16),e.SDv(4,29),e.qZA()()),2&n){const t=i.ngIf,o=e.oxw(2);let c;e.xp6(2),e.MGl("id","payment-error-title-",o.id,""),e.Q6J("heading",null==(c=t)||null==c.error?null:c.error.message),e.xp6(1),e.MGl("id","payment-error-description-",o.id,"")}}function Gt(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",21)(2,"button",22),e.NdJ("click",function(){return e.CHM(t),e.oxw().tryAgain()}),e._UZ(3,"bb-icon-ui",6),e.qZA()(),e.YNc(4,Pt,5,3,"div",23),e.ALo(5,"async"),e.TgZ(6,"div",12)(7,"button",24,14),e.NdJ("click",function(){return e.CHM(t),e.oxw().tryAgain()}),e.SDv(9,25),e.qZA()()()}if(2&n){const t=e.oxw();e.zWS("aria-describedby","payment-error-title-",t.id," payment-error-description-",t.id,""),e.xp6(4),e.Q6J("ngIf",e.lcZ(5,3,t.paymentOrderCallState$))}}function wt(n,i){if(1&n&&(e.TgZ(0,"div",10)(1,"label",11),e.SDv(2,12),e.qZA(),e._UZ(3,"br")(4,"bb-amount-ui",13),e.qZA()),2&n){const t=i.ngIf;e.xp6(4),e.Q6J("currency",t.currency)("amount",t.amount)("mapCurrency",!0)("showPlusSign",!1)}}function Yt(n,i){if(1&n&&(e.TgZ(0,"div",14)(1,"div",15)(2,"label",16),e.SDv(3,17),e.qZA(),e.TgZ(4,"div"),e._UZ(5,"bb-product-item-basic-account-ui",18),e.qZA()()()),2&n){const t=i.ngIf,o=e.oxw(2);e.xp6(5),e.Q6J("title",t.name)("productNumber",t.number)("amount",null==t?null:t.balance)("currency",null==t?null:t.currency)("productNumberFormat",null==o.config||null==o.config.uiComponentProps?null:o.config.uiComponentProps.accountNumberFormat)("showCurrencySymbol",!(null==o.config||null==o.config.uiComponentProps||!o.config.uiComponentProps.mapCurrency))("highlight",!(null==o.config||null==o.config.uiComponentProps||!o.config.uiComponentProps.productItemHighlight))("active",!1)}}function Zt(n,i){if(1&n&&(e.TgZ(0,"div",19)(1,"div",15)(2,"label",16),e.SDv(3,20),e.qZA(),e.TgZ(4,"div"),e._UZ(5,"bb-product-item-basic-account-ui",21),e.qZA()()()),2&n){const t=i.ngIf,o=e.oxw(2);e.xp6(5),e.Q6J("title",t.name)("productNumber",t.number)("amount",null==t?null:t.balance)("currency",null==t?null:t.currency)("productNumberFormat",null==o.config||null==o.config.uiComponentProps?null:o.config.uiComponentProps.accountNumberFormat)("showCurrencySymbol",!(null==o.config||null==o.config.uiComponentProps||!o.config.uiComponentProps.mapCurrency))("highlight",null==o.config||null==o.config.uiComponentProps?null:o.config.uiComponentProps.productItemHighlight)("active",!1)}}function $t(n,i){if(1&n&&(e.YNc(0,wt,5,4,"div",4),e.ALo(1,"async"),e.TgZ(2,"div",5),e.YNc(3,Yt,6,8,"div",6),e.ALo(4,"async"),e.TgZ(5,"div",7),e._UZ(6,"bb-icon-ui",8),e.qZA(),e.YNc(7,Zt,6,8,"div",9),e.ALo(8,"async"),e.qZA()),2&n){const t=e.oxw();e.Q6J("ngIf",e.lcZ(1,3,t.amount$)),e.xp6(3),e.Q6J("ngIf",e.lcZ(4,5,t.fromAccount$)),e.xp6(4),e.Q6J("ngIf",e.lcZ(8,7,t.toPayee$))}}function qt(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",22)(1,"bb-load-button-ui",23),e.NdJ("click",function(){return e.CHM(t),e.oxw().handleConfirm()}),e.SDv(2,24),e.ALo(3,"async"),e.qZA(),e.TgZ(4,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeModal()}),e.ALo(5,"async"),e.TgZ(6,"span"),e.SDv(7,26),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("isLoading",e.lcZ(3,2,t.paymentOrderCallState$)===t.loadingstate.LOADING),e.xp6(3),e.Q6J("disabled",e.lcZ(5,4,t.paymentOrderCallState$)===t.loadingstate.LOADING)}}function Wt(n,i){if(1&n&&(e.TgZ(0,"span",4),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.account.name)}}function Ht(n,i){if(1&n&&(e.TgZ(0,"span",5),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.emptyLabel)}}function jt(n,i){if(1&n&&(e.TgZ(0,"span",5),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.uIk("id",t.id),e.xp6(1),e.hij(" ",t.requiredMessage," ")}}function zt(n,i){if(1&n&&(e.ynx(0),e.YNc(1,jt,2,2,"span",4),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.requiredMessage)}}function Vt(n,i){if(1&n&&(e.TgZ(0,"span",5),e._uU(1),e.qZA()),2&n){const t=i.ngIf,o=e.oxw(3);e.uIk("id",o.id),e.xp6(1),e.hij(" ",t,"")}}function Xt(n,i){if(1&n&&e.YNc(0,Vt,2,2,"span",4),2&n){const t=e.oxw(2);e.Q6J("ngIf",t.getValidationMessage())}}function en(n,i){if(1&n&&(e.TgZ(0,"bb-input-validation-message-ui",1),e.YNc(1,zt,2,1,"ng-container",2),e.YNc(2,Xt,1,1,"ng-template",null,3,e.W1O),e.qZA()),2&n){const t=e.MAs(3),o=e.oxw();e.Q6J("showErrors",!(null==o.control||!o.control.touched||null==o.control||!o.control.invalid))("@fadeSlideInOut",void 0),e.xp6(1),e.Q6J("ngIf",null==o.control||null==o.control.errors?null:o.control.errors.required)("ngIfElse",t)}}const tn=["formElement"],we=["back"];function nn(n,i){1&n&&e.GkF(0)}const Oe=function(){return{$implicit:"md"}};function on(n,i){if(1&n&&(e.ynx(0),e.YNc(1,nn,1,0,"ng-container",13),e.BQk()),2&n){e.oxw(3);const t=e.MAs(11);e.xp6(1),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.DdM(2,Oe))}}function cn(n,i){1&n&&e.GkF(0)}function rn(n,i){if(1&n&&(e.ynx(0),e.YNc(1,cn,1,0,"ng-container",14),e.BQk()),2&n){e.oxw(3);const t=e.MAs(13);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function an(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"bb-quick-transfer-accounts-ui",17),e.NdJ("select",function(c){return e.CHM(t),e.oxw(6).handleSelectFrom(c)}),e.ALo(2,"async"),e.ALo(3,"async"),e.qZA()()}if(2&n){const t=i.ngIf,o=e.oxw(6);let c;e.xp6(1),e.Q6J("arrangements",t)("selected",e.lcZ(2,4,o.fromAccountId$))("selectedCounterPartyAccount",null==(c=e.lcZ(3,6,o.selectedToPayee$))?null:c.uuid)("config",o.config)}}function sn(n,i){if(1&n&&(e.ynx(0),e.YNc(1,an,4,8,"div",7),e.ALo(2,"async"),e.BQk()),2&n){const t=e.oxw(5);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.accounts$))}}function _n(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",18),e._UZ(1,"bb-icon-ui",19),e.TgZ(2,"div",20)(3,"span",21),e.SDv(4,22),e.qZA(),e._UZ(5,"br"),e.TgZ(6,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw(5).getAccounts()}),e.SDv(7,24),e.qZA()()()}}function ln(n,i){if(1&n&&(e.ynx(0),e.YNc(1,sn,3,3,"ng-container",7),e.YNc(2,_n,8,0,"div",16),e.BQk()),2&n){const t=e.oxw(3).ngIf,o=e.oxw();e.xp6(1),e.Q6J("ngIf",t.internal===o.loadingstate.LOADED),e.xp6(1),e.Q6J("ngIf",t.internal.error)}}function un(n,i){if(1&n&&(e.TgZ(0,"h3",26),e._UZ(1,"bb-icon-ui",27),e.TgZ(2,"span",28),e.SDv(3,29),e.qZA()()),2&n){const t=i.ngIf;e.xp6(3),e.pQV(t),e.QtT(3)}}function dn(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"bb-quick-transfer-accounts-ui",31),e.NdJ("select",function(c){return e.CHM(t),e.oxw(6).handleSelectFrom(c)}),e.ALo(2,"async"),e.ALo(3,"async"),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(6);e.xp6(1),e.Q6J("arrangements",e.lcZ(2,3,t.extAccounts$))("selected",e.lcZ(3,5,t.fromAccountId$))("config",t.config)}}function fn(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",18),e._UZ(1,"bb-icon-ui",19),e.TgZ(2,"div",20)(3,"span"),e.SDv(4,32),e.qZA(),e._UZ(5,"br"),e.TgZ(6,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw(6).getExtAccounts()}),e.SDv(7,33),e.qZA()()()}}function gn(n,i){if(1&n&&(e.ynx(0),e.YNc(1,dn,4,7,"ng-container",15),e.YNc(2,fn,8,0,"ng-template",null,30,e.W1O),e.BQk()),2&n){const t=e.MAs(3),o=e.oxw(4).ngIf,c=e.oxw();e.xp6(1),e.Q6J("ngIf",o.external===c.loadingstate.LOADED)("ngIfElse",t)}}function mn(n,i){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,un,4,1,"h3",25),e.YNc(2,gn,4,2,"ng-container",15),e.qZA()),2&n){const t=e.oxw(3).ngIf,o=e.oxw(),c=e.MAs(11);e.xp6(1),e.Q6J("ngIf",null==o.config||null==o.config.fields||null==o.config.fields.fromAccount?null:o.config.fields.fromAccount.connectedAccountsSubHeader),e.xp6(1),e.Q6J("ngIf",t.external!==o.loadingstate.LOADING)("ngIfElse",c)}}function pn(n,i){if(1&n&&(e.ynx(0),e.YNc(1,ln,3,2,"ng-container",15),e.YNc(2,mn,3,3,"div",7),e.ALo(3,"async"),e.BQk()),2&n){const t=e.oxw(2).ngIf,o=e.oxw(),c=e.MAs(11);let r;e.xp6(1),e.Q6J("ngIf",t.internal!==o.loadingstate.LOADING)("ngIfElse",c),e.xp6(1),e.Q6J("ngIf",!(t.external===o.loadingstate.LOADED&&(null==(r=e.lcZ(3,3,o.extAccounts$))||!r.length)))}}function An(n,i){if(1&n&&(e.ynx(0)(1,10),e.YNc(2,on,2,3,"ng-container",11),e.YNc(3,rn,2,1,"ng-container",11),e.YNc(4,pn,4,5,"ng-container",12),e.BQk()()),2&n){const t=e.oxw().ngIf,o=e.oxw();e.xp6(1),e.Q6J("ngSwitch",!0),e.xp6(1),e.Q6J("ngSwitchCase",t.internal===o.loadingstate.LOADING&&t.external===o.loadingstate.LOADING),e.xp6(1),e.Q6J("ngSwitchCase",!!t.internal.error&&!!t.external.error)}}function Sn(n,i){if(1&n&&(e.ynx(0),e.YNc(1,An,5,3,"ng-container",7),e.BQk()),2&n){const t=i.ngIf;e.xp6(1),e.Q6J("ngIf",t.internal&&t.external)}}function En(n,i){if(1&n&&(e.TgZ(0,"div",34),e._UZ(1,"bb-loading-indicator-ui",35),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("loaderSize",t||"sm")}}function bn(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",36)(1,"div",37),e._UZ(2,"bb-empty-state-ui",38),e.TgZ(3,"button",39),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return c.getAccounts(),c.getExtAccounts()}),e.SDv(4,40),e.qZA()()()}}const Ye=function(n,i){return{internal:n,external:i}};function Cn(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"bb-tab-group-ui",13),e.NdJ("select",function(c){return e.CHM(t),e.oxw().onTabSelect(c)}),e.TgZ(1,"bb-tab-ui",14),e.SDv(2,15),e.qZA(),e.TgZ(3,"bb-tab-ui",16),e.SDv(4,17),e.qZA()()}2&n&&e.Q6J("initialSelection",0)}function hn(n,i){1&n&&e.GkF(0)}function Tn(n,i){if(1&n&&(e.ynx(0),e.YNc(1,hn,1,0,"ng-container",23),e.BQk()),2&n){e.oxw(4);const t=e.MAs(16);e.xp6(1),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.DdM(2,Oe))}}function On(n,i){1&n&&e.GkF(0)}function Mn(n,i){if(1&n&&(e.ynx(0),e.YNc(1,On,1,0,"ng-container",24),e.BQk()),2&n){e.oxw(4);const t=e.MAs(18);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function Nn(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"bb-quick-transfer-accounts-ui",27),e.NdJ("select",function(c){return e.CHM(t),e.oxw(7).pickPayee(c)}),e.ALo(2,"async"),e.ALo(3,"async"),e.qZA()()}if(2&n){const t=i.ngIf,o=e.oxw(7);let c;e.xp6(1),e.Q6J("arrangements",t)("selected",e.lcZ(2,4,o.selectedToPayeeId$))("selectedCounterPartyAccount",null==(c=e.lcZ(3,6,o.selectedFromAccount$))?null:c.uuid)("config",o.config)}}function vn(n,i){if(1&n&&(e.ynx(0),e.YNc(1,Nn,4,8,"div",19),e.ALo(2,"async"),e.BQk()),2&n){const t=e.oxw(6);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.accounts$))}}function yn(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",28),e._UZ(1,"bb-icon-ui",29),e.TgZ(2,"div",30)(3,"span",31),e.SDv(4,32),e.qZA(),e._UZ(5,"br"),e.TgZ(6,"button",33),e.NdJ("click",function(){return e.CHM(t),e.oxw(6).getAccounts()}),e.SDv(7,34),e.qZA()()()}}function Rn(n,i){if(1&n&&(e.ynx(0),e.YNc(1,vn,3,3,"ng-container",19),e.YNc(2,yn,8,0,"div",26),e.BQk()),2&n){const t=e.oxw(3).ngIf,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.internal===o.loadingstate.LOADED),e.xp6(1),e.Q6J("ngIf",t.internal.error)}}function Bn(n,i){if(1&n&&(e.TgZ(0,"h3",36),e._UZ(1,"bb-icon-ui",37),e.TgZ(2,"span",38),e.SDv(3,39),e.qZA()()),2&n){const t=i.ngIf;e.xp6(3),e.pQV(t),e.QtT(3)}}function In(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"bb-quick-transfer-accounts-ui",41),e.NdJ("select",function(c){return e.CHM(t),e.oxw(7).pickPayee(c)}),e.ALo(2,"async"),e.ALo(3,"async"),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(7);e.xp6(1),e.Q6J("arrangements",e.lcZ(2,3,t.extAccounts$))("selected",e.lcZ(3,5,t.selectedToPayeeId$))("config",t.config)}}function Un(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",28),e._UZ(1,"bb-icon-ui",29),e.TgZ(2,"div",30)(3,"span"),e.SDv(4,42),e.qZA(),e._UZ(5,"br"),e.TgZ(6,"button",33),e.NdJ("click",function(){return e.CHM(t),e.oxw(7).getExtAccounts()}),e.SDv(7,43),e.qZA()()()}}function kn(n,i){if(1&n&&(e.ynx(0),e.YNc(1,In,4,7,"ng-container",25),e.YNc(2,Un,8,0,"ng-template",null,40,e.W1O),e.BQk()),2&n){const t=e.MAs(3),o=e.oxw(4).ngIf,c=e.oxw(2);e.xp6(1),e.Q6J("ngIf",o.external===c.loadingstate.LOADED)("ngIfElse",t)}}function Fn(n,i){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Bn,4,1,"h3",35),e.YNc(2,kn,4,2,"ng-container",25),e.qZA()),2&n){const t=e.oxw(3).ngIf,o=e.oxw(2),c=e.MAs(16);e.xp6(1),e.Q6J("ngIf",null==o.config||null==o.config.fields||null==o.config.fields.toAccount?null:o.config.fields.toAccount.connectedAccountsSubHeader),e.xp6(1),e.Q6J("ngIf",t.external!==o.loadingstate.LOADING)("ngIfElse",c)}}function Dn(n,i){if(1&n&&(e.ynx(0),e.YNc(1,Rn,3,2,"ng-container",25),e.YNc(2,Fn,3,3,"div",19),e.ALo(3,"async"),e.BQk()),2&n){const t=e.oxw(2).ngIf,o=e.oxw(2),c=e.MAs(16);let r;e.xp6(1),e.Q6J("ngIf",t.internal!==o.loadingstate.LOADING)("ngIfElse",c),e.xp6(1),e.Q6J("ngIf",!(t.external===o.loadingstate.LOADED&&(null==(r=e.lcZ(3,3,o.extAccounts$))||!r.length)))}}function Qn(n,i){if(1&n&&(e.ynx(0)(1,20),e.YNc(2,Tn,2,3,"ng-container",21),e.YNc(3,Mn,2,1,"ng-container",21),e.YNc(4,Dn,4,5,"ng-container",22),e.BQk()()),2&n){const t=e.oxw().ngIf,o=e.oxw(2);e.xp6(1),e.Q6J("ngSwitch",!0),e.xp6(1),e.Q6J("ngSwitchCase",t.internal===o.loadingstate.LOADING&&t.external===o.loadingstate.LOADING),e.xp6(1),e.Q6J("ngSwitchCase",!!t.internal.error&&!!t.external.error)}}function xn(n,i){if(1&n&&(e.ynx(0),e.YNc(1,Qn,5,3,"ng-container",19),e.BQk()),2&n){const t=i.ngIf;e.xp6(1),e.Q6J("ngIf",t.internal&&t.external)}}function Kn(n,i){if(1&n&&(e.TgZ(0,"div",18),e.YNc(1,xn,2,1,"ng-container",19),e.ALo(2,"async"),e.ALo(3,"async"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.WLB(5,Ye,e.lcZ(2,1,t.accountsCallState$),e.lcZ(3,3,t.extAccountsCallState$)))}}function Jn(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"bb-quick-transfer-accounts-ui",45),e.NdJ("select",function(c){return e.CHM(t),e.oxw(4).pickPayee(c)}),e.ALo(2,"async"),e.qZA()()}if(2&n){const t=i.ngIf,o=e.oxw(4);e.xp6(1),e.Q6J("arrangements",t)("selected",e.lcZ(2,3,o.selectedToPayeeId$))("config",o.config)}}function Ln(n,i){if(1&n&&(e.ynx(0),e.YNc(1,Jn,3,5,"div",19),e.ALo(2,"async"),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.contacts$))}}function Pn(n,i){1&n&&e.GkF(0)}function Gn(n,i){if(1&n&&(e.ynx(0),e.YNc(1,Pn,1,0,"ng-container",23),e.BQk()),2&n){e.oxw(3);const t=e.MAs(16);e.xp6(1),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.DdM(2,Oe))}}function wn(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",46)(2,"div",47),e._UZ(3,"bb-empty-state-ui",48),e.TgZ(4,"button",49),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).getContacts()}),e.SDv(5,50),e.qZA()()(),e.BQk()}}function Yn(n,i){if(1&n&&(e.ynx(0)(1,20),e.YNc(2,Ln,3,3,"ng-container",21),e.YNc(3,Gn,2,3,"ng-container",21),e.YNc(4,wn,6,0,"ng-container",21),e.BQk()()),2&n){const t=i.ngIf,o=e.oxw(2);e.xp6(1),e.Q6J("ngSwitch",!0),e.xp6(1),e.Q6J("ngSwitchCase",t===o.loadingstate.LOADED),e.xp6(1),e.Q6J("ngSwitchCase",t===o.loadingstate.LOADING),e.xp6(1),e.Q6J("ngSwitchCase",!!t.error)}}function Zn(n,i){if(1&n&&(e.TgZ(0,"div",44),e.YNc(1,Yn,5,4,"ng-container",19),e.ALo(2,"async"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.contactsCallState$))}}function $n(n,i){if(1&n&&(e.TgZ(0,"div",51),e._UZ(1,"bb-loading-indicator-ui",52),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("loaderSize",t||"sm")}}function qn(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",46)(1,"div",53),e._UZ(2,"bb-empty-state-ui",54),e.TgZ(3,"button",49),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return c.getAccounts(),c.getExtAccounts()}),e.SDv(4,55),e.qZA()()()}}function Wn(n,i){if(1&n&&e._UZ(0,"bb-quick-transfer-form-ui",6),2&n){const t=e.oxw(2);e.Q6J("config",t.config)("@slideRight",void 0)}}function Hn(n,i){if(1&n&&e._UZ(0,"bb-quick-transfer-from-account-ui",6),2&n){const t=e.oxw(2);e.Q6J("config",t.config)("@slideLeft",void 0)}}function jn(n,i){if(1&n&&e._UZ(0,"bb-quick-transfer-to-account-ui",6),2&n){const t=e.oxw(2);e.Q6J("config",t.config)("@slideLeft",void 0)}}function zn(n,i){1&n&&e._UZ(0,"div",7),2&n&&e.Q6J("@fadeIn",void 0)}function Vn(n,i){if(1&n&&e._UZ(0,"bb-quick-transfer-complete-ui",8),2&n){const t=e.oxw(2);e.Q6J("successImg",t.successImg)("successImgNoMotion",t.successImgNoMotion)("config",t.config)("@slideUp",void 0)}}function Xn(n,i){if(1&n&&(e.TgZ(0,"div",1),e.YNc(1,Wn,1,2,"bb-quick-transfer-form-ui",2),e.YNc(2,Hn,1,2,"bb-quick-transfer-from-account-ui",2),e.YNc(3,jn,1,2,"bb-quick-transfer-to-account-ui",2),e.YNc(4,zn,1,1,"div",3),e.YNc(5,Vn,1,4,"bb-quick-transfer-complete-ui",4),e._UZ(6,"bb-quick-transfer-confirmation-modal-ui",5),e.qZA()),2&n){const t=i.ngIf,o=e.oxw();e.xp6(1),e.Q6J("ngIf",t===o.viewState.FORM||t===o.viewState.COMPLETE),e.xp6(1),e.Q6J("ngIf",t===o.viewState.FROM),e.xp6(1),e.Q6J("ngIf",t===o.viewState.PAYEE),e.xp6(1),e.Q6J("ngIf",t===o.viewState.COMPLETE),e.xp6(1),e.Q6J("ngIf",t===o.viewState.COMPLETE),e.xp6(1),e.Q6J("paymentTypes",o.config.paymentTypes)("config",o.config)}}class Ze{}var C=(()=>{return(n=C||(C={})).INIT="INIT",n.LOADING="LOADING",n.LOADED="LOADED",C;var n})(),H=(()=>{return(n=H||(H={})).CONFIRMATION_PENDING="CONFIRMATION_PENDING",n.USER_DECLINED="USER_DECLINED",n.SYSTEM_DECLINED="SYSTEM_DECLINED",n.PENDING_APPROVAL="PENDING_APPROVAL",n.SENDING="SENDING",n.ACCEPTED="ACCEPTED",n.REJECTED="REJECTED",n.PROCESSED="PROCESSED",n.NO_PROGRESS="NO_PROGRESS",H;var n})(),h=(()=>{return(n=h||(h={})).FORM="FORM",n.FROM="FROM",n.PAYEE="PAYEE",n.COMPLETE="COMPLETE",n.REVIEW="REVIEW",h;var n})(),L=(()=>{return(n=L||(L={})).FROM="FROM",n.TO="TO",L;var n})();const Me=(0,_.PH)("[Accounts API] fetching accounts"),Ne=(0,_.PH)("[Contacts API] fetching contacts"),ve=(0,_.PH)("[Payments API] fetching external accounts"),$e=(0,_.PH)("[Accounts API] accounts fetched success",(0,_.Ky)()),qe=(0,_.PH)("[Contacts API] contacts fetched success",(0,_.Ky)()),We=(0,_.PH)("[Payments API] external accounts fetched success",(0,_.Ky)()),He=(0,_.PH)("[Accounts API] accounts fetching error",(0,_.Ky)()),je=(0,_.PH)("[Contacts API] contacts fetching error",(0,_.Ky)()),ze=(0,_.PH)("[Payments API] external accounts fetching error",(0,_.Ky)()),ue=(0,_.PH)("[Quick Transfer Widget] current view changed",(0,_.Ky)()),ye=(0,_.PH)("[Quick Transfer Widget] payee account picked up",(0,_.Ky)()),Re=(0,_.PH)("[Quick Transfer Widget] From Account changed",(0,_.Ky)()),Be=(0,_.PH)("[Payments Order API] send transfer order",(0,_.Ky)()),Ve=(0,_.PH)("[Payments Order API] transfer order is successful"),Ie=(0,_.PH)("[Payments Order API] transfer order is failed",(0,_.Ky)()),Xe=(0,_.PH)("[Quick Transfer Widget] Transfer Amount Set",(0,_.Ky)()),et=(0,_.PH)("[Quick Transfer Widget] Confirmation Modal Open",(0,_.Ky)()),tt=(0,_.PH)("[Quick Transfer Widget] Reset widget",(0,_.Ky)()),nt=(0,_.PH)("[Quick Transfer Widget] Reset Focus Element"),ot=(0,_.PH)("[Quick Transfer Widget] Set Field Touched",(0,_.Ky)()),it=(0,_.PH)("[Quick Transfer Widget] Default Currency changed",(0,_.Ky)()),ct="quick-transfer-store",eo={debitAccounts:void 0,creditAccounts:void 0,contacts:void 0,extAccounts:void 0,viewState:h.FORM,fromAccount:void 0,payeeTo:void 0,amount:void 0,defaultCurrency:"",accountsCallState:C.INIT,extAccountsCallState:C.INIT,contactsCallState:C.INIT,transferOrderCallState:C.INIT,isModalOpen:!1,touchedFields:[],focusElement:void 0},B=(0,_.ZF)(ct),to=(0,_.P1)(B,n=>n.fromAccount),no=(0,_.P1)(B,n=>n.debitAccounts),oo=(0,_.P1)(B,n=>n.creditAccounts),io=(0,_.P1)(B,n=>n.extAccounts),co=(0,_.P1)(B,n=>n.contacts),ro=(0,_.P1)(B,n=>n.accountsCallState),ao=(0,_.P1)(B,n=>n.contactsCallState),so=(0,_.P1)(B,n=>n.extAccountsCallState),_o=(0,_.P1)(B,n=>n.transferOrderCallState),lo=(0,_.P1)(B,n=>n.viewState),uo=(0,_.P1)(B,n=>n.payeeTo),fo=(0,_.P1)(B,n=>n.amount),go=(0,_.P1)(B,n=>n.isModalOpen),mo=(0,_.P1)(B,n=>n.touchedFields),po=(0,_.P1)(B,n=>n.focusElement);let P=(()=>{class n{constructor(t){this.store=t,this.accountsCallState$=this.store.select(ro),this.contactsCallState$=this.store.select(ao),this.extAccountsCallState$=this.store.select(so),this.currentView$=this.store.select(lo),this.debitAccounts$=this.store.select(no),this.creditAccounts$=this.store.select(oo),this.extAccounts$=this.store.select(io),this.contacts$=this.store.select(co),this.fromAccount$=this.store.select(to),this.toPayee$=this.store.select(uo),this.amount$=this.store.select(fo),this.isModalOpen$=this.store.select(go),this.touchedFields$=this.store.select(mo),this.focusElement$=this.store.select(po),this.paymentOrderCallState$=this.store.select(_o)}fetchAccounts(){this.store.dispatch(Me())}fetchExtAccounts(){this.store.dispatch(ve())}fetchContacts(){this.store.dispatch(Ne())}sendTranferOrder(t){this.store.dispatch(Be({reqData:t}))}setView(t,o){this.store.dispatch(ue({view:t,focus:o}))}setPayee(t){this.store.dispatch(ye({id:t}))}selectFromAccount(t){this.store.dispatch(Re({accountId:t}))}setAmount({amount:t,defaultCurrency:o}){this.store.dispatch(Xe({amount:t,defaultCurrency:o}))}setModalOpen(t){this.store.dispatch(et({isOpen:t}))}setTouchedField(t){this.store.dispatch(ot({fieldName:t}))}reset(t){this.store.dispatch(tt({focus:t}))}resetFocus(){this.store.dispatch(nt())}updateDefaultCurrency(t){this.store.dispatch(it({currency:t}))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(_.yh))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),Ue=(()=>{class n{constructor(t){this.store=t,this.accountsCallState$=this.store.accountsCallState$,this.loadingstate=C,this.extAccountsCallState$=this.store.extAccountsCallState$}backToForm(t){this.store.setView(h.FORM,t)}getAccounts(){this.store.fetchAccounts()}getExtAccounts(){this.store.fetchExtAccounts()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(P))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],inputs:{config:"config"},decls:0,vars:0,template:function(t,o){},encapsulation:2}),n})(),ke=(()=>{class n{constructor(){this.select=new e.vpe}pick(t){this.select.emit(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-quick-transfer-accounts-ui"]],inputs:{arrangements:"arrangements",selected:"selected",selectedCounterPartyAccount:"selectedCounterPartyAccount",config:"config"},outputs:{select:"select"},decls:1,vars:1,consts:[["bbButton","","color","unstyled","class","bb-quick-transfer__product-item bb-stack",3,"bb-quick-transfer--selected-bg","disabled","click",4,"ngFor","ngForOf"],["bbButton","","color","unstyled",1,"bb-quick-transfer__product-item","bb-stack",3,"disabled","click"],[3,"highlight","title","amount","productNumber","currency","productNumberFormat","showCurrencySymbol","active"]],template:function(t,o){1&t&&e.YNc(0,Qt,2,13,"button",0),2&t&&e.Q6J("ngForOf",o.arrangements)},directives:[W.mB,m.sg,S.Hq],encapsulation:2,changeDetection:0}),n})();const rt='[data-role="select-payee-button"] button',de='[data-role="select-from-button"] button';function fe(n){let i=n.snapshot.params;if(i=Object.assign(Object.assign({},n.snapshot.queryParams),i),n.children)for(const t of n.children)i=Object.assign(Object.assign({},fe(t)),i);return i}let at=(()=>{class n{constructor(t){this.store=t,this.id=function So(){return Math.floor(Math.random()*Date.now()).toString()}(),this.timestamp=(new Date).getTime(),this.amount$=this.store.amount$,this.toPayee$=this.store.toPayee$,this.paymentOrderCallState$=this.store.paymentOrderCallState$.pipe((0,p.U)(o=>{if(o.error){const c=o.error,r="Your Transfer Has Been Cancelled.",a="Oops, something went wrong!",A="rejected_by_user"===c.statusText?r:a;return{error:Object.assign(Object.assign({},c),{message:A})}}return o})),this.loadingstate=C}ngAfterViewInit(){this.doneButton.nativeElement.focus()}restart(){this.store.reset(de)}tryAgain(){this.store.setView(h.FORM,de)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(P))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-quick-transfer-complete-ui"]],viewQuery:function(t,o){if(1&t&&e.Gf(xt,5),2&t){let c;e.iGM(c=e.CRH())&&(o.doneButton=c.first)}},inputs:{successImg:"successImg",successImgNoMotion:"successImgNoMotion",config:"config"},decls:5,vars:4,consts:function(){let i,t,o,c,r,a,l;return i="Transfer succeeded!",t="Well done!",o=" Done ",c="You just transferred ",r=" to ",a=" Try again ",l="Our system was unable to process your transfer at the moment.",[[1,"bb-quick-transfer__complete"],[4,"ngIf","ngIfElse"],["paymentOrderFail",""],["role","dialog"],[1,"bb-text-align-right","bb-block"],["bbButton","","color","unstyled","data-role","clear-icon-button","aria-label","close transfer","i18-aria-label","Close transfer|Text for close transfer@@quick-transfer.complete.close.button",1,"btn-unstyled--focusable",3,"click"],["name","clear","size","lg"],[1,"bb-text-align-center","flex-fill","bb-block","bb-block--lg"],["media","(prefers-reduced-motion: reduce)",3,"srcset"],["alt",i,"data-role","transfer-success-anim",1,"img-fluid",3,"id","srcset"],["headingClasses","bb-text-semi-bold h5","headingType","h3","heading",t,3,"id"],["class","bb-text-support bb-subtitle",3,"id",4,"ngIf"],[1,"bb-text-align-center","bb-block","bb-block--sm"],["bbButton","","color","secondary","data-role","transfer-done",3,"click"],["done",""],o,[1,"bb-text-support","bb-subtitle",3,"id"],c,[3,"currency","amount","mapCurrency","showPlusSign"],r,[4,"ngIf"],[1,"bb-text-align-right","bb-block","bb-block--xl"],["bbButton","","color","unstyled","data-role","clear-icon-button","aria-label","close transfer","i18-aria-label","Close transfer|Text for close transfer@@quick-transfer.complete.close.button",3,"click"],["class","bb-text-align-center flex-fill bb-block bb-block--xl","data-role","transfer-fail-message",4,"ngIf"],["bbButton","","color","secondary","data-role","transfer-try-again-button",3,"click"],a,["data-role","transfer-fail-message",1,"bb-text-align-center","flex-fill","bb-block","bb-block--xl"],["color","danger","name","error-outline","size","xxl","data-role","complete-error-outline",1,"bb-quick-transfer__fail-icon","bb-block","bb-block--md"],["headingClasses","bb-text-semi-bold h5","headingType","h3",3,"id","heading"],l]},template:function(t,o){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,Lt,16,10,"ng-container",1),e.ALo(2,"async"),e.qZA(),e.YNc(3,Gt,10,5,"ng-template",null,2,e.W1O)),2&t){const c=e.MAs(4);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,o.paymentOrderCallState$)===o.loadingstate.LOADED)("ngIfElse",c)}},directives:[w.o,$.G,ie.G4,m.O5,S.Hq],pipes:[m.Ov],encapsulation:2,changeDetection:0}),n})();var b=(()=>{return(n=b||(b={})).currentAccount="Current Account",n.savingsAccount="Savings Account",n.creditCard="Credit Card",n.loanAccount="Loan",n.connectedAccounts="Connected Account",n.contacts="Contact",b;var n})();let st=(()=>{class n{constructor(t){this.store=t,this.toPayee$=this.store.toPayee$,this.fromAccount$=this.store.fromAccount$,this.amount$=this.store.amount$,this.isOpen$=this.store.isModalOpen$,this.paymentOrderCallState$=this.store.paymentOrderCallState$,this.loadingstate=C,this.viewState=h}closeModal(){this.store.setModalOpen(!1)}handleConfirm(){this.subscriptions$=(0,u.a)([this.fromAccount$,this.toPayee$,this.amount$]).pipe((0,d.q)(1)).subscribe(([t,o,c])=>{if(t&&o&&c){const r=((n,i,t,o)=>{const{connectedAccounts:c,contacts:r}=b,l=n.productKindName===c?n:i,A=n.productKindName===c?U.Tg.DEBTOR:U.Tg.CREDITOR,x={identification:{identification:(n.productKindName===c?i:n).uuid,schemeName:U.B7.ID}},T={identification:l.productKindName===r?l.number:l.uuid,schemeName:function M(){switch(l.productKindName){case c:return U.B7.EXTERNALID;case r:return U.B7.BBAN;default:return U.B7.ID}}()},K={instructedAmount:{amount:t.amount,currencyCode:t.currency},counterparty:{name:l.name,role:A},counterpartyAccount:Object.assign({identification:T},l.productKindName===r&&{selectedContact:{contactId:l.uuid,accountId:""}})};return{originatorAccount:x,requestedExecutionDate:(new Date).toISOString().slice(0,10),paymentType:function g(){switch(l.productKindName){case c:return o.external;case r:return o.contact;default:return o.internal}}(),transferTransactionInformation:K}})(t,o,c,this.paymentTypes||{});this.store.sendTranferOrder(r)}})}ngOnDestroy(){this.subscriptions$&&this.subscriptions$.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(P))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-quick-transfer-confirmation-modal-ui"]],inputs:{paymentTypes:"paymentTypes",config:"config"},decls:7,vars:4,consts:function(){let i,t,o,c,r;return i="Amount",t="From",o="To",c=" Confirm transfer ",r="Cancel",[[1,"bb-quick-transfer__modal",3,"isOpen","cancel","confirm"],[3,"title"],["bbCustomModalBody",""],["bbCustomModalFooter",""],["class","bb-block bb-block--md","data-role","quick-transfer-review-amount",4,"ngIf"],[1,"bb-stack"],["class","bb-stack__item bb-stack__item--align-top bb-stack__item--spacing-lg bb-quick-transfer__modal-from bb-stack__item--fill",4,"ngIf"],["aria-hidden","true",1,"bb-stack__item","bb-stack__item--spacing-lg"],["name","arrow-forward","size","md"],["class","bb-stack__item bb-stack__item--align-top bb-stack__item--fill",4,"ngIf"],["data-role","quick-transfer-review-amount",1,"bb-block","bb-block--md"],[1,"bb-block","bb-block--xs","font-weight-normal","bb-text-support","bb-subtitle"],i,["data-role","confirmation-amount",1,"bb-highlight",3,"currency","amount","mapCurrency","showPlusSign"],[1,"bb-stack__item","bb-stack__item--align-top","bb-stack__item--spacing-lg","bb-quick-transfer__modal-from","bb-stack__item--fill"],[1,"bb-quick-transfer__modal-wrap"],[1,"bb-text-support","bb-subtitle","font-weight-normal","bb-block","bb-block--xs"],t,["data-role","confirmation-from-account",3,"title","productNumber","amount","currency","productNumberFormat","showCurrencySymbol","highlight","active"],[1,"bb-stack__item","bb-stack__item--align-top","bb-stack__item--fill"],o,["data-role","confirmation-to-account",3,"title","productNumber","amount","currency","productNumberFormat","showCurrencySymbol","highlight","active"],[1,"bb-button-bar"],["color","primary","data-role","modal-confirm-button",1,"bb-button-bar__button",3,"isLoading","click"],c,["bbButton","","data-role","cancel-button","color","link",1,"bb-button-bar__button",3,"disabled","click"],r]},template:function(t,o){1&t&&(e.TgZ(0,"bb-modal-ui",0),e.NdJ("cancel",function(){return o.closeModal()})("confirm",function(){return o.handleConfirm()}),e.ALo(1,"async"),e._UZ(2,"bb-modal-header-ui",1),e.TgZ(3,"bb-modal-body-ui"),e.YNc(4,$t,9,9,"ng-template",2),e.qZA(),e.TgZ(5,"bb-modal-footer-ui"),e.YNc(6,qt,8,6,"ng-template",3),e.qZA()()),2&t&&(e.Q6J("isOpen",!!e.lcZ(1,2,o.isOpen$)),e.xp6(2),e.Q6J("title",(null==o.config||null==o.config.titles?null:o.config.titles[o.viewState.FORM])||""))},directives:[Y.zS,Y.Rb,Y.KF,ie.G4,W.mB,w.o,Y.YI,be.K,Y.Qd,m.O5,Y.yk,S.Hq],pipes:[m.Ov],encapsulation:2,changeDetection:0}),n})(),_t=(()=>{class n{constructor(t){this.parentFormControl=t,this.open=new e.vpe,this.touched=!1,this.onChange=o=>{},this.onTouched=()=>{},this.parentFormControl&&(this.parentFormControl.valueAccessor=this)}writeValue(t){}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}markAsTouched(){this.onTouched()}openAccountSelectorView(){this.open.emit(!0)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(F.a5,10))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-custom-product-selector"]],inputs:{emptyLabel:"emptyLabel",account:"account",touched:"touched",ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{open:"open"},decls:5,vars:5,consts:[["bbButton","","color","unstyled",1,"bb-stack","form-control","bb-quick-transfer-selector-field",3,"click"],["data-role","custom-product-selector-account-name","class","bb-stack__item bb-stack__item--fill bb-text-semi-bold bb-ellipsis--single-line",4,"ngIf","ngIfElse"],["accountTemplate",""],["name","angle-right","cropped","",1,"bb-text-support","bb-stack__item"],["data-role","custom-product-selector-account-name",1,"bb-stack__item","bb-stack__item--fill","bb-text-semi-bold","bb-ellipsis--single-line"],[1,"bb-stack__item","bb-stack__item--fill","bb-text-support"]],template:function(t,o){if(1&t&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return o.openAccountSelectorView()}),e.YNc(1,Wt,2,1,"span",1),e.YNc(2,Ht,2,1,"ng-template",null,2,e.W1O),e._UZ(4,"bb-icon-ui",3),e.qZA()),2&t){const c=e.MAs(3);e.ekj("border-danger",o.touched&&(null==o.parentFormControl?null:o.parentFormControl.invalid)),e.uIk("aria-describedby",o.ariaDescribedby),e.xp6(1),e.Q6J("ngIf",o.account)("ngIfElse",c)}},directives:[w.o,S.Hq,m.O5],encapsulation:2,changeDetection:0}),n})(),lt=(()=>{class n{ngOnInit(){this.requiredMessage=this.getValidationMessage("required")}getValidationMessage(t){var o;const c=null===(o=this.validationMessages)||void 0===o?void 0:o.find(r=>{var a,l;return!!(null===(l=null===(a=this.control)||void 0===a?void 0:a.errors)||void 0===l?void 0:l[t||r.name])});return(null==c?void 0:c.message)||""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-quick-transfer-validation-message"]],inputs:{control:"control",validationMessages:"validationMessages",id:"id"},decls:1,vars:1,consts:[["data-role","input-error",3,"showErrors",4,"ngIf"],["data-role","input-error",3,"showErrors"],[4,"ngIf","ngIfElse"],["invalidError",""],["data-role","required-error",4,"ngIf"],["data-role","required-error"]],template:function(t,o){1&t&&e.YNc(0,en,4,4,"bb-input-validation-message-ui",0),2&t&&e.Q6J("ngIf",(null==o.control?null:o.control.touched)&&(null==o.control?null:o.control.invalid))},directives:[he.d,m.O5],encapsulation:2,data:{animation:[re.dF]}}),n})(),ut=(()=>{class n{constructor(t,o,c){this.store=t,this.formBuilder=o,this.locale=c,this.toPayee$=this.store.toPayee$,this.fromAccount$=this.store.fromAccount$,this.amount$=this.store.amount$,this.touchedFields$=this.store.touchedFields$,this.form=new F.cw({}),this.viewState=h,this.id=(new Date).getTime(),this.currentView$=this.store.currentView$,this.destroy$=new E.x,this.decimalSeparator=(0,m.dv)(this.locale,m.wE.CurrencyDecimal),this.format={groupSeparator:"",decimalSeparator:this.decimalSeparator,groupSize:3}}get amountConfig(){var t;return null===(t=this.config)||void 0===t?void 0:t.fields.amount}ngOnInit(){var t,o;this.initializeForm(),null===(o=null===(t=this.form)||void 0===t?void 0:t.get("amountGroup.amount"))||void 0===o||o.valueChanges.pipe((0,k.x)(),(0,R.R)(this.destroy$)).subscribe(c=>{this.storeAmountValue(c)}),this.touchedFields$.pipe((0,d.q)(1)).subscribe(c=>{(null==c?void 0:c.length)&&c.forEach(r=>{var a,l;null===(l=null===(a=this.form)||void 0===a?void 0:a.get(r))||void 0===l||l.markAsTouched()})}),(0,u.a)([this.amount$.pipe((0,d.q)(1)),this.toPayee$.pipe((0,d.q)(1)),this.fromAccount$.pipe((0,k.x)())]).pipe((0,R.R)(this.destroy$)).subscribe(([c,r,a])=>{var l,A;const g=null==c?void 0:c.amount;null===(l=this.form)||void 0===l||l.patchValue({amountGroup:{amount:g?new Ft(g).toFormat(this.format):"",currency:(null==c?void 0:c.currency)||(null===(A=this.amountConfig)||void 0===A?void 0:A.initialCurrency)},toAccount:r,fromAccount:a})})}ngAfterViewInit(){this.store.focusElement$.pipe((0,k.x)(),(0,O.h)(Boolean),(0,R.R)(this.destroy$)).subscribe(t=>{const o=this.formEl.nativeElement.querySelector(t);o&&(o.focus({preventScroll:!0}),this.store.resetFocus())}),this.amount$.pipe((0,O.h)(t=>!t),(0,d.q)(1)).subscribe(()=>{var t,o,c;null===(o=null===(t=this.form)||void 0===t?void 0:t.get("amountGroup.amount"))||void 0===o||o.patchValue(" "),null===(c=this.form)||void 0===c||c.reset()})}ngOnDestroy(){this.destroy$.next(void 0),this.destroy$.complete()}openFromAccount(){this.store.setView(h.FROM),this.store.setTouchedField("fromAccount")}openPayeeAccount(){this.store.setView(h.PAYEE),this.store.setTouchedField("toAccount")}storeAmountValue(t){this.store.setAmount({amount:null==t?void 0:t.replace(this.decimalSeparator,".")})}openConfirmation(){var t;return function It(n,i,t,o){return new(t||(t=Promise))(function(r,a){function l(M){try{g(o.next(M))}catch(x){a(x)}}function A(M){try{g(o.throw(M))}catch(x){a(x)}}function g(M){M.done?r(M.value):function c(r){return r instanceof t?r:new t(function(a){a(r)})}(M.value).then(l,A)}g((o=o.apply(n,i||[])).next())})}(this,void 0,void 0,function*(){(yield this.currentView$.pipe((0,xe.P)()).toPromise())===h.FORM&&(null===(t=this.form)||void 0===t?void 0:t.valid)?(this.storeAmountValue(this.form.value.amountGroup.amount),this.store.setModalOpen(!0)):(this.setTouched("amountGroup.amount"),this.setTouched("fromAccount"),this.setTouched("toAccount"))})}isFieldValid(t){var o;const c=null===(o=this.form)||void 0===o?void 0:o.get(t);return c&&(c.valid||c.untouched)}setTouched(t){var o;const c=null===(o=this.form)||void 0===o?void 0:o.get(t);c&&(c.markAsTouched(),this.store.setTouchedField(t))}initializeForm(){var t;const{fromAccount:o,toAccount:c,amount:r}=(null===(t=this.config)||void 0===t?void 0:t.fields)||{};this.form=this.formBuilder.group({amountGroup:this.formBuilder.group({amount:["",(null==r?void 0:r.validators)||[],(null==r?void 0:r.asyncValidators)||[]],currency:["",F.kI.required]}),fromAccount:["",(null==o?void 0:o.validators)||[],(null==o?void 0:o.asyncValidators)||[]],toAccount:["",(null==c?void 0:c.validators)||[],(null==c?void 0:c.asyncValidators)||[]]})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(P),e.Y36(F.qu),e.Y36(e.soG))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-quick-transfer-form-ui"]],viewQuery:function(t,o){if(1&t&&e.Gf(tn,5),2&t){let c;e.iGM(c=e.CRH())&&(o.formEl=c.first)}},inputs:{config:"config"},decls:31,vars:41,consts:function(){let i,t,o,c,r,a;return i=" Quick transfer Form ",t="Select your account",o="" + "\ufffd0\ufffd" + "",c="Select beneficiary",r="" + "\ufffd0\ufffd" + "",a=" Transfer Now ",[[1,"bb-quick-transfer__view","bb-quick-transfer__view--form"],[1,"bb-block","bb-quick-transfer__heading"],[1,"bb-stack"],["data-role","quick-transfer-header","headingType","h2","headingClasses","bb-block bb-block--lg",1,"bb-stack__item","bb-stack__item--fill",3,"heading"],["data-role","quick-transfer-form",1,"bb-quick-transfer__form",3,"formGroup","ngSubmit"],["formElement",""],[3,"disabled"],[1,"sr-only"],i,[1,"bb-block","bb-block--lg"],["data-role","from-label",1,"bb-label"],["formControlName","fromAccount","data-role","select-from-button","emptyLabel",t,3,"touched","account","aria-describedby","focusout","open"],["data-role","qt-form.from.validation-message",3,"id","control","validationMessages"],["data-role","payee-label",1,"bb-label"],o,["formControlName","toAccount","data-role","select-payee-button","emptyLabel",c,3,"touched","account","aria-describedby","focusout","open"],["data-role","qt-form.payee.validation-message",3,"id","control","validationMessages"],["formGroupName","amountGroup",1,"bb-block","bb-block--xl"],["data-role","quick-transfer.form.amount-label",1,"bb-label",3,"for"],r,["formControlName","amount","data-role","amount-input",3,"id","autoDecimal","wrapperClasses","mapCurrency","currency","required","aria-describedby","placeholder","focusout"],["data-role","qt-form.amount-input.validation-message",3,"id","control","validationMessages"],[1,"bb-block","bb-block--sm"],["bbButton","","color","primary","data-role","open-confirmation","type","submit",3,"block"],a]},template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"bb-header-ui",3),e.qZA()(),e.TgZ(4,"form",4,5),e.NdJ("ngSubmit",function(){return o.openConfirmation()}),e.TgZ(6,"fieldset",6),e.ALo(7,"async"),e.TgZ(8,"legend",7),e.SDv(9,8),e.qZA(),e.TgZ(10,"div",9)(11,"label",10),e._uU(12),e.qZA(),e.TgZ(13,"bb-custom-product-selector",11),e.NdJ("focusout",function(){return o.setTouched("fromAccount")})("open",function(){return o.openFromAccount()}),e.ALo(14,"async"),e.qZA(),e._UZ(15,"bb-quick-transfer-validation-message",12),e.qZA(),e.TgZ(16,"div",9)(17,"label",13),e.SDv(18,14),e.qZA(),e.TgZ(19,"bb-custom-product-selector",15),e.NdJ("focusout",function(){return o.setTouched("toAccount")})("open",function(){return o.openPayeeAccount()}),e.ALo(20,"async"),e.qZA(),e._UZ(21,"bb-quick-transfer-validation-message",16),e.qZA(),e.TgZ(22,"div",17)(23,"label",18),e.SDv(24,19),e.qZA(),e.TgZ(25,"bb-amount-input-ui",20),e.NdJ("focusout",function(){return o.setTouched("amountGroup.amount")}),e.ALo(26,"async"),e.qZA(),e._UZ(27,"bb-quick-transfer-validation-message",21),e.qZA(),e.TgZ(28,"div",22)(29,"button",23),e.SDv(30,24),e.qZA()()()()()),2&t){let c;e.xp6(3),e.Q6J("heading",null==o.config||null==o.config.titles?null:o.config.titles[o.viewState.FORM]),e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(2),e.Q6J("disabled",e.lcZ(7,33,o.currentView$)!==o.viewState.FORM),e.xp6(6),e.Oqu(null==o.config||null==o.config.fields||null==o.config.fields.fromAccount?null:o.config.fields.fromAccount.label),e.xp6(1),e.s9C("aria-describedby","fromAccount-errors-"+o.id),e.Q6J("touched",!o.isFieldValid("fromAccount"))("account",e.lcZ(14,35,o.fromAccount$)),e.xp6(2),e.s9C("id","fromAccount-errors-"+o.id),e.Q6J("control",null==o.form?null:o.form.get("fromAccount"))("validationMessages",null==o.config||null==o.config.fields||null==o.config.fields.fromAccount?null:o.config.fields.fromAccount.validationMessages),e.xp6(3),e.pQV(null==o.config||null==o.config.fields||null==o.config.fields.toAccount?null:o.config.fields.toAccount.label),e.QtT(18),e.xp6(1),e.s9C("aria-describedby","toAccount-errors-"+o.id),e.Q6J("touched",!o.isFieldValid("toAccount"))("account",e.lcZ(20,37,o.toPayee$)||void 0),e.xp6(2),e.s9C("id","toAccount-errors-"+o.id),e.Q6J("control",null==o.form?null:o.form.get("toAccount"))("validationMessages",null==o.config||null==o.config.fields||null==o.config.fields.toAccount?null:o.config.fields.toAccount.validationMessages),e.xp6(1),e.ekj("was-validated",!o.isFieldValid("amountGroup.amount")),e.xp6(1),e.s9C("for","amount-"+o.id),e.xp6(1),e.pQV(null==o.config||null==o.config.fields||null==o.config.fields.amount?null:o.config.fields.amount.label),e.QtT(24),e.xp6(1),e.s9C("aria-describedby","amount-errors-"+o.id),e.Q6J("id","amount-"+o.id)("autoDecimal",!(null==o.amountConfig||!o.amountConfig.autoDecimal))("wrapperClasses",(null==o.amountConfig?null:o.amountConfig.wrapperClasses)||"")("mapCurrency",!(null==o.config||null==o.config.uiComponentProps||!o.config.uiComponentProps.mapCurrency))("currency",(null==(c=e.lcZ(26,39,o.fromAccount$))?null:c.currency)||(null==o.amountConfig?null:o.amountConfig.initialCurrency))("required",!(null==o.amountConfig||!o.amountConfig.required))("placeholder",(null==o.amountConfig?null:o.amountConfig.placeholder)||""),e.xp6(2),e.s9C("id","amount-errors-"+o.id),e.Q6J("control",null==o.form?null:o.form.get("amountGroup.amount"))("validationMessages",null==o.amountConfig?null:o.amountConfig.validationMessages),e.xp6(2),e.Q6J("block",!0)}},directives:[$.G,_t,lt,Te.l,F._Y,F.JL,F.sg,F.JJ,F.u,F.x0,F.Q7,S.Hq],pipes:[m.Ov],encapsulation:2}),n})();const dt=(n,i)=>(n||[]).filter(o=>!i||i.includes(o.productKindName)),ft=(n,i)=>(n||[]).filter(o=>!i||!i.length||i.every(({key:c,value:r})=>r.some(a=>o.defaultRecord&&a===o.defaultRecord[c]))),te=(n,i,t,o)=>{if(!n)return[];const c=t||[];c.push({from:b.connectedAccounts,to:b.connectedAccounts}),c.push({from:b.connectedAccounts,to:b.contacts});const r=c.filter(a=>o===L.FROM?a.to===(null==i?void 0:i.productKindName):a.from===(null==i?void 0:i.productKindName)).map(a=>o===L.FROM?a.from:a.to);return n.filter(a=>!r.includes(a.productKindName))};let gt=(()=>{class n extends Ue{constructor(t){super(t),this.store=t,this.fromAccountId$=this.store.fromAccount$.pipe((0,O.h)(Boolean),(0,V.j)("uuid")),this.selectedToPayee$=this.store.toPayee$.pipe((0,d.q)(1)),this.fromAccountSelector=de,this.viewState=h}ngAfterViewInit(){this.backbutton.nativeElement.focus({preventScroll:!0})}handleSelectFrom(t){this.store.selectFromAccount(t)}ngOnInit(){const{fields:t,disabledCombinations:o}=this.config||{},{productKinds:c}=(null==t?void 0:t.fromAccount)||{};(0,u.a)([this.extAccountsCallState$,this.accountsCallState$]).pipe((0,d.q)(1)).subscribe(([r,a])=>{r===C.INIT&&(null==c?void 0:c.includes(b.connectedAccounts))&&this.getExtAccounts(),a===C.INIT&&this.getAccounts()}),this.accounts$=this.store.debitAccounts$.pipe((0,d.q)(1),(0,J.M)(this.selectedToPayee$.pipe((0,d.q)(1))),(0,p.U)(([r,a])=>te(r,a,o,L.FROM)),(0,ne.d)(1)),this.extAccounts$=this.store.extAccounts$.pipe((0,J.M)(this.selectedToPayee$.pipe((0,d.q)(1))),(0,p.U)(([r,a])=>te(r,a,o,L.FROM)),(0,ne.d)(1))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(P))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-quick-transfer-from-account-ui"]],viewQuery:function(t,o){if(1&t&&e.Gf(we,5),2&t){let c;e.iGM(c=e.CRH())&&(o.backbutton=c.first)}},features:[e._Bn([P]),e.qOj],decls:14,vars:9,consts:function(){let i,t,o,c,r,a,l,A;return i=" We could not retrieve data for your internal accounts.",t=" Reload ",o=" " + "\ufffd0\ufffd" + " ",c=" We could not retrieve data for your external accounts.",r=" Reload ",a="No data retrieved",l="We could not retrieve data for your accounts.",A=" Reload ",[[1,"bb-quick-transfer__view"],["data-role","from-account-header",1,"bb-quick-transfer__heading","bb-stack","bb-quick-transfer__heading--border"],["bbButton","","aria-label","back to form","i18-aria-label","Back button|Quick transfer back button@@quick-transfer.fromaccount.back.button","color","unstyled",1,"bb-stack__item","btn-unstyled--focusable","bb-block","bb-block--lg",3,"click"],["back",""],["name","arrow-back"],["headingClasses","h3 bb-block bb-block--lg","headingType","h2",1,"bb-stack__item",3,"heading"],["data-role","from-account",1,"bb-quick-transfer__tabs-content","scrollable-box-content"],[4,"ngIf"],["loadingState",""],["errorCase",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],["class","bb-quick-transfer__subheader bb-stack",4,"ngIf"],["data-role","internal-accounts",3,"arrangements","selected","selectedCounterPartyAccount","config","select"],[1,"bb-quick-transfer__subheader","bb-stack"],["name","error-outline","size","md",1,"bb-stack__item","bb-stack__item--align-top"],[1,"bb-subtitle"],["data-role","qt.from-view.internal-item-not-found-msg"],i,["bbButton","","color","link-text","data-role","reload-accounts",3,"click"],t,["class","bb-subheader bb-text-support bb-quick-transfer__subheader bb-block bb-block--no-margin bb-inline-stack h4",4,"ngIf"],[1,"bb-subheader","bb-text-support","bb-quick-transfer__subheader","bb-block","bb-block--no-margin","bb-inline-stack","h4"],["name","insert-link","cropped","",1,"bb-inline-stack__item--spacing-sm"],["data-role","external-accounts-header"],o,["errorState",""],["data-role","external-accounts",3,"arrangements","selected","config","select"],c,r,[1,"bb-loading-indicator"],[3,"loaderSize"],[1,"bb-quick-transfer__heading"],["data-role","double-error-state",1,"bb-state-container"],["title",a,"iconClasses","","iconSize","xxl","subtitle",l,"iconModifier","error-outline",1,"bb-block","bb-block--md"],["bbButton","","buttonSize","sm","color","primary","data-role","reload-accounts",3,"click"],A]},template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"button",2,3),e.NdJ("click",function(){return o.backToForm(o.fromAccountSelector)}),e._UZ(4,"bb-icon-ui",4),e.qZA(),e._UZ(5,"bb-header-ui",5),e.qZA(),e.TgZ(6,"div",6),e.YNc(7,Sn,2,1,"ng-container",7),e.ALo(8,"async"),e.ALo(9,"async"),e.qZA()(),e.YNc(10,En,2,1,"ng-template",null,8,e.W1O),e.YNc(12,bn,5,0,"ng-template",null,9,e.W1O)),2&t&&(e.xp6(5),e.Q6J("heading",null==o.config||null==o.config.titles?null:o.config.titles[o.viewState.FROM]),e.xp6(2),e.Q6J("ngIf",e.WLB(6,Ye,e.lcZ(8,2,o.accountsCallState$),e.lcZ(9,4,o.extAccountsCallState$))))},directives:[w.o,$.G,ke,ae.Q,se.s,S.Hq,m.O5,m.RF,m.n9,m.tP,m.ED],pipes:[m.Ov],encapsulation:2,changeDetection:0}),n})(),mt=(()=>{class n extends Ue{constructor(t){super(t),this.store=t,this.selectedTab=0,this.contacts$=this.store.contacts$,this.selectedToPayeeId$=this.store.toPayee$.pipe((0,O.h)(Boolean),(0,V.j)("uuid")),this.selectedFromAccount$=this.store.fromAccount$.pipe((0,d.q)(1)),this.contactsCallState$=this.store.contactsCallState$,this.renderContacts$=this.selectedFromAccount$.pipe((0,p.U)(o=>{var c;const{toAccount:r}=(null===(c=this.config)||void 0===c?void 0:c.fields)||{},{connectedAccounts:a,contacts:l}=b,A=(null==o?void 0:o.productKindName)===a,g=!(null==r?void 0:r.productKinds)||(null==r?void 0:r.productKinds.includes(l));return!A&&g})),this.toAccountSelector=rt,this.viewState=h}ngOnInit(){const{fields:t,disabledCombinations:o}=this.config||{},{productKinds:c}=(null==t?void 0:t.toAccount)||{};(0,u.a)([this.extAccountsCallState$,this.accountsCallState$]).pipe((0,d.q)(1)).subscribe(([r,a])=>{r===C.INIT&&(null==c?void 0:c.includes(b.connectedAccounts))&&this.getExtAccounts(),a===C.INIT&&this.getAccounts()}),this.accounts$=this.store.creditAccounts$.pipe((0,d.q)(1),(0,J.M)(this.selectedFromAccount$),(0,p.U)(([r,a])=>te(r,a,o,L.TO)),(0,ne.d)(1)),this.extAccounts$=this.store.extAccounts$.pipe((0,J.M)(this.selectedFromAccount$),(0,p.U)(([r,a])=>te(r,a,o,L.TO)),(0,ne.d)(1))}ngAfterViewInit(){this.backbutton.nativeElement.focus({preventScroll:!0})}onTabSelect(t){this.selectedTab=t,1===t&&this.contactsCallState$.pipe((0,d.q)(1),(0,O.h)(o=>o===C.INIT)).subscribe(()=>{this.getContacts()})}pickPayee(t){this.store.setPayee(t)}getContacts(){this.store.fetchContacts()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(P))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-quick-transfer-to-account-ui"]],viewQuery:function(t,o){if(1&t&&e.Gf(we,5),2&t){let c;e.iGM(c=e.CRH())&&(o.backbutton=c.first)}},features:[e.qOj],decls:19,vars:18,consts:function(){let i,t,o,c,r,a,l,A,g,M,x,T,K;return i="My Accounts",t="Contacts",o=" We could not retrieve data for your internal accounts.",c=" Reload ",r=" " + "\ufffd0\ufffd" + " ",a=" We could not retrieve data for your external accounts.",l=" Reload ",A="No data retrieved",g="We could not retrieve data for your contacts.",M=" Reload ",x="No data retrieved",T="We could not retrieve data for your accounts.",K=" Reload ",[[1,"bb-quick-transfer__view"],["data-role","to-account-header",1,"bb-quick-transfer__heading","bb-stack"],["bbButton","","data-role","qt.payee-list.back-icon-button","aria-label","back to form","i18-aria-label","Back button|Quick transfer back button@@quick-transfer.to-account.back.button","color","unstyled",1,"bb-stack__item","btn-unstyled--focusable","bb-block","bb-block--xs",3,"click"],["back",""],["name","arrow-back"],["headingType","h2",1,"bb-stack__item",3,"headingClasses","heading"],[1,"bb-quick-transfer__tabs-container"],[3,"initialSelection","select",4,"ngIf"],[1,"bb-quick-transfer__tabs-content","scrollable-box-content"],["data-role","quick-transfer-accounts-tab",4,"ngIf"],["data-role","quick-transfer-contacts-tab",4,"ngIf"],["loadingState",""],["errorCase",""],[3,"initialSelection","select"],["data-role","account-tab-header"],i,["data-role","contacts-tab-header"],t,["data-role","quick-transfer-accounts-tab"],[4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],["class","bb-quick-transfer__subheader bb-stack",4,"ngIf"],["data-role","internal-accounts",3,"arrangements","selected","selectedCounterPartyAccount","config","select"],[1,"bb-quick-transfer__subheader","bb-stack"],["name","error-outline","size","md",1,"bb-stack__item","bb-stack__item--align-top"],[1,"bb-subtitle"],["data-role","qt.to-view.internal-item-not-found-msg"],o,["bbButton","","color","link-text","data-role","reload-accounts",3,"click"],c,["class","bb-subheader bb-text-support bb-quick-transfer__subheader bb-block bb-block--no-margin bb-inline-stack",4,"ngIf"],[1,"bb-subheader","bb-text-support","bb-quick-transfer__subheader","bb-block","bb-block--no-margin","bb-inline-stack"],["name","insert-link","cropped","",1,"bb-inline-stack__item--spacing-sm"],["data-role","external-accounts-header"],r,["errorState",""],["data-role","external-accounts",3,"arrangements","selected","config","select"],a,l,["data-role","quick-transfer-contacts-tab"],[3,"arrangements","selected","config","select"],[1,"bb-quick-transfer__heading"],["data-role","contacts-error-state",1,"bb-state-container"],["title",A,"iconClasses","","iconSize","xxl","subtitle",g,"iconModifier","error-outline",1,"bb-block","bb-block--md"],["bbButton","","buttonSize","sm","color","primary","data-role","reload-accounts",3,"click"],M,[1,"bb-loading-indicator"],[3,"loaderSize"],["data-role","double-error-state",1,"bb-state-container"],["title",x,"iconClasses","","subtitle",T,"iconModifier","error-outline",1,"bb-block","bb-block--md"],K]},template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.ALo(2,"async"),e.TgZ(3,"button",2,3),e.NdJ("click",function(){return o.backToForm(o.toAccountSelector)}),e.ALo(5,"async"),e._UZ(6,"bb-icon-ui",4),e.qZA(),e._UZ(7,"bb-header-ui",5),e.ALo(8,"async"),e.qZA(),e.TgZ(9,"div",6),e.YNc(10,Cn,5,1,"bb-tab-group-ui",7),e.ALo(11,"async"),e.TgZ(12,"div",8),e.YNc(13,Kn,4,8,"div",9),e.YNc(14,Zn,3,3,"div",10),e.qZA()()(),e.YNc(15,$n,2,1,"ng-template",null,11,e.W1O),e.YNc(17,qn,5,0,"ng-template",null,12,e.W1O)),2&t&&(e.xp6(1),e.ekj("bb-quick-transfer__heading--border",!e.lcZ(2,10,o.renderContacts$)),e.xp6(2),e.ekj("bb-stack__item--align-top",!e.lcZ(5,12,o.renderContacts$)),e.xp6(4),e.MGl("headingClasses","bb-block bb-block--",e.lcZ(8,14,o.renderContacts$)?"sm":"lg"," h3"),e.Q6J("heading",null==o.config||null==o.config.titles?null:o.config.titles[o.viewState.PAYEE]),e.xp6(3),e.Q6J("ngIf",e.lcZ(11,16,o.renderContacts$)),e.xp6(2),e.Q6J("@tabsAnimation",o.selectedTab),e.xp6(1),e.Q6J("ngIf",0===o.selectedTab),e.xp6(1),e.Q6J("ngIf",1===o.selectedTab))},directives:[w.o,$.G,_e.QW,_e.id,ke,se.s,ae.Q,S.Hq,m.O5,m.RF,m.n9,m.tP,m.ED],pipes:[m.Ov],encapsulation:2,data:{animation:[re.oL]},changeDetection:0}),n})();const pt=(0,Q.oQ)([(0,Q.oB)({position:"absolute",height:"100%",width:"100%",transform:"{{from}}",display:"block",top:0}),(0,Q.jt)("200ms ease-in",(0,Q.oB)({transform:"{{to}}"}))]);function Fe(n,i){return[(0,Q.eR)(":enter",[(0,Q._7)(pt,{params:{from:n,to:i}})]),(0,Q.eR)(":leave",[(0,Q._7)(pt,{params:{from:i,to:n}})])]}const ho=(0,Q.X$)("slideLeft",Fe("translateX(100%)","translateX(0%)")),To=(0,Q.X$)("slideRight",Fe("translateX(-100%)","translateX(0%)")),At=((0,Q.X$)("slideUp",Fe("translateY(100%)","translateY(0%)")),{fields:{fromAccount:{productKinds:[b.savingsAccount,b.currentAccount,b.creditCard,b.loanAccount,b.connectedAccounts],label:"From",mapItems:n=>n.filter(i=>["EUR","AED","USD"].includes((null==i?void 0:i.currency)||"")),connectedAccountsSubHeader:"Connected Accounts",validators:[F.kI.required],validationMessages:[{name:"required",message:"Account is required"}]},toAccount:{productKinds:[b.savingsAccount,b.currentAccount,b.creditCard,b.loanAccount,b.connectedAccounts,b.contacts],label:"To",mapContacts:n=>n.filter(i=>!!i.number),connectedAccountsSubHeader:"Connected Accounts",validators:[F.kI.required],validationMessages:[{name:"required",message:"Beneficiary is required"}]},amount:{initialCurrency:"USD",autoDecimal:!0,placeholder:"0.00",wrapperClasses:"bb-amount-input__field--large",label:"Amount",validationMessages:[{name:"nonZero",message:"Transfer amount is required"}],validators:[function Ao(n){return!n.value||Number(n.value)<=0?{nonZero:!0}:null}]}},businessFunction:"A2A Transfer",titles:{[h.FORM]:"Quick Transfer",[h.FROM]:"Transfer from",[h.PAYEE]:"Transfer to",[h.REVIEW]:"Quick Transfer"},paymentTypes:{internal:"INTERNAL_TRANSFER",external:"EXTERNAL_A2A",contact:"INTRABANK_TRANSFER"},disabledCombinations:[{from:b.loanAccount,to:b.loanAccount},{from:b.creditCard,to:b.creditCard}],uiComponentProps:{mapCurrency:!0,accountNumberFormat:{segments:0,length:0,maskRange:[0,0]}}}),vo=new e.OlP("QuickTransferJourneyConfigurationToken injection token");let ge=(()=>{class n{constructor(t){this.config=t,this._config=Object.assign(Object.assign({},At),this.config||{})}get defaults(){return At}get fields(){return this._config.fields}get businessFunction(){return this._config.businessFunction}get paymentTypes(){return this._config.paymentTypes}get disabledCombinations(){return this._config.disabledCombinations}get productSummaryQueryParameters(){return this._config.productSummaryQueryParameters}get uiComponentProps(){return this._config.uiComponentProps}get titles(){return this._config.titles}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(vo,8))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),St=(()=>{class n{constructor(t,o,c,r){this.store=t,this.router=o,this.activatedRoute=c,this.config=r,this.subscription$=new vt.w0,this.viewState=h,this.currentView$=this.store.currentView$,this.successImg="./assets/quick-transfer-journey-ang/succeed.svg",this.successImgNoMotion="./assets/quick-transfer-journey-ang/no-motion.svg"}ngOnInit(){var t,o;this.subscription$=this.router.events.pipe((0,O.h)(c=>c instanceof f.m2),(0,yt.O)(fe(this.activatedRoute.root)),(0,J.M)(this.store.touchedFields$,this.store.accountsCallState$),(0,p.U)(([c,r,a])=>(a===C.INIT&&this.store.fetchAccounts(),!(null==r?void 0:r.includes("fromAccount")))),(0,O.h)(Boolean),(0,Rt.b)(()=>this.applyDisabledCombination(fe(this.activatedRoute.root).selectedAccount))).subscribe(()=>{const c=fe(this.activatedRoute.root).selectedAccount;this.store.selectFromAccount(c)}),this.store.updateDefaultCurrency(null===(o=null===(t=this.config.fields)||void 0===t?void 0:t.amount)||void 0===o?void 0:o.initialCurrency)}ngOnDestroy(){this.store.reset(),this.subscription$.unsubscribe()}applyDisabledCombination(t){const{disabledCombinations:o}=this.config||{};return this.store.debitAccounts$.pipe((0,O.h)(Boolean),(0,d.q)(1),(0,J.M)(this.store.toPayee$),(0,p.U)(([c,r])=>te(c,r,o,L.FROM).some(l=>l.uuid===t)),(0,O.h)(Boolean))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(P),e.Y36(f.F0),e.Y36(f.gz),e.Y36(ge))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-quick-transfer-journey"]],features:[e._Bn([ge,P])],decls:2,vars:3,consts:[["class","bb-quick-transfer",4,"ngIf"],[1,"bb-quick-transfer"],[3,"config",4,"ngIf"],["class","bb-quick-transfer__success-overlay",4,"ngIf"],[3,"successImg","successImgNoMotion","config",4,"ngIf"],[3,"paymentTypes","config"],[3,"config"],[1,"bb-quick-transfer__success-overlay"],[3,"successImg","successImgNoMotion","config"]],template:function(t,o){1&t&&(e.YNc(0,Xn,7,7,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,o.currentView$))},directives:[ut,gt,mt,at,st,m.O5],pipes:[m.Ov],encapsulation:2,data:{animation:[To,ho,re.BX,re.VG]}}),n})();const Et=n=>null==n?void 0:n.map(i=>{let t;switch(i.productKindName){case"Term Deposit":t=i.principalAmount;break;case"Investment Account":t=i.currentInvestmentValue;break;default:t=i.bookedBalance}return{uuid:i.id,balance:t||0,name:i.displayName,currency:i.currency,number:i.IBAN||i.BBAN||i.BIC||i.number,externalTransferAllowed:i.externalTransferAllowed,productKindName:i.productKindName,defaultRecord:i}});let bt=(()=>{class n{constructor(t,o,c,r,a,l){this.productSummaryDataHttpService=t,this.contactService=o,this.paymentA2AService=c,this.paymentOrderService=r,this.transactionSigningHelper=a,this.configService=l,this.destroy$=new E.x,this.productSummaryParameters={resourceName:"Payments",privilege:"create",from:0,size:100,businessFunction:"A2A Transfer"};const{productSummaryQueryParameters:A,businessFunction:g}=this.configService||{};this.productSummaryParameters=Object.assign(Object.assign(Object.assign({},this.productSummaryParameters),A),g?{businessFunction:g}:void 0)}getDebitAccounts(){const{fields:t}=this.configService||{},{productKinds:o,mapItems:c,otherFilters:r}=(null==t?void 0:t.fromAccount)||{};return this.productSummaryDataHttpService.getArrangementsByBusinessFunction(Object.assign(Object.assign({},this.productSummaryParameters),{debitAccount:!0})).pipe((0,p.U)(a=>Et(a)),(0,p.U)(a=>dt(a,o)),(0,p.U)(a=>ft(a,r)),(0,p.U)(a=>c&&(null==a?void 0:a.length)?c(a):a))}getCreditAccounts(){const{fields:t}=this.configService||{},{productKinds:o,mapItems:c,otherFilters:r}=(null==t?void 0:t.toAccount)||{};return this.productSummaryDataHttpService.getArrangementsByBusinessFunction(Object.assign(Object.assign({},this.productSummaryParameters),{creditAccount:!0})).pipe((0,p.U)(a=>Et(a)),(0,p.U)(a=>dt(a,o)),(0,p.U)(a=>ft(a,r)),(0,p.U)(a=>c&&(null==a?void 0:a.length)?c(a):a))}getContacts(){const t=this.configService.fields.toAccount.mapContacts;return this.contactService.getContacts({}).pipe((0,p.U)(o=>null==o?void 0:o.map(c=>({uuid:c.id,name:c.name,number:c.accounts[0].accountNumber||c.accounts[0].IBAN,productKindName:b.contacts,defaultRecord:c}))),(0,p.U)(o=>t&&(null==o?void 0:o.length)?t(o):o))}getExternalAccounts(){return this.paymentA2AService.getAll().pipe((0,p.U)(t=>{var o;return null===(o=null==t?void 0:t.accounts)||void 0===o?void 0:o.filter(({status:c})=>"Active"===c).map(({externalAccountId:c,accountNickName:r,accountNumber:a,bankName:l})=>({uuid:c,name:r||l,number:a,productKindName:b.connectedAccounts}))}))}sendPaymentOrder(t){return this.paymentOrderService.postPaymentOrders({paymentOrdersPost:t}).pipe((0,X.z)(o=>{var c;return(null===(c=this.transactionSigningHelper)||void 0===c?void 0:c.isTransactionSigningResponse(o))?(this.paymentOrderResponse$=new Bt.t(1),this.handleTransactionSigning(o),this.paymentOrderResponse$.asObservable().pipe((0,d.q)(1))):(0,ee.of)(o)}))}getPaymentProgressStatus(t){return this.paymentOrderService.getProgressStatusByPaymentOrderId({paymentOrderId:(null==t?void 0:t["payment-order-id"])||""},"body").pipe((0,V.j)("progressStatus"))}ngOnDestroy(){this.destroy$.next(void 0),this.destroy$.complete()}isPaymentConfirmed(t){return!!t&&t!==H.CONFIRMATION_PENDING&&t!==H.SENDING}handleTransactionSigning(t){if(!this.transactionSigningHelper)return;const o=t["payment-order-id"];o&&this.transactionSigningHelper.getTransactionInfo({data:t,asyncPollingOptions:{pollInterval:1e3,maxRetries:3,pollUntilFn:this.isPaymentConfirmed,complete$:this.destroy$},fetchFn:this.getPaymentProgressStatus.bind(this),onSuccess:this.onTransactionSigningSuccess.bind(this,o),onRejected:this.onTransactionFail.bind(this,o),onDeclined:this.onTransactionFail.bind(this),onError:this.onTransactionFail.bind(this)})}onTransactionSigningSuccess(t){this.paymentOrderService.getPaymentOrderById({paymentOrderId:t},"body").pipe((0,R.R)(this.destroy$)).subscribe(o=>{var c;null===(c=this.paymentOrderResponse$)||void 0===c||c.next(o)})}onTransactionFail(){var t;null===(t=this.paymentOrderResponse$)||void 0===t||t.next(void 0)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(y.IK),e.LFG(q.Eq),e.LFG(N.Px),e.LFG(U.k4),e.LFG(Dt.YA,8),e.LFG(ge))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),Ct=(()=>{class n{constructor(t,o,c){this.actions$=t,this.httpService=o,this.communicationService=c,this.fetchAccounts=(0,D.GW)(()=>this.actions$.pipe((0,D.l4)(Me),(0,X.z)(()=>(0,u.a)([this.httpService.getCreditAccounts(),this.httpService.getDebitAccounts()]).pipe((0,p.U)(([r,a])=>$e({debitAccounts:a,creditAccounts:r})),(0,oe.K)(r=>(0,ee.of)(He({error:new le.UA({error:r||"Accounts Fetch Error"})}))))))),this.fetchContacts=(0,D.GW)(()=>this.actions$.pipe((0,D.l4)(Ne),(0,X.z)(()=>this.httpService.getContacts().pipe((0,p.U)(r=>qe({contacts:r})),(0,oe.K)(r=>(0,ee.of)(je({error:new le.UA({error:r||"Contacts Fetch Error"})}))))))),this.fetchExtAccounts=(0,D.GW)(()=>this.actions$.pipe((0,D.l4)(ve),(0,X.z)(()=>this.httpService.getExternalAccounts().pipe((0,p.U)(r=>We({extAccounts:r})),(0,oe.K)(r=>(0,ee.of)(ze({error:new le.UA({error:r||"External Accounts Fetch Error"})}))))))),this.sendTransferOrder=(0,D.GW)(()=>this.actions$.pipe((0,D.l4)(Be),(0,X.z)(r=>this.httpService.sendPaymentOrder(r.reqData).pipe((0,p.U)(a=>(null==a?void 0:a.id)&&a.status!==H.REJECTED?(this.communicationService&&this.communicationService.transferSucceeded(),Ve()):Ie({error:new le.UA({error:"Transfer Order Post Error"})})),(0,oe.K)(a=>(0,ee.of)(Ie({error:a}))))))),this.setPayeeAccount=(0,D.GW)(()=>this.actions$.pipe((0,D.l4)(ye),(0,p.U)(()=>ue({view:h.FORM,focus:rt})))),this.pickFromAccount=(0,D.GW)(()=>this.actions$.pipe((0,D.l4)(Re),(0,p.U)(()=>ue({view:h.FORM,focus:de}))))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(D.eX),e.LFG(bt),e.LFG(Ze,8))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();function Uo(n,i,t){return t.indexOf(n)===i}const ko=(0,_.Lq)(eo,(0,_.on)(Me,n=>Object.assign(Object.assign({},n),{accountsCallState:C.LOADING})),(0,_.on)(He,(n,{error:i})=>Object.assign(Object.assign({},n),{accountsCallState:{error:i}})),(0,_.on)($e,(n,{debitAccounts:i,creditAccounts:t})=>Object.assign(Object.assign({},n),{debitAccounts:i,creditAccounts:t,accountsCallState:C.LOADED})),(0,_.on)(Ne,n=>Object.assign(Object.assign({},n),{contactsCallState:C.LOADING})),(0,_.on)(je,(n,{error:i})=>Object.assign(Object.assign({},n),{contactsCallState:{error:i}})),(0,_.on)(qe,(n,{contacts:i})=>Object.assign(Object.assign({},n),{contacts:i,contactsCallState:C.LOADED})),(0,_.on)(ve,n=>Object.assign(Object.assign({},n),{extAccountsCallState:C.LOADING})),(0,_.on)(We,(n,{extAccounts:i})=>Object.assign(Object.assign({},n),{extAccounts:i,extAccountsCallState:C.LOADED})),(0,_.on)(ze,(n,{error:i})=>Object.assign(Object.assign({},n),{extAccountsCallState:{error:i}})),(0,_.on)(Re,(n,{accountId:i})=>{var t;const c=[...n.extAccounts||[],...n.debitAccounts||[]].find(a=>a.uuid===i)||{},r=(null==c?void 0:c.currency)||n.defaultCurrency;return Object.assign(Object.assign({},n),{fromAccount:c,amount:{amount:(null===(t=n.amount)||void 0===t?void 0:t.amount)||"",currency:r}})}),(0,_.on)(ye,(n,{id:i})=>{const o=[...n.extAccounts||[],...n.creditAccounts||[],...n.contacts||[]].find(c=>c.uuid===i);return Object.assign(Object.assign({},n),{payeeTo:o})}),(0,_.on)(et,(n,{isOpen:i})=>Object.assign(Object.assign({},n),{isModalOpen:i})),(0,_.on)(Xe,(n,{amount:i,defaultCurrency:t})=>{var o;const c={amount:i,currency:(null===(o=n.amount)||void 0===o?void 0:o.currency)?n.amount.currency:t};return Object.assign(Object.assign({},n),{amount:c})}),(0,_.on)(ue,(n,{view:i,focus:t})=>Object.assign(Object.assign({},n),{viewState:i,focusElement:t})),(0,_.on)(nt,n=>Object.assign(Object.assign({},n),{focusElement:void 0})),(0,_.on)(Be,n=>Object.assign(Object.assign({},n),{transferOrderCallState:C.LOADING})),(0,_.on)(Ve,n=>Object.assign(Object.assign({},n),{transferOrderCallState:C.LOADED,isModalOpen:!1,viewState:h.COMPLETE})),(0,_.on)(Ie,(n,{error:i})=>Object.assign(Object.assign({},n),{transferOrderCallState:{error:i},isModalOpen:!1,viewState:h.COMPLETE})),(0,_.on)(tt,(n,{focus:i})=>Object.assign(Object.assign({},n),{transferOrderCallState:C.INIT,viewState:h.FORM,payeeTo:void 0,amount:void 0,fromAccount:void 0,touchedFields:[],focusElement:i||void 0})),(0,_.on)(ot,(n,{fieldName:i})=>Object.assign(Object.assign({},n),{touchedFields:[...n.touchedFields,i].filter(Uo)})),(0,_.on)(it,(n,{currency:i})=>Object.assign(Object.assign({},n),{defaultCurrency:i})));let ht=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[Ct],imports:[[_.Aw.forFeature(ct,ko),D.sQ.forFeature([Ct])]]}),n})();const Fo=[he.w,S.hJ,$.O,w.Q,Pe.v,Ge.z,W.gn,_e.IQ,ae.p,Y.zk,be.C,se.P,ie.i7,Te.P];let Do=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[bt,ge,y.IK,q.Eq,N.Px,U.k4],imports:[[m.ez,F.UX,ht,...Fo],ht,he.w,S.hJ,$.O,w.Q,Pe.v,Ge.z,W.gn,_e.IQ,ae.p,Y.zk,be.C,se.P,ie.i7,Te.P]}),n})();var Qo=s(314),xo=s(1135),Ko=s(8505),Jo=s(4326),me=s(6476);const Tt=new e.OlP("CampaignSpaceConfiguration injection token"),Lo={portalName:"backbase-wc3",locale:"en-US",designMode:!1};let pe=(()=>{class n{constructor(t){this._config=Object.assign(Object.assign({},Lo),t)}get portalName(){return this._config.portalName}get locale(){return this._config.locale}get designMode(){return this._config.designMode}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Tt,8))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n{constructor(t,o){this.selectCampaignService=t,this.config=o}selectCampaign(t,o,c){return this.selectCampaignService.selectBanner({locale:this.config.locale,dimensions:o,spaceId:`${this.config.portalName}.${c}.${t}`})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(me.Ml),e.LFG(pe))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var Po=s(9158),Ae=(()=>{return(n=Ae||(Ae={})).SELF="self",n.BLANK="blank",Ae;var n})(),Se=(()=>{return(n=Se||(Se={})).self="_self",n.blank="_blank",Se;var n})();(0,Po.Ov)([{urlPattern:"gateway/api/engagement/client-api/v1/engagements/banner",method:"GET",responses:[{status:200,body:{targetUrl:"../../../../",targetUrlDisplayMode:Ae.BLANK,creative:{uuid:"34793c5e-bc0b-454b-b97a-994159d01904",dimensions:"300x250",entryAsset:"./index.html",basePath:"../../assets/creatives/"}},type:"json"}]}]);const Zo=["iframeRef"];function $o(n,i){if(1&n&&(e.TgZ(0,"div",3)(1,"div",4)(2,"span"),e._uU(3),e.qZA()()()),2&n){const t=e.oxw(2);e.Q6J("ngStyle",t.widgetStyles),e.xp6(1),e.Q6J("ngStyle",t.widgetStyles),e.xp6(2),e.Oqu(t.placeholderTitle)}}function qo(n,i){if(1&n&&(e.ynx(0),e.YNc(1,$o,4,3,"div",2),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.widgetStyles)}}function Wo(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",3),e._UZ(1,"a",5),e.TgZ(2,"iframe",6,7),e.NdJ("load",function(){return e.CHM(t),e.oxw(2).iframeLoad()}),e.qZA()()}if(2&n){const t=e.oxw(2);e.Q6J("ngStyle",t.widgetStyles),e.xp6(1),e.Q6J("href",t.targetUrl,e.LSH)("ngStyle",t.widgetStyles)("target",t.targetMode),e.xp6(1),e.Q6J("ngStyle",t.widgetStyles)}}function Ho(n,i){if(1&n&&e.YNc(0,Wo,4,5,"div",2),2&n){const t=e.oxw();e.Q6J("ngIf",t.widgetStyles&&t.campaign)}}let jo=(()=>{class n{constructor(t,o,c,r,a){this.campaignService=t,this.config=o,this.renderer=c,this.cdr=r,this.basePath=a,this.name="",this.dimensions="300x250",this.pageName="index",this.responsive=!1,this.title="Campaign Space",this.placeholderTitle="",this.iframeContext=new xo.X(void 0),this.destroy$=new E.x,this.designMode=this.config.designMode}ngOnInit(){this.widgetStyles=this.getWidgetStyles(),this.designMode?this.initDesignMode():this.initLiveMode()}iframeLoad(){this.cdr.detectChanges();const t=this.iframeRef.nativeElement;this.renderer.setStyle(t,"width","100%"),this.renderer.setStyle(t,"border","0"),this.renderer.setStyle(t,"margin","0"),this.iframeContext.pipe((0,O.h)(Boolean),(0,Ko.b)(()=>{var o;return null===(o=t.contentWindow)||void 0===o?void 0:o.document.write(this.content)}),(0,Jo.g)(300),(0,R.R)(this.destroy$)).subscribe(()=>{var o,c,r,a;let l=(null===(c=null===(o=t.contentWindow)||void 0===o?void 0:o.document)||void 0===c?void 0:c.body.scrollHeight)||0,A=0,g=0;do{this.renderer.setStyle(t,"height",`${l}px`),A=l,l=(null===(a=null===(r=t.contentWindow)||void 0===r?void 0:r.document)||void 0===a?void 0:a.body.scrollHeight)||0,g++}while(A!==l&&g<5);this.cdr.detectChanges()})}ngOnDestroy(){this.destroy$.next()}initDesignMode(){this.placeholderTitle=this.getPlaceholderTitle()}initLiveMode(){this.campaignService.selectCampaign(this.name,this.dimensions,this.pageName).pipe((0,R.R)(this.destroy$)).subscribe(t=>{!t||this.setLiveMode(t)})}setLiveMode(t){this.campaign=t,this.setTargetUrl(),this.content=function Yo(n){return decodeURIComponent(atob(n).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join(""))}(t.creative.content),this.iframeContext.next(this.content),this.targetMode=Se[t.targetUrlDisplayMode||"self"],this.cdr.detectChanges()}setTargetUrl(){var t,o;const c=this.basePath.endsWith("/")?this.basePath.slice(0,-1):this.basePath,r=(null===(t=this.campaign)||void 0===t?void 0:t.targetUrl.startsWith("/"))?this.campaign.targetUrl.slice(1):null===(o=this.campaign)||void 0===o?void 0:o.targetUrl;this.targetUrl=`${c}/${r}`}getWidgetStyles(){const[t,o]=this.getDimensions(this.dimensions),c={width:this.responsive?"100%":this.toPx(t),height:this.toPx(o)};return this.responsive&&(c.maxWidth=this.toPx(t)),c}getPlaceholderTitle(){const[t,o]=this.getDimensions(this.dimensions);let c=`${this.title}`;return c+=this.responsive?` - Responsive Max-width: ${t}, Height: ${o}`:` - ${this.dimensions}`,c}toPx(t){return t+"px"}getDimensions(t){return t.split("x")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(De),e.Y36(pe),e.Y36(e.Qsj),e.Y36(e.sBO),e.Y36(me.Km,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-campaign-space-ang"]],viewQuery:function(t,o){if(1&t&&e.Gf(Zo,5),2&t){let c;e.iGM(c=e.CRH())&&(o.iframeRef=c.first)}},inputs:{name:"name",dimensions:"dimensions",pageName:"pageName",responsive:"responsive",title:"title"},features:[e._Bn([De])],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["campaignWithoutDesign",""],["class","bb-campaign-space-widget",3,"ngStyle",4,"ngIf"],[1,"bb-campaign-space-widget",3,"ngStyle"],[1,"bb-campaign-space-widget__placeholder",3,"ngStyle"],[1,"bb-campaign-space-widget__overlay",3,"href","ngStyle","target"],["sandbox","allow-same-origin","title","iframe-box",1,"bb-campaign-space-widget__iframe",3,"ngStyle","load"],["iframeRef",""]],template:function(t,o){if(1&t&&(e.YNc(0,qo,2,1,"ng-container",0),e.YNc(1,Ho,1,1,"ng-template",null,1,e.W1O)),2&t){const c=e.MAs(2);e.Q6J("ngIf",o.designMode)("ngIfElse",c)}},directives:[m.O5,m.PC],styles:["[_nghost-%COMP%]{position:relative}.bb-campaign-space-widget[_ngcontent-%COMP%]{position:relative;left:50%;transform:translate(-50%)}.bb-campaign-space-widget__overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;z-index:1}.bb-campaign-space-widget__iframe[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;z-index:0}.bb-campaign-space-widget__placeholder[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:relative;background-color:#0000001a;border:1px solid #bfbfbf;text-align:center}"]}),n})(),Ot=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[De,pe],imports:[[m.ez]]}),n})(),Mt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[pe,me.Ml],imports:[[m.ez,Ot],Ot]}),n})();var Nt=s(570);let zo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[{provide:me.Km,useExisting:Nt.iQ},{provide:Tt,useValue:{portalName:"backbase-wc3:backbase-wc3:0",locale:"en-US",designMode:!1}}],imports:[[Mt],Mt]}),n})();var z=s(7448),Vo=s(3249);function Xo(n,i){1&n&&e.GkF(0)}const Qe=function(n){return{$implicit:n}};function ei(n,i){if(1&n&&(e.ynx(0),e.YNc(1,Xo,1,0,"ng-container",8),e.BQk()),2&n){const t=i.$implicit,o=e.oxw(),c=e.MAs(8);e.xp6(1),e.Q6J("ngTemplateOutlet",void 0!==t.remoteConfig?o.linkBoxWithConfig:c)("ngTemplateOutletContext",e.VKq(2,Qe,t))}}function ti(n,i){1&n&&e.GkF(0)}function ni(n,i){if(1&n&&(e.TgZ(0,"li",10),e.YNc(1,ti,1,0,"ng-container",8),e.qZA()),2&n){const t=e.oxw().$implicit;e.oxw();const o=e.MAs(10);e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,Qe,t))}}function oi(n,i){1&n&&e.YNc(0,ni,2,4,"li",9),2&n&&e.Q6J("bbIfEntitlements",i.$implicit.permission)}function ii(n,i){1&n&&e.GkF(0)}function ci(n,i){if(1&n&&(e.TgZ(0,"li",10),e.YNc(1,ii,1,0,"ng-container",8),e.qZA()),2&n){const t=i.$implicit;e.oxw();const o=e.MAs(10);e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,Qe,t))}}function ri(n,i){if(1&n&&(e.TgZ(0,"a",11),e._UZ(1,"bb-icon-ui",12),e.TgZ(2,"span",13),e._uU(3),e.qZA()()),2&n){const t=i.$implicit;e.Q6J("routerLink",t.url),e.uIk("aria-label",t.title),e.xp6(1),e.Q6J("name",t.menuIcon),e.xp6(2),e.Oqu(t.title)}}let ai=(()=>{class n{constructor(){this.links=[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-quick-actions"]],inputs:{links:"links"},decls:11,vars:1,consts:function(){let i;return i="Quick Actions",[[1,"card","d-block","p-2"],[1,"bb-block--sm","bb-heading-widget","heading-widget","pb-0","pt-3","px-3"],["heading",i,"data-role","quick-actions-header","headingType","h2","headingClasses","bb-heading-widget__heading"],[1,"bb-navigation","bb-navigation--link"],[4,"ngFor","ngForOf"],["linkBoxWithPermission",""],["linkBox",""],["linkElement",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","bb-navigation-item",4,"bbIfEntitlements"],[1,"bb-navigation-item"],[1,"bb-inline-stack","bb-navigation-item__link",3,"routerLink"],["size","md",1,"bb-inline-stack__item","bb-navigation-item__icon",3,"name"],[1,"bb-inline-stack__item","bb-navigation-item__title"]]},template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"bb-header-ui",2),e.qZA(),e.TgZ(3,"ul",3),e.YNc(4,ei,2,4,"ng-container",4),e.qZA()(),e.YNc(5,oi,1,1,"ng-template",null,5,e.W1O),e.YNc(7,ci,2,4,"ng-template",null,6,e.W1O),e.YNc(9,ri,4,4,"ng-template",null,7,e.W1O)),2&t&&(e.xp6(4),e.Q6J("ngForOf",o.links))},directives:[$.G,m.sg,m.tP,I.BE,f.yS,w.o],encapsulation:2}),n})(),si=(()=>{class n{constructor(t){this.remoteConfig=t,this.quickActionLinks=[{menuIcon:"settings",title:"Manage Accounts",url:"/my-accounts/manage",permission:z._I.canViewMyAccounts,remoteConfig:this.remoteConfig.getValue("show_manage_accounts")},{menuIcon:"flight",title:"Set Travel Notice",url:"/self-service/manage-cards/travel-notice",permission:z._I.canViewManageCards},{menuIcon:"receipt",title:"Pay a Bill",url:"/billpay/pay-bills",permission:z._I.canViewPayABill},{menuIcon:"description",title:"Download Statements",url:"/self-service/download-statements",permission:z._I.canViewAccountStatements},{menuIcon:"notifications-active",title:"Manage Notifications",url:"/self-service/product-list/manage-notifications",permission:z._I.canViewManageNotifications},{menuIcon:"room",title:"Find Branches and ATMS",url:"/more/find-us",permission:z._I.canViewPlaces}]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Vo.y7))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-accounts-transactions-journey-wrapper"]],decls:11,vars:1,consts:[[1,"container"],[1,"row"],[1,"col-md-8"],[1,"col-md-4","pt-5"],[1,"mb-4","mt-5"],["name","bb-campaign-space-ang-0"],[1,"card","bb-block--xl"],[1,"card"],[3,"links"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"router-outlet"),e.qZA(),e.TgZ(4,"div",3)(5,"div",4),e._UZ(6,"bb-campaign-space-ang",5),e.qZA(),e.TgZ(7,"div",6),e._UZ(8,"bb-quick-transfer-journey"),e.qZA(),e.TgZ(9,"div",7),e._UZ(10,"bb-quick-actions",8),e.qZA()()()()),2&t&&(e.xp6(10),e.Q6J("links",o.quickActionLinks))},directives:[f.lC,jo,St,ai],encapsulation:2}),n})();var _i=s(400);const li=[{path:"",component:si,children:[{path:"",loadChildren:()=>Promise.all([s.e(4376),s.e(9565),s.e(4003),s.e(6384),s.e(5612),s.e(231),s.e(1156),s.e(1362),s.e(4978),s.e(5724),s.e(7223),s.e(4034)]).then(s.bind(s,6942)).then(n=>n.AccountsTransactionsJourneyBundleModule)}]}];let ui=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[{provide:Ze,useExisting:Qo.K},{provide:_i.Bn,useExisting:Nt.ao}],imports:[[Do,f.Bz.forChild(li),m.ez,zo,I.Gl]]}),n})()},314:(Ee,G,s)=>{"use strict";s.d(G,{K:()=>f});var m=s(5e3);let f=(()=>{class I{setupAccountsState(y){this.accountsState=y}refreshAccounts(){var y;null===(y=this.accountsState)||void 0===y||y.refreshAccounts()}transferSucceeded(){this.refreshAccounts()}}return I.\u0275fac=function(y){return new(y||I)},I.\u0275prov=m.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})()},4292:()=>{},2658:(Ee,G,s)=>{"use strict";s.d(G,{P:()=>W,l:()=>_});var m=s(9808),f=s(5e3),I=s(3075),Z=s(9144),y=s(9774),q=s(682);const N=["amountInput"];function U(S,p){if(1&S&&(f.TgZ(0,"label",5),f._uU(1),f.qZA()),2&S){const u=f.oxw();f.s9C("for",u.id),f.xp6(1),f.hij(" ",u.label," ")}}function e(S,p){if(1&S&&(f.TgZ(0,"span",6)(1,"span",7),f.SDv(2,8),f.qZA(),f._uU(3),f.qZA()),2&S){const u=f.oxw();f.Q6J("id",u.componentUniqueId),f.xp6(3),f.hij(" ",u.currency," ")}}let _=(()=>{class S extends Z.rA{constructor(u,d,E){super(u),this.locale=d,this.renderer=E,this.inputClass="bb-amount-input",this.componentUniqueId=`${this.id}-currency`,this.idListAttr=q.hQ,this.placeholder="",this.wrapperClasses="",this.mapCurrency=!0,this._currency="",this._decimals=2,this.autoDecimal=!1,this.groupSeparator=(0,m.dv)(this.locale,m.wE.CurrencyGroup),this.decimalSeparator=(0,m.dv)(this.locale,m.wE.CurrencyDecimal),this.nonNumbersAndDecimalSeparatorRegex=new RegExp(`[^${this.decimalSeparator}\\d]`,"g"),this.endWithDecimal=new RegExp(`[${this.decimalSeparator}]$`,"g"),this.format={groupSeparator:this.groupSeparator,decimalSeparator:this.decimalSeparator,groupSize:3}}set currency(u){u&&(this._currency=this.mapCurrency?(0,m.jK)(u,"wide",this.locale):u,this._decimals=(0,m.E5)(u))}get currency(){return this._currency}writeValue(u){const d=null!=u?u:"";if("string"==typeof d){const E=d.replace(this.nonNumbersAndDecimalSeparatorRegex,"").slice(0,this.maxLength)||"";this.renderer.setProperty(this.amountEl.nativeElement,"value",this.formatAmount(E))}}formatAmount(u){if(u){if(u.includes(this.decimalSeparator)){const[d,E]=u.split(this.decimalSeparator);return new y(d||0).toFormat(this.format)+this.decimalSeparator+E.slice(0,this._decimals)}return new y(u).toFormat(this.format)}return u}updateAmountInput(){var u;const d=this.amountEl.nativeElement,E=(null===(u=d.value)||void 0===u?void 0:u.replace(this.nonNumbersAndDecimalSeparatorRegex,"").slice(0,this.maxLength))||"";this.renderer.setProperty(d,"value",this.formatAmount(E))}setSelection(u,d){const E=this.amountEl.nativeElement;this.renderer.setProperty(E,"selectionStart",u),this.renderer.setProperty(E,"selectionEnd",d)}correctInputValue(){var u;this.onBlur();const d=null===(u=this.amountEl)||void 0===u?void 0:u.nativeElement;if(d.value){const E=d.value.replace(this.endWithDecimal,"");this.renderer.setProperty(d,"value",E),this.updateOutputValue(E.replace(this.nonNumbersAndDecimalSeparatorRegex,""))}}onBackspace(u){this.autoDecimal&&u.selectionStart&&u.value[u.selectionStart-1]===this.groupSeparator&&this.setSelection(u.selectionStart-1,u.selectionStart-1)}onPress(u){const d=u.key,E=this.amountEl.nativeElement,k=E.value;if(k){const R=k.includes(this.decimalSeparator)&&d===this.decimalSeparator,V=new RegExp(`^[\\d${this.groupSeparator}]*[${this.decimalSeparator}]?\\d{0,${this._decimals}}$`,"g").test(k);if(R||!V){const J=E.selectionStart;k.indexOf(this.decimalSeparator)===J&&this.setSelection(J+1,J+1),u.preventDefault()}}}onInput(){const u=this.amountEl.nativeElement,d=u.value.trim(),E=u.selectionStart||0,k=d.length-E;this.updateAmountInput();const R=u.value.replace(this.nonNumbersAndDecimalSeparatorRegex,"").replace(this.endWithDecimal,"");if(R)if(1===d.length&&d!==this.decimalSeparator){const O=this.autoDecimal?d+this.decimalSeparator+"0".repeat(this._decimals):d;this.renderer.setProperty(u,"value",O),this.setSelection(1,1)}else{let O=u.value.length-k;d.includes(this.decimalSeparator)&&E>d.indexOf(this.decimalSeparator)&&O++,this.setSelection(O,O)}this.updateOutputValue(R)}updateOutputValue(u){this.onValueChange(u.replace(this.decimalSeparator,"."))}}return S.\u0275fac=function(u){return new(u||S)(f.Y36(f.sBO),f.Y36(f.soG),f.Y36(f.Qsj))},S.\u0275cmp=f.Xpm({type:S,selectors:[["bb-amount-input-ui"]],viewQuery:function(u,d){if(1&u&&f.Gf(N,7),2&u){let E;f.iGM(E=f.CRH())&&(d.amountEl=E.first)}},hostVars:2,hostBindings:function(u,d){2&u&&f.Tol(d.inputClass)},inputs:{placeholder:"placeholder",maxLength:"maxLength",wrapperClasses:"wrapperClasses",mapCurrency:"mapCurrency",currency:"currency",autoDecimal:"autoDecimal"},features:[f._Bn([{provide:I.JU,useExisting:(0,f.Gpc)(()=>S),multi:!0}]),f.qOj],decls:5,vars:12,consts:function(){let p;return p="Currency",[[3,"for",4,"ngIf"],[1,"bb-amount-input__field",3,"ngClass"],["type","text","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false","data-role","bb-amount-input-ui",1,"form-control","bb-text-align-end",3,"id","readOnly","disabled","required","placeholder","keydown","keydown.backspace","blur","input"],["amountInput",""],["data-role","bb-amount-input-currency","class","bb-amount-input__symbol",3,"id",4,"ngIf"],[3,"for"],["data-role","bb-amount-input-currency",1,"bb-amount-input__symbol",3,"id"],[1,"sr-only"],p]},template:function(u,d){if(1&u){const E=f.EpF();f.YNc(0,U,2,2,"label",0),f.TgZ(1,"div",1)(2,"input",2,3),f.NdJ("keydown",function(R){return d.onPress(R)})("keydown.backspace",function(){f.CHM(E);const R=f.MAs(3);return d.onBackspace(R)})("blur",function(){return d.correctInputValue()})("input",function(){return d.onInput()}),f.qZA(),f.YNc(4,e,4,2,"span",4),f.qZA()}2&u&&(f.Q6J("ngIf",d.label),f.xp6(1),f.Q6J("ngClass",d.wrapperClasses),f.xp6(1),f.s9C("id",d.id),f.Q6J("readOnly",d.readonly)("disabled",d.disabled)("required",d.required)("placeholder",d.placeholder),f.uIk("maxlength",d.maxLength)("aria-describedby",d.idListAttr(d.ariaDescribedby,d.componentUniqueId))("aria-invalid",d.ariaInvalid)("aria-labelledby",d.ariaLabelledby),f.xp6(2),f.Q6J("ngIf",d.currency))},directives:[m.O5,m.mk],encapsulation:2,changeDetection:0}),S})(),W=(()=>{class S{}return S.\u0275fac=function(u){return new(u||S)},S.\u0275mod=f.oAB({type:S}),S.\u0275inj=f.cJS({imports:[[m.ez,I.u5,Z.$B]]}),S})()},3823:(Ee,G,s)=>{"use strict";s.d(G,{Z:()=>y,_:()=>q});var m=s(5e3),f=s(9808);let y=(()=>{class N{constructor(e,_){this.renderer=e,this.elementRef=_,this.negativeClass="bb-amount--negative",this.positiveClass="bb-amount--positive",this.amountValue=0,this.highlightValue=!0}set amount(e){this.amountValue="number"==typeof e?e:parseFloat(e)}set bbHighlight(e){this.highlightValue=""===e||e}get isPositive(){return this.amountValue>=0}ngOnChanges(e){e.negativeClass&&this.renderer.removeClass(this.elementRef.nativeElement,e.negativeClass.previousValue),e.positiveClass&&this.renderer.removeClass(this.elementRef.nativeElement,e.positiveClass.previousValue),(e.amount||e.highlight||e.bbHighlight)&&(this.renderer.removeClass(this.elementRef.nativeElement,this.negativeClass),this.renderer.removeClass(this.elementRef.nativeElement,this.positiveClass)),this.highlightValue&&this.renderer.addClass(this.elementRef.nativeElement,this.isPositive?this.positiveClass:this.negativeClass)}}return N.\u0275fac=function(e){return new(e||N)(m.Y36(m.Qsj),m.Y36(m.SBq))},N.\u0275dir=m.lG2({type:N,selectors:[["","bbHighlight",""]],inputs:{amount:"amount",bbHighlight:"bbHighlight",negativeClass:"negativeClass",positiveClass:"positiveClass"},features:[m.TTD]}),N})(),q=(()=>{class N{}return N.\u0275fac=function(e){return new(e||N)},N.\u0275mod=m.oAB({type:N}),N.\u0275inj=m.cJS({imports:[[f.ez]]}),N})()}}]);