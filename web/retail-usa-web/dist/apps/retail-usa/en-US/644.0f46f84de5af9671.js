"use strict";(self.webpackChunkretail_usa=self.webpackChunkretail_usa||[]).push([[644],{9589:(k,K,r)=>{r.r(K),r.d(K,{AuthorizedUsersJourneyBundleModule:()=>_o});var E=r(9808),e=r(5e3),A=r(5357),J=r(1989),I=r(4544),y=r(4846),x=r(5460),S=r(3075),N=r(6888),u=r(7605),B=r(1089),l=r(5622),C=r(9287),O=r(4619),m=r(230),R=r(4291),c=r(3759),f=r(8639),v=r(7287),Y=r(4951),p=r(429),D=r(9633),a=r(3623),h=r(8451),z=r(3922),d=r(655),M=r(9646),U=r(590),L=r(3900),P=r(262),H=r(4004),q=r(9841),w=r(1135),ye=r(4707),Ge=r(6451),ge=r(8505),tt=r(727),nt=r(5577),ot=r(520),he=r(5556),Ce=r(3533),_e=r(4058),Oe=r(7656),be=r(6858);function st(o,s){if(1&o&&(e.TgZ(0,"th",7)(1,"strong",8),e._UZ(2,"bb-icon-ui",9),e.TgZ(3,"span",10),e._uU(4),e.qZA()()()),2&o){const t=s.$implicit;e.xp6(2),e.Q6J("name",t.icon),e.xp6(2),e.hij(" ",t.title," ")}}function _t(o,s){if(1&o&&(e.TgZ(0,"div",15),e._uU(1),e.ALo(2,"paymentCardNumber"),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,t.account.displayNumber.slice(t.account.displayNumber.length-9,t.account.displayNumber.length),n.productNumberFormat)," ")}}function it(o,s){1&o&&e.GkF(0)}function rt(o,s){1&o&&e.GkF(0)}function at(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"bb-icon-ui",19),e.NdJ("click",function(){e.CHM(t);const _=e.oxw().$implicit,i=e.oxw(2).$implicit;return e.oxw().changeAccountLevel(i,_.value)}),e.qZA()}if(2&o){const t=e.oxw().$implicit,n=e.oxw(2).$implicit;e.Q6J("name",n.level===t.value?"radio-button-checked":"radio-button-unchecked")("color",n.level===t.value?"primary":"inactive"),e.uIk("data-role","user-permissions-edit-table-"+t.value+(n.level===t.value?"-checked":"-unchecked"))("aria-checked",n.level===t.value)}}function lt(o,s){1&o&&(e._UZ(0,"bb-icon-ui",20),e.TgZ(1,"span",1),e.SDv(2,21),e.qZA())}function ut(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"td",16),e.YNc(2,rt,1,0,"ng-container",12),e.YNc(3,at,1,4,"ng-template",null,17,e.W1O),e.YNc(5,lt,3,0,"ng-template",null,18,e.W1O),e.qZA(),e.BQk()),2&o){const t=s.$implicit,n=e.MAs(4),_=e.MAs(6),i=e.oxw(3);e.xp6(2),e.Q6J("ngIf",i.useEditableCell(t.value))("ngIfThen",n)("ngIfElse",_)}}function ct(o,s){if(1&o&&(e.YNc(0,ut,7,3,"ng-container",6),e.ALo(1,"keyvalue")),2&o){const t=e.oxw(2);e.Q6J("ngForOf",e.xi3(1,1,t.authorizedPermissionLevel,t.sortKeepOriginalOrder))}}function dt(o,s){1&o&&(e.TgZ(0,"span",1),e.SDv(1,24),e.qZA())}function Et(o,s){1&o&&(e.TgZ(0,"span",1),e.SDv(1,25),e.qZA())}function At(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"td",16),e._UZ(2,"bb-icon-ui",22),e.YNc(3,dt,2,0,"span",23),e.YNc(4,Et,2,0,"span",23),e.qZA(),e.BQk()),2&o){const t=s.$implicit,n=e.oxw(2).$implicit;e.xp6(2),e.Q6J("name",n.level===t.value?"check":"remove")("color",n.level===t.value?"success":"muted"),e.uIk("data-role","user-permissions-view-table-"+t.value+(n.level===t.value?"-checked":"-unchecked")),e.xp6(1),e.Q6J("ngIf",n.level===t.value),e.xp6(1),e.Q6J("ngIf",n.level!==t.value)}}function St(o,s){if(1&o&&(e.YNc(0,At,5,5,"ng-container",6),e.ALo(1,"keyvalue")),2&o){const t=e.oxw(2);e.Q6J("ngForOf",e.xi3(1,1,t.authorizedPermissionLevel,t.sortKeepOriginalOrder))}}function pt(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"tr")(2,"td")(3,"div"),e._uU(4),e.qZA(),e.YNc(5,_t,3,4,"div",11),e.qZA(),e.YNc(6,it,1,0,"ng-container",12),e.qZA(),e.YNc(7,ct,2,4,"ng-template",null,13,e.W1O),e.YNc(9,St,2,4,"ng-template",null,14,e.W1O),e.BQk()),2&o){const t=s.$implicit,n=e.MAs(8),_=e.MAs(10),i=e.oxw();e.xp6(4),e.hij(" ",t.account.name," "),e.xp6(1),e.Q6J("ngIf",t.account.displayNumber),e.xp6(1),e.Q6J("ngIf",i.isEditing)("ngIfThen",n)("ngIfElse",_)}}const mt=["*"];function Ut(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"h2",5),e.SDv(1,6),e.qZA(),e.TgZ(2,"div")(3,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClose()}),e._UZ(4,"bb-icon-ui",8),e.qZA()()}}function gt(o,s){1&o&&(e.TgZ(0,"span",9),e.SDv(1,10),e.qZA())}function ht(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClose()}),e.TgZ(1,"span"),e.SDv(2,12),e.qZA()(),e.TgZ(3,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().onConfirm()}),e.TgZ(4,"span"),e.SDv(5,14),e.qZA()()}}function Ct(o,s){if(1&o&&(e.ynx(0),e._UZ(1,"bb-authorized-users-stepper",7),e.ALo(2,"async"),e.BQk()),2&o){const t=e.oxw(3);let n;e.xp6(1),e.Q6J("currentStep",null!==(n=e.lcZ(2,1,t.currentStep$))&&void 0!==n?n:1)}}function Ot(o,s){if(1&o&&(e._UZ(0,"bb-authorized-users-edit-stepper",8),e.ALo(1,"async")),2&o){const t=e.oxw(3);let n;e.Q6J("currentStep",null!==(n=e.lcZ(1,1,t.currentStep$))&&void 0!==n?n:1)}}function bt(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"div",4)(2,"div",5),e.YNc(3,Ct,3,3,"ng-container",0),e.qZA()(),e.YNc(4,Ot,2,3,"ng-template",null,6,e.W1O),e.TgZ(6,"bb-authorized-users-create-container"),e._UZ(7,"router-outlet"),e.qZA(),e.BQk()),2&o){const t=e.MAs(5),n=e.oxw(2);e.xp6(3),e.Q6J("ngIf",!n.editMode)("ngIfElse",t)}}function ft(o,s){if(1&o&&(e.ynx(0),e.YNc(1,bt,8,2,"ng-container",0),e.BQk()),2&o){const t=s.ngIf;e.oxw();const n=e.MAs(7);e.xp6(1),e.Q6J("ngIf",(null==t.accounts||null==t.accounts.items?null:t.accounts.items.length)>0&&t.termsAndConditions)("ngIfElse",n)}}function Mt(o,s){1&o&&(e.TgZ(0,"div",9),e._UZ(1,"bb-loading-indicator-ui",10),e.qZA())}function Bt(o,s){1&o&&(e.TgZ(0,"div",9)(1,"div",11),e._UZ(2,"bb-empty-state-ui",12),e.qZA()())}function Rt(o,s){1&o&&(e.ynx(0),e.TgZ(1,"span",29),e.SDv(2,30),e.qZA(),e.BQk())}function Nt(o,s){1&o&&(e.TgZ(0,"span"),e.SDv(1,34),e.qZA())}function Tt(o,s){1&o&&(e.TgZ(0,"span"),e.SDv(1,35),e.qZA())}function Dt(o,s){if(1&o&&(e.ynx(0,32),e.YNc(1,Nt,2,0,"span",33),e.YNc(2,Tt,2,0,"span",33),e.BQk()),2&o){const t=e.oxw().$implicit;e.Q6J("ngSwitch",t.key),e.xp6(1),e.Q6J("ngSwitchCase","required"),e.xp6(1),e.Q6J("ngSwitchCase","email")}}function It(o,s){if(1&o&&(e.ynx(0),e.YNc(1,Dt,3,3,"ng-container",31),e.BQk()),2&o){const t=s.first;e.xp6(1),e.Q6J("ngIf",t)}}function vt(o,s){1&o&&(e.TgZ(0,"span"),e.SDv(1,36),e.qZA())}function Lt(o,s){1&o&&(e.TgZ(0,"span"),e.SDv(1,37),e.qZA())}function zt(o,s){1&o&&(e.TgZ(0,"span"),e.SDv(1,38),e.qZA())}function Jt(o,s){if(1&o&&(e.ynx(0,32),e.YNc(1,vt,2,0,"span",33),e.YNc(2,Lt,2,0,"span",33),e.YNc(3,zt,2,0,"span",33),e.BQk()),2&o){const t=e.oxw().$implicit;e.Q6J("ngSwitch",t.key),e.xp6(1),e.Q6J("ngSwitchCase","required"),e.xp6(1),e.Q6J("ngSwitchCase","email"),e.xp6(1),e.Q6J("ngSwitchCase","validateMailConfirmation")}}function Zt(o,s){if(1&o&&(e.ynx(0),e.YNc(1,Jt,4,4,"ng-container",31),e.BQk()),2&o){const t=s.first;e.xp6(1),e.Q6J("ngIf",t)}}function Ht(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"bb-alert-ui",18),e.NdJ("closed",function(){return e.CHM(t),e.oxw().closeError()}),e.qZA()}2&o&&e.Q6J("dismissible",!0)}function yt(o,s){if(1&o&&(e.TgZ(0,"span",23),e._uU(1),e.ALo(2,"paymentCardNumber"),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,t.displayNumber.slice(t.displayNumber.length-9,t.displayNumber.length),n.productNumberFormat)," ")}}function Gt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"li",19)(1,"bb-input-checkbox-ui",20),e.NdJ("ngModelChange",function(_){const g=e.CHM(t).$implicit;return e.oxw().model[g.id]=_}),e.TgZ(2,"span",21),e._uU(3),e.qZA(),e.YNc(4,yt,3,4,"span",22),e.qZA()()}if(2&o){const t=s.$implicit,n=e.oxw();e.xp6(1),e.s9C("name",t.id),e.Q6J("ngModel",n.model[t.id]),e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf",t.displayNumber)}}function Kt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){return e.CHM(t),e.oxw().goBack()}),e.SDv(1,25),e.qZA()}}function xt(o,s){if(1&o&&(e.TgZ(0,"li",12),e._UZ(1,"bb-icon-ui",13),e.TgZ(2,"span",14),e._uU(3),e.qZA()()),2&o){const t=s.$implicit;e.xp6(1),e.Q6J("color",t.value?"success":"danger")("name",t.value?"check":"clear"),e.xp6(2),e.Oqu(t.name)}}function Yt(o,s){1&o&&(e.TgZ(0,"div",15),e.SDv(1,16),e.qZA())}const Pt=function(o,s){return{"bb-authorized-users-permission-card--selected":o,"bb-authorized-users-permission-card--disabled":s}};function Wt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"bb-authorized-users-permissions-card",23),e.NdJ("click",function(){const i=e.CHM(t).$implicit,g=e.oxw();return!g.disableCard(i)&&g.setGeneralLevel(i.level)}),e.qZA()}if(2&o){const t=s.$implicit,n=e.oxw();e.Q6J("title",t.title)("icon",t.icon)("name",t.level)("currentName",n.generalLevel)("disabled",n.disableCard(t))("permissionsConfig",null==n.permissionsConfig?null:n.permissionsConfig.permissions)("permissionsAssigned",t.permissionsAssigned)}}function Ft(o,s){1&o&&(e.TgZ(0,"div",24),e.SDv(1,25),e.qZA())}function wt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"bb-authorized-users-permissions-levels-table",26),e.NdJ("updateAccount",function(_){return e.CHM(t),e.oxw().updateAccount(_)}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("isEditing",!0)("enableAccountLevelFullAccessPermission",t.enableAccountLevelFullAccessPermission)("selectedAccounts",t.authorizedUser.permissions)("levelsConfig",t.levelsConfig)}}function kt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"bb-alert-ui",25),e.NdJ("closed",function(){return e.CHM(t),e.oxw().closeError()}),e.qZA()}2&o&&e.Q6J("dismissible",!0)}function Qt(o,s){1&o&&e.GkF(0)}function $t(o,s){1&o&&(e.TgZ(0,"span",26),e.SDv(1,27),e.qZA())}function qt(o,s){if(1&o&&e._UZ(0,"div",28),2&o){const t=e.oxw();e.Q6J("innerHTML",t.termsConditions,e.oJD)}}function Vt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClose()}),e._UZ(3,"bb-icon-ui",8),e.qZA()()()}}function jt(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"h2",12),e.SDv(2,13),e.qZA(),e.TgZ(3,"span",14)(4,"span"),e._uU(5),e.qZA(),e.TgZ(6,"span"),e.SDv(7,15),e.qZA()(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(5),e.Oqu((null==t.authorizedUser?null:t.authorizedUser.firstName)+" "+(null==t.authorizedUser?null:t.authorizedUser.lastName)+" ")}}function Xt(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"h2",16),e.SDv(2,17),e.qZA(),e.TgZ(3,"span",18)(4,"span"),e._uU(5),e.qZA(),e.TgZ(6,"span"),e.SDv(7,19),e.qZA()(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(5),e.Oqu((null==t.authorizedUser?null:t.authorizedUser.firstName)+" "+(null==t.authorizedUser?null:t.authorizedUser.lastName)+" ")}}function en(o,s){if(1&o&&(e.TgZ(0,"div",9),e._UZ(1,"img",10),e.YNc(2,jt,8,1,"ng-container",11),e.YNc(3,Xt,8,1,"ng-container",11),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.s9C("src",t.successImg+"?"+t.timestamp,e.LSH),e.xp6(1),e.Q6J("ngIf","create"===t.succeedStatus),e.xp6(1),e.Q6J("ngIf","edit"===t.succeedStatus)}}function tn(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",20)(1,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().onConfirm()}),e.SDv(2,22),e.qZA()()}}function An(o,s){1&o&&(e.ynx(0),e._UZ(1,"bb-badge-ui",2),e.BQk())}function Sn(o,s){1&o&&(e.ynx(0),e._UZ(1,"bb-badge-ui",3),e.BQk())}function pn(o,s){1&o&&(e.ynx(0),e._UZ(1,"bb-badge-ui",4),e.BQk())}function mn(o,s){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"a",31),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).pauseUser()}),e.TgZ(2,"span",21),e._UZ(3,"bb-icon-ui",32),e.TgZ(4,"span",23),e.SDv(5,33),e.qZA()()(),e.BQk()}}function Un(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"a",34),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).resumeUser()}),e.TgZ(1,"span",21),e._UZ(2,"bb-icon-ui",35),e.TgZ(3,"span",23),e.SDv(4,36),e.qZA()()()}}function gn(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"a",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().editPermissions()}),e.TgZ(1,"span",21),e._UZ(2,"bb-icon-ui",22),e.TgZ(3,"span",23),e.SDv(4,24),e.qZA()()(),e.YNc(5,mn,6,0,"ng-container",25),e.YNc(6,Un,5,0,"ng-template",null,26,e.W1O),e.TgZ(8,"a",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().removeUser()}),e.TgZ(9,"span",21),e._UZ(10,"bb-icon-ui",28),e.TgZ(11,"span",29),e.SDv(12,30),e.qZA()()()}if(2&o){const t=e.MAs(7),n=e.oxw();e.xp6(5),e.Q6J("ngIf",(null==n.authorizedUsersItem?null:n.authorizedUsersItem.status)!==n.authorizedUserStatus.PAUSED)("ngIfElse",t)}}function hn(o,s){if(1&o&&(e.TgZ(0,"div",37)(1,"span",38),e.SDv(2,39),e.qZA(),e.TgZ(3,"span",40),e._uU(4),e.qZA()()),2&o){const t=e.oxw();e.xp6(4),e.Oqu(null==t.authorizedUsersItem?null:t.authorizedUsersItem.username)}}function Cn(o,s){1&o&&(e.TgZ(0,"span"),e.SDv(1,41),e.qZA())}function On(o,s){1&o&&(e.TgZ(0,"span"),e.SDv(1,42),e.qZA())}function bn(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"bb-authorized-users-list-item",8),e.NdJ("edit",function(_){return e.CHM(t),e.oxw().editPermissions(_)})("remove",function(_){return e.CHM(t),e.oxw().removeUser(_)})("paused",function(_){return e.CHM(t),e.oxw().pauseUser(_)})("resumed",function(_){return e.CHM(t),e.oxw().resumeUser(_)}),e.qZA()()()}if(2&o){const t=s.$implicit,n=e.oxw();e.xp6(2),e.Q6J("authorizedUsersItem",t)("levelsConfig",n.levelsConfig)}}function fn(o,s){if(1&o&&e._UZ(0,"img",11),2&o){const t=e.oxw();e.Q6J("src",t.imageUrl,e.LSH)}}function Mn(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"h2",5),e.SDv(1,6),e.qZA(),e.TgZ(2,"div")(3,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClose()}),e._UZ(4,"bb-icon-ui",8),e.qZA()()}}function Bn(o,s){1&o&&(e.TgZ(0,"span",9),e.SDv(1,10),e.qZA())}function Rn(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClose()}),e.TgZ(1,"span"),e.SDv(2,12),e.qZA()(),e.TgZ(3,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().onConfirm()}),e.TgZ(4,"span"),e.SDv(5,14),e.qZA()()}}function Nn(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"h2",5),e.SDv(1,6),e.qZA(),e.TgZ(2,"div")(3,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClose()}),e._UZ(4,"bb-icon-ui",8),e.qZA()()}}function Tn(o,s){1&o&&(e.TgZ(0,"span",9),e.SDv(1,10),e.qZA())}function Dn(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClose()}),e.TgZ(1,"span"),e.SDv(2,12),e.qZA()(),e.TgZ(3,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().onConfirm()}),e.TgZ(4,"span"),e.SDv(5,14),e.qZA()()}}function In(o,s){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"bb-authorized-users-list",6),e.NdJ("edit",function(_){return e.CHM(t),e.oxw(4).editPermissions(_)})("remove",function(_){return e.CHM(t),e.oxw(4).setCurrentUser(_,"remove")})("paused",function(_){return e.CHM(t),e.oxw(4).setCurrentUser(_,"pause")})("resumed",function(_){return e.CHM(t),e.oxw(4).updateUserStatus(_)})("createAuthorizedUser",function(){return e.CHM(t),e.oxw(4).goToAuthorizedUser()}),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(2).ngIf,n=e.oxw(2);e.xp6(1),e.Q6J("authorizedUsersList",t.items)("levelsConfig",n.levelsConfig)}}function vn(o,s){if(1&o&&(e.ynx(0),e.YNc(1,In,2,2,"ng-container",0),e.BQk()),2&o){const t=e.oxw().ngIf;e.oxw(2);const n=e.MAs(2);e.xp6(1),e.Q6J("ngIf",t.items.length)("ngIfElse",n)}}function Ln(o,s){if(1&o&&(e.ynx(0),e.YNc(1,vn,2,2,"ng-container",0),e.ALo(2,"async"),e.BQk()),2&o){const t=e.oxw(2),n=e.MAs(4);e.xp6(1),e.Q6J("ngIf",!1===e.lcZ(2,2,t.showLoadingIndicator))("ngIfElse",n)}}function zn(o,s){if(1&o&&(e.ynx(0),e.YNc(1,Ln,3,4,"ng-container",5),e.ALo(2,"async"),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.authorizedUsersList))}}function Jn(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"bb-authorized-users-empty-list",7),e.NdJ("createAuthorizedUser",function(){return e.CHM(t),e.oxw().goToAuthorizedUser()}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("imageUrl",t.emptyStateImage)}}function Zn(o,s){1&o&&(e.TgZ(0,"div",8),e._UZ(1,"bb-loading-indicator-ui",9),e.qZA())}function Hn(o,s){1&o&&(e.TgZ(0,"div",8)(1,"div",10),e._UZ(2,"bb-empty-state-ui",11),e.TgZ(3,"div",12)(4,"button",13),e.SDv(5,14),e.qZA()()()())}function yn(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"bb-authorized-users-confirmation-complete",2),e.NdJ("confirm",function(){return e.CHM(t),e.oxw().confirm()})("closed",function(){return e.CHM(t),e.oxw().confirm()}),e.ALo(1,"async"),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("dialogOpen",t.succeedStatus)("succeedStatus",t.succeedStatus)("authorizedUser",e.lcZ(1,4,t.authorizedUser))("successImg",t.successImg)}}var ie,re,G=(()=>{return(o=G||(G={})).VIEW_ONLY="viewOnly",o.MONEY_MOVEMENT="moneyMovement",o.FULL_ACCESS="fullAccess",G;var o})(),V=(()=>{return(o=V||(V={})).PAUSED="PAUSED",o.AWAITING_REGISTRATION="AWAITING_REGISTRATION",o.ACTIVE="ACTIVE",V;var o})();!function(o){function n(_,i){return _.map(g=>{const{accountId:b}=g,Z=(0,d._T)(g,["accountId"]);return Object.assign({account:i.items.find(T=>T.id===b)},Z)}).filter(g=>!!g.account)}o.buildHttpResponse=function s(_){return i=>i?(Array.isArray(i)?i:[i]).map(b=>{var{id:Z,said:T,firstName:W,lastName:$,email:te,mobileNumber:Ae,username:Se,status:pe,permissions:me}=b,Ue=(0,d._T)(b,["id","said","firstName","lastName","email","mobileNumber","username","status","permissions"]);return Object.assign({id:Z,said:T,firstName:W,lastName:$,email:te,mobileNumber:Ae,username:Se,status:pe,permissions:me.map(F=>{var{accountId:io,level:ro}=F,ao=(0,d._T)(F,["accountId","level"]);return Object.assign({accountId:io,level:_.fromStringToPermissionLevel(ro||"")},ao)})},Ue)}):[]},o.mapData=function t(_,i){return{items:_.map(b=>{const{permissions:Z}=b,T=(0,d._T)(b,["permissions"]);return Object.assign({permissions:n(Z,i)},T)})}}}(ie||(ie={})),(re||(re={})).buildHttpRequest=function s(t){const n=_=>{var{account:i,level:g}=_,b=(0,d._T)(_,["account","level"]);return Object.assign({accountId:i.id,level:t.fromPermissionLevelToString(g)},b)};return{post(_){const{email:i="",firstName:g="",lastName:b="",mobileNumber:Z="",permissions:T=[]}=_,W=(0,d._T)(_,["email","firstName","lastName","mobileNumber","permissions"]);return Object.assign({email:i,firstName:g,lastName:b,mobileNumber:Z,permissions:T.map(n)},W)},put:_=>({permissions:_.map(n)})}};const Ke={length:9,maskRange:[0,length-4],segments:0},fe={levels:[{icon:"visibility",title:"View Only",permissionsAssigned:[!0,!0,!1,!1,!1]},{icon:"attach-money",title:"Money Movement",permissionsAssigned:[!0,!0,!0,!1,!1]},{icon:"vpn-key",title:"Full Access",permissionsAssigned:[!0,!0,!0,!0,!0]}]},Me={permissions:["Balances, Transactions and Statements","Cashflow and Spending Analysis","Transfers and Bill Payments","Check Deposits","Other User Features"]};let Q=(()=>{class o{constructor(t){this.element=t,t.nativeElement.tabIndex=0}eventListener(t){this.element.nativeElement.click(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq))},o.\u0275dir=e.lG2({type:o,selectors:[["","bbAuthorizedUsersAccessibilityKeyboard",""]],hostBindings:function(t,n){1&t&&e.NdJ("keydown.enter",function(i){return n.eventListener(i)})("keydown.space",function(i){return n.eventListener(i)})}}),o})(),ae=(()=>{class o{constructor(){this.isEditing=!1,this.updateAccount=new e.vpe,this.productNumberFormat=Ke,this.authorizedPermissionLevel=G,this.sortKeepOriginalOrder=(...t)=>0}changeAccountLevel(t,n){this.updateAccount.emit(Object.assign(Object.assign({},t),{level:n}))}useEditableCell(t){const n=t===this.authorizedPermissionLevel.FULL_ACCESS;return n&&this.enableAccountLevelFullAccessPermission||!n}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-permissions-levels-table"]],inputs:{selectedAccounts:"selectedAccounts",isEditing:"isEditing",enableAccountLevelFullAccessPermission:"enableAccountLevelFullAccessPermission",levelsConfig:"levelsConfig"},outputs:{updateAccount:"updateAccount"},decls:12,vars:2,consts:function(){let s,t,n,_,i;return s=" Permission Management ",t=" Accounts and Permissions ",n=" Full access can only be assigned to all accounts at once, individual account-level full access permission cannot be assigned. ",_=" Checked ",i=" Unchecked ",[[1,"table","table-striped","bb-authorized-users-common-permission-table"],[1,"sr-only"],s,["scope","col"],t,["scope","col","class","text-center",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["scope","col",1,"text-center"],[1,"bb-inline-stack"],["size","sm",1,"bb-inline-stack__item",3,"name"],[1,"bb-inline-stack__item"],["class","bb-text-support",4,"ngIf"],[4,"ngIf","ngIfThen","ngIfElse"],["editMode",""],["viewMode",""],[1,"bb-text-support"],[1,"text-center"],["editableTemplate",""],["mutedTemplate",""],["bbAuthorizedUsersAccessibilityKeyboard","",3,"name","color","click"],["name","remove","color","muted","data-role","user-permissions-edit-table-fullAccess-muted"],n,[3,"name","color"],["class","sr-only",4,"ngIf"],_,i]},template:function(t,n){1&t&&(e.TgZ(0,"table",0)(1,"caption",1),e.SDv(2,2),e.qZA(),e.TgZ(3,"thead")(4,"tr")(5,"th",3)(6,"strong")(7,"span"),e.SDv(8,4),e.qZA()()(),e.YNc(9,st,5,2,"th",5),e.qZA()(),e.TgZ(10,"tbody"),e.YNc(11,pt,11,5,"ng-container",6),e.qZA()()),2&t&&(e.xp6(9),e.Q6J("ngForOf",n.levelsConfig),e.xp6(2),e.Q6J("ngForOf",n.selectedAccounts))},directives:[C.o,E.sg,E.O5,Q],pipes:[D.V9,E.Nd],encapsulation:2}),o})();var Be,Re;(Be||(Be={})).fromHttpResponse=function s(t){return{items:t.map(n=>({id:n.id,name:n.name,alias:n.bankAlias,IBAN:n.IBAN,BBAN:n.BBAN,number:n.number,currency:n.currency,displayNumber:n.IBAN||n.BBAN||n.number}))}},function(o){o.toHttpRequest=function s(n){return{state:n}},o.fromHttpResponse=function t(n){return n.body}}(Re||(Re={}));class Ne{fromStringToPermissionLevel(s){return"view only"===s.toLocaleLowerCase()?G.VIEW_ONLY:"money movement"===s.toLocaleLowerCase()?G.MONEY_MOVEMENT:"full access"===s.toLocaleLowerCase()?G.FULL_ACCESS:G.VIEW_ONLY}fromPermissionLevelToString(s){switch(s){case G.VIEW_ONLY:return"View Only";case G.MONEY_MOVEMENT:return"Money Movement";case G.FULL_ACCESS:return"Full Access";default:return"View Only"}}}const ne=new e.OlP("AUTHORIZED_USERS_ASSETS_PATH_TOKEN"),xe=new e.OlP("level injection token");let j=(()=>{class o{constructor(t,n,_){var i,g,b,Z,T;this.levelsConfig=t,this.http=n,this.assetsPath=_,this.authorizedPermissionLevel=[G.VIEW_ONLY,G.MONEY_MOVEMENT,G.FULL_ACCESS],this.fetchFile=$=>this.http.get($,{responseType:"text"}),this.statusMapping=(null===(i=null==this?void 0:this.levelsConfig)||void 0===i?void 0:i.mappings)?this.levelsConfig.mappings:new Ne;const W=($,te)=>Object.assign(Object.assign({},$),{level:this.authorizedPermissionLevel[te],validate(){return this.level!==G.FULL_ACCESS}});this.uiLevelsConfig=(null===(b=null===(g=null==this?void 0:this.levelsConfig)||void 0===g?void 0:g.uiConfig)||void 0===b?void 0:b.levels)?this.levelsConfig.uiConfig.levels.map(W):fe.levels.map(W),this.uiPermissionsConfig=(null===(T=null===(Z=null==this?void 0:this.levelsConfig)||void 0===Z?void 0:Z.uiConfig)||void 0===T?void 0:T.permissions)?{permissions:this.levelsConfig.uiConfig.permissions}:Me}get uiLevelsConfigValue(){return this.uiLevelsConfig}get uiPermissionsConfigValue(){return this.uiPermissionsConfig}get statusMappingValue(){return this.statusMapping}get termsConditionsUrl(){return(0,M.of)(this.assetsPath+"terms-and-conditions.txt")}termsConditionsContent(){return this.termsConditionsUrl.pipe((0,U.P)(),(0,L.w)(this.fetchFile),(0,P.K)(()=>(console.warn("No terms and conditions file was found"),(0,M.of)(""))))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(xe,8),e.LFG(ot.eN),e.LFG(ne))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),oe=(()=>{class o{constructor(t,n,_,i){this.accessGroupDataHttpService=t,this.userDataHttpService=n,this.productSummaryDataHttpService=_,this.usersUIService=i,this.statusMapping=this.usersUIService.statusMappingValue,this.accounts=this.productSummaryDataHttpService.getArrangementsByBusinessFunction({businessFunction:"Product Summary",resourceName:"Product Summary",privilege:"view",size:1e6}).pipe((0,H.U)(Be.fromHttpResponse)),this.authorizedUsersList=this.userDataHttpService.getAuthorizedUsers().pipe((0,H.U)(ie.buildHttpResponse(this.statusMapping)))}setStatusForServiceAgreements(t,n){return this.accessGroupDataHttpService.putServiceAgreementState({serviceAgreementId:t,serviceAgreementStatePut:Re.toHttpRequest(n)})}updateAuthorizedUserStatus(t,n){return this.userDataHttpService.updateStatusForAuthorizedUser({authorizedUserId:t,updateAuthorizedUserStatus:{enabled:n===J.qb.ENABLED}})}addAuthorizedUser(t){return this.userDataHttpService.createAuthorizedUser({postAuthorizedUser:re.buildHttpRequest(this.statusMapping).post(t)})}retrieveAuthorizedUser(){return(0,q.a)([this.authorizedUsersList,this.accounts]).pipe((0,H.U)(([t,n])=>ie.mapData(t,n)))}getAllArrangements(){return this.accounts}updateAuthorizedUser(t,n){return this.userDataHttpService.updatePermissionsForAuthorizedUser({authorizedUserId:t,putAuthorizedUserPermissions:re.buildHttpRequest(this.statusMapping).put(n)})}removeAuthorizedUser(t){return this.userDataHttpService.deleteAuthorizedUser({authorizedUserId:t})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(J.e0),e.LFG(y.Xy),e.LFG(I.IK),e.LFG(j))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();const xn=[C.Q,z.U$,D.nj];let le=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[oe,j],imports:[[E.ez,...xn],C.Q,z.U$,D.nj]}),o})(),X=(()=>{class o{constructor(t,n){this.userService=t,this.usersUIService=n,this.currentStep=1,this.selectedUser="",this.isAborting=!1,this.currentStep$$=new w.X(this.currentStep),this.loadingData$$=new w.X(void 0),this.currentUserStore=new w.X({}),this.changesStore=new w.X({}),this.isAborting$$=new w.X(!1),this.selectedEditUserStore=new ye.t,this.authorizedUser=this.currentUserStore.asObservable(),(0,Ge.T)(this.changesStore,this.selectedEditUserStore).subscribe(this.currentUserStore)}get currentStep$(){return this.currentStep$$.asObservable()}get isAborting$(){return this.isAborting$$.asObservable()}get loadingData$(){return this.loadingData$$.asObservable()}get editMode(){return!!this.selectedUser}setCurrentStep(t){this.currentStep=t,this.currentStep$$.next(t)}setCurrentUserValue(t){this.changesStore.next(Object.assign(Object.assign({},this.currentUserStore.value),t))}getAllAccounts(){return this.userService.getAllArrangements().pipe((0,P.K)(this.handleAccountError))}handleAccountError(){return(0,M.of)({items:[]})}handleUserError(){return(0,M.of)({items:[]})}next(t){this.setCurrentUserValue(t),this.setCurrentStep(this.currentStep+1)}back(){this.setCurrentStep(this.currentStep-1)}saveOnly(t){this.setCurrentUserValue(t)}setAbortingDialog(t){this.isAborting$$.next(t)}init(t){this.selectedUser=t,t?(this.userService.retrieveAuthorizedUser().pipe((0,P.K)(this.handleUserError),(0,H.U)(n=>n.items.find(_=>_.id===this.selectedUser)),(0,ge.b)(n=>n&&this.selectedEditUserStore.next(n))).subscribe(),this.accounts=this.selectedEditUserStore.pipe((0,L.w)(n=>n?this.getAllAccounts():this.handleAccountError()))):this.accounts=this.getAllAccounts(),this.termsConditionsContent=this.usersUIService.termsConditionsContent(),(0,q.a)([this.accounts,this.termsConditionsContent]).pipe((0,H.U)(([n,_])=>({accounts:n,termsAndConditions:_}))).subscribe(n=>{this.loadingData$$.next(n)})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(oe),e.LFG(j))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),ee=(()=>{class o{constructor(t){this.router=t}navigateToList(t={}){this.router.navigate(["../list"],t)}navigateToUserDetails(t={}){this.router.navigate(["../user-details"],t)}navigateToAccounts(t={}){this.router.navigate(["../accounts"],t)}navigateToPermissions(t={}){this.router.navigate(["../permissions"],t)}navigateToConfirmation(t={}){this.router.navigate(["../confirmation"],t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(A.F0))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),Te=(()=>{class o{constructor(){this.currentStep=1}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-stepper"]],inputs:{currentStep:"currentStep"},decls:5,vars:7,consts:function(){let s,t,n,_,i,g,b,Z;return s="User details",t="Step 1 out of 4",n="Accounts",_="Step 2 out of 4",i="Permissions",g="Step 3 out of 4",b="Confirmation",Z="Step 4 out of 4",[["label",s,"ariaLabel",t,1,"bb-stack__item",3,"isChecked","isActive"],["label",n,"ariaLabel",_,1,"bb-stack__item",3,"isChecked","isActive"],["label",i,"ariaLabel",g,1,"bb-stack__item",3,"isActive","isChecked"],["label",b,"ariaLabel",Z,1,"bb-stack__item",3,"isActive"]]},template:function(t,n){1&t&&(e.TgZ(0,"bb-stepper-ui"),e._UZ(1,"bb-stepper-step-ui",0)(2,"bb-stepper-step-ui",1)(3,"bb-stepper-step-ui",2)(4,"bb-stepper-step-ui",3),e.qZA()),2&t&&(e.xp6(1),e.Q6J("isChecked",n.currentStep>1)("isActive",n.currentStep>=1),e.xp6(1),e.Q6J("isChecked",n.currentStep>2)("isActive",n.currentStep>=2),e.xp6(1),e.Q6J("isActive",n.currentStep>=3)("isChecked",n.currentStep>3),e.xp6(1),e.Q6J("isActive",n.currentStep>=4))},directives:[a.vO,a.Ml],encapsulation:2}),o})(),De=(()=>{class o{constructor(){this.currentStep=1}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-edit-stepper"]],inputs:{currentStep:"currentStep"},decls:5,vars:6,consts:function(){let s,t,n,_,i,g;return s="Accounts",t="Step 1 out of 3",n="Permissions",_="Step 2 out of 3",i="Confirmation",g="Step 3 out of 3",[[1,"bb-authorized-users-stepper"],[1,"col-8"],["label",s,"ariaLabel",t,1,"bb-stack__item",3,"isChecked","isActive"],["label",n,"ariaLabel",_,1,"bb-stack__item",3,"isChecked","isActive"],["label",i,"ariaLabel",g,1,"bb-stack__item",3,"isActive","isChecked"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"bb-stepper-ui",1),e._UZ(2,"bb-stepper-step-ui",2)(3,"bb-stepper-step-ui",3)(4,"bb-stepper-step-ui",4),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("isChecked",n.currentStep>1)("isActive",n.currentStep>=1),e.xp6(1),e.Q6J("isChecked",n.currentStep>2)("isActive",n.currentStep>=2),e.xp6(1),e.Q6J("isActive",n.currentStep>=3)("isChecked",n.currentStep>3))},directives:[a.vO,a.Ml],encapsulation:2}),o})(),ue=(()=>{class o{constructor(){this.nextStep=1}nextStepIndex(){return this.nextStep++}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-create-container"]],ngContentSelectors:mt,decls:3,vars:0,consts:[[1,"card"],[1,"card-body","modal-body"]],template:function(t,n){1&t&&(e.F$t(),e.TgZ(0,"div",0)(1,"div",1),e.Hsn(2),e.qZA()())},encapsulation:2}),o})(),ce=(()=>{class o{constructor(){this.dialogOpen=!1,this.confirm=new e.vpe,this.closed=new e.vpe,this.onClose=()=>{this.closed.emit()}}onConfirm(){this.confirm.emit()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275dir=e.lG2({type:o,inputs:{dialogOpen:"dialogOpen"},outputs:{confirm:"confirm",closed:"closed"}}),o})(),Ie=(()=>{class o extends ce{}return o.\u0275fac=function(){let s;return function(n){return(s||(s=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-cancel-creation"]],features:[e.qOj],decls:8,vars:1,consts:function(){let s,t,n,_;return s=" Discard New Authorized User? ",t=" All entered information for this authorized user will be permanently lost. ",n=" Keep It ",_=" Discard Authorized User ",[["data-role","cancel-modal",3,"isOpen","cancel"],["bbCustomModalHeader",""],["bbCustomModalBody",""],["footerRef",""],["bbCustomModalFooter",""],["data-role","cancel-modal-header"],s,["bbButton","","data-role","cancel-modal-close-button","color","unstyled","aria-label","Close Creation Modal","i18-aria-label","Close Create User|Button for close creation of authorized user@@authorized-users.cancel.modal.closed.button",3,"click"],["color","muted","name","clear"],["data-role","cancel-modal-subHeader"],t,["bbButton","","data-role","cancel-modal-keep-button","color","link",3,"click"],n,["bbButton","","data-role","cancel-modal-discard-button","color","danger",3,"click"],_]},template:function(t,n){1&t&&(e.TgZ(0,"bb-modal-ui",0),e.NdJ("cancel",function(){return n.onClose()}),e.TgZ(1,"bb-modal-header-ui"),e.YNc(2,Ut,5,0,"ng-template",1),e.qZA(),e.TgZ(3,"bb-modal-body-ui"),e.YNc(4,gt,2,0,"ng-template",2),e.qZA(),e.TgZ(5,"bb-modal-footer-ui",null,3),e.YNc(7,ht,6,0,"ng-template",4),e.qZA()()),2&t&&e.Q6J("isOpen",n.dialogOpen)},directives:[p.zS,p.Rb,C.o,p.KF,p.YI,p.cA,u.Hq,p.Qd,p.yk],encapsulation:2}),o})(),Ye=(()=>{class o{constructor(t,n,_){this.data=t,this.navigation=n,this.route=_,this.isAborting=this.data.isAborting$,this.loadingData$=this.data.loadingData$,this.currentStep$=this.data.currentStep$,this.authorizedUser$=this.data.authorizedUser}get editMode(){return this.data.editMode}goToAuthorizedUsersList(){this.abortingDialog(!1),this.navigation.navigateToList({relativeTo:this.route})}abortingDialog(t){this.data.setAbortingDialog(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(X),e.Y36(ee),e.Y36(A.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-container-wrapper"]],decls:8,vars:7,consts:function(){let s,t,n;return s="Loading...",t="Something went wrong",n="Try to reload the page or contact the system administrator.",[[4,"ngIf","ngIfElse"],[3,"dialogOpen","confirm","closed"],["loadingState",""],["errorState",""],[1,"bb-block","bb-block--lg"],[1,"row","bb-stack","bb-stack--center"],["editModeStepper",""],[1,"col-12","col-md-10","col-lg-8",3,"currentStep"],[1,"col-12","col-md-10",3,"currentStep"],[1,"card"],["loaderSize","lg","text",s],[1,"card-body","bb-state-container"],["iconModifier","error-outline","iconColor","dark","title",t,"subtitle",n]]},template:function(t,n){if(1&t&&(e.YNc(0,ft,2,2,"ng-container",0),e.ALo(1,"async"),e.TgZ(2,"bb-authorized-users-cancel-creation",1),e.NdJ("confirm",function(){return n.goToAuthorizedUsersList()})("closed",function(){return n.abortingDialog(!1)}),e.ALo(3,"async"),e.qZA(),e.YNc(4,Mt,2,0,"ng-template",null,2,e.W1O),e.YNc(6,Bt,3,0,"ng-template",null,3,e.W1O)),2&t){const _=e.MAs(5);e.Q6J("ngIf",e.lcZ(1,3,n.loadingData$))("ngIfElse",_),e.xp6(2),e.Q6J("dialogOpen",e.lcZ(3,5,n.isAborting)||!1)}},directives:[Te,De,ue,Ie,Y.Q,l.s,E.O5,A.lC],pipes:[E.Ov],encapsulation:2}),o})(),de=(()=>{class o{constructor(){this.next=new e.vpe,this.back=new e.vpe,this.saveOnly=new e.vpe,this.cancel=new e.vpe,this.isFirstStep=!1}goNext(t){this.next.emit(t)}goBack(){this.back.emit()}saveChanges(t){this.saveOnly.emit(t)}abort(){this.cancel.emit()}ngOnInit(){if(!this.authorizedUser)throw new Error(`"authorizedUser" input is required in "${this.constructor.name}"`)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275dir=e.lG2({type:o,inputs:{authorizedUser:"authorizedUser",isFirstStep:"isFirstStep",enableAccountLevelFullAccessPermission:"enableAccountLevelFullAccessPermission",levelsConfig:"levelsConfig",permissionsConfig:"permissionsConfig"},outputs:{next:"next",back:"back",saveOnly:"saveOnly",cancel:"cancel"}}),o})(),ve=(()=>{class o extends de{constructor(t){super(),this.formBuilder=t,this.suscription$=new tt.w0,this.validateEmailMatch=()=>{const n=this.formGetter("email","emailGroup"),_=this.formGetter("confirmationEmail","emailGroup");return(null==n?void 0:n.value)!==(null==_?void 0:_.value)?{validateMailConfirmation:!0}:null}}ngOnInit(){var t;super.ngOnInit(),this.userDetailsForm=this.formBuilder.group({firstName:[this.authorizedUser.firstName,S.kI.required],lastName:[this.authorizedUser.lastName,S.kI.required],emailGroup:this.formBuilder.group({email:[this.authorizedUser.email,S.kI.compose([S.kI.required,S.kI.email])],confirmationEmail:[this.authorizedUser.email,S.kI.compose([S.kI.required,S.kI.email])]}),mobileNumber:[this.authorizedUser.mobileNumber,S.kI.required]}),this.suscription$.add(null===(t=this.formGetter("emailGroup"))||void 0===t?void 0:t.valueChanges.subscribe(()=>{const n=this.formGetter("confirmationEmail","emailGroup");n&&(n.setValidators([S.kI.required,S.kI.email,this.validateEmailMatch]),n.updateValueAndValidity({emitEvent:!1}))}))}isFieldValid(t,n){const _=this.formGetter(t,n);return!!_&&(_.valid||_.untouched)}save(){var t,n;(null===(t=this.userDetailsForm)||void 0===t?void 0:t.valid)?this.goNext(this.formatAuthorizedUserValue()):null===(n=this.userDetailsForm)||void 0===n||n.markAllAsTouched()}formatAuthorizedUserValue(){const{firstName:t,lastName:n,emailGroup:{email:_},mobileNumber:i}=this.userDetailsForm.value;return{firstName:t,lastName:n,email:_,mobileNumber:i}}formGetter(t,n){var _,i,g;return n?null===(i=null===(_=this.userDetailsForm)||void 0===_?void 0:_.get(n))||void 0===i?void 0:i.get(t):null===(g=this.userDetailsForm)||void 0===g?void 0:g.get(t)}ngOnDestroy(){this.suscription$.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(S.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-user-details"]],features:[e.qOj],decls:42,vars:18,consts:function(){let s,t,n,_,i,g,b,Z,T,W,$,te,Ae,Se,pe,me,Ue;return s=" Who would you like to give access to? ",t="First Name",n=" First name is required ",_="Last Name",i=" Last name is required ",g="Email",b="Confirm Email",Z="Phone Number",T=" Phone number is required ",W=" Continue ",$=" Cancel ",te=" We will send a confirmation to their email address. ",Ae=" Email address is required ",Se=" Invalid email format ",pe=" Confirm email address is required ",me=" Invalid email format ",Ue=" Email addresses do not match ",[[3,"formGroup","submit"],["bbAuthorizedUsersAccessibilityKeyboard","",1,"bb-block","bb-block--lg"],["data-role","user-details-header"],s,[1,"bb-block"],[1,"row"],[1,"col-12","col-sm-6","form-group"],["formControlName","firstName","data-role","user-details-first-name","label",t,3,"maxLength"],[3,"showErrors"],["data-role","user-details-first-name-validation-msg"],n,["formControlName","lastName","data-role","user-details-last-name","label",_,3,"maxLength"],["data-role","user-details-last-name-validation-msg"],i,["formGroupName","emailGroup"],["formControlName","email","data-role","user-details-email","label",g,3,"required"],[4,"ngIf"],["data-role","user-details-email-validation-msg",3,"showErrors"],[4,"ngFor","ngForOf"],["formControlName","confirmationEmail","data-role","user-details-confirmation-email","label",b,3,"required"],["data-role","user-details-confirmation-email-validation-msg",3,"showErrors"],["formControlName","mobileNumber","data-role","user-details-phone-number","label",Z,3,"required"],["data-role","user-details-phone-number-validation-msg"],T,[1,"bb-button-bar"],["bbButton","","data-role","user-details-continue-button","type","submit",1,"bb-button-bar__button"],W,["bbButton","","data-role","user-details-cancel-button","color","link",1,"bb-button-bar__button","bb-button-bar__button--across",3,"click"],$,[1,"bb-text-support","text-small"],te,[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],Ae,Se,pe,me,Ue]},template:function(t,n){if(1&t&&(e.TgZ(0,"form",0),e.NdJ("submit",function(){return n.save()}),e.TgZ(1,"div",1)(2,"h2",2),e.SDv(3,3),e.qZA()(),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6),e._UZ(7,"bb-input-text-ui",7),e.TgZ(8,"bb-input-validation-message-ui",8)(9,"span",9),e.SDv(10,10),e.qZA()()()(),e.TgZ(11,"div",5)(12,"div",6),e._UZ(13,"bb-input-text-ui",11),e.TgZ(14,"bb-input-validation-message-ui",8)(15,"span",12),e.SDv(16,13),e.qZA()()()(),e.ynx(17,14),e.TgZ(18,"div",5)(19,"div",6),e._UZ(20,"bb-input-email-ui",15),e.YNc(21,Rt,3,0,"ng-container",16),e.TgZ(22,"bb-input-validation-message-ui",17),e.YNc(23,It,2,1,"ng-container",18),e.ALo(24,"keyvalue"),e.qZA()()(),e.TgZ(25,"div",5)(26,"div",6),e._UZ(27,"bb-input-email-ui",19),e.TgZ(28,"bb-input-validation-message-ui",20),e.YNc(29,Zt,2,1,"ng-container",18),e.ALo(30,"keyvalue"),e.qZA()()(),e.BQk(),e.TgZ(31,"div",5)(32,"div",6),e._UZ(33,"bb-input-phone-ui",21),e.TgZ(34,"bb-input-validation-message-ui",8)(35,"span",22),e.SDv(36,23),e.qZA()()()()(),e.TgZ(37,"div",24)(38,"button",25),e.SDv(39,26),e.qZA(),e.TgZ(40,"button",27),e.NdJ("click",function(){return n.abort()}),e.SDv(41,28),e.qZA()()()),2&t){let _,i;e.Q6J("formGroup",n.userDetailsForm),e.xp6(7),e.Q6J("maxLength",256),e.xp6(1),e.Q6J("showErrors",!n.isFieldValid("firstName")),e.xp6(5),e.Q6J("maxLength",256),e.xp6(1),e.Q6J("showErrors",!n.isFieldValid("lastName")),e.xp6(6),e.Q6J("required",!0),e.xp6(1),e.Q6J("ngIf",n.isFieldValid("email","emailGroup")),e.xp6(1),e.Q6J("showErrors",!n.isFieldValid("email","emailGroup")),e.xp6(1),e.Q6J("ngForOf",e.lcZ(24,14,null==(_=n.formGetter("email","emailGroup"))?null:_.errors)),e.xp6(4),e.Q6J("required",!0),e.xp6(1),e.Q6J("showErrors",!n.isFieldValid("confirmationEmail","emailGroup")),e.xp6(1),e.Q6J("ngForOf",e.lcZ(30,16,null==(i=n.formGetter("confirmationEmail","emailGroup"))?null:i.errors)),e.xp6(4),e.Q6J("required",!0),e.xp6(1),e.Q6J("showErrors",!n.isFieldValid("mobileNumber"))}},directives:[c.m,f.d,m.v,R.W,S._Y,S.JL,S.sg,Q,S.JJ,S.u,S.x0,S.Q7,E.O5,E.sg,E.RF,E.n9,u.Hq],pipes:[E.Nd],encapsulation:2}),o})(),Le=(()=>{class o extends de{constructor(){super(...arguments),this.model={},this.productNumberFormat=Ke,this.showError=!1}save(){this.hasAccounts()?this.goNext({permissions:this.cleanPermissions(this.createAuthorizedPermission())}):this.showError=!0}closeError(){this.showError=!1}cleanPermissions(t){const n=t.filter(_=>_.level===G.FULL_ACCESS);return n.length>0&&n.length!==this.accounts.length?t.map(_=>Object.assign(Object.assign({},_),{level:G.VIEW_ONLY})):[...t]}createAuthorizedPermission(){return Object.keys(this.model).filter(t=>!!this.model[t]).map(t=>({account:this.accounts.find(n=>n.id===t),level:this.setLevelToPermissionByAccount(t)}))}setLevelToPermissionByAccount(t){if(this.authorizedUser.permissions){const n=this.authorizedUser.permissions.find(_=>_.account.id===t);return(null==n?void 0:n.level)?n.level:G.VIEW_ONLY}return G.VIEW_ONLY}ngOnInit(){super.ngOnInit(),this.setPresetPermissions(this.authorizedUser.permissions)}setPresetPermissions(t=[]){t.forEach(n=>{this.model[n.account.id]=!0})}hasAccounts(){return Object.keys(this.model).reduce((t,n)=>this.model[n]?t+1:t,0)>0}}return o.\u0275fac=function(){let s;return function(n){return(s||(s=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-accounts"]],inputs:{accounts:"accounts"},features:[e.qOj],decls:18,vars:3,consts:function(){let s,t,n,_,i,g;return s=" Which accounts will they have access to? ",t=" You will be able to specify permissions for each account in the next step. ",n="You need to select at least one account in order to continue",_=" Continue ",i=" Cancel ",g=" Back ",[["data-role","user-accounts-form",3,"ngSubmit"],["authorizedUsersAccountForm","ngForm"],["bbAuthorizedUsersAccessibilityKeyboard","",1,"bb-block","bb-block--xl"],["data-role","user-accounts-header"],s,["data-role","user-accounts-subHeader",1,"bb-text-support","text-small"],t,["data-role","user-accounts-error-message","title",n,3,"dismissible","closed",4,"ngIf"],["ngModelGroup","list",1,"bb-list"],[1,"bb-block","bb-block--lg"],["label","Select all my accounts","data-role","user-accounts-select-all"],["class","bb-block bb-block--lg","data-role","user-accounts-list",4,"ngFor","ngForOf"],[1,"bb-button-bar"],["bbButton","","data-role","user-accounts-continue-button","type","submit",1,"bb-button-bar__button"],_,["bbButton","","data-role","user-accounts-back-button","class","bb-button-bar__button","color","secondary",3,"click",4,"ngIf"],["bbButton","","data-role","user-accounts-cancel-button","color","link",1,"bb-button-bar__button","bb-button-bar__button--across",3,"click"],i,["data-role","user-accounts-error-message","title",n,3,"dismissible","closed"],["data-role","user-accounts-list",1,"bb-block","bb-block--lg"],["data-role","user-accounts-account-checkbox",3,"name","ngModel","ngModelChange"],["data-role","user-accounts-account-name",1,"bb-stack__item--spacing-sm","highlight"],["class","bb-text-support","data-role","user-accounts-account-number",4,"ngIf"],["data-role","user-accounts-account-number",1,"bb-text-support"],["bbButton","","data-role","user-accounts-back-button","color","secondary",1,"bb-button-bar__button",3,"click"],g]},template:function(t,n){1&t&&(e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){return n.save()}),e.TgZ(2,"div",2)(3,"h2",3),e.SDv(4,4),e.qZA(),e.TgZ(5,"p",5),e.SDv(6,6),e.qZA()(),e.YNc(7,Ht,1,1,"bb-alert-ui",7),e.TgZ(8,"ul",8)(9,"li",9),e._UZ(10,"bb-checkbox-group-ui",10),e.qZA(),e.YNc(11,Gt,5,4,"li",11),e.qZA(),e.TgZ(12,"div",12)(13,"button",13),e.SDv(14,14),e.qZA(),e.YNc(15,Kt,2,0,"button",15),e.TgZ(16,"button",16),e.NdJ("click",function(){return n.abort()}),e.SDv(17,17),e.qZA()()()),2&t&&(e.xp6(7),e.Q6J("ngIf",n.showError),e.xp6(4),e.Q6J("ngForOf",n.accounts),e.xp6(4),e.Q6J("ngIf",!n.isFirstStep))},directives:[N.w,B.A,O.r,S._Y,S.JL,S.F,Q,E.O5,S.Mq,E.sg,S.JJ,S.On,u.Hq],pipes:[D.V9],encapsulation:2}),o})(),Pe=(()=>{class o{constructor(){this.icon="",this.title="",this.disabled=!1,this.permissions=[]}ngOnInit(){if(this.permissionsAssigned&&this.permissionsConfig){const t=this.permissionsAssigned;this.permissions=this.permissionsConfig.map((n,_)=>({name:n,value:t[_]}))}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-permissions-card"]],inputs:{icon:"icon",title:"title",name:"name",currentName:"currentName",permissionsConfig:"permissionsConfig",permissionsAssigned:"permissionsAssigned",disabled:"disabled"},decls:13,vars:10,consts:function(){let s,t;return s="include: ",t=" Applied to all Selected Accounts\n",[[1,"bb-authorized-users-permission-card","card","card-sm",3,"ngClass"],["bbAuthorizedUsersAccessibilityKeyboard","",1,"card-body"],[1,"bb-stack"],[1,"bb-stack__item","bb-stack__item--push-right"],[1,"bb-authorized-user-permission-card__radio"],[3,"name","color"],[1,"bb-text-align-center"],[3,"name"],[1,"bb-block","bb-block--md","bb-highlight","bb-text-align-center"],[1,"bb-list"],["class","bb-stack bb-block bb-block--md",4,"ngFor","ngForOf"],["data-role","user-permissions-card-disclaimer","class","bb-authorized-users-permission-card__disclaimer text-small text-center",4,"ngIf"],[1,"bb-stack","bb-block","bb-block--md"],["size","sm","aria-label",s,1,"bb-stack__item",3,"color","name"],[1,"bb-text-support","bb-subheader","bb-subheader--regular"],["data-role","user-permissions-card-disclaimer",1,"bb-authorized-users-permission-card__disclaimer","text-small","text-center"],t]},template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),e._UZ(5,"bb-icon-ui",5),e.qZA()()(),e.TgZ(6,"div",6),e._UZ(7,"bb-icon-ui",7),e.qZA(),e.TgZ(8,"div",8),e._uU(9),e.qZA(),e.TgZ(10,"ul",9),e.YNc(11,xt,4,3,"li",10),e.qZA()()(),e.YNc(12,Yt,2,0,"div",11)),2&t&&(e.Q6J("ngClass",e.WLB(7,Pt,n.name===n.currentName,n.disabled)),e.xp6(5),e.Q6J("name",n.name===n.currentName?"radio-button-checked":"radio-button-unchecked")("color",n.name===n.currentName?"primary":"inactive"),e.xp6(2),e.Q6J("name",n.icon),e.xp6(2),e.hij(" ",n.title," "),e.xp6(2),e.Q6J("ngForOf",n.permissions),e.xp6(1),e.Q6J("ngIf",n.name===n.currentName))},directives:[C.o,E.mk,Q,E.sg,E.O5],encapsulation:2}),o})(),ze=(()=>{class o extends de{constructor(){super(...arguments),this.authorizedPermissionLevel=G,this._isCustomPermission=!1}get isCustomPermission(){return this._isCustomPermission}set isCustomPermission(t){this._isCustomPermission=t,this.generalLevel=void 0}applyLevelToAccounts(t){var n;const _=null===(n=this.authorizedUser.permissions)||void 0===n?void 0:n.map(i=>Object.assign(Object.assign({},i),{level:t||G.VIEW_ONLY}));return Object.assign(Object.assign({},this.authorizedUser),{permissions:_})}applyLevelToAccount(t){const n=[...this.authorizedUser.permissions||[]],_=n.findIndex(i=>i.account.id===t.account.id);return-1!==_&&(n[_]=t),Object.assign(Object.assign({},this.authorizedUser),{permissions:n})}areTheSameLevel(){var t,n,_,i,g;const b=(null===(t=this.authorizedUser)||void 0===t?void 0:t.permissions)&&this.authorizedUser.permissions[0].level;return((null===(_=null===(n=this.authorizedUser)||void 0===n?void 0:n.permissions)||void 0===_?void 0:_.reduce((T,W)=>b===W.level?T+1:T,0))||-1)===(null===(g=null===(i=this.authorizedUser)||void 0===i?void 0:i.permissions)||void 0===g?void 0:g.length)}setGeneralLevel(t){this.isCustomPermission||(this.generalLevel=t,this.saveChanges(this.applyLevelToAccounts(this.generalLevel)))}apply(){this.goNext(this.authorizedUser)}updateAccount(t){this.saveChanges(this.applyLevelToAccount(t))}disableCard(t){var n,_,i,g;return!!(null===(n=this.authorizedUser)||void 0===n?void 0:n.permissions)&&!((null===(i=null===(_=this.authorizedUser)||void 0===_?void 0:_.permissions)||void 0===i?void 0:i.length)===(null===(g=this.accounts)||void 0===g?void 0:g.length)||t.validate())}togglePermissionMode(){this.isCustomPermission&&this.levelsConfig?this.saveChanges(this.applyLevelToAccounts(this.levelsConfig[0].level)):this.levelsConfig&&this.setGeneralLevel(this.levelsConfig[0].level)}ngOnInit(){super.ngOnInit(),this.areTheSameLevel()?this.generalLevel=this.authorizedUser.permissions&&this.authorizedUser.permissions[0].level:this.isCustomPermission=!0}}return o.\u0275fac=function(){let s;return function(n){return(s||(s=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-permissions"]],inputs:{accounts:"accounts"},features:[e.qOj],decls:24,vars:4,consts:function(){let s,t,n,_,i,g;return s=" What permissions do you want to give? ",t=" Choose one permission for all selected accounts or different permissions for each account. ",n=" Continue ",_=" Back ",i=" Cancel ",g=" Keep in mind that you can only give Full Access permissions to all accounts at once. ",[["data-role","user-permissions-form"],["authorizedUsersPermissionsForm","ngForm"],["bbAuthorizedUsersAccessibilityKeyboard","",1,"bb-block","bb-block--lg"],["data-role","user-permissions-header"],s,["data-role","user-permissions-subHeader",1,"bb-text-support","text-small"],t,[1,"row","bb-block","bb-block--xl"],["class","col-lg-4 bb-block bb-block--md-md-down",3,"title","icon","name","currentName","disabled","permissionsConfig","permissionsAssigned","click",4,"ngFor","ngForOf"],[1,"bb-stack","bb-block","bb-block--xl"],[1,"bb-stack__item","bb-stack__item--spacing-sm","bb-stack__item--align-top"],["name","customPermissions","data-role","user-permissions-switch","aria-label","Choose different permissions for each account",3,"ngModel","ngModelChange","click"],[1,"bb-stack__item"],["data-role","user-permissions-switch-label",1,"bb-switch__label"],["class","bb-text-support text-small","data-role","user-permissions-switch-description",4,"ngIf"],["data-role","user-permissions-table",3,"isEditing","enableAccountLevelFullAccessPermission","selectedAccounts","levelsConfig","updateAccount",4,"ngIf"],[1,"bb-button-bar"],["bbButton","","data-role","user-permissions-continue-button",1,"bb-button-bar__button",3,"click"],n,["bbButton","","data-role","user-permissions-back-button","color","secondary",1,"bb-button-bar__button",3,"click"],_,["bbButton","","data-role","user-permissions-cancel-button","color","link",1,"bb-button-bar__button","bb-button-bar__button--across",3,"click"],i,[1,"col-lg-4","bb-block","bb-block--md-md-down",3,"title","icon","name","currentName","disabled","permissionsConfig","permissionsAssigned","click"],["data-role","user-permissions-switch-description",1,"bb-text-support","text-small"],g,["data-role","user-permissions-table",3,"isEditing","enableAccountLevelFullAccessPermission","selectedAccounts","levelsConfig","updateAccount"]]},template:function(t,n){1&t&&(e.TgZ(0,"form",0,1)(2,"div",2)(3,"h2",3),e.SDv(4,4),e.qZA(),e.TgZ(5,"p",5),e.SDv(6,6),e.qZA()(),e.TgZ(7,"div",7),e.YNc(8,Wt,1,7,"bb-authorized-users-permissions-card",8),e.qZA(),e.TgZ(9,"div",9)(10,"div",10)(11,"bb-switch-ui",11),e.NdJ("ngModelChange",function(i){return n.isCustomPermission=i})("click",function(){return n.togglePermissionMode()}),e.qZA()(),e.TgZ(12,"div",12)(13,"label",13),e._uU(14," Choose different permissions for each account "),e.qZA(),e.YNc(15,Ft,2,0,"div",14),e.qZA()(),e.YNc(16,wt,1,4,"bb-authorized-users-permissions-levels-table",15),e.TgZ(17,"div",16)(18,"button",17),e.NdJ("click",function(){return n.apply()}),e.SDv(19,18),e.qZA(),e.TgZ(20,"button",19),e.NdJ("click",function(){return n.goBack()}),e.SDv(21,20),e.qZA(),e.TgZ(22,"button",21),e.NdJ("click",function(){return n.abort()}),e.SDv(23,22),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("ngForOf",n.levelsConfig),e.xp6(3),e.Q6J("ngModel",n.isCustomPermission),e.xp6(4),e.Q6J("ngIf",!n.enableAccountLevelFullAccessPermission),e.xp6(1),e.Q6J("ngIf",n.isCustomPermission))},directives:[Pe,h.q,ae,S._Y,S.JL,S.F,Q,E.sg,S.JJ,S.On,E.O5,u.Hq],encapsulation:2}),o})(),Je=(()=>{class o extends de{constructor(t){super(),this.formBuilder=t,this.showError=!1,this.isSaving=!1,this.showErrorChange=new e.vpe,this.confirmationDetailsForm=this.formBuilder.group({termsCB:[!1,S.kI.requiredTrue]})}saveUser(){this.confirmationDetailsForm.valid?this.goNext(this.authorizedUser):this.confirmationDetailsForm.markAllAsTouched()}closeError(){this.showErrorChange.emit(!1)}getControl(t){return this.confirmationDetailsForm.get(t)}isFieldValid(t){const n=this.getControl(t);return n&&(n.valid||n.untouched)}hasError(t,n){const _=this.getControl(t);if(_&&_.errors)return _.errors[n]}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(S.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-confirmation"]],inputs:{showError:"showError",isSaving:"isSaving",termsConditions:"termsConditions"},outputs:{showErrorChange:"showErrorChange"},features:[e.qOj],decls:30,vars:12,consts:function(){let s,t,n,_,i,g,b,Z,T;return s=" Please review and confirm the authorized user information. ",t="Something Went Wrong",n="We failed to confirm this authorized user, please try again later.",_=" Terms and Conditions ",i="I have read and accept the terms and conditions.",g="Confirm",b=" Back ",Z=" Cancel ",T=" You are required to accept terms and conditions ",[["data-role","user-confirmation-form",3,"formGroup"],["bbAuthorizedUsersAccessibilityKeyboard","",1,"bb-block","bb-block--lg"],["data-role","user-confirmation-header",1,"bb-block","bb-block--lg"],s,["data-role","user-confirmation-error-message","title",t,"message",n,3,"dismissible","closed",4,"ngIf"],["data-role","user-confirmation-fullName",1,"bb-block","bb-block--sm"],["data-role","user-confirmation-email",1,"bb-block","bb-block--sm"],["data-role","user-confirmation-phone-number",1,"bb-block","bb-block--sm"],[1,"bb-block","bb-block--xl"],["data-role","user-confirmation-permissions-table",3,"selectedAccounts","levelsConfig"],["data-role","user-confirmation-terms-header",1,"bb-block","bb-block--md","bb-highlight"],_,["bbAuthorizedUsersAccessibilityKeyboard","",1,"bb-authorized-users-terms","bb-block","bb-block--md"],[4,"ngTemplateOutlet"],["formControlName","termsCB","data-role","user-confirmation-terms-checkbox","label",i,1,"bb-stack__item",3,"id"],[3,"showErrors"],["data-role","user-confirmation-terms-validation-msg",4,"ngIf"],[1,"bb-button-bar"],["color","primary","data-role","user-confirmation-confirm-button",1,"bb-button-bar__button",3,"isLoading","click"],g,["bbButton","","data-role","user-confirmation-back-button","color","secondary",1,"bb-button-bar__button",3,"click"],b,["bbButton","","data-role","user-confirmation-cancel-button","color","link",1,"bb-button-bar__button","bb-button-bar__button--across",3,"click"],Z,["termsAndConditions",""],["data-role","user-confirmation-error-message","title",t,"message",n,3,"dismissible","closed"],["data-role","user-confirmation-terms-validation-msg"],T,["data-role","user-confirmation-terms-text",3,"innerHTML"]]},template:function(t,n){if(1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"h2",2),e.SDv(3,3),e.qZA(),e.YNc(4,kt,1,1,"bb-alert-ui",4),e.TgZ(5,"h3",5),e._uU(6),e.qZA(),e.TgZ(7,"div",6),e._uU(8),e.qZA(),e.TgZ(9,"div",7),e._uU(10),e.qZA()(),e.TgZ(11,"div",8),e._UZ(12,"bb-authorized-users-permissions-levels-table",9),e.qZA(),e.TgZ(13,"div",8)(14,"div",10),e.SDv(15,11),e.qZA(),e.TgZ(16,"div",12),e.YNc(17,Qt,1,0,"ng-container",13),e.qZA(),e._UZ(18,"bb-input-checkbox-ui",14),e.TgZ(19,"bb-input-validation-message-ui",15),e.YNc(20,$t,2,0,"span",16),e.qZA()(),e.TgZ(21,"div",17)(22,"bb-load-button-ui",18),e.NdJ("click",function(){return!n.isSaving&&n.saveUser()}),e.SDv(23,19),e.qZA(),e.TgZ(24,"button",20),e.NdJ("click",function(){return n.goBack()}),e.SDv(25,21),e.qZA(),e.TgZ(26,"button",22),e.NdJ("click",function(){return n.abort()}),e.SDv(27,23),e.qZA()()(),e.YNc(28,qt,1,1,"ng-template",null,24,e.W1O)),2&t){const _=e.MAs(29);e.Q6J("formGroup",n.confirmationDetailsForm),e.xp6(4),e.Q6J("ngIf",n.showError),e.xp6(2),e.hij(" ",n.authorizedUser.firstName+" "+n.authorizedUser.lastName," "),e.xp6(2),e.hij(" ",n.authorizedUser.email," "),e.xp6(2),e.hij(" ",n.authorizedUser.mobileNumber," "),e.xp6(2),e.Q6J("selectedAccounts",n.authorizedUser.permissions)("levelsConfig",n.levelsConfig),e.xp6(5),e.Q6J("ngTemplateOutlet",_),e.xp6(1),e.Q6J("id","confirmationTosCheckbox"),e.xp6(1),e.Q6J("showErrors",!n.isFieldValid("termsCB")),e.xp6(1),e.Q6J("ngIf",n.hasError("termsCB","required")),e.xp6(2),e.Q6J("isLoading",n.isSaving)}},directives:[N.w,ae,O.r,f.d,v.K,S._Y,S.JL,S.sg,Q,E.O5,E.tP,S.JJ,S.u,u.Hq],encapsulation:2}),o})(),Ze=(()=>{class o extends ce{constructor(){super(...arguments),this.succeedStatus="",this.timestamp=(new Date).getTime()}}return o.\u0275fac=function(){let s;return function(n){return(s||(s=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-confirmation-complete"]],inputs:{authorizedUser:"authorizedUser",successImg:"successImg",succeedStatus:"succeedStatus"},features:[e.qOj],decls:8,vars:1,consts:function(){let s,t,n,_,i,g;return s="Confirmation succeeded",t=" New authorized user! ",n=" will receive an email with a link to complete the registration process. ",_=" User permissions updated! ",i=" permissions were edited successfully. ",g=" Got it! ",[["data-role","complete-modal",3,"isOpen","cancel"],["bbCustomModalHeader",""],["bbCustomModalBody",""],["footerRef",""],["bbCustomModalFooter",""],[1,"bb-stack"],[1,"bb-stack__item","bb-stack__item--push-right"],["bbButton","","data-role","complete-modal-close-button","color","unstyled","aria-label","close confirmation complete modal","i18-aria-label","Close confirmation complete|Button for close confirmation complete@@authorized.users.confirmation.complete.closed.button",3,"click"],["color","muted","name","clear","size","lg"],[1,"bb-text-align-center","bb-block"],["alt",s,"data-role","confirmation-success-anim","data-role","complete-modal-image",1,"img-fluid",3,"src"],[4,"ngIf"],["data-role","complete-create-modal-header",1,"bb-text-bold"],t,["data-role","complete-create-modal-subHeader",1,"bb-text-support","text-small"],n,["data-role","complete-edit-modal-header",1,"bb-text-bold"],_,["data-role","complete-edit-modal-subHeader",1,"bb-text-support","text-small"],i,[1,"bb-button-bar","bb-button-bar--center"],["bbButton","","data-role","complete-modal-gotIt-button","color","primary",1,"bb-button-bar__button",3,"click"],g]},template:function(t,n){1&t&&(e.TgZ(0,"bb-modal-ui",0),e.NdJ("cancel",function(){return n.onClose()}),e.TgZ(1,"bb-modal-header-ui"),e.YNc(2,Vt,4,0,"ng-template",1),e.qZA(),e.TgZ(3,"bb-modal-body-ui"),e.YNc(4,en,4,3,"ng-template",2),e.qZA(),e.TgZ(5,"bb-modal-footer-ui",null,3),e.YNc(7,tn,3,0,"ng-template",4),e.qZA()()),2&t&&e.Q6J("isOpen",n.dialogOpen)},directives:[p.zS,p.Rb,C.o,p.KF,p.YI,p.cA,u.Hq,p.Qd,E.O5,p.yk],encapsulation:2,changeDetection:0}),o})();const Pn=[a.BX,u.hJ,C.Q,h.o,B.J,O.b,D.nj,R.F,m.f,c.j,S.UX,S.u5,f.w,O.b,p.zk,N.n,Y.p,v.C,l.P,le];let Wn=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[E.ez,S.u5,S.UX,A.Bz,...Pn],a.BX,u.hJ,C.Q,h.o,B.J,O.b,D.nj,R.F,m.f,c.j,S.UX,S.u5,f.w,O.b,p.zk,N.n,Y.p,v.C,l.P,le]}),o})(),Fn=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-journey"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},directives:[A.lC],encapsulation:2}),o})();const wn=o=>{const s=o.error;if(s&&s.errors&&s.errors[0]&&s.errors[0].message)return s.errors[0].message};let Fe=(()=>{class o{constructor(){this.authorizedUserStatus=V}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-list-status-badge"]],inputs:{authorizedUsersStatus:"authorizedUsersStatus"},decls:4,vars:3,consts:function(){let s,t,n;return s="Active",t="Awaiting Registration",n="Paused",[[1,"bb-stack","bb-block","bb-block--md"],[4,"ngIf"],["text",s,"color","success"],["text",t,"color","info"],["text",n,"color","warning"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,An,2,0,"ng-container",1),e.YNc(2,Sn,2,0,"ng-container",1),e.YNc(3,pn,2,0,"ng-container",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.authorizedUsersStatus===n.authorizedUserStatus.ACTIVE),e.xp6(1),e.Q6J("ngIf",n.authorizedUsersStatus===n.authorizedUserStatus.AWAITING_REGISTRATION),e.xp6(1),e.Q6J("ngIf",n.authorizedUsersStatus===n.authorizedUserStatus.PAUSED))},directives:[Ce.F,E.O5],encapsulation:2}),o})(),we=(()=>{class o{constructor(){this.edit=new e.vpe,this.remove=new e.vpe,this.paused=new e.vpe,this.resumed=new e.vpe,this.authorizedUserStatus=V,this.arePermissionsOpen=!1,this.isUserActionsEnabled=!1}togglePermissionsVisibility(){this.arePermissionsOpen=!this.arePermissionsOpen}editPermissions(){this.edit.emit(this.authorizedUsersItem)}removeUser(){this.remove.emit(this.authorizedUsersItem)}pauseUser(){this.paused.emit(this.authorizedUsersItem)}resumeUser(){this.resumed.emit(this.authorizedUsersItem)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-list-item"]],inputs:{authorizedUsersItem:"authorizedUsersItem",levelsConfig:"levelsConfig"},outputs:{edit:"edit",remove:"remove",paused:"paused",resumed:"resumed"},decls:26,vars:15,consts:function(){let s,t,n,_,i,g,b,Z;return s="Options",t=" Edit User Permissions ",n=" Remove Authorized User ",_=" Pause Permissions ",i=" Resume Permissions ",g=" Username: ",b=" Hide User Permissions ",Z=" See User Permissions ",[[1,"card","card-lg"],["bbAuthorizedUsersAccessibilityKeyboard","",1,"card-body"],[1,"bb-stack","bb-stack--density-sm"],[1,"bb-stack__item"],["data-role","user-fullName",1,"bb-heading-3"],["data-role","user-status-badge",1,"bb-stack__item"],[3,"authorizedUsersStatus"],[1,"bb-stack__item","bb-stack__item--push-right"],["icon","ellipsis-h","btnColor","link-dark","container","body","position","bottom-right","data-role","options-dropdown","aria-label",s,3,"btnCircle"],["bbDropdownMenuItem",""],[1,"bb-block","bb-block--sm"],["data-role","user-email",1,"bb-block","bb-block--xs","bb-text-support","text-small"],["data-role","user-phone-number",1,"bb-text-support","text-small"],["bbAuthorizedUsersAccessibilityKeyboard","",3,"ngbCollapse"],["class","bb-block bb-block--xs","data-role","user-username",4,"ngIf"],["data-role","user-permissions-table",1,"bb-block","bb-block--md"],[3,"selectedAccounts","levelsConfig"],["bbButton","","data-role","permissions-button","buttonSize","sm","color","link-text",3,"click"],["size","md",3,"name"],[4,"ngIf"],["bbAuthorizedUsersAccessibilityKeyboard","","rel","noopener","role","menuitem","data-role","edit-item","target","_blank",1,"dropdown-item",3,"click"],[1,"bb-inline-stack"],["name","edit","size","md",1,"bb-inline-stack__item"],[1,"bb-inline-stack__item"],t,[4,"ngIf","ngIfElse"],["resumeAuthorizedUserOption",""],["bbAuthorizedUsersAccessibilityKeyboard","","rel","noopener","role","menuitem","data-role","remove-item","target","_blank",1,"dropdown-item",3,"click"],["name","delete","size","md","color","danger",1,"bb-inline-stack__item"],[1,"bb-inline-stack__item","bb-text-danger"],n,["bbAuthorizedUsersAccessibilityKeyboard","","rel","noopener","role","menuitem","data-role","pause-item","target","_blank",1,"dropdown-item",3,"click"],["name","pause","size","md",1,"bb-inline-stack__item"],_,["bbAuthorizedUsersAccessibilityKeyboard","","rel","noopener","role","menuitem","data-role","resume-item","target","_blank",1,"dropdown-item",3,"click"],["name","update","size","md",1,"bb-inline-stack__item"],i,["data-role","user-username",1,"bb-block","bb-block--xs"],[1,"bb-text-bold","text-small"],g,[1,"bb-text-support","text-small"],b,Z]},template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),e._uU(5),e.qZA()(),e.TgZ(6,"div",5),e._UZ(7,"bb-authorized-users-list-status-badge",6),e.qZA(),e.TgZ(8,"div",7)(9,"bb-dropdown-menu-ui",8),e.YNc(10,gn,13,2,"ng-template",9),e.qZA()()(),e.TgZ(11,"div",10)(12,"div",11),e._uU(13),e.qZA(),e.TgZ(14,"div",12),e._uU(15),e.ALo(16,"phoneNumber"),e.qZA()(),e.TgZ(17,"div",13),e.YNc(18,hn,5,1,"div",14),e.TgZ(19,"div",15),e._UZ(20,"bb-authorized-users-permissions-levels-table",16),e.qZA()(),e.TgZ(21,"div")(22,"button",17),e.NdJ("click",function(){return n.togglePermissionsVisibility()}),e._UZ(23,"bb-icon-ui",18),e.YNc(24,Cn,2,0,"span",19),e.YNc(25,On,2,0,"span",19),e.qZA()()()()),2&t&&(e.xp6(5),e.hij(" ",(null==n.authorizedUsersItem?null:n.authorizedUsersItem.firstName)+" "+(null==n.authorizedUsersItem?null:n.authorizedUsersItem.lastName)," "),e.xp6(2),e.Q6J("authorizedUsersStatus",null==n.authorizedUsersItem?null:n.authorizedUsersItem.status),e.xp6(2),e.Q6J("btnCircle",!0),e.xp6(4),e.hij(" ",null==n.authorizedUsersItem?null:n.authorizedUsersItem.email," "),e.xp6(2),e.hij(" ",e.xi3(16,12,null==n.authorizedUsersItem?null:n.authorizedUsersItem.mobileNumber,"US")," "),e.xp6(2),e.Q6J("ngbCollapse",!n.arePermissionsOpen),e.xp6(1),e.Q6J("ngIf",null==n.authorizedUsersItem?null:n.authorizedUsersItem.username),e.xp6(2),e.Q6J("selectedAccounts",null==n.authorizedUsersItem?null:n.authorizedUsersItem.permissions)("levelsConfig",n.levelsConfig),e.xp6(3),e.Q6J("name",n.arePermissionsOpen?"toggle-up":"toggle-down"),e.xp6(1),e.Q6J("ngIf",n.arePermissionsOpen),e.xp6(1),e.Q6J("ngIf",!n.arePermissionsOpen))},directives:[Fe,_e.N9,C.o,ae,Q,_e.i4,E.O5,Oe._D,u.Hq],pipes:[be.X],encapsulation:2}),o})(),ke=(()=>{class o{constructor(){this.edit=new e.vpe,this.remove=new e.vpe,this.paused=new e.vpe,this.resumed=new e.vpe,this.createAuthorizedUser=new e.vpe}goToAuthorizedUser(){this.createAuthorizedUser.emit()}editPermissions(t){this.edit.emit(t)}removeUser(t){this.remove.emit(t)}pauseUser(t){this.paused.emit(t)}resumeUser(t){this.resumed.emit(t)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-list"]],inputs:{authorizedUsersList:"authorizedUsersList",levelsConfig:"levelsConfig"},outputs:{edit:"edit",remove:"remove",paused:"paused",resumed:"resumed",createAuthorizedUser:"createAuthorizedUser"},decls:7,vars:1,consts:function(){let s;return s=" Add Authorized User ",[[1,"bb-block","bb-block--lg","bb-text-align-right"],["bbButton","","data-role","add-button","color","primary",3,"click"],["name","add"],s,[1,"bb-list"],["class","bb-list__item--no-separator",4,"ngFor","ngForOf"],[1,"bb-list__item--no-separator"],[1,"bb-block","bb-block--lg"],[3,"authorizedUsersItem","levelsConfig","edit","remove","paused","resumed"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return n.goToAuthorizedUser()}),e._UZ(2,"bb-icon-ui",2),e.TgZ(3,"span"),e.SDv(4,3),e.qZA()()(),e.TgZ(5,"div",4),e.YNc(6,bn,3,2,"div",5),e.qZA()),2&t&&(e.xp6(6),e.Q6J("ngForOf",n.authorizedUsersList))},directives:[C.o,we,u.Hq,E.sg],encapsulation:2}),o})(),Qe=(()=>{class o{constructor(){this.imageUrl="",this.createAuthorizedUser=new e.vpe}goToAuthorizedUser(){this.createAuthorizedUser.emit()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-empty-list"]],inputs:{imageUrl:"imageUrl"},outputs:{createAuthorizedUser:"createAuthorizedUser"},decls:14,vars:1,consts:function(){let s,t,n;return s=" Authorize access to your accounts ",t=" Adding an authorized user allows you to give limited or full access to your accounts or financial products. ",n="Add Authorized User",[[1,"card"],[1,"card-body","bb-text-align-center"],[1,"bb-block","bb-block--lg"],["class","img-fluid","alt","empty-state-image",3,"src",4,"ngIf"],["data-role","empty-state-message",1,"bb-block","bb-block--sm"],s,["data-role","empty-state-description",1,"bb-text-support","text-small"],t,["bbButton","","data-role","add-button","color","primary",3,"click"],["name","add"],n,["alt","empty-state-image",1,"img-fluid",3,"src"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,fn,1,1,"img",3),e.qZA(),e.TgZ(4,"h2",4),e.SDv(5,5),e.qZA(),e.TgZ(6,"div",2)(7,"p",6),e.SDv(8,7),e.qZA()(),e.TgZ(9,"div")(10,"button",8),e.NdJ("click",function(){return n.goToAuthorizedUser()}),e._UZ(11,"bb-icon-ui",9),e.TgZ(12,"span"),e.SDv(13,10),e.qZA()()()()()),2&t&&(e.xp6(3),e.Q6J("ngIf",!!n.imageUrl))},directives:[C.o,E.O5,u.Hq],encapsulation:2}),o})(),$e=(()=>{class o extends ce{}return o.\u0275fac=function(){let s;return function(n){return(s||(s=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-user-list-remove-user-confirmation-dialog"]],features:[e.qOj],decls:8,vars:1,consts:function(){let s,t,n,_;return s=" Remove Authorized User? ",t=" All entered information and their corresponding permissions will be permanently removed. ",n=" Keep It ",_=" Remove Authorized User ",[[3,"isOpen","cancel"],["bbCustomModalHeader",""],["bbCustomModalBody",""],["footerRef",""],["bbCustomModalFooter",""],["data-role","remove-modal-title"],s,["bbButton","","color","unstyled","aria-label","close removal confirmation modal dialog","i18-aria-label","Close removal confirmation modal dialog|Button for close removal confirmation modal dialog@@authorized.users.removeUser.modal.closed.button",3,"click"],["color","muted","name","clear"],["data-role","remove-modal-message"],t,["bbButton","","color","link","data-role","keep-button",3,"click"],n,["bbButton","","color","danger","data-role","remove-button",3,"click"],_]},template:function(t,n){1&t&&(e.TgZ(0,"bb-modal-ui",0),e.NdJ("cancel",function(){return n.onClose()}),e.TgZ(1,"bb-modal-header-ui"),e.YNc(2,Mn,5,0,"ng-template",1),e.qZA(),e.TgZ(3,"bb-modal-body-ui"),e.YNc(4,Bn,2,0,"ng-template",2),e.qZA(),e.TgZ(5,"bb-modal-footer-ui",null,3),e.YNc(7,Rn,6,0,"ng-template",4),e.qZA()()),2&t&&e.Q6J("isOpen",n.dialogOpen)},directives:[p.zS,p.Rb,C.o,p.KF,p.YI,p.cA,u.Hq,p.Qd,p.yk],encapsulation:2}),o})(),qe=(()=>{class o extends ce{}return o.\u0275fac=function(){let s;return function(n){return(s||(s=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-user-list-confirmation-pause-user-dialog"]],features:[e.qOj],decls:8,vars:1,consts:function(){let s,t,n,_;return s=" Pause user permissions? ",t=" Their account permissions will be paused indefinetely until you resume them. ",n=" Not now ",_=" Pause permissions ",[[3,"isOpen","cancel"],["bbCustomModalHeader",""],["bbCustomModalBody",""],["footerRef",""],["bbCustomModalFooter",""],["data-role","pause-modal-title"],s,["bbButton","","color","unstyled","aria-label","close pause permissions confirmation modal dialog","i18-aria-label","Close pause permissions confirmation modal dialog|Button for close pause permissions confirmation modal dialog@@authorized.users.pauseUserPermissions.modal.cancel.button",3,"click"],["color","muted","name","clear"],["data-role","pause-modal-message"],t,["bbButton","","color","link","data-role","not-now-button",3,"click"],n,["bbButton","","color","primary","data-role","pause-button",3,"click"],_]},template:function(t,n){1&t&&(e.TgZ(0,"bb-modal-ui",0),e.NdJ("cancel",function(){return n.onClose()}),e.TgZ(1,"bb-modal-header-ui"),e.YNc(2,Nn,5,0,"ng-template",1),e.qZA(),e.TgZ(3,"bb-modal-body-ui"),e.YNc(4,Tn,2,0,"ng-template",2),e.qZA(),e.TgZ(5,"bb-modal-footer-ui",null,3),e.YNc(7,Dn,6,0,"ng-template",4),e.qZA()()),2&t&&e.Q6J("isOpen",n.dialogOpen)},directives:[p.zS,p.Rb,C.o,p.KF,p.YI,p.cA,u.Hq,p.Qd,p.yk],encapsulation:2}),o})(),Ve=(()=>{class o{constructor(t,n,_,i){this.assetsPath=t,this.userDataService=n,this.usersUIService=_,this.notificationService=i,this.refreshAuthorizedUsers=new w.X(!0),this.authorizedUsersListSubject=new w.X({items:[]}),this.isLoading=new w.X(!0),this.authorizedUsersList=this.authorizedUsersListSubject.asObservable(),this.showLoadingIndicator=this.isLoading.asObservable(),this.selectedUser=new e.vpe,this.emptyStateImage=this.assetsPath+"authorized-users-empty-state-img.svg",this.handleLoadingError=g=>(this.error=(o=>{if(o.error instanceof ErrorEvent)return{message:"An unexpected error occurred"};switch(o.status){case 400:return{message:wn(o)||"Error 400"};case 401:return{message:"Error 401"};case 403:return{message:"Error 403"};case 404:return{message:"Error 404"};default:return{message:"An unexpected error occurred"}}})(g),(0,M.of)({items:[]})),this.handleOperationsError=()=>{this.setLoadingIndicator(!1),this.pushNotification("Something went wrong","Please try again later.","error")},this.refreshAuthorizedUsers.pipe((0,nt.z)(()=>this.retrieveAuthorizedUsers())).subscribe(this.authorizedUsersListSubject),this.levelsConfig=this.usersUIService.uiLevelsConfigValue}retrieveAuthorizedUsers(){return this.userDataService.retrieveAuthorizedUser().pipe((0,P.K)(this.handleLoadingError),(0,ge.b)(()=>{this.setLoadingIndicator(!1)}))}pushNotification(t,n,_){this.notificationService.showNotification({header:t,message:n,modifier:_,dismissible:!0,ttl:5e3})}goToAuthorizedUser(){this.selectedUser.emit()}editPermissions(t){this.selectedUser.emit(t.id)}get imageEmptyStateUrl(){return(0,M.of)(this.emptyStateImage)}setCurrentUser(t,n){this.currentUser=t,this.actionName=n}setLoadingIndicator(t){this.isLoading.next(t)}removeUser(t){t&&t.id&&(this.setLoadingIndicator(!0),this.currentUser=void 0,this.userDataService.removeAuthorizedUser(t.id).subscribe(()=>{this.pushNotification("Authorized user removed","Their permissions are permanently removed.","success"),this.refreshList()},this.handleOperationsError))}updateUserStatus(t){t&&t.id&&(this.setLoadingIndicator(!0),this.currentUser=void 0,this.userDataService.updateAuthorizedUserStatus(t.id,t.status!==V.PAUSED?"DISABLED":"ENABLED").subscribe(()=>{t.status!==V.PAUSED?this.pushNotification("Authorized user paused","You can resume their permissions at any time.","success"):this.pushNotification("User permissions resumed","Their permissions are now active again.","success"),this.refreshList()},this.handleOperationsError))}refreshList(){this.refreshAuthorizedUsers.next(!0)}ngOnDestroy(){this.refreshAuthorizedUsers.complete(),this.authorizedUsersListSubject.complete(),this.isLoading.complete()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ne),e.Y36(oe),e.Y36(j),e.Y36(he.gq))},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-list-wrapper"]],outputs:{selectedUser:"selectedUser"},decls:9,vars:4,consts:function(){let s,t,n,_;return s="Loading...",t="Something Went Wrong",n="Try to reload the page or contact the system administrator.",_=" Reload ",[[4,"ngIf","ngIfElse"],["emptyState",""],["loadingState",""],["errorState",""],[3,"dialogOpen","confirm","closed"],[4,"ngIf"],[3,"authorizedUsersList","levelsConfig","edit","remove","paused","resumed","createAuthorizedUser"],[3,"imageUrl","createAuthorizedUser"],[1,"card"],["loaderSize","lg","text",s],[1,"card-body","bb-state-container"],["iconModifier","error-outline","iconColor","dark","title",t,"subtitle",n],[1,"bb-state-container__footer"],["bbButton","","color","primary"],_]},template:function(t,n){if(1&t&&(e.YNc(0,zn,3,3,"ng-container",0),e.YNc(1,Jn,1,1,"ng-template",null,1,e.W1O),e.YNc(3,Zn,2,0,"ng-template",null,2,e.W1O),e.YNc(5,Hn,6,0,"ng-template",null,3,e.W1O),e.TgZ(7,"bb-authorized-user-list-remove-user-confirmation-dialog",4),e.NdJ("confirm",function(){return n.removeUser(n.currentUser)})("closed",function(){return n.setCurrentUser()}),e.qZA(),e.TgZ(8,"bb-authorized-user-list-confirmation-pause-user-dialog",4),e.NdJ("confirm",function(){return n.updateUserStatus(n.currentUser)})("closed",function(){return n.setCurrentUser()}),e.qZA()),2&t){const _=e.MAs(6);e.Q6J("ngIf",!n.error)("ngIfElse",_),e.xp6(7),e.Q6J("dialogOpen",!!n.currentUser&&"remove"===n.actionName),e.xp6(1),e.Q6J("dialogOpen",!!n.currentUser&&"pause"===n.actionName)}},directives:[ke,Qe,Y.Q,l.s,$e,qe,E.O5,u.Hq],pipes:[E.Ov],encapsulation:2}),o})();const Qn=[u.hJ,C.Q,be.b,Y.p,l.P,Oe.lQ,_e.CK,p.zk,Ce.T,he.PQ,le];let $n=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[E.ez,...Qn],u.hJ,C.Q,be.b,Y.p,l.P,Oe.lQ,_e.CK,p.zk,Ce.T,he.PQ,le]}),o})();const je=new e.OlP("AuthorizedUsersJourneyConfiguration injection token");var se=(()=>(function(o){o.PER_ACCOUNT="individual-control",o.SAME_FOR_ALL_ACCOUNTS="all-at-once"}(se||(se={})),se))();const Xe={fullAccess:se.SAME_FOR_ALL_ACCOUNTS,levelsConfig:{mappings:new Ne,uiConfig:Object.assign(Object.assign({},fe),Me)}};let He=(()=>{class o{constructor(t){t=t||{},this._config=Object.assign(Object.assign({},Xe),t)}get defaults(){return Xe}get fullAccess(){return this._config.fullAccess}get levelsConfig(){return this._config.levelsConfig}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(je,8))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),qn=(()=>{class o{constructor(t,n,_){this.route=t,this.data=n,this.navigation=_,this.authorizedUser=this.data.authorizedUser,this.loadingData=this.data.loadingData$,this.editMode=this.data.editMode}next(t){this.data.next(t),this.navigation.navigateToPermissions({relativeTo:this.route})}back(){this.data.back(),this.navigation.navigateToUserDetails({relativeTo:this.route})}save(t){this.data.saveOnly(t)}cancel(t){this.data.setAbortingDialog(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.gz),e.Y36(X),e.Y36(ee))},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-accounts-view"]],decls:3,vars:7,consts:[[3,"authorizedUser","accounts","isFirstStep","next","back","saveOnly","cancel"]],template:function(t,n){if(1&t&&(e.TgZ(0,"bb-authorized-users-accounts",0),e.NdJ("next",function(i){return n.next(i)})("back",function(){return n.back()})("saveOnly",function(i){return n.save(i)})("cancel",function(){return n.cancel(!0)}),e.ALo(1,"async"),e.ALo(2,"async"),e.qZA()),2&t){let _;e.Q6J("authorizedUser",e.lcZ(1,3,n.authorizedUser))("accounts",null==(_=e.lcZ(2,5,n.loadingData))?null:_.accounts.items)("isFirstStep",n.editMode)}},directives:[Le],pipes:[E.Ov],encapsulation:2}),o})(),Vn=(()=>{class o{constructor(t,n){this.router=t,this.route=n}onUserSelected(t){this.router.navigate(["../create",t?{selectedUser:t}:{}],{relativeTo:this.route})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.F0),e.Y36(A.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-list-view"]],decls:2,vars:0,consts:function(){let s;return s="Authorized Users",[["headingType","h1","headingClasses","bb-heading-widget__heading px-0 pb-5","heading",s],[3,"selectedUser"]]},template:function(t,n){1&t&&(e._UZ(0,"bb-header-ui",0),e.TgZ(1,"bb-authorized-users-list-wrapper",1),e.NdJ("selectedUser",function(i){return n.onUserSelected(i)}),e.qZA())},directives:[x.G,Ve],encapsulation:2}),o})(),jn=(()=>{class o{constructor(t,n,_,i,g){this.route=t,this.data=n,this.usersUIService=_,this.config=i,this.navigation=g,this.authorizedUser=this.data.authorizedUser,this.loadingData=this.data.loadingData$,this.levelsConfig=this.usersUIService.uiLevelsConfigValue,this.permissionsConfig=this.usersUIService.uiPermissionsConfigValue}next(t){this.data.next(t),this.navigation.navigateToConfirmation({relativeTo:this.route})}back(){this.data.back(),this.navigation.navigateToAccounts({relativeTo:this.route})}save(t){this.data.saveOnly(t)}cancel(t){this.data.setAbortingDialog(t)}enableAccountAccess(){return this.config.fullAccess===se.PER_ACCOUNT}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.gz),e.Y36(X),e.Y36(j),e.Y36(He),e.Y36(ee))},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-permissions-view"]],decls:3,vars:9,consts:[[3,"authorizedUser","enableAccountLevelFullAccessPermission","accounts","levelsConfig","permissionsConfig","next","back","saveOnly","cancel"]],template:function(t,n){if(1&t&&(e.TgZ(0,"bb-authorized-users-permissions",0),e.NdJ("next",function(i){return n.next(i)})("back",function(){return n.back()})("saveOnly",function(i){return n.save(i)})("cancel",function(){return n.cancel(!0)}),e.ALo(1,"async"),e.ALo(2,"async"),e.qZA()),2&t){let _;e.Q6J("authorizedUser",e.lcZ(1,5,n.authorizedUser))("enableAccountLevelFullAccessPermission",n.enableAccountAccess())("accounts",null==(_=e.lcZ(2,7,n.loadingData))?null:_.accounts.items)("levelsConfig",n.levelsConfig)("permissionsConfig",n.permissionsConfig)}},directives:[ze],pipes:[E.Ov],encapsulation:2}),o})(),Xn=(()=>{class o{constructor(t,n,_){this.route=t,this.data=n,this.navigation=_,this.authorizedUser=this.data.authorizedUser}next(t){this.data.next(t),this.navigation.navigateToAccounts({relativeTo:this.route})}cancel(t){this.data.setAbortingDialog(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.gz),e.Y36(X),e.Y36(ee))},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-user-details-view"]],decls:2,vars:4,consts:[[3,"authorizedUser","isFirstStep","next","cancel"]],template:function(t,n){1&t&&(e.TgZ(0,"bb-authorized-users-user-details",0),e.NdJ("next",function(i){return n.next(i)})("cancel",function(){return n.cancel(!0)}),e.ALo(1,"async"),e.qZA()),2&t&&e.Q6J("authorizedUser",e.lcZ(1,2,n.authorizedUser))("isFirstStep",!0)},directives:[ve],pipes:[E.Ov],encapsulation:2}),o})(),eo=(()=>{class o{constructor(t,n,_,i){this.route=t,this.router=n,this.data=_,this.navigation=i}onClose(){this.navigation.navigateToList({relativeTo:this.route})}ngOnInit(){const t=this.route.snapshot.paramMap.get("selectedUser")||"";this.data.init(t),this.router.navigate(t?["accounts"]:["user-details"],{relativeTo:this.route})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.gz),e.Y36(A.F0),e.Y36(X),e.Y36(ee))},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-user-create-parent-view"]],features:[e._Bn([X])],decls:2,vars:0,consts:function(){let s;return s="Authorized User",[["headingType","h1","headingClasses","bb-heading-widget__heading px-0 pb-5","heading",s],[3,"showAuthorizedUsers"]]},template:function(t,n){1&t&&(e._UZ(0,"bb-header-ui",0),e.TgZ(1,"bb-authorized-users-container-wrapper",1),e.NdJ("showAuthorizedUsers",function(){return n.onClose()}),e.qZA())},directives:[x.G,Ye],encapsulation:2}),o})(),to=(()=>{class o{constructor(t,n,_,i,g,b,Z){this.route=t,this.usersUIService=n,this.userService=_,this.assetsPath=i,this.cd=g,this.data=b,this.navigation=Z,this.succeedStatus="",this.isSaving=!1,this.isFailure=!1,this.authorizedUser=this.data.authorizedUser,this.loadingData=this.data.loadingData$,this.successImg=this.assetsPath+"succeed.svg",this.levelsConfig=this.usersUIService.uiLevelsConfigValue}cancel(t){this.data.setAbortingDialog(t)}back(){this.data.back(),this.navigation.navigateToPermissions({relativeTo:this.route})}confirm(){this.navigation.navigateToList({relativeTo:this.route.parent})}setSucceedDialogStatus(t){this.succeedStatus=t}get imageSucceedUrl(){return(0,M.of)(this.successImg)}finish(t){this.isSaving=!0;const i=()=>{this.isFailure=!0,this.isSaving=!1,this.cd.markForCheck()};this.data.selectedUser?this.userService.updateAuthorizedUser(this.data.selectedUser,t.permissions).subscribe(()=>{this.setSucceedDialogStatus("edit"),this.isSaving=!1,this.cd.markForCheck()},i):this.userService.addAuthorizedUser(t).subscribe(()=>{this.setSucceedDialogStatus("create"),this.isSaving=!1,this.cd.markForCheck()},i)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.gz),e.Y36(j),e.Y36(oe),e.Y36(ne),e.Y36(e.sBO),e.Y36(X),e.Y36(ee))},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-confirmation-view"]],decls:4,vars:10,consts:[[3,"authorizedUser","termsConditions","levelsConfig","isSaving","showError","showErrorChange","next","back","cancel"],[3,"dialogOpen","succeedStatus","authorizedUser","successImg","confirm","closed",4,"ngIf"],[3,"dialogOpen","succeedStatus","authorizedUser","successImg","confirm","closed"]],template:function(t,n){if(1&t&&(e.TgZ(0,"bb-authorized-users-confirmation",0),e.NdJ("showErrorChange",function(i){return n.isFailure=i})("next",function(i){return n.finish(i)})("back",function(){return n.back()})("cancel",function(){return n.cancel(!0)}),e.ALo(1,"async"),e.ALo(2,"async"),e.qZA(),e.YNc(3,yn,2,6,"bb-authorized-users-confirmation-complete",1)),2&t){let _;e.Q6J("authorizedUser",e.lcZ(1,6,n.authorizedUser))("termsConditions",null==(_=e.lcZ(2,8,n.loadingData))?null:_.termsAndConditions)("levelsConfig",n.levelsConfig)("isSaving",n.isSaving)("showError",n.isFailure),e.xp6(3),e.Q6J("ngIf",n.succeedStatus)}},directives:[Je,Ze,E.O5],pipes:[E.Ov],encapsulation:2}),o})();const no={path:"",component:Fn,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",data:{title:"Authorized users"},component:Vn},{path:"create",data:{title:"Add authorized user"},component:eo,children:[{path:"user-details",component:Xn},{path:"accounts",component:qn},{path:"permissions",component:jn},{path:"confirmation",component:to},{path:"",redirectTo:"user-details",pathMatch:"full"}]}]};function oo(o){return o.levelsConfig}let so=(()=>{class o{static forRoot(t={route:no}){return{ngModule:o,providers:[(0,A.co)([t.route]),{provide:xe,useFactory:oo,deps:[He]}]}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[He,y.Xy,J.NG,I.$r,ee,{provide:ne,useValue:"./assets/bb-authorized-users-journey-ang/"}],imports:[[E.ez,A.Bz.forChild([]),x.O,$n,Wn]]}),o})();var et=r(570);let _o=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:je,useValue:{levelsConfig:{mappings:new Ne,uiConfig:Object.assign(Object.assign({},fe),Me)}}},{provide:y.gj,useExisting:et.ud},{provide:I.xd,useExisting:et.MI}],imports:[[so.forRoot()]]}),o})()},3601:(k,K,r)=>{r.d(K,{e:()=>x});var E=r(4986),e=r(4482),A=r(8421),J=r(5403),y=r(2805);function x(S,N=E.P){return function I(S){return(0,e.e)((N,u)=>{let B=!1,l=null,C=null,O=!1;const m=()=>{if(null==C||C.unsubscribe(),C=null,B){B=!1;const c=l;l=null,u.next(c)}O&&u.complete()},R=()=>{C=null,O&&u.complete()};N.subscribe(new J.Q(u,c=>{B=!0,l=c,C||(0,A.Xf)(S(c)).subscribe(C=new J.Q(u,m,R))},()=>{O=!0,(!B||!C||C.closed)&&u.complete()}))})}(()=>(0,y.H)(S,N))}},6406:(k,K,r)=>{r.d(K,{Z:()=>x});var E=r(4408),e=r(727);const A={schedule(N){let u=requestAnimationFrame,B=cancelAnimationFrame;const{delegate:l}=A;l&&(u=l.requestAnimationFrame,B=l.cancelAnimationFrame);const C=u(O=>{B=void 0,N(O)});return new e.w0(()=>null==B?void 0:B(C))},requestAnimationFrame(...N){const{delegate:u}=A;return((null==u?void 0:u.requestAnimationFrame)||requestAnimationFrame)(...N)},cancelAnimationFrame(...N){const{delegate:u}=A;return((null==u?void 0:u.cancelAnimationFrame)||cancelAnimationFrame)(...N)},delegate:void 0};var I=r(7565);const x=new class y extends I.v{flush(u){this._active=!0,this._scheduled=void 0;const{actions:B}=this;let l,C=-1;u=u||B.shift();const O=B.length;do{if(l=u.execute(u.state,u.delay))break}while(++C<O&&(u=B.shift()));if(this._active=!1,l){for(;++C<O&&(u=B.shift());)u.unsubscribe();throw l}}}(class J extends E.o{constructor(u,B){super(u,B),this.scheduler=u,this.work=B}requestAsyncId(u,B,l=0){return null!==l&&l>0?super.requestAsyncId(u,B,l):(u.actions.push(this),u._scheduled||(u._scheduled=A.requestAnimationFrame(()=>u.flush(void 0))))}recycleAsyncId(u,B,l=0){if(null!=l&&l>0||null==l&&this.delay>0)return super.recycleAsyncId(u,B,l);0===u.actions.length&&(A.cancelAnimationFrame(B),u._scheduled=void 0)}})},3101:(k,K,r)=>{r.d(K,{E:()=>O});var E=r(4408);let A,e=1;const J={};function I(R){return R in J&&(delete J[R],!0)}const y={setImmediate(R){const c=e++;return J[c]=!0,A||(A=Promise.resolve()),A.then(()=>I(c)&&R()),c},clearImmediate(R){I(R)}},{setImmediate:S,clearImmediate:N}=y,u={setImmediate(...R){const{delegate:c}=u;return((null==c?void 0:c.setImmediate)||S)(...R)},clearImmediate(R){const{delegate:c}=u;return((null==c?void 0:c.clearImmediate)||N)(R)},delegate:void 0};var l=r(7565);const O=new class C extends l.v{flush(c){this._active=!0,this._scheduled=void 0;const{actions:f}=this;let v,Y=-1;c=c||f.shift();const p=f.length;do{if(v=c.execute(c.state,c.delay))break}while(++Y<p&&(c=f.shift()));if(this._active=!1,v){for(;++Y<p&&(c=f.shift());)c.unsubscribe();throw v}}}(class B extends E.o{constructor(c,f){super(c,f),this.scheduler=c,this.work=f}requestAsyncId(c,f,v=0){return null!==v&&v>0?super.requestAsyncId(c,f,v):(c.actions.push(this),c._scheduled||(c._scheduled=u.setImmediate(c.flush.bind(c,void 0))))}recycleAsyncId(c,f,v=0){if(null!=v&&v>0||null==v&&this.delay>0)return super.recycleAsyncId(c,f,v);0===c.actions.length&&(u.clearImmediate(f),c._scheduled=void 0)}})},4747:(k,K,r)=>{r.d(K,{Le:()=>I,cY:()=>x,kU:()=>y});var E=r(5e3),e=r(682);const A={segments:4},J=new E.OlP("ACCOUNTS_DISPLAYING_FORMAT_TOKEN");let I=(()=>{class S{constructor(u){this.accountsDisplayingFormat=u}getDefaultFormat(u,B){var l,C;return"cardNumber"===u?this.getCardNumberFormat(B):null!==(C=null===(l=this.accountsDisplayingFormat)||void 0===l?void 0:l[u])&&void 0!==C?C:A}getCardNumberFormat(u){var B;const l=null===(B=this.accountsDisplayingFormat)||void 0===B?void 0:B.cardNumber,C=Object.entries((null==l?void 0:l.cardProviders)||{}).reduce((O,m)=>Object.assign(Object.assign({},O),{[m[0].toLowerCase()]:m[1]}),{});return u&&C[u.toLowerCase()]?C[u.toLowerCase()]:null!=l?l:A}}return S.\u0275fac=function(u){return new(u||S)(E.LFG(J,8))},S.\u0275prov=E.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),y=(()=>{class S{constructor(u){this.accountsDisplayingFormatService=u}transform(u,B,l){const C=u.toString(),O="object"==typeof B?B:this.accountsDisplayingFormatService.getDefaultFormat(B,l);return(0,e.EX)(C,O.segments)}}return S.\u0275fac=function(u){return new(u||S)(E.Y36(I,16))},S.\u0275pipe=E.Yjl({name:"bbAccountNumber",type:S,pure:!0}),S})(),x=(()=>{class S{}return S.\u0275fac=function(u){return new(u||S)},S.\u0275mod=E.oAB({type:S}),S.\u0275inj=E.cJS({}),S})()},1089:(k,K,r)=>{r.d(K,{A:()=>C,J:()=>O});var E=r(5e3),e=r(3075),A=r(9300),J=r(2722),I=r(9144),y=r(1135),x=r(7579),S=r(9841),N=r(4619),u=r(9808);function B(m,R){1&m&&E.Hsn(0,0,["*ngIf","!label"])}const l=["*"];let C=(()=>{class m extends I.rA{constructor(c,f){super(c),this.cd=c,this.controlContainer=f,this.indeterminate=!1,this.skip$=new y.X(!1),this.unsubscribe$=new x.x}ngAfterContentChecked(){this.controlContainer.control&&this.control!==this.controlContainer.control&&(this.control=this.controlContainer.control,this.checkState(this.control.value),(0,S.a)(this.control.valueChanges,this.skip$).pipe((0,A.h)(([c,f])=>!f),(0,J.R)(this.unsubscribe$)).subscribe({next:([c])=>this.checkState(c)}))}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}onValueChange(){const c=f=>{Object.keys(f.value).forEach(v=>f.controls[v]instanceof e.cw?c(f.controls[v]):f.controls[v].setValue(this.value))};this.control&&(this.skip$.next(!0),c(this.control),this.skip$.next(!1)),super.onValueChange()}isDisabled(){return!!this.control&&Object.keys(this.control.controls).every(c=>this.control&&this.control.controls&&this.control.controls[c]&&this.control.controls[c].disabled||!1)}checkState(c){const f=p=>{const D=a=>"object"==typeof a&&null!==a?p.call(Object.keys(a).map(h=>a[h]),D):!!a;return a=>p.call(Object.keys(a).map(h=>a[h]),D)},v=f(Array.prototype.every)(c),Y=f(Array.prototype.some)(c);this.indeterminate=Y&&!v,this.writeValue(v)}}return m.\u0275fac=function(c){return new(c||m)(E.Y36(E.sBO),E.Y36(e.gN))},m.\u0275cmp=E.Xpm({type:m,selectors:[["bb-checkbox-group-ui"]],features:[E._Bn([{provide:e.JU,useExisting:(0,E.Gpc)(()=>m),multi:!0}]),E.qOj],ngContentSelectors:l,decls:2,vars:6,consts:[[3,"label","aria-label","indeterminate","ngModel","disabled","indeterminateChange","ngModelChange","change"],[4,"ngIf"]],template:function(c,f){1&c&&(E.F$t(),E.TgZ(0,"bb-input-checkbox-ui",0),E.NdJ("indeterminateChange",function(Y){return f.indeterminate=Y})("ngModelChange",function(Y){return f.value=Y})("change",function(){return f.onValueChange()}),E.YNc(1,B,1,0,"ng-content",1),E.qZA()),2&c&&(E.Q6J("label",f.label)("aria-label",!f.label&&f.ariaLabel||null)("indeterminate",f.indeterminate)("ngModel",f.value)("disabled",f.isDisabled()),E.xp6(1),E.Q6J("ngIf",!f.label))},directives:[N.r,e.JJ,e.On,u.O5],encapsulation:2,changeDetection:0}),m})(),O=(()=>{class m{}return m.\u0275fac=function(c){return new(c||m)},m.\u0275mod=E.oAB({type:m}),m.\u0275inj=E.cJS({imports:[[u.ez,N.b,e.u5,I.$B]]}),m})()},4291:(k,K,r)=>{r.d(K,{F:()=>Y,W:()=>v});var E=r(9808),e=r(5e3),A=r(4376),J=r(9287),I=r(3075),y=r(9144),x=r(4483),S=r(5413),N=r(3203);const u=["inputPhone"];function B(p,D){if(1&p&&(e.TgZ(0,"label",6),e._uU(1),e.qZA()),2&p){const a=e.oxw();e.s9C("for",a.id),e.xp6(1),e.Oqu(a.label)}}function l(p,D){if(1&p&&(e._UZ(0,"i",12),e.ALo(1,"countryFlag"),e._uU(2)),2&p){const a=D.item;e.Q6J("ngClass",e.lcZ(1,2,a.isoCode)),e.xp6(2),e.hij(" ",a.countryCode," ")}}function C(p,D){if(1&p){const a=e.EpF();e.TgZ(0,"bb-search-box-ui",13),e.NdJ("clear",function(){return e.CHM(a),e.oxw(2).onClear()})("valueChange",function(z){return e.CHM(a),e.oxw(2).onFilterChange(z)}),e.qZA(),e.TgZ(1,"div",14),e.SDv(2,15),e.qZA()}if(2&p){const a=e.oxw(2);e.Q6J("showSearch",!0)("showClear",!0)("autofocus",!0)("aria-controls",a.statusId)("aria-expanded",null==a.ngSelect?null:a.ngSelect.isOpen)("aria-owns",null!=a.ngSelect&&a.ngSelect.isOpen?null==a.ngSelect?null:a.ngSelect.dropdownId:null)("aria-activedescendant",null!=a.ngSelect&&a.ngSelect.isOpen?null==a.ngSelect||null==a.ngSelect.itemsList||null==a.ngSelect.itemsList.markedItem?null:a.ngSelect.itemsList.markedItem.htmlId:null),e.xp6(1),e.Q6J("id",a.statusId),e.xp6(1),e.pQV(a.resultCount),e.QtT(2)}}function O(p,D){1&p&&e._UZ(0,"bb-icon-ui",21)}function m(p,D){if(1&p&&(e.TgZ(0,"div",16),e._UZ(1,"i",17),e.ALo(2,"countryFlag"),e.TgZ(3,"span",18),e._uU(4),e.qZA(),e._uU(5,"\xa0 "),e.TgZ(6,"span",19),e._uU(7),e.qZA(),e.YNc(8,O,1,0,"bb-icon-ui",20),e.qZA()),2&p){const a=D.item,h=D.index,z=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.lcZ(2,4,a.isoCode)),e.xp6(3),e.Oqu(a.countryCode),e.xp6(3),e.Oqu(a.countryName),e.xp6(1),e.Q6J("ngIf",null==z.ngSelect?null:z.ngSelect.itemsList.items[h].selected)}}function R(p,D){if(1&p){const a=e.EpF();e.TgZ(0,"ng-select",7,8),e.NdJ("change",function(z){return e.CHM(a),e.oxw().onChanges(z)})("close",function(){return e.CHM(a),e.oxw().onClose()})("ngModelChange",function(z){return e.CHM(a),e.oxw().defaultCountryCode=z}),e.YNc(2,l,3,4,"ng-template",9),e.YNc(3,C,3,9,"ng-template",10),e.YNc(4,m,9,6,"ng-template",11),e.qZA()}if(2&p){const a=e.oxw();e.Q6J("dropdownPosition",a.dropdownPosition)("clearable",a.clearable)("searchable",a.searchable)("items",a.countryList)("ngModel",a.defaultCountryCode)("searchFn",a.searchFunc)("readonly",a.countryDropdowndisabled),e.uIk("aria-label",a.defaultCountryCode+" "+a.defaultCountryName)}}function c(p,D){if(1&p&&(e.TgZ(0,"div",22)(1,"span"),e.SDv(2,23),e.qZA(),e._uU(3),e.TgZ(4,"span"),e.SDv(5,24),e.qZA(),e._uU(6),e.qZA()),2&p){const a=e.oxw();e.MGl("id","",a.id,"-country-code"),e.xp6(3),e.hij("",a.defaultCountryName," "),e.xp6(3),e.hij("",a.defaultCountryCode," ")}}let f=(()=>{class p{transform(a){return"flag-icon-"+a.toLowerCase()}}return p.\u0275fac=function(a){return new(a||p)},p.\u0275pipe=e.Yjl({name:"countryFlag",type:p,pure:!0}),p})(),v=(()=>{class p extends y.rA{constructor(a,h,z,d){super(d),this.domAttrService=a,this.elem=h,this.renderer2=z,this.cd=d,this.placeholder="",this.readonly=!1,this.ariaLabel="Phone Input",this.clearable=!1,this.searchable=!1,this.enableCountryCode=!1,this.resultCount=0,this._statusId=this.domAttrService.generateId()}get statusId(){return this._statusId}constructCountryData(){if(this.enableCountryCode&&this.countryList)if(this.countryDropdowndisabled=1===this.countryList.length,this.countryDropdowndisabled)this.defaultCountryCode=this.countryList[0].countryCode,this.defaultCountryName=this.countryList[0].countryName;else{const a=this.countryList.find(h=>h.isoCode===this.defaultCountryIsoCode);this.defaultCountryCode=null==a?void 0:a.countryCode,this.defaultCountryName=null==a?void 0:a.countryName}}ngAfterViewInit(){this.ariaLabel||this.domAttrService.moveAriaAttributes(this.elem.nativeElement,this.inputEl&&this.inputEl.nativeElement,this.renderer2),this.constructCountryData()}onChanges(a){this.defaultCountryName=a.countryName}onClose(){this.ngSelect&&!this.ngSelect.isOpen&&this.ngSelect.constructor.prototype.focus.call(this.ngSelect)}onClear(){this.onFilterChange(void 0)}onFilterChange(a){this.ngSelect&&this.ngSelect.filter(a||""),this.updateResultCount()}updateResultCount(){var a;this.resultCount=(null===(a=this.ngSelect)||void 0===a?void 0:a.itemsList.filteredItems.filter(({children:h})=>!h).length)||0}searchFunc(a,h){return a=a.toLocaleLowerCase(),h.countryCode.toLocaleLowerCase().indexOf(a)>-1||h.countryName.toLocaleLowerCase().indexOf(a)>-1||h.isoCode.toLocaleLowerCase().indexOf(a)>-1}}return p.\u0275fac=function(a){return new(a||p)(e.Y36(x.JE),e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(e.sBO))},p.\u0275cmp=e.Xpm({type:p,selectors:[["bb-input-phone-ui"]],viewQuery:function(a,h){if(1&a&&(e.Gf(u,5),e.Gf(A.w9,5)),2&a){let z;e.iGM(z=e.CRH())&&(h.inputEl=z.first),e.iGM(z=e.CRH())&&(h.ngSelect=z.first)}},inputs:{placeholder:"placeholder",maxLength:"maxLength",minLength:"minLength",readonly:"readonly",ariaLabel:"ariaLabel",autocomplete:"autocomplete",countryList:"countryList",dropdownPosition:"dropdownPosition",clearable:"clearable",searchable:"searchable",defaultCountryIsoCode:"defaultCountryIsoCode",enableCountryCode:"enableCountryCode"},features:[e._Bn([{provide:I.JU,useExisting:(0,e.Gpc)(()=>p),multi:!0}]),e.qOj],decls:6,vars:25,consts:function(){let D,a,h,z;return D="Search",a=" " + "\ufffd0\ufffd" + " options ",h="Selected Country is ",z="and code is ",[[3,"for",4,"ngIf"],[1,"bb-phone"],["bindLabel","countryCode","bindValue","countryCode","class","bb-phone-country-code",3,"dropdownPosition","clearable","searchable","items","ngModel","searchFn","readonly","change","close","ngModelChange",4,"ngIf"],["type","tel",1,"form-control",3,"id","ngModel","disabled","readOnly","placeholder","required","bbFocus","ngClass","ngModelChange","blur","focus"],["inputPhone",""],["class","sr-only",3,"id",4,"ngIf"],[3,"for"],["bindLabel","countryCode","bindValue","countryCode",1,"bb-phone-country-code",3,"dropdownPosition","clearable","searchable","items","ngModel","searchFn","readonly","change","close","ngModelChange"],["countryCodeSelector",""],["ng-label-tmp",""],["ng-header-tmp",""],["ng-option-tmp",""],["aria-hidden","true",1,"flag-icon",3,"ngClass"],["placeholder",D,3,"showSearch","showClear","autofocus","aria-controls","aria-expanded","aria-owns","aria-activedescendant","clear","valueChange"],["aria-live","polite","aria-atomic","true","role","status",1,"sr-only",3,"id"],a,[1,"dropdown-option-item"],["aria-hidden","true",1,"flag-icon","col-md-1",3,"ngClass"],[1,"col-md-3","pr-0"],[1,"col-md-6","px-0","dropdown-option-item__country-name"],["class","col-md-2 px-0","name","check","color","color-neutral-dark",4,"ngIf"],["name","check","color","color-neutral-dark",1,"col-md-2","px-0"],[1,"sr-only",3,"id"],h,z]},template:function(a,h){1&a&&(e.YNc(0,B,2,2,"label",0),e.TgZ(1,"div",1),e.YNc(2,R,5,8,"ng-select",2),e.TgZ(3,"input",3,4),e.NdJ("ngModelChange",function(d){return h.onValueChange(d)})("blur",function(){return h.onBlur()})("focus",function(){return h.onFocus()}),e.qZA(),e.YNc(5,c,7,3,"div",5),e.qZA()),2&a&&(e.Q6J("ngIf",h.label),e.xp6(2),e.Q6J("ngIf",h.enableCountryCode),e.xp6(1),e.s9C("id",h.id),e.Q6J("ngModel",h.value)("disabled",h.disabled)("readOnly",h.readonly)("placeholder",h.placeholder)("required",h.required)("bbFocus",h.autofocus)("ngClass",h.inputClassName),e.uIk("aria-autocomplete",h.ariaAutocomplete)("aria-controls",h.ariaControls)("aria-describedby",h.ariaDescribedby?h.ariaDescribedby:h.id+"-country-code")("aria-labelledby",h.ariaLabelledby)("aria-expanded",h.ariaExpanded)("aria-activedescendant",h.ariaActivedescendant)("role",h.role)("aria-invalid",h.ariaInvalid)("aria-owns",h.ariaOwns)("aria-label",!h.label&&h.ariaLabel||null)("maxlength",h.maxLength)("minlength",h.minLength)("size",h.size)("autocomplete",h.autocomplete),e.xp6(2),e.Q6J("ngIf",!h.ariaDescribedby&&h.countryDropdowndisabled))},directives:[A.w9,S.B,J.o,E.O5,I.JJ,I.On,A.mR,E.mk,A.Cm,A.ir,I.Fj,I.Q7,I.nD,I.wO,N.R],pipes:[f],encapsulation:2,changeDetection:0}),p})(),Y=(()=>{class p{}return p.\u0275fac=function(a){return new(a||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[[E.ez,J.Q,I.u5,y.$B,N.J,A.A0,S.F]]}),p})()},9633:(k,K,r)=>{r.d(K,{So:()=>I,V9:()=>u,nj:()=>B});var E=r(9808),e=r(5e3),A=r(682),J=r(4747);const I={length:16,maskRange:[0,12],segments:4},x=new e.OlP("Enables accounts masking synchronization with backend",{providedIn:"root",factory:()=>!1});let u=(()=>{class l{constructor(O,m){this.accountsDisplayingFormatService=O,this.synchronizeNumberMasking=m,this.defaultFormat=this.accountsDisplayingFormatService.getDefaultFormat("cardNumber")}transform(O,m,R="\u2022"){const c=null!=m?m:this.defaultFormat;let f=O.toString();return m&&!this.synchronizeNumberMasking&&(f=function S(l,C,O="0",m=!0){const R=Math.max(C-l.length,0),c=O.repeat(R);return m?c+l:l+c}(f,m.length,R),f=function N(l,[C,O],m="*"){let R="";if(O<0){const c=l.slice(O);R=m.repeat(l.length-c.length)+c}else{const c=m.repeat(O-C);R=l.substring(0,C)+c+l.substring(O)}return R}(f,m.maskRange,R)),(0,A.EX)(f,c.segments)}}return l.\u0275fac=function(O){return new(O||l)(e.Y36(J.Le,16),e.Y36(x,24))},l.\u0275pipe=e.Yjl({name:"paymentCardNumber",type:l,pure:!0}),l})(),B=(()=>{class l{}return l.\u0275fac=function(O){return new(O||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[[E.ez]]}),l})()},3623:(k,K,r)=>{r.d(K,{BX:()=>z,Ml:()=>D,vO:()=>h});var E=r(9808),e=r(5e3),A=r(9287);function J(d,M){1&d&&e.GkF(0)}function I(d,M){1&d&&e._UZ(0,"div",7)}const y=function(d,M,U){return{$implicit:d,number:M,isLast:U,isChild:!1}};function x(d,M){if(1&d&&(e.ynx(0),e.YNc(1,J,1,0,"ng-container",5),e.YNc(2,I,1,0,"div",6),e.BQk()),2&d){const U=M.$implicit,L=M.last,P=M.index,H=e.oxw(),q=e.MAs(3);e.xp6(1),e.Q6J("ngTemplateOutlet",H.stepperStepTemplate||q)("ngTemplateOutletContext",e.kEZ(3,y,U,P+1,L)),e.xp6(1),e.Q6J("ngIf",!L)}}function S(d,M){if(1&d&&(e.ynx(0),e._uU(1),e.BQk()),2&d){const U=e.oxw().number;e.xp6(1),e.hij(" ",U," ")}}function N(d,M){1&d&&e.GkF(0)}const u=function(d){return{$implicit:d}};function B(d,M){if(1&d){const U=e.EpF();e.TgZ(0,"a",15),e.NdJ("click",function(){e.CHM(U);const P=e.oxw(2).$implicit;return e.oxw().onClickHandler(P.data)}),e.YNc(1,N,1,0,"ng-container",5),e.qZA()}if(2&d){const U=e.oxw(2).$implicit;e.oxw();const L=e.MAs(7);e.xp6(1),e.Q6J("ngTemplateOutlet",L)("ngTemplateOutletContext",e.VKq(2,u,U))}}function l(d,M){1&d&&e.GkF(0)}function C(d,M){if(1&d&&(e.ynx(0),e.YNc(1,l,1,0,"ng-container",5),e.BQk()),2&d){const U=e.oxw(2).$implicit;e.oxw();const L=e.MAs(7);e.xp6(1),e.Q6J("ngTemplateOutlet",L)("ngTemplateOutletContext",e.VKq(2,u,U))}}function O(d,M){if(1&d&&(e.TgZ(0,"div",12),e.YNc(1,B,2,4,"a",13),e.YNc(2,C,2,4,"ng-container",14),e.qZA()),2&d){const U=e.oxw().$implicit;e.ekj("text-support",!U.isActive),e.Q6J("title",U.label),e.xp6(1),e.Q6J("ngIf",U.data&&!U.isCurrent),e.xp6(1),e.Q6J("ngIf",!U.data||U.isCurrent)}}function m(d,M){1&d&&e.GkF(0)}const R=function(d,M){return{$implicit:d,isChild:!0,isLast:M}};function c(d,M){if(1&d&&(e.ynx(0),e.YNc(1,m,1,0,"ng-container",5),e.BQk()),2&d){const U=M.$implicit,L=M.last,P=e.oxw().isLast;e.oxw();const H=e.MAs(3);e.xp6(1),e.Q6J("ngTemplateOutlet",H)("ngTemplateOutletContext",e.WLB(2,R,U,!P&&L))}}function f(d,M){if(1&d&&(e.TgZ(0,"div",8)(1,"div",9),e.YNc(2,S,2,1,"ng-container",10),e.qZA(),e.YNc(3,O,3,5,"div",11),e.qZA(),e.YNc(4,c,2,5,"ng-container",1)),2&d){const U=M.$implicit,L=M.isLast,P=M.isChild,H=e.oxw(),q=e.MAs(5);e.ekj("bb-step--active",U.isActive)("bb-step--current",U.isCurrent&&(P||!H.hasCurrentChildStep(U)))("bb-step--child",P)("bb-step--last",L)("bb-step--container",null==U.steps?null:U.steps.length),e.uIk("aria-label",U.ariaLabel)("aria-current",U.isActive?"step":null),e.xp6(2),e.Q6J("ngIf",U.isCurrent||!U.isChecked)("ngIfElse",q),e.xp6(1),e.Q6J("ngIf",U.label),e.xp6(1),e.Q6J("ngForOf",U.steps)}}function v(d,M){1&d&&e._UZ(0,"bb-icon-ui",16)}function Y(d,M){if(1&d&&(e.TgZ(0,"span",18),e._uU(1),e.qZA()),2&d){const U=e.oxw().$implicit;e.Q6J("title",U.stateLabel),e.xp6(1),e.Oqu(U.stateLabel)}}function p(d,M){if(1&d&&(e._uU(0),e.YNc(1,Y,2,2,"span",17)),2&d){const U=M.$implicit;e.hij(" ",U.label," "),e.xp6(1),e.Q6J("ngIf",!(null!=U.steps&&U.steps.length))}}let D=(()=>{class d{constructor(){this.isCurrent=!1,this.isChecked=!1,this.isActive=!1}ngAfterContentChecked(){var U;this.steps=null===(U=this._steps)||void 0===U?void 0:U.filter(L=>L!==this)}}return d.\u0275fac=function(U){return new(U||d)},d.\u0275cmp=e.Xpm({type:d,selectors:[["bb-stepper-step-ui"]],contentQueries:function(U,L,P){if(1&U&&e.Suo(P,d,4),2&U){let H;e.iGM(H=e.CRH())&&(L._steps=H)}},inputs:{label:"label",stateLabel:"stateLabel",data:"data",ariaLabel:"ariaLabel",isCurrent:"isCurrent",isChecked:"isChecked",isActive:"isActive"},decls:0,vars:0,template:function(U,L){},encapsulation:2}),d})(),a=(()=>{class d{constructor(U){this.templateRef=U}}return d.\u0275fac=function(U){return new(U||d)(e.Y36(e.Rgc))},d.\u0275dir=e.lG2({type:d,selectors:[["ng-template","bbCustomStepperStep",""]]}),d})(),h=(()=>{class d{constructor(){this.select=new e.vpe}get currentStep(){return this.steps&&this.steps.find(U=>U.isCurrent)}hasCurrentChildStep({steps:U}){return null==U?void 0:U.find(({isCurrent:L})=>L)}onClickHandler(U){this.select.emit(U)}}return d.\u0275fac=function(U){return new(U||d)},d.\u0275cmp=e.Xpm({type:d,selectors:[["bb-stepper-ui"]],contentQueries:function(U,L,P){if(1&U&&(e.Suo(P,a,7,e.Rgc),e.Suo(P,D,4)),2&U){let H;e.iGM(H=e.CRH())&&(L.stepperStepTemplate=H.first),e.iGM(H=e.CRH())&&(L.steps=H)}},outputs:{select:"select"},decls:8,vars:3,consts:[[1,"bb-stepper"],[4,"ngFor","ngForOf"],["defaultStepperStepTemplate",""],["checkIcon",""],["simpleStep",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true","class","bb-stepper__separator",4,"ngIf"],["aria-hidden","true",1,"bb-stepper__separator"],[1,"bb-step"],[1,"bb-step__icon"],[4,"ngIf","ngIfElse"],["class","bb-step__label",3,"title","text-support",4,"ngIf"],[1,"bb-step__label",3,"title"],["href","javascript:void(0)",3,"click",4,"ngIf"],[4,"ngIf"],["href","javascript:void(0)",3,"click"],["name","check","size","sm"],["class","bb-step__state-label",3,"title",4,"ngIf"],[1,"bb-step__state-label",3,"title"]],template:function(U,L){1&U&&(e.TgZ(0,"div",0),e.YNc(1,x,3,7,"ng-container",1),e.qZA(),e.YNc(2,f,5,16,"ng-template",null,2,e.W1O),e.YNc(4,v,1,0,"ng-template",null,3,e.W1O),e.YNc(6,p,2,2,"ng-template",null,4,e.W1O)),2&U&&(e.ekj("bb-stepper__label",null==L.currentStep?null:L.currentStep.label),e.xp6(1),e.Q6J("ngForOf",L.steps))},directives:[A.o,E.sg,E.tP,E.O5],encapsulation:2}),d})(),z=(()=>{class d{}return d.\u0275fac=function(U){return new(U||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[[E.ez,A.Q]]}),d})()},8451:(k,K,r)=>{r.d(K,{o:()=>B,q:()=>u});var E=r(9808),e=r(3075),A=r(5e3),J=r(9144),I=r(4619);function y(l,C){if(1&l&&(A.TgZ(0,"label",5),A._uU(1),A.qZA()),2&l){const O=A.oxw();A.uIk("for",O.id),A.xp6(1),A.hij(" ",O.label," ")}}const x=function(l){return{"bb-switch--align-end":l}},S=function(l,C,O){return{"bb-switch__element--checked":l,"bb-switch__element--disabled":C,"bb-switch__element--focused":O}};var N=(()=>{return(l=N||(N={})).left="left",l.right="right",N;var l})();let u=(()=>{class l extends J.rA{constructor(O,m){super(O),this.cd=O,this.el=m,this.labelPosition=N.left,this.keyboardFocus=!1,this.focused=!1}ngOnInit(){super.ngOnInit(),this.role=this.role||"switch"}toggleSwitch(O){var m;if("LABEL"!==(null===(m=O.target)||void 0===m?void 0:m.tagName))if(window.MSInputMethodContext&&document.documentMode){"checkbox"===O.target.type?this.onValueChange():this.onValueChange(!this.value);const c=document.createEvent("Event");c.initEvent("change",!0,!1),this.el.nativeElement.dispatchEvent(c)}else this.onValueChange(!this.value),this.el.nativeElement.dispatchEvent(new Event("change",{bubbles:!0}))}onBlur(O){this.focused=!1,super.onBlur(O)}isLabelLeft(){return this.labelPosition===N.left}isLabelRight(){return this.labelPosition===N.right}}return l.\u0275fac=function(O){return new(O||l)(A.Y36(A.sBO),A.Y36(A.SBq))},l.\u0275cmp=A.Xpm({type:l,selectors:[["bb-switch-ui"]],inputs:{labelPosition:"labelPosition"},features:[A._Bn([{provide:e.JU,multi:!0,useExisting:(0,A.Gpc)(()=>l)}]),A.qOj],decls:5,vars:21,consts:[[1,"bb-switch",3,"ngClass","click"],["class","bb-switch__label",4,"ngIf"],[1,"bb-switch__checkbox","sr-only","sr-only-focusable",3,"id","ngModel","disabled","aria-label","required","aria-describedby","aria-labelledby","aria-expanded","role","aria-invalid","aria-owns","aria-activedescendant","ngModelChange","change","focus","blur"],[1,"bb-switch__element",3,"ngClass","focus","blur"],[1,"bb-switch__slider","slider"],[1,"bb-switch__label"]],template:function(O,m){1&O&&(A.TgZ(0,"div",0),A.NdJ("click",function(c){return!m.disabled&&m.toggleSwitch(c)}),A.YNc(1,y,2,2,"label",1),A.TgZ(2,"bb-input-checkbox-ui",2),A.NdJ("ngModelChange",function(c){return m.value=c})("change",function(c){return c.stopPropagation()&&!m.disabled&&m.toggleSwitch(c)})("focus",function(){return m.focused=!0})("blur",function(c){return m.onBlur(c)}),A.qZA(),A.TgZ(3,"span",3),A.NdJ("focus",function(){return m.keyboardFocus=!0})("blur",function(){return m.keyboardFocus=!1}),A._UZ(4,"span",4),A.qZA()()),2&O&&(A.Q6J("ngClass",A.VKq(15,x,m.isLabelRight())),A.xp6(1),A.Q6J("ngIf",m.label),A.xp6(1),A.Q6J("id",m.id)("ngModel",m.value)("disabled",m.disabled)("aria-label",m.ariaLabel)("required",m.required)("aria-describedby",m.ariaDescribedby)("aria-labelledby",m.ariaLabelledby)("aria-expanded",m.ariaExpanded)("role",m.role)("aria-invalid",m.ariaInvalid)("aria-owns",m.ariaOwns)("aria-activedescendant",m.ariaActivedescendant),A.xp6(1),A.Q6J("ngClass",A.kEZ(17,S,m.value,m.disabled,m.focused)))},directives:[I.r,E.mk,E.O5,e.JJ,e.On,e.Q7],encapsulation:2,changeDetection:0}),l})(),B=(()=>{class l{}return l.\u0275fac=function(O){return new(O||l)},l.\u0275mod=A.oAB({type:l}),l.\u0275inj=A.cJS({imports:[[E.ez,e.u5,I.b]]}),l})()}}]);