"use strict";(self.webpackChunkretail_usa=self.webpackChunkretail_usa||[]).push([[7444],{7444:(dt,tt,f)=>{f.d(tt,{xw:()=>q,nA:()=>pt,Ot:()=>ks,wG:()=>Q,kR:()=>Ss,_V:()=>b,P0:()=>Ue,Bb:()=>Le});var p=f(9808),t=f(5e3),c=f(3075),l=f(231),L=f(4482),z=f(5403),x=f(4004),J=f(9646),k=f(1135),W=f(7579),v=f(2722),T=f(8675),M=f(8505),O=f(262),$=f(3900),G=f(8372),ot=f(9841),Z=f(1884),j=f(9300),S=f(4968),P=f(5698),m=f(4782),C=f(9635),B=f(6706),g=f(8639),E=f(4619),h=f(6791),D=f(9779),N=f(7504),F=f(3508),Y=f(9287),V=f(7605),mt=f(6966),Ot=f(9136),st=f(3759),at=f(4951),rt=f(7555),gt=f(8451),we=f(6014),ct=f(9565),Mt=f(1918),It=f(4291),ft=f(9774),Je=f(5357),xt=f(2908),Bt=f(679),bt=f(5622),ht=f(2658),yt=f(7287),et=f(429),Ge=f(3823),Dt=f(5460),Ct=f(6888),Tt=f(5893),Ze=f(520),Ye=f(5413),ut=f(7656),Pt=f(4899),Jt=f(3623);function Qe(o,i){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.requiredMessage," ")}}function We(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"span",6),t.YNc(2,Qe,2,1,"ng-container",2),t.qZA(),t.BQk()),2&o){t.oxw();const e=t.MAs(3),n=t.oxw();t.xp6(1),t.uIk("id",n.id),t.xp6(1),t.Q6J("ngIf",n.getRequiredMessage())("ngIfElse",e)}}function Ke(o,i){if(1&o&&(t.ynx(0),t.SDv(1,7),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.pQV(e.label),t.QtT(1)}}function $e(o,i){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.validationMessage," ")}}function He(o,i){if(1&o&&(t.TgZ(0,"span",6),t.YNc(1,$e,2,1,"ng-container",2),t.qZA()),2&o){t.oxw();const e=t.MAs(7),n=t.oxw();t.uIk("id",n.id),t.xp6(1),t.Q6J("ngIf",n.getValidationMessage())("ngIfElse",e)}}function Ve(o,i){if(1&o&&(t.ynx(0),t.SDv(1,9),t.BQk()),2&o){const e=t.oxw(3);t.xp6(1),t.pQV(e.label),t.QtT(1)}}function qe(o,i){if(1&o&&t.YNc(0,Ve,2,1,"ng-container",8),2&o){const e=t.oxw(2);t.Q6J("ngIf",!e.hideGeneric)}}function ze(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"bb-input-validation-message-ui",1),t.NdJ("focusout",function(){return t.CHM(e),t.oxw().onFocusout()}),t.YNc(1,We,3,3,"ng-container",2),t.YNc(2,Ke,2,1,"ng-template",null,3,t.W1O),t.YNc(4,He,2,3,"ng-template",null,4,t.W1O),t.YNc(6,qe,1,1,"ng-template",null,5,t.W1O),t.qZA()}if(2&o){const e=t.MAs(5),n=t.oxw();t.Q6J("showErrors",(null==n.control?null:n.control.touched)&&(null==n.control?null:n.control.invalid)),t.xp6(1),t.Q6J("ngIf",n.control.errors&&n.control.errors.required)("ngIfElse",e)}}const Gt=["amountLabel"],Zt=["helperText"];function je(o,i){if(1&o&&(t.TgZ(0,"div",8,9),t._uU(2),t.qZA()),2&o){const e=t.oxw(2);t.MGl("id","payord-amount__helper-label-",e.payordAmountId,""),t.xp6(2),t.hij(" ",null==e.options?null:e.options.label," ")}}function Xe(o,i){if(1&o&&t._UZ(0,"span",10,11),2&o){const e=t.oxw(2);t.MGl("id","payord-amount__helper-text-",e.payordAmountId,""),t.Q6J("textContent",null==e.options?null:e.options.helperText)}}function tn(o,i){if(1&o&&t._UZ(0,"bb-payord-validation-message",12),2&o){const e=t.oxw(2);t.Q6J("control",e.group.get("amountGroup"))("validationMessages",null==e.options?null:e.options.validationMessages)("label",(null==e.options?null:e.options.label)||"Amount")}}function en(o,i){if(1&o&&t._UZ(0,"div",13),2&o){const e=t.oxw(2);t.Q6J("textContent",null==e.options?null:e.options.description)}}function nn(o,i){if(1&o&&(t.TgZ(0,"section",1),t.YNc(1,je,3,2,"div",2),t.YNc(2,Xe,2,2,"span",3),t.TgZ(3,"bb-currency-input-ui",4)(4,"div",5),t.YNc(5,tn,1,3,"bb-payord-validation-message",6),t.qZA()(),t.YNc(6,en,1,1,"div",7),t.qZA()),2&o){const e=t.oxw();t.Q6J("formGroup",e.group)("ngClass",null==e.options?null:e.options.cssClasses),t.xp6(1),t.Q6J("ngIf",null==e.options?null:e.options.label),t.xp6(1),t.Q6J("ngIf",null==e.options?null:e.options.helperText),t.xp6(1),t.Q6J("currencies",null==e.options?null:e.options.currencies)("decMaxLen",null==e.options?null:e.options.decMaxLen)("allowNegativeValue",null==e.options?null:e.options.allowNegativeValue)("currencyLabel",(null==e.options?null:e.options.currencyLabel)||"")("decimalLabel",(null==e.options?null:e.options.decimalLabel)||"")("disabled",(null==e.options?null:e.options.disabled)||!1)("integer",null==e.options?null:e.options.integer)("integerLabel",(null==e.options?null:e.options.integerLabel)||"")("isRightAligned",null==e.options?null:e.options.isRightAligned)("placeholder",(null==e.options?null:e.options.placeholder)||0)("readonly",null==e.options?null:e.options.readonly)("aria-describedby",null==e.options?null:e.options.describedBy)("aria-labelledby",e.getLabelledbyForSelector())("aria-invalid",null==e.options?null:e.options.ariaInvalid)("formControlName",e.config.name),t.uIk("maxlength",(null==e.options?null:e.options.maxLength)||18)("data-role",e.config.name),t.xp6(2),t.Q6J("ngIf",(null==e.control?null:e.control.touched)&&(null==e.control?null:e.control.invalid)),t.xp6(1),t.Q6J("ngIf",null==e.options?null:e.options.description)}}function on(o,i){1&o&&t.GkF(0)}function ln(o,i){if(1&o&&t._UZ(0,"div",10),2&o){const e=t.oxw(3);t.Q6J("textContent",null==e.options?null:e.options.description)}}function sn(o,i){if(1&o&&(t.TgZ(0,"div",12),t._UZ(1,"bb-input-checkbox-ui",13),t.qZA()),2&o){const e=t.oxw(4);t.xp6(1),t.Q6J("disabled",!!e.isClosedPaymentControl.value)("formControlName",e.saveContactControlName)("label",e.options.saveNewContactLabel||"Save as a new contact")}}function an(o,i){if(1&o&&(t.ynx(0),t.YNc(1,sn,2,3,"div",11),t.ALo(2,"async"),t.BQk()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",(null==e.saveNewContactControl?null:e.saveNewContactControl.value)||t.lcZ(2,1,e.manualEdit$))}}const rn=function(o){return{name:o}};function cn(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",3)(1,"section",4)(2,"bb-beneficiary-selector-ui",5,6),t.NdJ("fetchMoreItems",function(s){return t.CHM(e),t.oxw(2).onFetchMoreItems(s)})("searchValue",function(s){return t.CHM(e),t.oxw(2).onSearch(s)})("selectedAccount",function(s){return t.CHM(e),t.oxw(2).onSelectAccount(s)})("selectedContact",function(s){return t.CHM(e),t.oxw(2).onSelectContact(s)})("manualEdit",function(s){return t.CHM(e),t.oxw(2).onManualEdit(s)})("searchBlur",function(s){return t.CHM(e),t.oxw(2).onSearchBlur(s)})("clear",function(s){return t.CHM(e),t.oxw(2).onClearValue(s)}),t.qZA(),t._UZ(4,"bb-payord-validation-message",7),t.YNc(5,ln,1,1,"div",8),t.qZA(),t.YNc(6,an,3,3,"ng-container",9),t.qZA()}if(2&o){const e=t.oxw().$implicit,n=t.oxw();t.Q6J("ngClass",null==n.options?null:n.options.cssClasses)("formGroup",n.group),t.xp6(2),t.Q6J("selectedItem",t.VKq(24,rn,null==n.accountNameControl?null:n.accountNameControl.value))("placeholder",(null==n.options?null:n.options.placeholder)||"")("tabs",null==n.options?null:n.options.tabs)("hasError",(null==n.accountNameControl?null:n.accountNameControl.touched)&&(null==n.accountNameControl?null:n.accountNameControl.invalid))("totalAccounts",null==e?null:e.totalCreditAccounts)("totalContacts",null==e?null:e.totalContacts)("accounts",null==e?null:e.accounts)("contacts",null==e?null:e.contacts)("totalContactsItemsCount",null==e?null:e.totalContactsItemsCount)("dropdownIcon",(null==n.options?null:n.options.dropdownIcon)||"toggle-down")("aria-label",(null==n.options?null:n.options.ariaLabel)||"Toggle beneficiary list")("title",null==n.options?null:n.options.label)("helperText",null==n.options?null:n.options.helperText)("search",n.accountNameControl)("isManualEditDisabled",null==n.options?null:n.options.isManualEditDisabled)("isClosedPayment",n.isClosedPaymentControl.value)("isBeneficiaryDisabled",n.isBeneficiaryDisabled()),t.xp6(2),t.Q6J("control",null==n.group?null:n.group.controls.name)("validationMessages",null==n.options?null:n.options.validationMessages)("label",(null==n.options?null:n.options.label)||"Beneficiary name"),t.xp6(1),t.Q6J("ngIf",null==n.options?null:n.options.description),t.xp6(1),t.Q6J("ngIf",!(null!=n.options&&n.options.isTemplateMode))}}function un(o,i){if(1&o&&t.YNc(0,cn,7,26,"div",2),2&o){const e=t.oxw();t.Q6J("ngIf",!(null!=e.config&&e.config.hidden))}}const X=function(o){return{$implicit:o}},Yt=function(o){return{__error:o}};function _n(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",1)(1,"bb-input-checkbox-ui",2,3),t.NdJ("change",function(){return t.CHM(e),t.oxw().toggleDependants()}),t.qZA(),t._UZ(3,"bb-payord-validation-message",4),t.qZA()}if(2&o){const e=t.MAs(2),n=t.oxw();t.Q6J("formGroup",n.group)("ngClass",null==n.options?null:n.options.cssClasses),t.xp6(1),t.Q6J("formControlName",null==n.config?null:n.config.name)("label",null==n.options?null:n.options.label)("disabled",null==n.options?null:n.options.disabled)("bbDynamicAriaAttribute",t.VKq(11,Yt,(null==n.control?null:n.control.touched)&&(null==n.control?null:n.control.invalid))),t.uIk("data-role",null==n.config?null:n.config.name),t.xp6(2),t.Q6J("control",null==n.group?null:n.group.controls[n.config.name])("validationMessages",null==n.options?null:n.options.validationMessages)("label",null==n.options?null:n.options.label)("id",(null==e?null:e.id)+"__error")}}function pn(o,i){if(1&o&&t._UZ(0,"span",11),2&o){const e=t.oxw(3);t.Q6J("textContent",null==e.options?null:e.options.helperText)}}function dn(o,i){if(1&o&&(t.TgZ(0,"div",9)(1,"span"),t._uU(2),t.qZA(),t.YNc(3,pn,1,1,"span",10),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.hij(" ",null==e.options?null:e.options.label," "),t.xp6(1),t.Q6J("ngIf",null==e.options?null:e.options.helperText)}}function mn(o,i){if(1&o&&t._UZ(0,"div",12),2&o){const e=t.oxw(2);t.Q6J("textContent",null==e.options?null:e.options.description)}}const gn=function(o,i){return{"payord-debit-account-selector__error":o,"payord-debit-account-selector__desc":i}};function fn(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",1)(1,"section",2)(2,"label",3),t.YNc(3,dn,4,2,"div",4),t.TgZ(4,"div",5)(5,"bb-account-selector-ui",6),t.NdJ("change",function(s){return t.CHM(e),t.oxw().selectItem(s)})("blur",function(){return t.CHM(e),t.oxw().onBlur()})("scrollToEnd",function(){return t.CHM(e),t.oxw().onScrollToEnd()}),t.ALo(6,"async"),t.qZA()()(),t._UZ(7,"bb-payord-validation-message",7),t.YNc(8,mn,1,1,"div",8),t.qZA()()}if(2&o){const e=t.oxw();t.Q6J("ngClass",null==e.options?null:e.options.cssClasses),t.xp6(1),t.Q6J("formGroup",e.group),t.xp6(2),t.Q6J("ngIf",null==e.options?null:e.options.label),t.xp6(2),t.Q6J("markFirst",!0)("highlight",!1)("filterItems",null==e.options?null:e.options.filterItems)("closeOnSelect",!0)("dropdownPosition","bottom")("items",null==e.arrangementList?null:e.arrangementList.items)("selectedItems",e.selectedAccount)("placeholder",(null==e.options?null:e.options.placeholder)||"")("required",null==e.options?null:e.options.required)("showBankBranchCode",null==e.options?null:e.options.showBankBranchCode)("bbDynamicAriaAttribute",t.WLB(30,gn,(null==e.control?null:e.control.touched)&&(null==e.control?null:e.control.invalid),null==e.options?null:e.options.description))("prependInputId",!1)("disableScrollEnd",(null==e.arrangementList||null==e.arrangementList.items?null:e.arrangementList.items.length)>=(null==e.arrangementList?null:e.arrangementList.count))("searchFunc",e.options.searchFn)("minTermLength",e.options.minTermLength||0)("typeToSearchText",e.options.typeToSearchText||e.defaultTypeToSearchText)("typeahead",e.options.disableTypeahead?void 0:e.typeahead$)("loading",t.lcZ(6,28,e.loading$)),t.uIk("aria-label",null==e.options?null:e.options.label)("data-role","debit-account-selector"),t.xp6(2),t.Q6J("control",e.control)("validationMessages",null==e.options?null:e.options.validationMessages)("label",(null==e.options?null:e.options.label)||"Debit account")("id","payord-debit-account-selector__error"),t.xp6(1),t.Q6J("ngIf",null==e.options?null:e.options.description)}}function bn(o,i){if(1&o&&t._UZ(0,"span",11),2&o){t.oxw();const e=t.MAs(5),n=t.oxw();t.Q6J("id",(null==e?null:e.id)+"__helper")("textContent",null==n.options?null:n.options.helperText)}}function hn(o,i){if(1&o&&t._UZ(0,"bb-input-radio-ui",12),2&o){const e=i.$implicit;t.Q6J("value",e.value)("label",e.label),t.uIk("data-role",e.value)}}function yn(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",1),t._UZ(1,"label",2,3),t.YNc(3,bn,1,2,"span",4),t.TgZ(4,"bb-input-radio-group-ui",5,6),t.NdJ("change",function(){return t.CHM(e),t.oxw().toggleDependants()}),t.YNc(6,hn,1,3,"bb-input-radio-ui",7),t.qZA(),t._UZ(7,"bb-payord-validation-message",8)(8,"div",9,10),t.qZA()}if(2&o){const e=t.MAs(5),n=t.oxw();t.Q6J("formGroup",n.group)("ngClass",null==n.options?null:n.options.cssClasses),t.xp6(1),t.Q6J("id",(null==e?null:e.id)+"__label")("for",null==e?null:e.id)("textContent",(null==n.options?null:n.options.label)||""),t.xp6(2),t.Q6J("ngIf",null==n.options?null:n.options.helperText),t.xp6(1),t.Q6J("label",null==n.options?null:n.options.label)("formControlName",null==n.config?null:n.config.name)("horizontal",null==n.options?null:n.options.horizontal)("preselect",null==n.options?null:n.options.preselect)("bbDynamicAriaAttribute",n.getDescribedByRefs(e.id)),t.uIk("data-role",null==n.config?null:n.config.name),t.xp6(2),t.Q6J("ngForOf",null==n.options?null:n.options.options),t.xp6(1),t.Q6J("control",null==n.group?null:n.group.controls[n.config.name])("validationMessages",null==n.options?null:n.options.validationMessages)("label",null==n.options?null:n.options.label)("id",(null==e?null:e.id)+"__error"),t.xp6(1),t.Q6J("hidden",!(null!=n.options&&n.options.description))("id",(null==e?null:e.id)+"__desc")("textContent",(null==n.options?null:n.options.description)||""),t.uIk("aria-hidden",!(null!=n.options&&n.options.description))}}function Cn(o,i){1&o&&t.GkF(0)}function An(o,i){1&o&&t.GkF(0)}function vn(o,i){if(1&o&&(t.ynx(0),t.YNc(1,Cn,1,0,"ng-container",7),t._UZ(2,"hr",8),t.YNc(3,An,1,0,"ng-container",7),t.BQk()),2&o){t.oxw();const e=t.MAs(7),n=t.MAs(9);t.xp6(1),t.Q6J("ngTemplateOutlet",e),t.xp6(2),t.Q6J("ngTemplateOutlet",n)}}function Sn(o,i){1&o&&t.GkF(0)}function En(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",13),t.NdJ("click",function(){return t.CHM(e),t.oxw(),t.MAs(1).toggle()}),t.YNc(1,Sn,1,0,"ng-container",7),t.TgZ(2,"button",14),t.NdJ("click",function(s){return t.CHM(e),t.oxw(),t.MAs(1).toggle(),s.stopPropagation()}),t._UZ(3,"bb-icon-ui",15),t.qZA()(),t._UZ(4,"hr",8)}if(2&o){const e=i.isOpen;t.oxw(2);const n=t.MAs(7);t.uIk("aria-expanded",e),t.xp6(1),t.Q6J("ngTemplateOutlet",n),t.xp6(2),t.Q6J("name",e?"toggle-up":"toggle-down")}}function On(o,i){1&o&&t.GkF(0)}function Mn(o,i){if(1&o&&t.YNc(0,On,1,0,"ng-container",7),2&o){t.oxw(2);const e=t.MAs(9);t.Q6J("ngTemplateOutlet",e)}}function In(o,i){1&o&&(t.TgZ(0,"bb-collapsible-ui",9,10),t.YNc(2,En,5,3,"ng-template",11),t.YNc(3,Mn,1,1,"ng-template",12),t.qZA())}function xn(o,i){if(1&o&&(t.TgZ(0,"legend")(1,"span",16),t._uU(2),t.qZA(),t.TgZ(3,"span",17),t._uU(4," ("),t._UZ(5,"bb-schedule-label-ui",18),t._uU(6,") "),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.hij(" ",(null==e.options?null:e.options.label)||"Schedule"," "),t.xp6(3),t.Q6J("item",e.scheduleLabelData)}}function Bn(o,i){if(1&o&&t._UZ(0,"bb-schedule-ui",19),2&o){const e=t.oxw(2);t.Q6J("scheduleForm",e.group)("frequencies",null==e.options?null:e.options.frequencies)("minOccurs",null==e.options?null:e.options.minOccurs)("maxOccurs",null==e.options?null:e.options.maxOccurs)("formSubmitted",null==e.group?null:e.group.touched)}}function Dn(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"section",1)(2,"fieldset",2),t.YNc(3,vn,4,2,"ng-container",3),t.qZA()(),t.YNc(4,In,4,0,"ng-template",null,4,t.W1O),t.YNc(6,xn,7,2,"ng-template",null,5,t.W1O),t.YNc(8,Bn,1,5,"ng-template",null,6,t.W1O),t.BQk()),2&o){const e=t.MAs(5),n=t.oxw();t.xp6(1),t.Q6J("ngClass",null==n.options?null:n.options.cssClasses),t.xp6(2),t.Q6J("ngIf",!n.config.options.collapsible)("ngIfElse",e)}}function Tn(o,i){if(1&o&&t._UZ(0,"span",11),2&o){t.oxw();const e=t.MAs(5),n=t.oxw();t.Q6J("id",(null==e?null:e.id)+"__desc")("textContent",null==n.options?null:n.options.helperText)}}function Pn(o,i){if(1&o&&t._UZ(0,"bb-dropdown-single-select-option-ui",12),2&o){const e=i.$implicit;t.Q6J("value",e.value)("label",e.label),t.uIk("data-role",e.value)}}const lt=function(o,i){return{__error:o,__desc:i}};function Nn(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",1),t._UZ(1,"label",2,3),t.YNc(3,Tn,1,2,"span",4),t.TgZ(4,"bb-dropdown-single-select-ui",5,6),t.NdJ("change",function(){return t.CHM(e),t.oxw().toggleDependants()}),t.YNc(6,Pn,1,3,"bb-dropdown-single-select-option-ui",7),t.qZA(),t._UZ(7,"bb-payord-validation-message",8)(8,"div",9,10),t.qZA()}if(2&o){const e=t.MAs(5),n=t.oxw();t.Q6J("formGroup",n.group)("ngClass",null==n.options?null:n.options.cssClasses),t.xp6(1),t.Q6J("id",(null==e?null:e.id)+"__label")("for",null==e?null:e.id)("textContent",(null==n.options?null:n.options.label)||""),t.xp6(2),t.Q6J("ngIf",null==n.options?null:n.options.helperText),t.xp6(1),t.Q6J("formControlName",n.config.name)("placeholder",(null==n.options?null:n.options.placeholder)||"")("bbDynamicAriaAttribute",t.WLB(19,lt,(null==n.control?null:n.control.touched)&&(null==n.control?null:n.control.invalid),null==n.options?null:n.options.description)),t.uIk("data-role",n.config.name),t.xp6(2),t.Q6J("ngForOf",null==n.options?null:n.options.options),t.xp6(1),t.Q6J("control",null==n.group?null:n.group.controls[n.config.name])("validationMessages",null==n.options?null:n.options.validationMessages)("label",null==n.options?null:n.options.label)("id",(null==e?null:e.id)+"__error"),t.xp6(1),t.Q6J("hidden",!(null!=n.options&&n.options.description))("id",(null==e?null:e.id)+"__desc")("textContent",(null==n.options?null:n.options.description)||""),t.uIk("aria-hidden",!(null!=n.options&&n.options.description))}}function Fn(o,i){if(1&o&&t._UZ(0,"span",11),2&o){t.oxw();const e=t.MAs(5),n=t.oxw(2);t.Q6J("id",(null==e?null:e.id)+"__help-text")("textContent",null==n.options?null:n.options.helperText)}}function Rn(o,i){if(1&o&&(t.TgZ(0,"div",2),t._UZ(1,"label",3,4),t.YNc(3,Fn,1,2,"span",5),t._UZ(4,"bb-textarea-ui",6,7)(6,"bb-payord-validation-message",8)(7,"div",9,10),t.qZA()),2&o){const e=t.MAs(5),n=t.oxw(2);t.Q6J("formGroup",n.group)("ngClass",null==n.options?null:n.options.cssClasses),t.xp6(1),t.Q6J("id",(null==e?null:e.id)+"__label")("for",null==e?null:e.id)("textContent",(null==n.options?null:n.options.label)||""),t.xp6(2),t.Q6J("ngIf",null==n.options?null:n.options.helperText),t.xp6(1),t.Q6J("placeholder",(null==n.options?null:n.options.placeholder)||"")("formControlName",n.config.name)("showCharCounter",!0)("minLength",null==n.options?null:n.options.minLength)("maxLength",null==n.options?null:n.options.maxLength)("rows",null==n.options?null:n.options.rows)("cols",null==n.options?null:n.options.cols)("bbDynamicAriaAttribute",t.WLB(22,lt,(null==n.control?null:n.control.touched)&&(null==n.control?null:n.control.invalid),null==n.options?null:n.options.description)),t.uIk("data-role",n.config.name),t.xp6(2),t.Q6J("control",null==n.group?null:n.group.controls[n.config.name])("validationMessages",null==n.options?null:n.options.validationMessages)("label",null==n.options?null:n.options.label),t.xp6(1),t.Q6J("hidden",!(null!=n.options&&n.options.description))("id",(null==e?null:e.id)+"__desc")("textContent",(null==n.options?null:n.options.description)||""),t.uIk("aria-hidden",!(null!=n.options&&n.options.description))}}function Ln(o,i){if(1&o&&t._UZ(0,"bb-icon-ui",16),2&o){const e=t.oxw(3);t.Q6J("name",(null==e.options||null==e.options.collapseOptions?null:e.options.collapseOptions.icon)||"add")("size",null==e.options||null==e.options.collapseOptions?null:e.options.collapseOptions.iconSize)}}function Un(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"span",12)(2,"button",13),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).expand()}),t.YNc(3,Ln,1,2,"bb-icon-ui",14),t.TgZ(4,"span",15),t._uU(5),t.qZA()(),t._UZ(6,"bb-payord-validation-message",8),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("color",(null==e.options||null==e.options.collapseOptions?null:e.options.collapseOptions.btnColor)||"link")("buttonSize",null==e.options||null==e.options.collapseOptions?null:e.options.collapseOptions.btnSize),t.xp6(1),t.Q6J("ngIf",!(null!=e.options&&null!=e.options.collapseOptions&&e.options.collapseOptions.hideIcon)),t.xp6(2),t.hij(" ",(null==e.options||null==e.options.collapseOptions?null:e.options.collapseOptions.label)||(null==e.options?null:e.options.label)," "),t.xp6(1),t.Q6J("control",null==e.group?null:e.group.controls[e.config.name])("validationMessages",null==e.options?null:e.options.validationMessages)("label",null==e.options?null:e.options.label)}}function kn(o,i){if(1&o&&(t.ynx(0),t.YNc(1,Rn,9,25,"div",1),t.YNc(2,Un,7,7,"ng-container",0),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.isCollapsed),t.xp6(1),t.Q6J("ngIf",e.isCollapsed)}}function wn(o,i){if(1&o&&t._UZ(0,"span",11),2&o){const e=t.oxw(2);t.Q6J("textContent",null==e.options?null:e.options.helperText)}}function Jn(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",1)(1,"label",2,3),t._uU(3),t.qZA(),t.YNc(4,wn,1,1,"span",4),t.TgZ(5,"bb-input-text-ui",5,6),t.NdJ("blur",function(){return t.CHM(e),t.oxw().onBlur()}),t.qZA(),t._UZ(7,"bb-payord-validation-message",7,8)(9,"div",9,10),t.qZA()}if(2&o){const e=t.MAs(6),n=t.oxw();t.Q6J("formGroup",n.group)("ngClass",null==n.options?null:n.options.cssClasses),t.xp6(1),t.Q6J("id",(null==n.options?null:n.options.id)+"__label")("for",null==n.options?null:n.options.id),t.xp6(2),t.hij(" ",(null==n.options?null:n.options.label)||""," "),t.xp6(1),t.Q6J("ngIf",null==n.options?null:n.options.helperText),t.xp6(1),t.Q6J("formControlName",n.config.name)("disabled",null==n.options?null:n.options.disabled)("minLength",null==n.options?null:n.options.minLength)("maxLength",n.maxLength)("showCharCounter",null==n.options?null:n.options.showCharCounter)("id",null==n.options?null:n.options.id)("placeholder",(null==n.options?null:n.options.placeholder)||"")("autocomplete",null==n.options?null:n.options.autoComplete)("autofocus",null==n.options?null:n.options.autofocus)("readonly",null==n.options?null:n.options.readonly)("bbDynamicAriaAttribute",t.WLB(29,lt,(null==n.control?null:n.control.touched)&&(null==n.control?null:n.control.invalid),null==n.options?null:n.options.description))("mask",n.mask)("maskValidator",!1)("inputClassName",null!=n.options&&n.options.isIban&&n.group.value[n.config.name]?"text-uppercase":""),t.uIk("data-role",n.config.name),t.xp6(2),t.Q6J("control",null==n.group?null:n.group.controls[n.config.name])("validationMessages",null==n.options?null:n.options.validationMessages)("label",null==n.options?null:n.options.label)("id",(null==e?null:e.id)+"__error"),t.xp6(2),t.Q6J("hidden",!(null!=n.options&&n.options.description))("id",(null==e?null:e.id)+"__desc")("textContent",(null==n.options?null:n.options.description)||""),t.uIk("aria-hidden",!(null!=n.options&&n.options.description))}}function Gn(o,i){if(1&o&&(t.TgZ(0,"div",9,10),t._uU(2),t.qZA()),2&o){const e=t.oxw(2);t.MGl("id","payment-amount__helper-label-",e.sanctionedCurrencyAmountId,""),t.xp6(2),t.hij(" ",null==e.options?null:e.options.label," ")}}function Zn(o,i){if(1&o&&t._UZ(0,"span",11,12),2&o){const e=t.oxw(2);t.MGl("id","payment-amount__helper-text-",e.sanctionedCurrencyAmountId,""),t.Q6J("textContent",null==e.options?null:e.options.helperText)}}const Yn=function(o){return{dividerIndex:o,showName:!0,isSearchable:!0}};function Qn(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"bb-currency-amount-selector",13)(2,"div",14),t._UZ(3,"bb-payord-validation-message",15),t.qZA()(),t.TgZ(4,"bb-input-validation-message-ui",16)(5,"span"),t.SDv(6,17),t.qZA()(),t.BQk()),2&o){const e=i.ngIf,n=t.oxw(2);t.xp6(1),t.Q6J("currencies",e.currencies)("decMinLen",0)("decMaxLen",null==n.options?null:n.options.decMaxLen)("allowNegativeValue",null==n.options?null:n.options.allowNegativeValue)("currencyLabel",(null==n.options?null:n.options.currencyLabel)||"")("decimalLabel",(null==n.options?null:n.options.decimalLabel)||"")("disabled",(null==n.options?null:n.options.disabled)||!1)("integer",null==n.options?null:n.options.integer)("integerLabel",(null==n.options?null:n.options.integerLabel)||"")("isRightAligned",null==n.options?null:n.options.isRightAligned)("labelClasses",(null==n.options?null:n.options.labelClasses)||"")("placeholder",(null==n.options?null:n.options.placeholder)||0)("readonly",null==n.options?null:n.options.readonly)("aria-describedby",null==n.options?null:n.options.describedBy)("aria-labelledby",n.getLabelledbyForSelector())("aria-invalid",null==n.options?null:n.options.ariaInvalid)("formControlName",n.config.name)("currencySelectorExtended",!0)("currencySelectorConfig",t.VKq(24,Yn,e.dividerIndex)),t.uIk("maxlength",(null==n.options?null:n.options.maxLength)||18),t.xp6(2),t.Q6J("control",n.group.get("amountGroup"))("validationMessages",null==n.options?null:n.options.validationMessages)("label",(null==n.options?null:n.options.label)||"Amount"),t.xp6(1),t.Q6J("showErrors",e.message)}}function Wn(o,i){1&o&&t._UZ(0,"bb-loading-indicator-ui")}function Kn(o,i){if(1&o&&(t.ynx(0)(1),t.SDv(2,18),t.BQk(),t.TgZ(3,"span",19),t._uU(4," \u2248 "),t._UZ(5,"bb-amount-ui",20),t.qZA(),t.ynx(6),t.SDv(7,21),t.BQk()()),2&o){const e=i.ngIf;t.xp6(5),t.Q6J("mapCurrency",!1)("amount",e.calculatedAmount)("currency",e.currencyFrom),t.xp6(2),t.pQV(e.currencyFrom)(e.rate)(e.currencyTo),t.QtT(7)}}function $n(o,i){if(1&o&&(t.ynx(0),t.YNc(1,Kn,8,6,"ng-container",7),t.BQk()),2&o){const e=i.ngIf,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.getCalculatedRate(e))}}function Hn(o,i){1&o&&(t.TgZ(0,"div")(1,"span"),t.SDv(2,22),t.qZA()())}function Vn(o,i){if(1&o&&t._UZ(0,"div",23),2&o){const e=t.oxw(2);t.Q6J("textContent",null==e.options?null:e.options.description)}}function qn(o,i){if(1&o&&(t.TgZ(0,"section",1),t.YNc(1,Gn,3,2,"div",2),t.YNc(2,Zn,2,2,"span",3),t.TgZ(3,"div",4),t.YNc(4,Qn,7,26,"ng-container",5),t.ALo(5,"async"),t.qZA(),t.YNc(6,Wn,1,0,"ng-template",null,6,t.W1O),t.YNc(8,$n,2,1,"ng-container",7),t.ALo(9,"async"),t.YNc(10,Hn,3,0,"div",7),t.ALo(11,"async"),t.YNc(12,Vn,1,1,"div",8),t.qZA()),2&o){const e=t.MAs(7),n=t.oxw();t.Q6J("formGroup",n.group)("ngClass",null==n.options?null:n.options.cssClasses),t.xp6(1),t.Q6J("ngIf",null==n.options?null:n.options.label),t.xp6(1),t.Q6J("ngIf",null==n.options?null:n.options.helperText),t.xp6(2),t.Q6J("ngIf",t.lcZ(5,9,null==n.options?null:n.options.items$))("ngIfElse",e),t.xp6(4),t.Q6J("ngIf",t.lcZ(9,11,n.exchangeRate$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(11,13,null==n.options?null:n.options.exchangeRateError$)),t.xp6(2),t.Q6J("ngIf",null==n.options?null:n.options.description)}}function zn(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",1)(1,"bb-select-country-dropdown",2),t.NdJ("selectCountry",function(s){return t.CHM(e),t.oxw().selectItem(s)}),t.qZA(),t._UZ(2,"bb-payord-validation-message",3)(3,"div",4,5),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.group)("ngClass",null==e.options?null:e.options.cssClasses),t.xp6(1),t.Q6J("formControlName",null==e.config?null:e.config.name)("countries",null==e.options?null:e.options.countries)("label",null==e.options?null:e.options.label)("helperText",null==e.options?null:e.options.helperText)("placeholder",null==e.options?null:e.options.placeholder)("searchPlaceholder",null==e.options?null:e.options.searchPlaceholder)("dropdownIcon",null==e.options?null:e.options.dropdownIcon)("selectedCountry",e.control.value),t.uIk("data-role",null==e.config?null:e.config.name),t.xp6(1),t.Q6J("control",null==e.group?null:e.group.controls[e.config.name])("validationMessages",null==e.options?null:e.options.validationMessages)("label",null==e.options?null:e.options.label),t.xp6(1),t.Q6J("hidden",!(null!=e.options&&e.options.description))("textContent",(null==e.options?null:e.options.description)||""),t.uIk("aria-hidden",!(null!=e.options&&e.options.description))}}function jn(o,i){if(1&o&&t._UZ(0,"label",10,11),2&o){t.oxw();const e=t.MAs(7),n=t.oxw();t.Q6J("id",(null==e?null:e.id)+"__label")("textContent",null==n.options?null:n.options.label)}}function Xn(o,i){if(1&o&&t._UZ(0,"span",12),2&o){const e=t.oxw(2);t.Q6J("textContent",null==e.options?null:e.options.helperText)}}function to(o,i){if(1&o&&(t.TgZ(0,"div",1)(1,"div")(2,"div"),t.YNc(3,jn,2,2,"label",2),t.YNc(4,Xn,1,1,"span",3),t.qZA(),t.TgZ(5,"div",4),t._UZ(6,"bb-input-datepicker-ui",5,6),t.qZA(),t._UZ(8,"bb-payord-validation-message",7)(9,"div",8,9),t.qZA()()),2&o){const e=t.MAs(7),n=t.oxw();t.Q6J("formGroup",n.group)("ngClass",null==n.options?null:n.options.cssClasses),t.xp6(2),t.ekj("payord-date-control__no-label",!(null!=n.options&&n.options.label||null!=n.options&&n.options.helperText)),t.xp6(1),t.Q6J("ngIf",null==n.options?null:n.options.label),t.xp6(1),t.Q6J("ngIf",null==n.options?null:n.options.helperText),t.xp6(2),t.Q6J("formControlName",n.config.name)("minDate",n.options.minDate)("maxDate",n.options.maxDate)("overrideDateFormat",n.options.overrideDateFormat)("placeholder",n.options.placeholder)("btnColor",n.options.btnColor||"link")("clickOpen",n.options.clickOpen||!1)("focusOpen",n.options.focusOpen||!1)("icon",n.options.icon||"calendar")("iconColor",n.options.iconColor)("iconSize",n.options.iconSize||"md")("markDisabled",n.options.markDisabled)("navigation",n.options.navigation||"arrows")("placement",n.options.placement||"bottom-left")("rangeSelection",n.options.rangeSelection||!1)("firstDayOfWeek",n.options.firstDayOfWeek)("readonly",n.options.readonly||!1)("bbDynamicAriaAttribute",t.WLB(34,lt,(null==n.control?null:n.control.touched)&&(null==n.control?null:n.control.invalid),null==n.options?null:n.options.description))("aria-labelledby",null!=n.options&&n.options.label?(null==e?null:e.id)+"__label":null),t.uIk("data-role",n.config.name),t.xp6(2),t.Q6J("control",null==n.group?null:n.group.controls[n.config.name])("validationMessages",null==n.options?null:n.options.validationMessages)("label",null==n.options?null:n.options.label)("id",(null==e?null:e.id)+"__error"),t.xp6(1),t.Q6J("hidden",!(null!=n.options&&n.options.description))("id",(null==e?null:e.id)+"__desc")("textContent",(null==n.options?null:n.options.description)||""),t.uIk("aria-hidden",!(null!=n.options&&n.options.description))}}function eo(o,i){if(1&o&&t._UZ(0,"span",10),2&o){t.oxw();const e=t.MAs(6),n=t.oxw();t.Q6J("id",(null==e?null:e.id)+"__desc")("textContent",null==n.options?null:n.options.helperText)}}function no(o,i){if(1&o&&(t.TgZ(0,"div",1)(1,"div"),t._UZ(2,"label",2,3),t.YNc(4,eo,1,2,"span",4),t._UZ(5,"bb-input-number-ui",5,6)(7,"bb-payord-validation-message",7)(8,"div",8,9),t.qZA()()),2&o){const e=t.MAs(6),n=t.oxw();t.Q6J("formGroup",n.group)("ngClass",null==n.options?null:n.options.cssClasses),t.xp6(2),t.Q6J("id",(null==e?null:e.id)+"__label")("for",null==e?null:e.id)("textContent",(null==n.options?null:n.options.label)||""),t.xp6(2),t.Q6J("ngIf",null==n.options?null:n.options.helperText),t.xp6(1),t.Q6J("placeholder",n.options.placeholder||"")("formControlName",n.config.name)("max",n.options.max)("min",n.options.min)("step",n.options.step)("bbDynamicAriaAttribute",t.WLB(20,lt,(null==n.control?null:n.control.touched)&&(null==n.control?null:n.control.invalid),null==n.options?null:n.options.description)),t.xp6(2),t.Q6J("control",null==n.group?null:n.group.controls[n.config.name])("validationMessages",null==n.options?null:n.options.validationMessages)("label",null==n.options?null:n.options.label)("id",(null==e?null:e.id)+"__error"),t.xp6(1),t.Q6J("hidden",!(null!=n.options&&n.options.description))("id",(null==e?null:e.id)+"__desc")("textContent",(null==n.options?null:n.options.description)||""),t.uIk("aria-hidden",!(null!=n.options&&n.options.description))}}function oo(o,i){if(1&o&&t._UZ(0,"span",10),2&o){t.oxw();const e=t.MAs(6),n=t.oxw();t.Q6J("id",(null==e?null:e.id)+"__desc")("textContent",null==n.options?null:n.options.helperText)}}function io(o,i){if(1&o&&(t.TgZ(0,"div",1)(1,"div"),t._UZ(2,"label",2,3),t.YNc(4,oo,1,2,"span",4),t._UZ(5,"bb-input-phone-ui",5,6)(7,"bb-payord-validation-message",7)(8,"div",8,9),t.qZA()()),2&o){const e=t.MAs(6),n=t.oxw();t.Q6J("formGroup",n.group)("ngClass",null==n.options?null:n.options.cssClasses),t.xp6(2),t.Q6J("id",(null==e?null:e.id)+"__label")("for",null==e?null:e.id)("textContent",(null==n.options?null:n.options.label)||""),t.xp6(2),t.Q6J("ngIf",null==n.options?null:n.options.helperText),t.xp6(1),t.Q6J("placeholder",n.options.placeholder||"")("formControlName",n.config.name)("minLength",null==n.options?null:n.options.minLength)("maxLength",null==n.options?null:n.options.maxLength)("bbDynamicAriaAttribute",t.WLB(20,lt,(null==n.control?null:n.control.touched)&&(null==n.control?null:n.control.invalid),null==n.options?null:n.options.description)),t.uIk("data-role",n.config.name),t.xp6(2),t.Q6J("control",null==n.group?null:n.group.controls[n.config.name])("validationMessages",null==n.options?null:n.options.validationMessages)("label",null==n.options?null:n.options.label)("id",(null==e?null:e.id)+"__error"),t.xp6(1),t.Q6J("hidden",!(null!=n.options&&n.options.description))("id",(null==e?null:e.id)+"__desc")("textContent",(null==n.options?null:n.options.description)||""),t.uIk("aria-hidden",!(null!=n.options&&n.options.description))}}function lo(o,i){if(1&o&&t._UZ(0,"bb-input-radio-ui",19),2&o){const e=i.$implicit,n=t.oxw(4),s=t.MAs(3);t.Q6J("labelTemplate",s)("labelTemplateContext",e)("value",n.getValue(e)),t.uIk("data-role",n.getValue(e))}}function so(o,i){1&o&&(t.ynx(0),t.TgZ(1,"span",21),t.ynx(2),t.SDv(3,22),t.BQk(),t.qZA(),t.BQk())}function ao(o,i){if(1&o&&(t.TgZ(0,"bb-input-validation-message-ui",20),t.YNc(1,so,4,0,"ng-container",0),t.qZA()),2&o){const e=t.oxw(4);t.Q6J("showErrors",(null==e.control?null:e.control.touched)&&(null==e.control?null:e.control.invalid)),t.xp6(1),t.Q6J("ngIf",e.control.errors&&e.control.errors.required)}}const ro=function(o){return{select_payment_option__error:o}};function co(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",13)(2,"div",14),t._uU(3,"Delivery"),t.qZA(),t.TgZ(4,"bb-input-radio-group-ui",15,16),t.NdJ("change",function(s){return t.CHM(e),t.oxw(3).onRadioChange((null==s||null==s.target?null:s.target.value)||"")}),t.YNc(6,lo,1,4,"bb-input-radio-ui",17),t.qZA(),t.YNc(7,ao,2,2,"bb-input-validation-message-ui",18),t.qZA()()}if(2&o){const e=t.oxw(2).ngIf,n=t.oxw();t.Q6J("formGroup",n.group)("ngClass",null==n.options?null:n.options.cssClasses),t.xp6(4),t.Q6J("formControlName",null==n.config?null:n.config.name)("preselect",!1)("bbDynamicAriaAttribute",t.VKq(8,ro,(null==n.control?null:n.control.touched)&&(null==n.control?null:n.control.invalid)))("prependInputId",!1),t.xp6(2),t.Q6J("ngForOf",e),t.xp6(1),t.Q6J("ngIf",n.control)}}function uo(o,i){if(1&o&&(t.ynx(0),t.YNc(1,co,8,10,"div",11),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!(null!=e.config&&e.config.hidden))}}function _o(o,i){if(1&o&&(t.ynx(0),t.YNc(1,uo,2,1,"ng-container",0),t.BQk()),2&o){const e=i.ngIf;t.xp6(1),t.Q6J("ngIf",e.length)}}function po(o,i){if(1&o&&(t.TgZ(0,"span"),t._uU(1," ("),t.SDv(2,29),t._uU(3,") "),t.qZA()),2&o){const e=t.oxw().labelTemplateContext;t.xp6(2),t.pQV(e.instructionPriority),t.QtT(2)}}function mo(o,i){if(1&o&&(t.ynx(0),t.SDv(1,31),t.BQk()),2&o){const e=t.oxw(2).labelTemplateContext;t.xp6(1),t.pQV(e.executionTimeFrame.unit)(e.executionTimeFrame.unit)(e.executionTimeFrame.unit)(e.executionTimeFrame.max)(e.executionTimeFrame.max)(e.executionTimeFrame.max),t.QtT(1)}}function go(o,i){if(1&o&&(t.ynx(0),t.SDv(1,32),t.BQk()),2&o){const e=t.oxw(2).labelTemplateContext;t.xp6(1),t.pQV(e.executionTimeFrame.min)(e.executionTimeFrame.max)(e.executionTimeFrame.unit),t.QtT(1)}}function fo(o,i){if(1&o&&(t.ynx(0),t.SDv(1,33),t.ALo(2,"date"),t.BQk()),2&o){const e=t.oxw(2).labelTemplateContext,n=t.oxw();t.xp6(2),t.pQV(t.xi3(2,1,n.today+" "+(null==e?null:e.cutOffTime),"HH:mm")),t.QtT(1)}}function bo(o,i){if(1&o&&(t.TgZ(0,"div",30),t.YNc(1,mo,2,6,"ng-container",0),t.YNc(2,go,2,3,"ng-container",0),t.YNc(3,fo,3,4,"ng-container",0),t.qZA()),2&o){const e=t.oxw().labelTemplateContext;t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.hasMin)&&(null==e?null:e.hasMax)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.hasMin)&&(null==e?null:e.hasMax)),t.xp6(1),t.Q6J("ngIf",null==e?null:e.cutOffTime)}}function ho(o,i){if(1&o&&(t.TgZ(0,"div",23)(1,"div",24)(2,"div")(3,"span"),t._uU(4),t.qZA(),t.YNc(5,po,4,1,"span",0),t.qZA(),t.YNc(6,bo,4,3,"div",25),t.qZA(),t.TgZ(7,"div",26),t._UZ(8,"bb-icon-ui",27),t.TgZ(9,"span",28),t._uU(10),t.ALo(11,"currency"),t.qZA()()()),2&o){const e=i.labelTemplateContext;t.xp6(4),t.Oqu(null==e?null:e.name),t.xp6(1),t.Q6J("ngIf",e.showHelperText),t.xp6(1),t.Q6J("ngIf",null==e?null:e.executionTimeFrame),t.xp6(4),t.Oqu(t.Dn7(11,4,e.transferFee.amount,e.transferFee.currencyCode,"code"))}}function yo(o,i){if(1&o&&(t.TgZ(0,"div"),t.SDv(1,16),t.qZA()),2&o){const e=t.oxw(4);t.xp6(1),t.pQV(null==e.paymentTypeNameControl?null:e.paymentTypeNameControl.value),t.QtT(1)}}function Co(o,i){if(1&o&&(t.TgZ(0,"div",17)(1,"div"),t.SDv(2,18),t.qZA(),t.TgZ(3,"div"),t._uU(4," \u2248 "),t._UZ(5,"bb-amount-ui",19),t.qZA()()),2&o){const e=t.oxw(3).ngIf,n=t.oxw();t.xp6(5),t.Q6J("mapCurrency",!1)("amount",n.getTotalCost(e.transferFee,e.calculatedAmount))("currency",e.fromCurrency)}}function Ao(o,i){if(1&o&&(t.ynx(0),t._UZ(1,"hr"),t.TgZ(2,"div",5)(3,"div"),t.SDv(4,6),t.qZA(),t._UZ(5,"bb-amount-ui",7),t.qZA(),t.TgZ(6,"div",8)(7,"div"),t.tHW(8,9),t._UZ(9,"span",10),t.N_p(),t.qZA(),t.TgZ(10,"div",11),t._uU(11," \u2248 "),t._UZ(12,"bb-amount-ui",12),t.qZA()(),t.TgZ(13,"div",13),t.YNc(14,yo,2,1,"div",2),t._UZ(15,"bb-amount-ui",14),t.qZA(),t.YNc(16,Co,6,3,"div",15),t.BQk()),2&o){const e=t.oxw(2).ngIf,n=t.oxw();t.xp6(5),t.Q6J("mapCurrency",!1)("amount",n.amount.amount||"0")("currency",n.amount.currency||n.defaultCurrency),t.xp6(1),t.Q6J("hidden",!e.calculatedAmount),t.xp6(3),t.pQV(e.fromCurrency)(e.rate)(e.toCurrency),t.QtT(8),t.xp6(3),t.Q6J("mapCurrency",!1)("amount",(null==e?null:e.calculatedAmount)||"0")("currency",null==e?null:e.fromCurrency),t.xp6(2),t.Q6J("ngIf",null==n.paymentTypeNameControl?null:n.paymentTypeNameControl.value),t.xp6(1),t.Q6J("mapCurrency",!1)("amount",(null==e.transferFee?null:e.transferFee.amount)||"0")("currency",null==e.transferFee?null:e.transferFee.currencyCode),t.xp6(1),t.Q6J("ngIf",n.isTotalAmountDisplayed)}}function vo(o,i){if(1&o&&(t.TgZ(0,"div"),t.SDv(1,22),t.qZA()),2&o){const e=t.oxw(4);t.xp6(1),t.pQV(null==e.paymentTypeNameControl?null:e.paymentTypeNameControl.value),t.QtT(1)}}function So(o,i){if(1&o&&(t.TgZ(0,"div",17)(1,"div"),t.SDv(2,23),t.qZA(),t._UZ(3,"bb-amount-ui",24),t.qZA()),2&o){const e=t.oxw(3).ngIf,n=t.oxw();t.xp6(3),t.Q6J("mapCurrency",!1)("amount",n.getTotalCost(e.transferFee))("currency",n.amount.currency||n.defaultCurrency)}}function Eo(o,i){if(1&o&&(t.TgZ(0,"div"),t._UZ(1,"hr"),t.TgZ(2,"div",5)(3,"div"),t.SDv(4,20),t.qZA(),t._UZ(5,"bb-amount-ui",21),t.qZA(),t.TgZ(6,"div",13),t.YNc(7,vo,2,1,"div",2),t._UZ(8,"bb-amount-ui",14),t.qZA(),t.YNc(9,So,4,3,"div",15),t.qZA()),2&o){const e=t.oxw(2).ngIf,n=t.oxw();t.xp6(5),t.Q6J("mapCurrency",!1)("amount",n.amount.amount||"0")("currency",n.amount.currency||n.defaultCurrency),t.xp6(2),t.Q6J("ngIf",null==n.paymentTypeNameControl?null:n.paymentTypeNameControl.value),t.xp6(1),t.Q6J("mapCurrency",!1)("amount",(null==e.transferFee?null:e.transferFee.amount)||"0")("currency",null==e.transferFee?null:e.transferFee.currencyCode),t.xp6(1),t.Q6J("ngIf",n.isTotalAmountDisplayed)}}function Oo(o,i){if(1&o&&(t.ynx(0),t.YNc(1,Ao,17,15,"ng-container",3),t.YNc(2,Eo,10,8,"ng-template",null,4,t.W1O),t.BQk()),2&o){const e=t.MAs(3),n=t.oxw().ngIf;t.xp6(1),t.Q6J("ngIf",null==n?null:n.hasForexInfo)("ngIfElse",e)}}function Mo(o,i){if(1&o&&(t.TgZ(0,"section",1),t.YNc(1,Oo,4,2,"ng-container",2),t.qZA()),2&o){const e=i.ngIf;t.xp6(1),t.Q6J("ngIf",null==e.transferFee?null:e.transferFee.amount)}}const Io=["productSelector"];function xo(o,i){if(1&o&&(t.TgZ(0,"div",10),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",null==e.options?null:e.options.label," ")}}function Bo(o,i){1&o&&t.GkF(0)}function Do(o,i){if(1&o&&(t.ynx(0),t.YNc(1,Bo,1,0,"ng-container",11),t.BQk()),2&o){t.oxw(2);const e=t.MAs(4);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function To(o,i){1&o&&t.GkF(0)}function Po(o,i){if(1&o&&(t.TgZ(0,"div",12)(1,"div",13),t.YNc(2,To,1,0,"ng-container",11),t.qZA()()),2&o){t.oxw(2);const e=t.MAs(2);t.xp6(2),t.Q6J("ngTemplateOutlet",e)}}function No(o,i){if(1&o&&(t.ynx(0),t._UZ(1,"bb-payord-validation-message",14),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("id",e.validationId)("control",null==e.group?null:e.group.controls.name)("validationMessages",null==e.options?null:e.options.validationMessages)("label",null==e.options?null:e.options.label)}}function Fo(o,i){if(1&o&&(t.TgZ(0,"div",3),t.YNc(1,xo,2,1,"div",4),t.TgZ(2,"section",5)(3,"label",6),t.YNc(4,Do,2,1,"ng-container",7),t.YNc(5,Po,3,1,"ng-template",null,8,t.W1O),t.qZA(),t.YNc(7,No,2,4,"ng-container",9),t.qZA()()),2&o){const e=t.MAs(6),n=t.oxw();t.Q6J("ngClass",null==n.options?null:n.options.cssClasses),t.xp6(1),t.Q6J("ngIf",null==n.options?null:n.options.label),t.xp6(1),t.Q6J("formGroup",n.group),t.xp6(2),t.Q6J("ngIf",!n.isEditScheduledTransfer)("ngIfElse",e),t.xp6(3),t.Q6J("ngIf",!n.selectedAccount)}}function Ro(o,i){if(1&o&&t._UZ(0,"bb-product-item-basic-account-ui",15),2&o){const e=t.oxw();t.Q6J("title",null==e.selectedAccount?null:e.selectedAccount.name)("productNumber",null==e.selectedAccount?null:e.selectedAccount.accountNumber)("amount",null==e.selectedAccount?null:e.selectedAccount.balance)("currency",null==e.selectedAccount?null:e.selectedAccount.currency)("productNumberFormat",(null==e.options?null:e.options.productNumberFormat)||e.accountFormat)("highlight",null==e.options?null:e.options.highlight)("showCurrencySymbol",!1!==(null==e.options?null:e.options.showCurrencySymbol))("active",!1)("balanceLabel",null==e.selectedAccount?null:e.selectedAccount.balanceLabel)}}function Lo(o,i){1&o&&t.GkF(0)}function Uo(o,i){if(1&o&&(t.TgZ(0,"div",23),t.YNc(1,Lo,1,0,"ng-container",11),t.qZA()),2&o){t.oxw(2);const e=t.MAs(2);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function ko(o,i){if(1&o&&(t.TgZ(0,"div",24)(1,"span",25),t._uU(2),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.hij(" ",null==e.options?null:e.options.placeholder," ")}}const Qt=function(o,i){return{selected:o,"bb-text-support":i}};function wo(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw(4).selectItem(s)}),t._UZ(1,"bb-product-item-basic-account-ui",29),t.qZA()}if(2&o){const e=t.oxw().$implicit,n=t.oxw(4);t.Q6J("disabled",e.accountNumber===(null==n.disabledAccount?null:n.disabledAccount.accountNumber))("ngClass",t.WLB(13,Qt,e.id===(null==n.selectedAccount?null:n.selectedAccount.id),e.accountNumber===(null==n.disabledAccount?null:n.disabledAccount.accountNumber))),t.xp6(1),t.ekj("bb-dropdown-multi-select--disabled",e.accountNumber===(null==n.disabledAccount?null:n.disabledAccount.accountNumber)),t.Q6J("title",e.name)("amount",e.balance)("productNumber",e.accountNumber)("currency",e.currency)("highlight",null==n.options?null:n.options.highlight)("active",!1)("productNumberFormat",(null==n.options?null:n.options.productNumberFormat)||n.accountFormat)("showCurrencySymbol",!1!==(null==n.options?null:n.options.showCurrencySymbol))("balanceLabel",null==e?null:e.balanceLabel)}}function Jo(o,i){if(1&o&&(t.ynx(0),t.YNc(1,wo,2,16,"button",27),t.BQk()),2&o){const e=i.$implicit,n=t.oxw(4);t.xp6(1),t.Q6J("ngIf",!n.disabledProductKinds.includes(e.productKindName))}}function Go(o,i){if(1&o&&(t.TgZ(0,"h4",32),t._UZ(1,"bb-icon-ui",33),t.TgZ(2,"span"),t._uU(3),t.qZA()()),2&o){const e=i.ngIf;t.xp6(3),t.Oqu(e)}}function Zo(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(5).selectItem(a)}),t._UZ(1,"bb-product-item-basic-account-ui",34),t.qZA()}if(2&o){const e=i.$implicit,n=t.oxw(5);t.Q6J("disabled",e.accountNumber===(null==n.disabledAccount?null:n.disabledAccount.accountNumber))("ngClass",t.WLB(10,Qt,e.id===(null==n.selectedAccount?null:n.selectedAccount.id),e.accountNumber===(null==n.disabledAccount?null:n.disabledAccount.accountNumber))),t.xp6(1),t.ekj("bb-dropdown-multi-select--disabled",e.accountNumber===(null==n.disabledAccount?null:n.disabledAccount.accountNumber)),t.Q6J("title",e.name)("productNumber",e.accountNumber)("highlight",null==n.options?null:n.options.highlight)("active",!1)("productNumberFormat",(null==n.options?null:n.options.productNumberFormat)||n.accountFormat)("showCurrencySymbol",!1!==(null==n.options?null:n.options.showCurrencySymbol))}}function Yo(o,i){if(1&o&&(t.ynx(0),t.YNc(1,Go,4,1,"h4",30),t.YNc(2,Zo,2,13,"button",31),t.BQk()),2&o){const e=t.oxw(2).ngIf,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.external?null:e.external.length)&&(null==n.options?null:n.options.connectedAccountsSubHeader)),t.xp6(1),t.Q6J("ngForOf",e.external)}}function Qo(o,i){if(1&o&&(t.ynx(0),t.YNc(1,Jo,2,1,"ng-container",26),t.YNc(2,Yo,3,2,"ng-container",9),t.BQk()),2&o){const e=t.oxw().ngIf,n=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.internal),t.xp6(1),t.Q6J("ngIf",(null==n.disabledAccount?null:n.disabledAccount.productKindName)!==n.productKinds.connectedAccounts)}}function Wo(o,i){if(1&o&&(t.ynx(0),t.YNc(1,Qo,3,2,"ng-container",7),t.BQk()),2&o){const e=i.ngIf;t.oxw();const n=t.MAs(10);t.xp6(1),t.Q6J("ngIf",(null==e.internal?null:e.internal.length)||(null==e.external?null:e.external.length))("ngIfElse",n)}}function Ko(o,i){1&o&&t._UZ(0,"bb-empty-state-ui",35),2&o&&t.Q6J("showIcon",!1)}const $o=function(o,i){return{internal:o,external:i}};function Ho(o,i){if(1&o&&(t.TgZ(0,"bb-product-selector-ui",16,17),t.ynx(2,18),t.YNc(3,Uo,2,1,"div",19),t.YNc(4,ko,3,1,"div",20),t.BQk(),t.ynx(5,21),t.YNc(6,Wo,2,2,"ng-container",9),t.ALo(7,"async"),t.ALo(8,"async"),t.YNc(9,Ko,1,1,"ng-template",null,22,t.W1O),t.BQk(),t.qZA()),2&o){const e=t.oxw();t.ekj("bb-product-selector--invalid-border",e.control.touched&&e.group.invalid&&!e.isDropdownOpen),t.Q6J("autoClose",!0),t.xp6(3),t.Q6J("ngIf",e.selectedAccount),t.xp6(1),t.Q6J("ngIf",!e.selectedAccount),t.xp6(2),t.Q6J("ngIf",t.WLB(10,$o,t.lcZ(7,6,null==e.options?null:e.options.items$),t.lcZ(8,8,e.connectedAccounts$)))}}function Vo(o,i){if(1&o&&(t.TgZ(0,"label"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.uIk("for","bb-compact-amount-"+e.id),t.xp6(1),t.Oqu(null==e.options?null:e.options.label)}}function qo(o,i){if(1&o&&(t.TgZ(0,"section",1),t.YNc(1,Vo,2,2,"label",2),t.TgZ(2,"div",3),t._UZ(3,"bb-amount-input-ui",4),t.ALo(4,"async"),t.qZA(),t._UZ(5,"bb-payord-validation-message",5),t.qZA()),2&o){const e=t.oxw();let n,s;t.ekj("was-validated",(null==(n=e.group.get(e.config.name))?null:n.invalid)&&(null==(n=e.group.get(e.config.name))?null:n.touched)),t.Q6J("formGroup",e.amountGroup)("ngClass",null==e.options?null:e.options.cssClasses),t.xp6(1),t.Q6J("ngIf",null==e.options?null:e.options.label),t.xp6(2),t.Q6J("id","bb-compact-amount-"+e.id)("formControlName",e.remittanceInfoFields.amount)("mapCurrency",!1!==(null==e.options?null:e.options.showCurrencySymbol))("currency",(null==(s=t.lcZ(4,19,e.fromAccountProduct$))?null:s.currency)||(null==e.options?null:e.options.currency))("placeholder",(null==e.options?null:e.options.placeholder)||"0.00")("required",!0)("wrapperClasses",e.options.wrapperClasses||"bb-amount-input__field--large")("autoDecimal",e.options.autoDecimal)("maxLength",null==e.options?null:e.options.maxLength)("aria-describedby","compact-amount-error-message-"+e.id),t.xp6(2),t.Q6J("id","compact-amount-error-message-"+e.id)("control",e.group.get(e.config.name))("validationMessages",null==e.options?null:e.options.validationMessages)("label",(null==e.options?null:e.options.label)||"Amount")}}function zo(o,i){1&o&&(t.ynx(0),t.SDv(1,10),t.BQk())}function jo(o,i){1&o&&(t.ynx(0),t.SDv(1,11),t.BQk())}function Xo(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCancel()}),t.SDv(1,13),t.ALo(2,"async"),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("disabled",t.lcZ(2,1,null==e.options?null:e.options.submitting$))}}function ti(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return null==s.options?null:s.options.reset()}),t.ALo(1,"async"),t.ynx(2),t.SDv(3,15),t.BQk(),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("disabled",t.lcZ(1,1,null==e.options?null:e.options.submitting$))}}function ei(o,i){1&o&&(t.ynx(0),t.SDv(1,16),t.BQk())}function ni(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",17)(1,"button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModal()}),t.SDv(2,19),t.qZA(),t.TgZ(3,"button",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().confirmModalClose$.next(!1)}),t.SDv(4,21),t.qZA()()}}const oi=function(o){return{"bb-button-bar--reverse":o}};function ii(o,i){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw(3);t.xp6(1),t.Oqu(null==e.options?null:e.options.label)}}function li(o,i){1&o&&(t.ynx(0),t.SDv(1,6),t.BQk())}function si(o,i){1&o&&(t.TgZ(0,"span",8),t.SDv(1,9),t.qZA())}function ai(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"date"),t.YNc(4,si,2,0,"span",7),t.qZA(),t.BQk()),2&o){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.xi3(3,2,null==e.group||null==e.group.value?null:e.group.value.startDate,e.dateFormat)," "),t.xp6(2),t.Q6J("ngIf",e.isToday(null==e.group||null==e.group.value?null:e.group.value.startDate))}}function ri(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2," - "),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.BQk()),2&o){const e=t.oxw(4);t.xp6(4),t.hij(" ",t.xi3(5,1,null==e.group||null==e.group.value?null:e.group.value.endDate,e.dateFormat),"")}}function ci(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2,", "),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"span"),t.SDv(6,11),t.qZA(),t.BQk()),2&o){const e=t.oxw(4);t.xp6(4),t.hij(" ",null==e.group||null==e.group.value?null:e.group.value.repeat," ")}}function ui(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"span",3),t._uU(2,","),t.qZA(),t.TgZ(3,"span"),t.SDv(4,10),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"date"),t.qZA(),t.YNc(8,ri,6,4,"ng-container",2),t.YNc(9,ci,7,1,"ng-container",2),t.BQk()),2&o){const e=t.oxw(3);t.xp6(6),t.Oqu(t.xi3(7,3,null==e.group||null==e.group.value?null:e.group.value.startDate,e.dateFormat)),t.xp6(2),t.Q6J("ngIf",(null==e.group||null==e.group.value?null:e.group.value.endType)===e.endType.ON&&(null==e.group||null==e.group.value?null:e.group.value.endDate)),t.xp6(1),t.Q6J("ngIf",(null==e.group||null==e.group.value?null:e.group.value.endType)===e.endType.AFTER&&(null==e.group||null==e.group.value?null:e.group.value.repeat))}}function _i(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"span"),t.YNc(2,ii,2,1,"ng-container",2),t.YNc(3,li,2,0,"ng-container",2),t.qZA(),t.TgZ(4,"span",4)(5,"span"),t._uU(6," - "),t.qZA(),t.TgZ(7,"span"),t.SDv(8,5),t.qZA(),t.YNc(9,ai,5,5,"ng-container",2),t.YNc(10,ui,10,6,"ng-container",2),t.qZA(),t.BQk()),2&o){const e=i.ngIf,n=t.oxw(2);t.xp6(2),t.Q6J("ngIf",null==n.options?null:n.options.label),t.xp6(1),t.Q6J("ngIf",!(null!=n.options&&n.options.label)),t.xp6(5),t.pQV(e),t.QtT(8),t.xp6(1),t.Q6J("ngIf",e===n.frequencies.ONCE),t.xp6(1),t.Q6J("ngIf",e!==n.frequencies.ONCE)}}function pi(o,i){if(1&o&&(t.TgZ(0,"div",1),t.YNc(1,_i,11,5,"ng-container",2),t._UZ(2,"hr",3),t.qZA()),2&o){const e=t.oxw();t.Q6J("ngClass",null==e.options?null:e.options.cssClasses),t.xp6(1),t.Q6J("ngIf",(null==e.group||null==e.group.value||null==e.group.value.frequency?null:e.group.value.frequency.value)||(null==e.group||null==e.group.value?null:e.group.value.frequency))}}function di(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",1)(1,"bb-select-country-dropdown",2),t.NdJ("selectCountry",function(s){return t.CHM(e),t.oxw().selectItem(s)}),t.qZA(),t._UZ(2,"bb-payord-validation-message",3)(3,"div",4,5),t.qZA()}if(2&o){const e=t.oxw();let n;t.Q6J("formGroup",e.group)("ngClass",null==e.options?null:e.options.cssClasses),t.xp6(1),t.Q6J("formControlName",null==e.config?null:e.config.name)("countries",e.countries)("label",null==e.options?null:e.options.label)("helperText",null==e.options?null:e.options.helperText)("placeholder",null==e.options?null:e.options.placeholder)("searchPlaceholder",null==e.options?null:e.options.searchPlaceholder)("dropdownIcon",null==e.options?null:e.options.dropdownIcon)("selectedCountry",e.control.value)("isClosedPayment",(null==(n=e.parentForm.get("isClosedPayment"))?null:n.value)||(null==e.counterpartyIdControl?null:e.counterpartyIdControl.value)),t.xp6(1),t.Q6J("control",null==e.group?null:e.group.controls[e.config.name])("validationMessages",null==e.options?null:e.options.validationMessages)("label",null==e.options?null:e.options.label),t.xp6(1),t.Q6J("hidden",!(null!=e.options&&e.options.description))("textContent",(null==e.options?null:e.options.description)||""),t.uIk("aria-hidden",!(null!=e.options&&e.options.description))}}function mi(o,i){if(1&o&&t._UZ(0,"span",12),2&o){t.oxw();const e=t.MAs(4),n=t.oxw(3);t.Q6J("id",(null==e?null:e.id)+"__desc")("textContent",null==n.options?null:n.options.helperText)}}const gi=function(o,i){return{option:o,isDescriptionVisible:i}};function fi(o,i){if(1&o&&t._UZ(0,"bb-input-radio-ui",13),2&o){const e=i.$implicit,n=t.oxw(4),s=t.MAs(3);t.Q6J("value",e)("labelTemplate",s)("labelTemplateContext",t.WLB(4,gi,e,e===n.group.value[n.config.name])),t.uIk("data-role",e)}}const bi=function(o,i){return{charge_bearer__error:o,charge_bearer__desc:i}};function hi(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",3),t._UZ(1,"div",4),t.YNc(2,mi,1,2,"span",5),t.TgZ(3,"bb-input-radio-group-ui",6,7),t.NdJ("change",function(){return t.CHM(e),t.oxw(3).toggleDependants()}),t.YNc(5,fi,1,7,"bb-input-radio-ui",8),t.qZA(),t._UZ(6,"bb-payord-validation-message",9)(7,"div",10,11),t.qZA()}if(2&o){const e=t.oxw(2).ngIf,n=t.oxw();t.Q6J("formGroup",n.group)("ngClass",null==n.options?null:n.options.cssClasses),t.xp6(1),t.Q6J("textContent",(null==n.options?null:n.options.label)||""),t.xp6(1),t.Q6J("ngIf",null==n.options?null:n.options.helperText),t.xp6(1),t.Q6J("label",null==n.options?null:n.options.label)("formControlName",null==n.config?null:n.config.name)("horizontal",null==n.options?null:n.options.horizontal)("preselect",null==n.options?null:n.options.preselect)("bbDynamicAriaAttribute",t.WLB(19,bi,(null==n.control?null:n.control.touched)&&(null==n.control?null:n.control.invalid),null==n.options?null:n.options.description))("prependInputId",!1),t.xp6(2),t.Q6J("ngForOf",e),t.xp6(1),t.Q6J("control",null==n.group?null:n.group.controls[n.config.name])("validationMessages",null==n.options?null:n.options.validationMessages)("label",null==n.options?null:n.options.label)("id","charge_bearer__error"),t.xp6(1),t.Q6J("hidden",!(null!=n.options&&n.options.description))("id","charge_bearer__desc")("textContent",(null==n.options?null:n.options.description)||""),t.uIk("aria-hidden",!(null!=n.options&&n.options.description))}}function yi(o,i){if(1&o&&(t.ynx(0),t.YNc(1,hi,9,22,"div",2),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!(null!=e.config&&e.config.hidden))}}function Ci(o,i){if(1&o&&(t.ynx(0),t.YNc(1,yi,2,1,"ng-container",0),t.BQk()),2&o){const e=i.ngIf;t.xp6(1),t.Q6J("ngIf",e.length)}}function Ai(o,i){1&o&&(t.TgZ(0,"div",19),t.SDv(1,20),t.qZA())}function vi(o,i){1&o&&(t.TgZ(0,"div",21),t.SDv(1,22),t.qZA())}function Si(o,i){1&o&&(t.TgZ(0,"div",23),t.SDv(1,24),t.qZA())}function Ei(o,i){if(1&o&&(t.ynx(0)(1,15),t.YNc(2,Ai,2,0,"div",16),t.YNc(3,vi,2,0,"div",17),t.YNc(4,Si,2,0,"div",18),t.BQk()()),2&o){const e=t.oxw().labelTemplateContext,n=t.oxw();t.xp6(1),t.Q6J("ngSwitch",e.option),t.xp6(1),t.Q6J("ngSwitchCase",n.chargeBearerOptions.OUR),t.xp6(1),t.Q6J("ngSwitchCase",n.chargeBearerOptions.BEN),t.xp6(1),t.Q6J("ngSwitchCase",n.chargeBearerOptions.SHA)}}function Oi(o,i){if(1&o&&(t.TgZ(0,"bb-charge-bearer-label",14),t.YNc(1,Ei,5,4,"ng-container",0),t.qZA()),2&o){const e=i.labelTemplateContext;t.Q6J("option",e.option),t.xp6(1),t.Q6J("ngIf",e.isDescriptionVisible)}}const Mi=function(o,i,e){return[o,i,e]};function Ii(o,i){if(1&o&&t._UZ(0,"bb-input-radio-ui",11),2&o){const e=i.$implicit,n=i.index,s=t.oxw(3).ngIf;t.oxw();const a=t.MAs(5),r=t.MAs(3);t.hYB("aria-labelledby","payord-amount-options-amount-",n," payord-amount-options-label-",n,""),t.MGl("aria-describedby","payord-amount-options-description-",n,""),t.Q6J("labelTemplate",e.hasCustomAmountInput?a:r)("labelTemplateContext",t.kEZ(6,Mi,e,s,n))("value",n)}}function xi(o,i){if(1&o&&(t.TgZ(0,"div",7),t._UZ(1,"bb-payord-validation-message",8),t.TgZ(2,"bb-input-radio-group-ui",9),t.YNc(3,Ii,1,10,"bb-input-radio-ui",10),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("control",e.group.get(e.config.name))("validationMessages",null==e.options?null:e.options.validationMessages),t.xp6(1),t.Q6J("formControlName",e.config.name)("aria-describedby","amount-option-error-message")("preselect",null==e.options?null:e.options.preselect)("horizontal",null==e.options?null:e.options.horizontal),t.xp6(1),t.Q6J("ngForOf",e.amountOptions)}}function Bi(o,i){if(1&o&&(t.TgZ(0,"div",12),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",null==e.options?null:e.options.noBalanceText," ")}}function Di(o,i){if(1&o&&(t.TgZ(0,"fieldset",4),t.YNc(1,xi,4,7,"div",5),t.YNc(2,Bi,2,1,"ng-template",null,6,t.W1O),t.qZA()),2&o){const e=t.MAs(3),n=t.oxw().ngIf,s=t.oxw();t.Q6J("ngClass",null==s.options?null:s.options.cssClasses)("formGroup",s.group),t.xp6(1),t.Q6J("ngIf",!(null!=s.options&&s.options.noBalanceText&&s.isAmountOptionsZero(n)))("ngIfElse",e)}}function Ti(o,i){if(1&o&&(t.ynx(0),t.YNc(1,Di,4,4,"fieldset",3),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!(null!=e.config&&e.config.hidden))}}function Pi(o,i){if(1&o&&(t.TgZ(0,"div")(1,"span",17),t._uU(2),t.qZA()()),2&o){const e=t.oxw().labelTemplateContext;t.xp6(1),t.Q2q("id","payord-amount-options-description-",e[2],""),t.xp6(1),t.hij(" ",e[0].description," ")}}function Ni(o,i){if(1&o&&(t.TgZ(0,"div",13)(1,"div",14)(2,"div"),t._uU(3),t.qZA(),t.YNc(4,Pi,3,2,"div",0),t.qZA(),t.TgZ(5,"div",15),t._UZ(6,"bb-amount-ui",16),t.qZA()()),2&o){const e=i.labelTemplateContext,n=t.oxw();t.Q6J("ngClass",null==n.options||null==n.options.amountOptions?null:n.options.amountOptions.cssClasses),t.xp6(2),t.Q2q("id","payord-amount-options-label-",e[2],""),t.xp6(1),t.hij(" ",e[0].label," "),t.xp6(1),t.Q6J("ngIf",e[0].description),t.xp6(2),t.Q2q("id","payord-amount-options-amount-",e[2],""),t.Q6J("amount",e[1].defaultRecord[e[0].amountApiField])("currency",e[1].currency)("mapCurrency",!1!==(null==n.options?null:n.options.mapCurrency))("bbHighlight",null==n.options?null:n.options.highlight)("abbreviate",null==n.options?null:n.options.abbreviate)("showPlusSign",null==n.options?null:n.options.showPlusSign)("trailingZeroes",!1!==(null==n.options?null:n.options.trailingZeroes))}}function Fi(o,i){if(1&o&&(t.TgZ(0,"div",20)(1,"span",17),t._uU(2),t.qZA()()),2&o){const e=t.oxw().labelTemplateContext;t.xp6(2),t.hij(" ",e[0].description," ")}}function Ri(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",21)(2,"bb-amount-input-ui",22),t.NdJ("focusout",function(){return t.CHM(e),t.oxw(2).touched=!0}),t.qZA()(),t._UZ(3,"bb-payord-validation-message",23),t.BQk()}if(2&o){const e=t.oxw().labelTemplateContext,n=t.oxw();t.xp6(1),t.Q6J("formGroup",n.group.controls[n.remittanceInfoFields.amountCurrencyGroup]),t.xp6(1),t.Q6J("formControlName",n.remittanceInfoFields.amount)("mapCurrency",!1!==(null==n.options?null:n.options.showCurrencySymbol))("wrapperClasses",n.options.wrapperClasses||"bb-amount-input__field--large")("currency",e[1].currency)("required",!0)("autoDecimal",n.options.autoDecimal)("aria-describedby","compact-amount-error-message")("placeholder",(null==n.options?null:n.options.placeholder)||"0.00")("maxLength",null==n.options?null:n.options.maxLength),t.xp6(1),t.Q6J("id","compact-amount-error-message")("control",n.group.controls[n.remittanceInfoFields.amountCurrencyGroup])("validationMessages",null==n.options?null:n.options.validationMessages)}}function Li(o,i){if(1&o&&(t.TgZ(0,"div",18)(1,"div"),t._uU(2),t.qZA(),t.YNc(3,Fi,3,1,"div",19),t.YNc(4,Ri,4,13,"ng-container",0),t.qZA()),2&o){const e=i.labelTemplateContext,n=t.oxw();t.ekj("was-validated",n.touched&&n.group.controls[n.remittanceInfoFields.amountCurrencyGroup].invalid),t.Q6J("ngClass",null==n.options||null==n.options.amountOptions?null:n.options.amountOptions.cssClasses),t.xp6(2),t.Oqu(e[0].label),t.xp6(1),t.Q6J("ngIf",e[0].description),t.xp6(1),t.Q6J("ngIf",(null==n.group.controls[n.config.name]?null:n.group.controls[n.config.name].value)===e[2])}}function Ui(o,i){if(1&o&&(t.TgZ(0,"span",6),t._uU(1),t.qZA()),2&o){const e=i.ngIf;t.xp6(1),t.hij(" \xa0- ",e," ")}}function ki(o,i){1&o&&t._UZ(0,"hr",7)}function wi(o,i){if(1&o&&(t.TgZ(0,"div",1)(1,"div",2),t._UZ(2,"bb-header-ui",3),t.YNc(3,Ui,2,1,"span",4),t.ALo(4,"async"),t.qZA(),t.YNc(5,ki,1,0,"hr",5),t.qZA()),2&o){const e=t.oxw();t.Q6J("ngClass",null==e.options?null:e.options.cssClasses),t.xp6(2),t.Q6J("headingType",e.options.headingType)("heading",e.options.heading)("headingClasses",null==e.options?null:e.options.headingClasses),t.xp6(1),t.Q6J("ngIf",t.lcZ(4,6,e.headerAddition$)),t.xp6(2),t.Q6J("ngIf",null==e.options?null:e.options.separatorLine)}}function Ji(o,i){if(1&o&&t._UZ(0,"span",12),2&o){t.oxw();const e=t.MAs(4),n=t.oxw(2);t.Q6J("id",(null==e?null:e.id)+"__desc")("textContent",null==n.options?null:n.options.helperText)}}function Gi(o,i){if(1&o&&(t.ynx(0),t._UZ(1,"label",6),t.YNc(2,Ji,1,2,"span",7),t._UZ(3,"bb-input-text-ui",8,9)(5,"div",10,11),t.BQk()),2&o){const e=t.MAs(4),n=t.MAs(6),s=t.oxw(2);t.xp6(1),t.Q6J("id",(null==e?null:e.id)+"__label")("for",null==e?null:e.id)("textContent",(null==s.options?null:s.options.label)||""),t.xp6(1),t.Q6J("ngIf",(null==s.options?null:s.options.isOptional)&&(null==s.options?null:s.options.helperText)),t.xp6(1),t.Q6J("formControlName",s.config.name)("minLength",null==s.options?null:s.options.minLength)("maxLength",null==s.options?null:s.options.maxLength)("showCharCounter",null==s.options?null:s.options.showCharCounter)("placeholder",(null==s.options?null:s.options.placeholder)||"")("autocomplete",null==s.options?null:s.options.autoComplete)("aria-describedby",null==n?null:n.id),t.uIk("disabled",null==s.options?null:s.options.disabled)("id",null==s.options?null:s.options.id)("autofocus",null==s.options?null:s.options.autofocus)("readonly",null==s.options?null:s.options.readonly),t.xp6(2),t.Q6J("hidden",!(null!=s.options&&s.options.description))("id",(null==e?null:e.id)+"__desc")("textContent",(null==s.options?null:s.options.description)||""),t.uIk("aria-hidden",!(null!=s.options&&s.options.description))}}function Zi(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"bb-select-purpose-dropdown",13),t.NdJ("selectPurpose",function(s){return t.CHM(e),t.oxw(2).selectPurpose(s)}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("formControlName",null==e.config?null:e.config.name)("label",null==e.options?null:e.options.label)("purposes",null==e.options?null:e.options.purposes)("isOptional",null==e.options?null:e.options.isOptional)("helperText",null==e.options?null:e.options.helperText)("placeholder",null==e.options?null:e.options.placeholder)("searchPlaceholder",null==e.options?null:e.options.searchPlaceholder)("dropdownIcon",null==e.options?null:e.options.dropdownIcon)("selectedPurpose",e.control.value)}}function Yi(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"div",2)(2,"div",3),t.YNc(3,Gi,7,19,"ng-container",4),t.YNc(4,Zi,2,9,"ng-container",4),t._UZ(5,"bb-payord-validation-message",5),t.qZA()(),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.group)("ngClass",null==e.options?null:e.options.cssClasses),t.xp6(1),t.Q6J("hidden",null==e.config?null:e.config.hidden),t.uIk("aria-hidden",null==e.config?null:e.config.hidden),t.xp6(1),t.Q6J("ngIf",!(null!=e.options&&e.options.purposes&&null!=e.options&&e.options.purposes.length)),t.xp6(1),t.Q6J("ngIf",null==e.options||null==e.options.purposes?null:e.options.purposes.length),t.xp6(1),t.Q6J("control",null==e.group?null:e.group.controls[e.config.name])("validationMessages",null==e.options?null:e.options.validationMessages)("label",null==e.options?null:e.options.label)}}function Qi(o,i){if(1&o&&t._UZ(0,"bb-icon-ui",18),2&o){const e=t.oxw(2);t.Q6J("name",(null==e.options||null==e.options.collapseOptions?null:e.options.collapseOptions.icon)||"add")("size",null==e.options||null==e.options.collapseOptions?null:e.options.collapseOptions.iconSize)}}function Wi(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"span",14)(1,"button",15),t.NdJ("click",function(){return t.CHM(e),t.oxw().expand()}),t.YNc(2,Qi,1,2,"bb-icon-ui",16),t.TgZ(3,"span",17),t._uU(4),t.qZA()(),t._UZ(5,"bb-payord-validation-message",5),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("hidden",null==e.config?null:e.config.hidden),t.uIk("aria-hidden",null==e.config?null:e.config.hidden),t.xp6(1),t.Q6J("color",(null==e.options||null==e.options.collapseOptions?null:e.options.collapseOptions.btnColor)||"link")("buttonSize",null==e.options||null==e.options.collapseOptions?null:e.options.collapseOptions.btnSize),t.xp6(1),t.Q6J("ngIf",!(null!=e.options&&null!=e.options.collapseOptions&&e.options.collapseOptions.hideIcon)),t.xp6(2),t.hij(" ",(null==e.options||null==e.options.collapseOptions?null:e.options.collapseOptions.label)||(null==e.options?null:e.options.label)," "),t.xp6(1),t.Q6J("control",null==e.group?null:e.group.controls[e.config.name])("validationMessages",null==e.options?null:e.options.validationMessages)("label",null==e.options?null:e.options.label)}}function Ki(o,i){if(1&o&&(t.TgZ(0,"bb-alert-ui",3)(1,"p",4),t._uU(2),t.qZA()()),2&o){const e=t.oxw(2);t.Q6J("title",null==e.options?null:e.options.title)("modifier",null==e.options?null:e.options.modifier)("dismissible",null==e.options?null:e.options.dismissible),t.xp6(2),t.Oqu(null==e.options?null:e.options.description)}}function $i(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"div",1),t.YNc(2,Ki,3,4,"bb-alert-ui",2),t.qZA(),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngClass",null==e.options?null:e.options.cssClasses),t.xp6(1),t.Q6J("ngIf",(null==e.options?null:e.options.title)&&(null==e.options?null:e.options.modifier))}}function Hi(o,i){if(1&o&&(t.TgZ(0,"label",11),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.uIk("for","bb-payord-schedule-switch-"+e.id),t.xp6(1),t.Oqu(null==e.options?null:e.options.label)}}function Vi(o,i){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(null==e.options?null:e.options.description)}}function qi(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"bb-switch-ui",4),t.qZA(),t.TgZ(5,"div")(6,"div",5),t.YNc(7,Hi,2,2,"label",6),t.TgZ(8,"span",7),t._UZ(9,"bb-icon-ui",8),t.qZA()(),t.TgZ(10,"div",9),t.YNc(11,Vi,2,1,"span",0),t.qZA()()(),t._UZ(12,"bb-payord-validation-message",10),t.qZA(),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.group)("ngClass",null==e.options?null:e.options.cssClasses),t.xp6(3),t.Q6J("id","bb-payord-schedule-switch-"+e.id)("formControlName",e.config.name),t.xp6(3),t.Q6J("ngIf",null==e.options?null:e.options.label),t.xp6(1),t.Q6J("bbTooltip",null==e.options?null:e.options.tooltipMessage)("triggers","hover"),t.xp6(3),t.Q6J("ngIf",(null==e.options?null:e.options.description)&&(null==e.group.controls[e.config.name]?null:e.group.controls[e.config.name].value)),t.xp6(1),t.Q6J("control",null==e.group?null:e.group.controls[e.config.name])("validationMessages",null==e.options?null:e.options.validationMessages)("label",null==e.options?null:e.options.label)}}function zi(o,i){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(null==e.options?null:e.options.label)}}function ji(o,i){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" - ",null==e.group||null==e.group.value?null:e.group.value.beneficiaryAccountName," ")}}function Xi(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.YNc(3,ji,2,1,"span",3),t.BQk()),2&o){const e=t.oxw(2);t.xp6(2),t.AsE("",null==e.options?null:e.options.label,": ",null==e.group||null==e.group.value?null:e.group.value.name,""),t.xp6(1),t.Q6J("ngIf",(null==e.group||null==e.group.value||null==e.group.value.selectedContact?null:e.group.value.selectedContact.contactId)&&(null==e.group||null==e.group.value?null:e.group.value.beneficiaryAccountName))}}function tl(o,i){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Oqu(null==e.options||null==e.options.clearOptions?null:e.options.clearOptions.label)}}function el(o,i){1&o&&(t.TgZ(0,"span"),t.SDv(1,7),t.qZA())}function nl(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",5),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).onClearValues()}),t._UZ(1,"bb-icon-ui",6),t.YNc(2,tl,2,1,"span",3),t.YNc(3,el,2,0,"span",3),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("name",(null==e.options||null==e.options.clearOptions?null:e.options.clearOptions.icon)||e.iconName),t.xp6(1),t.Q6J("ngIf",null==e.options||null==e.options.clearOptions?null:e.options.clearOptions.label),t.xp6(1),t.Q6J("ngIf",!(null!=e.options&&null!=e.options.clearOptions&&e.options.clearOptions.label))}}function ol(o,i){if(1&o&&(t.TgZ(0,"div",1)(1,"legend",2),t.YNc(2,zi,2,1,"ng-container",3),t.YNc(3,Xi,4,3,"ng-container",3),t.qZA(),t.YNc(4,nl,4,3,"button",4),t.qZA()),2&o){const e=t.oxw();t.Q6J("ngClass",null==e.options?null:e.options.cssClasses),t.xp6(2),t.Q6J("ngIf",!(null!=e.group&&null!=e.group.value&&e.group.value.name)),t.xp6(1),t.Q6J("ngIf",(null==e.group||null==e.group.value?null:e.group.value.name)&&(null==e.options?null:e.options.hasDynamicTitle)),t.xp6(1),t.Q6J("ngIf",e.showClearBtn())}}const il=["dd"];function ll(o,i){if(1&o&&(t.TgZ(0,"label",17),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.Q6J("for","payord-contact-selector-search-box"),t.xp6(1),t.hij("",null==e.options?null:e.options.label," ")}}function sl(o,i){if(1&o&&t._UZ(0,"span",18),2&o){const e=t.oxw(2);t.Q6J("textContent",null==e.options?null:e.options.helperText),t.uIk("id","payord-contact-selector__helper-text")}}function al(o,i){1&o&&t.GkF(0)}function rl(o,i){if(1&o&&(t.ynx(0),t.YNc(1,al,1,0,"ng-container",20),t.BQk()),2&o){const e=i.$implicit;t.oxw(4);const n=t.MAs(2);t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(2,X,e))}}function cl(o,i){if(1&o&&(t.ynx(0),t.YNc(1,rl,2,4,"ng-container",19),t.BQk()),2&o){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",e)}}function ul(o,i){if(1&o&&(t.ynx(0),t.YNc(1,cl,2,1,"ng-container",15),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.listState===e.listStateType.LIST)}}function _l(o,i){1&o&&t.GkF(0)}function pl(o,i){if(1&o&&(t.ynx(0),t.YNc(1,_l,1,0,"ng-container",21),t.BQk()),2&o){t.oxw(2);const e=t.MAs(6);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function dl(o,i){1&o&&t.GkF(0)}function ml(o,i){if(1&o&&(t.ynx(0),t.YNc(1,dl,1,0,"ng-container",21),t.BQk()),2&o){t.oxw(2);const e=t.MAs(4);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function gl(o,i){1&o&&t.GkF(0)}function fl(o,i){if(1&o&&(t.ynx(0),t.YNc(1,gl,1,0,"ng-container",21),t.BQk()),2&o){t.oxw(2);const e=t.MAs(8);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function bl(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",5),t.YNc(1,ll,2,2,"label",6),t.TgZ(2,"div",7,8),t.YNc(4,sl,1,2,"span",9),t.TgZ(5,"bb-search-box-ui",10),t.NdJ("clear",function(){return t.CHM(e),t.oxw().onClear()})("focus",function(){return t.CHM(e),t.oxw().focusHandler()})("blur",function(){return t.CHM(e),t.oxw().onBlur()})("ngModelChange",function(){t.CHM(e);const s=t.oxw();return s.handleSearch(s.group.controls[s.config.name].value)}),t.TgZ(6,"button",11),t._UZ(7,"bb-icon-ui",12),t.qZA()(),t.TgZ(8,"div",13)(9,"div",14),t.YNc(10,ul,2,1,"ng-container",15),t.ALo(11,"async"),t.YNc(12,pl,2,1,"ng-container",15),t.YNc(13,ml,2,1,"ng-container",15),t.YNc(14,fl,2,1,"ng-container",15),t.qZA()(),t._UZ(15,"bb-payord-validation-message",16),t.qZA()()}if(2&o){const e=t.oxw();t.Q6J("ngClass",null==e.options?null:e.options.cssClasses),t.xp6(1),t.Q6J("ngIf",null==e.options?null:e.options.label),t.xp6(3),t.Q6J("ngIf",null==e.options?null:e.options.helperText),t.xp6(1),t.Q6J("formControl",e.group.controls[e.config.name])("placeholder",null==e.options?null:e.options.placeholder)("squareBorder",null==e.options?null:e.options.squareBorder)("autocomplete",(null==e.options?null:e.options.autocomplete)||"off")("showClear",!0)("id","payord-contact-selector-search-box"),t.uIk("data-role","contact-selector-search-box"),t.xp6(1),t.uIk("aria-label","contact dropdown button"),t.xp6(4),t.Q6J("ngIf",t.lcZ(11,18,e.contacts$)),t.xp6(2),t.Q6J("ngIf",e.listState===e.listStateType.ERROR),t.xp6(1),t.Q6J("ngIf",e.listState===e.listStateType.EMPTY),t.xp6(1),t.Q6J("ngIf",e.listState===e.listStateType.LOADING),t.xp6(1),t.Q6J("control",null==e.group?null:e.group.controls[e.config.name])("validationMessages",null==e.options?null:e.options.validationMessages)("label",(null==e.options?null:e.options.label)||"Beneficiary name")}}function hl(o,i){if(1&o&&(t.TgZ(0,"div",35),t._uU(1),t.qZA()),2&o){const e=t.oxw().ngIf;t.xp6(1),t.hij(" ",e.value," ")}}function yl(o,i){if(1&o&&(t.TgZ(0,"div",28)(1,"span",29),t.SDv(2,30),t.qZA(),t.TgZ(3,"div",31),t._uU(4),t.qZA(),t.TgZ(5,"span",32),t.SDv(6,33),t.qZA(),t.YNc(7,hl,2,1,"div",34),t.qZA()),2&o){const e=i.ngIf,n=t.oxw().$implicit;t.xp6(4),t.hij(" ",null==n?null:n.name," "),t.xp6(2),t.pQV(e.scheme),t.QtT(6),t.xp6(1),t.Q6J("ngIf",null==n||null==n.accounts[0]?null:n.accounts[0].accountNumber)}}function Cl(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(s){const r=t.CHM(e).$implicit;return t.oxw().onSelectContact(s,r)}),t.TgZ(1,"div",23)(2,"span",24),t.SDv(3,25),t.qZA(),t._UZ(4,"bb-icon-ui",26),t.qZA(),t.YNc(5,yl,8,3,"div",27),t.qZA()}if(2&o){const e=i.$implicit;t.xp6(5),t.Q6J("ngIf",null==e?null:e.transferKey)}}function Al(o,i){if(1&o&&t._UZ(0,"bb-empty-state-ui",36),2&o){const e=t.oxw();t.Q6J("title",(null==e.options?null:e.options.emptyStateTitle)||e.defaultEmptyStateTitle)("subtitle",(null==e.options?null:e.options.emptyStateSubtitle)||e.defaultEmptyStateSubtitle)}}function vl(o,i){if(1&o&&t._UZ(0,"bb-empty-state-ui",37),2&o){const e=t.oxw();t.Q6J("title",(null==e.options?null:e.options.errorStateTitle)||e.defaultErrorStateTitle)("subtitle",(null==e.options?null:e.options.errorStateSubtitle)||e.defaultErrorStateSubtitle)}}function Sl(o,i){1&o&&(t.TgZ(0,"div",38),t._UZ(1,"bb-loading-indicator-ui",39),t.qZA())}function El(o,i){1&o&&t.GkF(0)}function Ol(o,i){if(1&o&&(t.TgZ(0,"div",6),t.YNc(1,El,1,0,"ng-container",7),t.qZA()),2&o){const e=t.oxw(2),n=t.MAs(2);t.Q6J("ngClass",null==e.config?null:e.config.cssClasses),t.xp6(1),t.Q6J("ngTemplateOutlet",n)}}function Ml(o,i){if(1&o&&(t.ynx(0),t.YNc(1,Ol,2,2,"div",5),t.BQk()),2&o){const e=t.oxw(),n=t.MAs(2);t.xp6(1),t.Q6J("ngIf",null==e.config||null==e.config.cssClasses?null:e.config.cssClasses.length)("ngIfElse",n)}}function Il(o,i){if(1&o&&(t.TgZ(0,"div",12),t._uU(1),t.qZA()),2&o){const e=t.oxw(4);t.xp6(1),t.hij(" ",null==e.config?null:e.config.subTitle," ")}}function xl(o,i){1&o&&t.GkF(0)}function Bl(o,i){if(1&o&&(t.TgZ(0,"bb-fieldset-ui",10),t.YNc(1,Il,2,1,"div",11),t.YNc(2,xl,1,0,"ng-container",7),t.qZA()),2&o){const e=t.oxw(3),n=t.MAs(8);t.Q6J("heading",null==e.config?null:e.config.title),t.xp6(1),t.Q6J("ngIf",e.config.subTitle),t.xp6(1),t.Q6J("ngTemplateOutlet",n)}}function Dl(o,i){if(1&o&&(t.ynx(0),t._UZ(1,"bb-separator",13),t.BQk()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("options",e.config.separator)}}function Tl(o,i){if(1&o&&(t.ynx(0),t.YNc(1,Bl,3,3,"bb-fieldset-ui",9),t.YNc(2,Dl,2,1,"ng-container",0),t.BQk()),2&o){const e=t.oxw(2),n=t.MAs(4);t.xp6(1),t.Q6J("ngIf",null==e.config?null:e.config.title)("ngIfElse",n),t.xp6(1),t.Q6J("ngIf",null==e.config?null:e.config.separator)}}function Pl(o,i){if(1&o&&t.YNc(0,Tl,3,3,"ng-container",8),2&o){const e=t.oxw(),n=t.MAs(6);t.Q6J("ngIf",!e.config.collapsible)("ngIfElse",n)}}function Nl(o,i){1&o&&t.GkF(0)}function Fl(o,i){if(1&o&&t.YNc(0,Nl,1,0,"ng-container",7),2&o){t.oxw();const e=t.MAs(8);t.Q6J("ngTemplateOutlet",e)}}function Rl(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",18),t.NdJ("click",function(){return t.CHM(e),t.oxw(),t.MAs(2).toggle()}),t.TgZ(1,"legend")(2,"span",19),t._uU(3),t.qZA()(),t.TgZ(4,"button",20),t.NdJ("click",function(s){return t.CHM(e),t.oxw(),t.MAs(2).toggle(),s.stopPropagation()}),t._UZ(5,"bb-icon-ui",21),t.qZA()(),t._UZ(6,"hr",22)}if(2&o){const e=i.isOpen,n=t.oxw(2);t.uIk("aria-expanded",e),t.xp6(3),t.Oqu(null==n.config?null:n.config.title),t.xp6(1),t.uIk("aria-label",null==n.config?null:n.config.title)("aria-expanded",e)("data-role","expand-button"),t.xp6(1),t.Q6J("name",e?"toggle-up":"toggle-down")}}function Ll(o,i){1&o&&t.GkF(0)}function Ul(o,i){if(1&o&&t.YNc(0,Ll,1,0,"ng-container",7),2&o){t.oxw(2);const e=t.MAs(8);t.Q6J("ngTemplateOutlet",e)}}function kl(o,i){1&o&&(t.TgZ(0,"fieldset",12)(1,"bb-collapsible-ui",14,15),t.YNc(3,Rl,7,6,"ng-template",16),t.YNc(4,Ul,1,1,"ng-template",17),t.qZA()())}function wl(o,i){1&o&&t.Hsn(0)}const Wt=["*"];function Jl(o,i){1&o&&t._UZ(0,"bb-icon-ui",11),2&o&&t.Q6J("name",i.ngIf)}function Gl(o,i){if(1&o&&(t.TgZ(0,"div",8),t.YNc(1,Jl,1,1,"bb-icon-ui",9),t.TgZ(2,"div",10),t._uU(3),t.qZA()()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.getIcon()),t.xp6(2),t.hij(" ",null==e.config?null:e.config.name," ")}}function Zl(o,i){1&o&&(t.ynx(0),t.TgZ(1,"span",16),t.SDv(2,17),t.qZA(),t.BQk())}function Yl(o,i){if(1&o&&(t.TgZ(0,"div",12),t._UZ(1,"bb-input-text-ui",13),t.TgZ(2,"bb-input-validation-message-ui",14),t.YNc(3,Zl,3,0,"ng-container",15),t.qZA()()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("formControl",e.templateNameControl)("maxLength",50)("showCharCounter",!0),t.xp6(1),t.Q6J("showErrors",e.templateNameControl.touched&&(null==e.templateNameControl?null:e.templateNameControl.invalid)),t.xp6(1),t.Q6J("ngIf",e.templateNameControl.errors&&e.templateNameControl.errors.required)}}function Ql(o,i){1&o&&t.GkF(0)}function Wl(o,i){if(1&o&&(t.ynx(0),t.YNc(1,Ql,1,0,"ng-container",18),t.BQk()),2&o){const e=i.$implicit;t.oxw();const n=t.MAs(8),s=t.MAs(10);t.xp6(1),t.Q6J("ngTemplateOutlet",e.fields?n:s)("ngTemplateOutletContext",t.VKq(2,X,e))}}function Kl(o,i){1&o&&t.GkF(0)}function $l(o,i){if(1&o&&(t.ynx(0),t.YNc(1,Kl,1,0,"ng-container",18),t.BQk()),2&o){const e=t.oxw(),n=t.MAs(10);t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(2,X,e.buttonGroupConfig))}}function Hl(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",19)(1,"bb-load-button-ui",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().onEditionSubmit()}),t.SDv(2,21),t.ALo(3,"async"),t.qZA(),t.TgZ(4,"button",22),t.NdJ("click",function(){return t.CHM(e),t.oxw().onEditionCancel()}),t.SDv(5,23),t.ALo(6,"async"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("isLoading",t.lcZ(3,2,e.isSubmittingShared$)),t.xp6(3),t.Q6J("disabled",t.lcZ(6,4,e.isSubmittingShared$))}}function Vl(o,i){1&o&&t.GkF(0)}function ql(o,i){if(1&o&&(t.ynx(0),t.YNc(1,Vl,1,0,"ng-container",18),t.BQk()),2&o){const e=i.$implicit;t.oxw(2);const n=t.MAs(8),s=t.MAs(10);t.xp6(1),t.Q6J("ngTemplateOutlet",e.fields?n:s)("ngTemplateOutletContext",t.VKq(2,X,e))}}function zl(o,i){if(1&o&&(t.TgZ(0,"bb-payord-group",24),t.YNc(1,ql,2,4,"ng-container",3),t.qZA()),2&o){const e=i.$implicit,n=t.oxw();t.Q6J("config",e)("group",n.getFormGroup(e)),t.xp6(1),t.Q6J("ngForOf",e.fields)}}function jl(o,i){if(1&o&&t.GkF(0,25),2&o){const e=i.$implicit,n=t.oxw();t.Q6J("config",e)("options",e.options)("group",n.getFormGroup(e))}}function Xl(o,i){1&o&&t.GkF(0)}function ts(o,i){if(1&o&&(t.ynx(0),t.YNc(1,Xl,1,0,"ng-container",8),t.BQk()),2&o){const e=i.$implicit;t.oxw();const n=t.MAs(12),s=t.MAs(14);t.xp6(1),t.Q6J("ngTemplateOutlet",e.fields?n:s)("ngTemplateOutletContext",t.VKq(2,X,e))}}function es(o,i){1&o&&t.GkF(0)}function ns(o,i){if(1&o&&(t.ynx(0),t.YNc(1,es,1,0,"ng-container",8),t.BQk()),2&o){const e=i.$implicit;t.oxw();const n=t.MAs(12),s=t.MAs(14);t.xp6(1),t.Q6J("ngTemplateOutlet",e.fields?n:s)("ngTemplateOutletContext",t.VKq(2,X,e))}}function os(o,i){1&o&&t.GkF(0)}function is(o,i){if(1&o&&(t.ynx(0),t.YNc(1,os,1,0,"ng-container",8),t.BQk()),2&o){const e=i.$implicit;t.oxw();const n=t.MAs(12),s=t.MAs(14);t.xp6(1),t.Q6J("ngTemplateOutlet",e.fields?n:s)("ngTemplateOutletContext",t.VKq(2,X,e))}}function ls(o,i){1&o&&(t.TgZ(0,"div",10),t._UZ(1,"bb-loading-indicator-ui",11),t.qZA()),2&o&&t.Udp("opacity",.8)}function ss(o,i){1&o&&t.GkF(0)}function as(o,i){if(1&o&&(t.ynx(0),t.YNc(1,ss,1,0,"ng-container",8),t.BQk()),2&o){const e=i.$implicit;t.oxw(2);const n=t.MAs(12),s=t.MAs(14);t.xp6(1),t.Q6J("ngTemplateOutlet",e.fields?n:s)("ngTemplateOutletContext",t.VKq(2,X,e))}}function rs(o,i){if(1&o&&(t.TgZ(0,"bb-payord-group",12),t.YNc(1,as,2,4,"ng-container",1),t.qZA()),2&o){const e=i.$implicit,n=t.oxw();t.Q6J("config",e)("group",n.getFormGroup(e)),t.xp6(1),t.Q6J("ngForOf",e.fields)}}function cs(o,i){if(1&o&&t.GkF(0,13),2&o){const e=i.$implicit,n=t.oxw();t.Q6J("config",e)("options",e.options)("group",n.getFormGroup(e))}}function us(o,i){1&o&&(t.TgZ(0,"div",14),t.SDv(1,15),t.qZA())}function _s(o,i){1&o&&t.GkF(0)}function ps(o,i){1&o&&t._UZ(0,"bb-loading-indicator-ui",16)}const Kt=o=>(0,l.Nu3)(o)?Object.entries(o).reduce((i,[e,n])=>{const s="string"==typeof n?"" + n + "":n;return Object.assign(Object.assign({},i),{[e]:s})},{}):o;function it(o=[],i){const e=[];return[...o.reduce((s,a)=>"string"==typeof a?(e.push(a),s):[...s,a],[]),{parent:i,items:e}]}function $t(o,i){const e=[l.IW3.accountNumber,`${l.IW3.creditorBank}.${l.IW3.bankBranchCode}`,`${l.IW3.creditorBank}.${l.IW3.bankName}`,`${l.IW3.creditorBank}.${l.IW3.bic}`];i?null==e||e.forEach(n=>{var s;return null===(s=o.get(n))||void 0===s?void 0:s.disable()}):null==e||e.forEach(n=>{var s;return null===(s=o.get(n))||void 0===s?void 0:s.enable()})}function b(o,i,e,n,s="",a){let r;return r=o.controls[i],o.addControl(i,new c.NI(s,e||[],n||[])),r?function vs(o,i,e,n){var s;const a=i?[...i]:[];!(null==n?void 0:n.hidden)&&(null===(s=null==n?void 0:n.options)||void 0===s?void 0:s.isConditionalMandatory)&&a.push(c.kI.required),o.markAsUntouched(),o.clearValidators(),o.clearAsyncValidators(),o.setAsyncValidators(e||[]),o.setValidators(a)}(r,e,n,a):(o.addControl(i,new c.NI(s,e||[],n||[])),r=o.controls[i]),r}const At=(o,i={})=>{let e;return o.reduce((n,s)=>(e=s.parent?`${s.parent}.${s.name}`:s.name,s.fields?n=Object.assign(Object.assign({},n),At(s.fields,n)):n[e]=s,n),i)};function vt(o,i,e,n,s){const a=o.get(i)||new c.cw({},n||[],s||[]);for(const r in e)e.hasOwnProperty(r)&&a.registerControl(r,new c.NI(e[r].shift(),e[r].shift()||[]));return o.addControl(i,a),o.get(i)}function _t(o){let i=o;for(;i&&i.parent;)i=i.parent;return i}function Nt({inputFormSetting:o,form:i,config:e}){var n,s;const a=i.get(l.x2z.counterparty),r=i.get(l.X7M.isClosedPayment),_=a.get(l.IW3.id),u=a.get(l.IW3.schemeName)||b(a,l.IW3.schemeName);if(o.apiField){const{control:d=null,fieldConfig:y=null}=function hs({formControlPath:o,form:i,config:e}){const s={"transferTransactionInformation.counterpartyAccount.identification.identification":{name:l.IW3.accountNumber,path:`${l.x2z.counterparty}.${l.IW3.accountNumber}`},"transferTransactionInformation.counterpartyBank.bankBranchCode":{name:l.IW3.bankBranchCode,path:`${l.x2z.counterparty}.${l.IW3.creditorBank}.${l.IW3.bankBranchCode}`},"transferTransactionInformation.instructedAmount.currencyCode":{name:l.IHR.amountCurrencyGroup,path:`${l.x2z.remittanceInfo}.${l.IHR.amountCurrencyGroup}`}}[o]||null;if(s)return{control:i.get(s.path),fieldConfig:(0,l.iEs)(s.name,e)}}({formControlPath:o.apiField,form:i,config:e})||{};let I=[];if(o.mandatory&&I.push("currency"===o.key?l.jQk:c.kI.required),o.regex&&I.push(Vt(o.regex)),"currency"===o.key&&o.values.length&&I.push((0,l.PRw)(o.values)),"account-number"===o.key&&(u.setValue(o.format),"IBAN"===o.format&&I.push((0,l.Pvc)())),d&&y){const K=o.label||{},St=K[Object.keys(K)[0]];y.options=y.options||{},"account-number"===o.key&&("IBAN"===o.format?(y.options.isIban=!0,d.setValue(null===(n=d.value)||void 0===n?void 0:n.toUpperCase())):y.options.isIban=!1),St?(y.options.defaultLabel||(y.options.defaultLabel=zt(null===(s=i.get("defaultBankCodeSetting"))||void 0===s?void 0:s.value)||y.options.label),y.options.label=St):y.options.defaultLabel&&y.options.defaultLabel!==y.options.label&&(y.options.label=y.options.defaultLabel);const Et=!((null==r?void 0:r.value)||(null==_?void 0:_.value));o.notApplicable?(d.reset(),I=null,d.disable()):d.disabled&&Et&&d.enable(),function ys(o){var i;return((null==o?void 0:o.value)||{}).hasOwnProperty("currency")&&((null==o?void 0:o.value)||{}).hasOwnProperty("amount")?!!(null===(i=null==o?void 0:o.value)||void 0===i?void 0:i.amount):!!(null==o?void 0:o.value)}(d)&&d.markAsTouched(),d.setValidators(I),d.updateValueAndValidity()}}}function Ht(o,i){var e;const n=null===(e=o.get("defaultBankCodeSetting"))||void 0===e?void 0:e.value;if(!n)return;const s=zt(n),a=n.regex;s&&(jt(l.IW3.correspondentBank,s,i),jt(l.IW3.intermediaryBank,s,i)),a&&(qt(l.IW3.correspondentBank,a,i),qt(l.IW3.intermediaryBank,a,i))}function Vt(o){return o.startsWith("/")&&o.endsWith("/")&&(o=o.slice(1,-1)),c.kI.pattern(new RegExp(o))}function qt(o,i,e){const n=(0,l.iEs)(o,e);if(!n)return;const s=(0,l.iEs)(l.IW3.bankBranchCode,n);s&&((null==s?void 0:s.options)||(s.options={}),s.options.validators=[Vt(i)])}function zt(o){return Object.values((null==o?void 0:o.label)||{})[0]}function jt(o,i,e){var n;const s=(0,l.iEs)(o,e);if(s){const a=(0,l.iEs)(l.IW3.bankBranchCode,s),r=(0,l.iEs)("selectAdditionalBankCodeType",s),_=null===(n=null==r?void 0:r.options)||void 0===n?void 0:n.options;(null==a?void 0:a.options)&&(a.options.label=i),(null==_?void 0:_.length)&&_.forEach(u=>{"BRANCH_CODE"===u.value&&(u.label=i)})}}function Cs(o){var i,e,n,s;const a=_t(o),r=null===(i=a.get(l.x2z.counterparty))||void 0===i?void 0:i.getRawValue(),_=null===(e=a.get(l.X7M.selectedBeneficiary))||void 0===e?void 0:e.value;return((0,l.QKg)(r,_)||(null===(n=null==a?void 0:a.get(l.X7M.isManualEdit))||void 0===n?void 0:n.value)&&function Os(o){var i;return(0,l.Nu3)({name:null==o?void 0:o.name,accountNumber:o.accountNumber,bankBranchCode:null===(i=o.creditorBank)||void 0===i?void 0:i.bankBranchCode})}(r))&&(null===(s=null==a?void 0:a.get(l.X7M.isClosedPayment))||void 0===s?void 0:s.value)?{hasOnlyClosedPaymentPermission:!0}:null}function Xt(o){const i={addressLine1:[""],addressLine2:[""],streetName:[""],postCode:[""],town:[""],countrySubDivision:[""],country:[""]};for(const e in i)i.hasOwnProperty(e)&&!o.get(e)&&b(o,e)}function Ss(o,i){var e,n;if(!i)return!0;const s=te(o.schedule),a=te(i.schedule);return(null===(e=o.initiator)||void 0===e?void 0:e.id)!==(null===(n=i.initiator)||void 0===n?void 0:n.id)||!(0,l.DSR)(o.counterparty,i.counterparty)||!(0,l.Gtc)(s,a)||ee(o[l.x2z.remittanceInfo],i[l.x2z.remittanceInfo])||o.chargeBearer!==i.chargeBearer}function te(o){return Object.assign(Object.assign({},o),{startDate:(0,l.qwi)(null==o?void 0:o.startDate),endDate:(0,l.qwi)(null==o?void 0:o.endDate)})}function ee(o,i){if(!o)return!1;const e=o[l.IHR.amountCurrencyGroup],n=i[l.IHR.amountCurrencyGroup];return(null==e?void 0:e.amount)!==(null==n?void 0:n.amount)||(null==e?void 0:e.currency)!==(null==n?void 0:n.currency)||o[l.IHR.urgent]!==i[l.IHR.urgent]||o[l.IHR.paymentReference]!==i[l.IHR.paymentReference]||o[l.IHR.description]!==i[l.IHR.description]}function ne({form:o,config:i}){var e;const n=null===(e=o.value)||void 0===e?void 0:e.inputFormFromSettings,s=o.get(l.x2z.remittanceInfo);if(!s)return;const a=s.get(l.IHR.purposeOfPayment)||b(s,l.IHR.purposeOfPayment),r=function bs(o){const e={isOptional:!0},s=null==o?void 0:o.purposesOfPayment;return((null==o?void 0:o.inputFormSettings)||[]).forEach(a=>{"purpose-of-payment"===a.key&&(e.isOptional=void 0!==a.mandatory?!a.mandatory:e.isOptional)}),Object.assign(Object.assign({},e),{purposes:s})}(n),_=(0,l.iEs)(l.IHR.purposeOfPayment,i),u=null==_?void 0:_.options;a&&u&&(u.isOptional=r.isOptional,u.purposes=r.purposes,u.isCollapsed=r.isOptional,u.isOptional?(a.setValidators(null),a.setAsyncValidators(null),a.updateValueAndValidity()):(a.setValidators([c.kI.required,...u.validators||[]]),a.setAsyncValidators([...u.asyncValidators||[]]),a.updateValueAndValidity()))}function oe(o){var i,e;[l.IW3.accountNumber,l.IW3.name,l.IW3.id,l.IW3.postalAddress,l.IW3.creditorBank,l.IW3.selectedContact,l.IW3.saveNewContact,l.X7M.beneficiaryAccountName].forEach(s=>{var a;null===(a=o.get(s))||void 0===a||a.reset()}),null===(e=null===(i=o.parent)||void 0===i?void 0:i.get(l.X7M.selectedBeneficiary))||void 0===e||e.reset()}function A(o,i){const e=i.group.get(i.config.name),n=i.config.hooks&&i.config.hooks[o];"function"==typeof n&&n({component:i,control:e,group:i.group})}let ie=(()=>{class o{constructor(e){this.elRef=e,this.options={},this.addressViewType=l.bWK.FORM,this.initialAddress={addressLine1:[""],addressLine2:[""],streetName:[""],postCode:[""],town:[""],countrySubDivision:[""]}}ngOnInit(){this.options.hideCountry=this.options.hideCountry||this.options.isWizardMode&&this.options.addressType===l.DLH["beneficiary bank"],this.countries$=this.options.useSanctionedCountries||this.options.isWizardMode?this.options.items$.pipe((0,x.U)(e=>e.map(({country:n})=>({value:n,label:l.sh2[n]})))):(0,J.of)(this.options.countries),this.addressGroup=vt(this.group,this.config.name,this.initialAddress),this.options.hideCountry||b(this.addressGroup,"country"),this.addressViewType=(0,l.Fvy)(this.addressGroup.value)?l.bWK.CARD:l.bWK.BUTTON,this.parentForm=_t(this.group),this.counterpartyIdControl=this.parentForm.get([l.x2z.counterparty,l.IW3.id]),A(l.k8M.onInit,this)}ngOnDestroy(){A(l.k8M.onDestroy,this)}onAddressAdd(){this.addressViewType=l.bWK.FORM}onAddressEdit(){this.addressViewType=l.bWK.FORM}onAddressDelete(){var e;if(this.addressViewType=l.bWK.BUTTON,this.options.hideCountry||1===(null===(e=this.options.options)||void 0===e?void 0:e.length))for(const n in this.addressGroup.controls)"country"!==n&&this.addressGroup.controls[n].reset();else this.addressGroup.reset()}onAddressReset(){this.addressViewType=l.bWK.BUTTON}onAddressSubmit(){this.addressGroup.valid?this.addressViewType=l.bWK.CARD:(0,l.$ZS)(this.elRef.nativeElement)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-address"]],decls:4,vars:12,consts:[[1,"bb-dynamic-input",3,"hidden"],[1,"form-group",3,"ngClass"],[3,"addressForm","addressType","viewType","isClosedPayment","states","countries","hideCountry","add","edit","discard","delete","reset","submit"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"bb-address-item-details",2),t.NdJ("add",function(){return n.onAddressAdd()})("edit",function(){return n.onAddressEdit()})("discard",function(){return n.onAddressDelete()})("delete",function(){return n.onAddressDelete()})("reset",function(){return n.onAddressReset()})("submit",function(){return n.onAddressSubmit()}),t.ALo(3,"async"),t.qZA()()()),2&e){let s;t.Q6J("hidden",null==n.config?null:n.config.hidden),t.xp6(1),t.Q6J("ngClass",null==n.options?null:n.options.cssClasses),t.xp6(1),t.Q6J("addressForm",n.addressGroup)("addressType",null==n.options?null:n.options.addressType)("viewType",(null==n.options?null:n.options.viewType)||n.addressViewType)("isClosedPayment",(null==(s=n.parentForm.get("isClosedPayment"))?null:s.value)||(null==n.counterpartyIdControl?null:n.counterpartyIdControl.value))("states",null==n.options?null:n.options.states)("countries",t.lcZ(3,10,n.countries$))("hideCountry",null==n.options?null:n.options.hideCountry),t.uIk("data-role",null==n.config?null:n.config.name)}},directives:[l.vvE,p.mk],pipes:[p.Ov],encapsulation:2}),o})(),R=(()=>{class o{constructor(e){this.elRef=e,this.hideGeneric=!1}ngOnInit(){this.validationMessages=this.validationMessages||[]}getValidationMessage(e){if(this.validationMessage="",this.control.errors&&this.validationMessages.length)for(const n of this.validationMessages){if(e&&n.name===e)return this.validationMessage=n.message,this.validationMessage;if(this.control.errors[n.name])return this.validationMessage=n.message,this.validationMessage}return this.validationMessage}getRequiredMessage(){return this.requiredMessage=this.getValidationMessage("required"),this.requiredMessage}onFocusout(){(0,l.jvH)(".bb-input-validation-message",this.elRef.nativeElement,!1)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-validation-message"]],inputs:{control:"control",validationMessages:"validationMessages",label:"label",id:"id",hideGeneric:"hideGeneric"},decls:1,vars:1,consts:function(){let i,e;return i=" " + "\ufffd0\ufffd" + " is required ",e=" Invalid " + "\ufffd0\ufffd" + " ",[["data-role","input-error",3,"showErrors","focusout",4,"ngIf"],["data-role","input-error",3,"showErrors","focusout"],[4,"ngIf","ngIfElse"],["requiredError",""],["invalidError",""],["genericError",""],["data-role","required-error"],i,[4,"ngIf"],e]},template:function(e,n){1&e&&t.YNc(0,ze,8,3,"bb-input-validation-message-ui",0),2&e&&t.Q6J("ngIf",n.control)},directives:[g.d,p.O5],encapsulation:2}),o})(),le=(()=>{class o{constructor(){this.payordAmountId=o._id++,this.initialAmount={[l.IHR.amount]:"",[l.IHR.currency]:""}}ngOnInit(){this.control=b(this.group,this.config.name,[c.kI.required,l.jQk],this.options.asyncValidators,this.options.defaultValue||this.initialAmount,this.config),A(l.k8M.onInit,this)}ngOnDestroy(){A(l.k8M.onDestroy,this)}getLabelledbyForSelector(){var e,n,s;return(null===(e=this.options)||void 0===e?void 0:e.labelledBy)||`${(null===(n=this.amountLabelEl)||void 0===n?void 0:n.nativeElement.id)||""} ${(null===(s=this.helperTextEL)||void 0===s?void 0:s.nativeElement.id)||""}`.trim()}}return o._id=0,o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-amount"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Gt,5),t.Gf(Zt,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.amountLabelEl=s.first),t.iGM(s=t.CRH())&&(n.helperTextEL=s.first)}},decls:1,vars:1,consts:[["class","bb-dynamic-input form-group payment-amount",3,"formGroup","ngClass",4,"ngIf"],[1,"bb-dynamic-input","form-group","payment-amount",3,"formGroup","ngClass"],["class","bb-dynamic-input__label bb-label",3,"id",4,"ngIf"],["class","bb-dynamic-input__helper-text bb-text-support",3,"id","textContent",4,"ngIf"],["resultType","string",3,"currencies","decMaxLen","allowNegativeValue","currencyLabel","decimalLabel","disabled","integer","integerLabel","isRightAligned","placeholder","readonly","aria-describedby","aria-labelledby","aria-invalid","formControlName"],["bbValidationMessage",""],[3,"control","validationMessages","label",4,"ngIf"],["class","bb-dynamic-input__desc bb-text-support bb-subtitle",3,"textContent",4,"ngIf"],[1,"bb-dynamic-input__label","bb-label",3,"id"],["amountLabel",""],[1,"bb-dynamic-input__helper-text","bb-text-support",3,"id","textContent"],["helperText",""],[3,"control","validationMessages","label"],[1,"bb-dynamic-input__desc","bb-text-support","bb-subtitle",3,"textContent"]],template:function(e,n){1&e&&t.YNc(0,nn,7,23,"section",0),2&e&&t.Q6J("ngIf",!(null!=n.config&&n.config.hidden))},directives:[B.K,R,p.O5,c.JL,c.sg,p.mk,c.nD,c.JJ,c.u],encapsulation:2}),o})();function se(o={}){return{addressLine1:o.accountHolderAddressLine1||"",addressLine2:o.accountHolderAddressLine2||"",streetName:o.accountHolderStreetName||"",town:o.accountHolderTown||"",postCode:o.accountHolderPostCode||"",countrySubDivision:o.accountHolderCountrySubDivision||"",country:o.accountHolderCountry||""}}function ae(o={}){return{addressLine1:o.bankAddressLine1||"",addressLine2:o.bankAddressLine2||"",streetName:o.bankStreetName||"",town:o.bankTown||"",postCode:o.bankPostCode||"",countrySubDivision:o.bankCountrySubDivision||"",country:o.bankCountry||""}}let Q=(()=>{class o{constructor(){this.showSubject$=new k.X({}),this.hideSubject$=new k.X({})}get show$(){return this.showSubject$.asObservable()}get hide$(){return this.hideSubject$.asObservable()}showItems(e,n){this.showSubject$.next({name:e,items:n})}hideItems(e,n){this.hideSubject$.next({name:e,items:n})}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})(),re=(()=>{class o{constructor(e){this.visibilityService=e,this.showBeneficiaryDetails=!1,this.saveContactControlName=l.IW3.saveNewContact,this.manualEdit$=new k.X(!1),this.query="",this.destroy$=new W.x}ngOnInit(){var e,n,s,a;this.setupFormFields(),this.options.isWizardMode&&this.setupWizardFormFields(),A(l.k8M.onInit,this),this.accountNameControl.value||(null===(e=this.options)||void 0===e?void 0:e.isTemplateMode)?this.showDependantFields():this.hideDependantFields();const r=null===(n=this.group.parent)||void 0===n?void 0:n.get(l.x2z.initiator);null==r||r.valueChanges.pipe((0,v.R)(this.destroy$),(0,T.O)(r.value)).subscribe(({})=>{this.accountNameControl.updateValueAndValidity()}),null===(s=this.arrangementIdControl)||void 0===s||s.valueChanges.pipe((0,v.R)(this.destroy$)).subscribe(_=>{this.isClosedPaymentControl.value||$t(this.group,!!_)}),null===(a=this.hideBeneficiaryFieldsControl)||void 0===a||a.valueChanges.pipe((0,v.R)(this.destroy$)).subscribe(()=>{this.onSearch(""),this.enableBeneficiaryControl.setValue(!0),this.manualEdit$.next(!1),this.saveNewContactControl.setValue(!1),this.options.isWizardMode||this.hideDependantFields()})}ngOnDestroy(){var e;null===(e=this.initiatorControlSubscription)||void 0===e||e.unsubscribe(),A(l.k8M.onDestroy,this)}setupFormFields(){var e;console.warn('\n      [DEPRECATED] "initiatorNameControl" is deprecated and will be removed in next major release, please use "initiatorIdControl" instead.\n    '),this.accountNameControl=b(this.group,this.config.name,[c.kI.required,(0,l.VKr)()]),this.manualEditControl=b(this.group.parent,l.X7M.isManualEdit),this.isClosedPaymentControl=b(this.group.parent,l.X7M.isClosedPayment),this.enableBeneficiaryControl=b(this.group.parent,l.X7M.enableBeneficiary,[],[],!0),this.beneficiaryAccountNameControl=b(this.group,l.X7M.beneficiaryAccountName),this.saveContactControl=b(this.group,this.saveContactControlName),this.saveNewContactControl=b(this.group,l.X7M.showSaveNewContact),this.hideBeneficiaryFieldsControl=b(this.group,l.X7M.hideBeneficiaryFields),this.arrangementIdControl=b(this.group,l.IW3.id),this.selectedBeneficiaryControl=b(this.group.parent,l.X7M.selectedBeneficiary),this.selectedContactControl=vt(this.group,l.IW3.selectedContact,{contactId:[""],accountId:[""]}),this.initiatorIdControl=null===(e=this.group.parent)||void 0===e?void 0:e.get([l.x2z.initiator,l.dCm.id])}setupWizardFormFields(){this.accountNumberControl=this.group.controls[l.IW3.accountNumber]||this.registerAccountNumberControl(),this.beneficiaryAddressGroup=this.group.controls[l.IW3.postalAddress]||this.registerAddressGroup(this.group),this.beneficiaryBankGroup=this.group.controls[l.IW3.creditorBank]||this.registerCreditorBankGroup(),this.bankCodeControl=this.group.controls[`${l.IW3.creditorBank}.${l.IW3.bankBranchCode}`]||this.registerBankCodeControl(),this.bankNameControl=this.group.controls[`${l.IW3.creditorBank}.${l.IW3.bankName}`]||this.registerBankNameControl(),this.bankBicControl=this.group.controls[`${l.IW3.creditorBank}.${l.IW3.bic}`]||this.registerBankBicControl(),this.beneficiaryBankAddressGroup=this.group.controls[`${l.IW3.creditorBank}.${l.IW3.postalAddress}`]||this.registerAddressGroup(this.beneficiaryBankGroup),b(this.group,l.IW3.schemeName)}registerAccountNumberControl(){return b(this.group,l.IW3.accountNumber)}registerBankNameControl(){return b(this.beneficiaryBankGroup,l.IW3.bankName)}registerBankBicControl(){return b(this.beneficiaryBankGroup,l.IW3.bic)}registerBankCodeControl(){return b(this.beneficiaryBankGroup,l.IW3.bankBranchCode)}registerAddressGroup(e){return vt(e,l.IW3.postalAddress,{addressLine1:[""],addressLine2:[""],streetName:[""],postCode:[""],town:[""],countrySubDivision:[""],country:[""]})}registerCreditorBankGroup(){const e=new c.cw({});return this.group.addControl(l.IW3.creditorBank,e),e}registerCreditorBankAddress(){const e=new c.cw({});return this.group.addControl(l.IW3.creditorBank,e),e}fetchCreditorItems(e){var n;(null===(n=this.config.options)||void 0===n?void 0:n.fetchItems$)&&this.config.options.fetchItems$.next(e)}onLoadMoreAccounts(e){console.warn('[DEPRECATED] "onLoadMoreAccounts" is deprecated since 3.9.3 and will be removed in the next major release, please use "onFetchMoreItems" instead.'),this.fetchCreditorItems({params:{from:e,query:this.query},type:l.AZU.ACCOUNTS})}onLoadMoreContacts(e){console.warn('[DEPRECATED]"onLoadMoreContacts" is deprecated since 3.9.3 and will be removed in the next major release, please use "onFetchMoreItems" instead.'),this.fetchCreditorItems({params:{from:e,query:this.query},type:l.AZU.CONTACTS})}onFetchMoreItems(e){this.fetchCreditorItems({params:{from:e.page,query:this.query},type:e.type})}onSearch(e){this.query=e,this.manualEditControl.setValue(!0),this.fetchCreditorItems({params:{query:e}})}onSelectAccount(e){var n;const s=this.group.controls[l.IW3.accountNumber],a=this.group.get(`${l.IW3.creditorBank}.${l.IW3.bankName}`),r=this.group.get(`${l.IW3.creditorBank}.${l.IW3.bankBranchCode}`),_=this.group.get(l.IW3.postalAddress),u=this.group.get(`${l.IW3.creditorBank}.${l.IW3.bic}`);this.setValue(this.accountNameControl,e.name||""),this.setValue(s,e.accountNumber||""),this.setValue(r,e.bankBranchCode),this.setValue(u,e.BIC||""),this.setValue(a,""),this.setValue(this.arrangementIdControl,e.id),this.saveNewContactControl.setValue(!1),this.setAddress(_,{}),this.setDefaultCountry(),this.showBeneficiaryDetails=!0,this.enableBeneficiaryControl.setValue(!1),this.manualEdit$.next(!1),this.manualEditControl.setValue(!1),this.selectedBeneficiaryControl.setValue(e),this.selectedContactControl.reset(),this.saveContactControl.reset(),this.showDependantFields(),null===(n=this.initiatorIdControl)||void 0===n||n.updateValueAndValidity()}onSelectContact(e){var n;const s=this.group.controls[l.IW3.accountNumber],a=this.group.get(`${l.IW3.creditorBank}.${l.IW3.bankName}`),r=this.group.get(`${l.IW3.creditorBank}.${l.IW3.bankBranchCode}`),_=this.group.get(`${l.IW3.creditorBank}.${l.IW3.bic}`),u=this.group.get(l.IW3.postalAddress),d=this.group.get(`${l.IW3.creditorBank}.${l.IW3.postalAddress}`),y=e.accounts[0],I=this.getAccountHolderAddress(y),K=(0,l.Fvy)(I)?I:this.getBeneficiaryAddress(e),U=this.getContactBankAddress(y);this.setValue(this.accountNameControl,e.name),this.setValue(this.beneficiaryAccountNameControl,e.accountName||""),this.setValue(s,y.accountNumber||y.IBAN||""),this.setValue(r,y.bankCode||""),this.setValue(a,y.bankName||""),this.setValue(_,y.BIC||""),this.setValue(this.arrangementIdControl,""),this.setValue(this.selectedContactControl,this.getSelectedContactDetails(e)),this.selectedBeneficiaryControl.setValue(e),this.setAddress(u,K),this.setAddress(d,U,!0),this.showBeneficiaryDetails=!0,this.manualEdit$.next(!1),this.manualEditControl.setValue(!1),this.enableBeneficiaryControl.setValue(!1),this.saveContactControl.reset(),this.showDependantFields(),null===(n=this.initiatorIdControl)||void 0===n||n.updateValueAndValidity()}getSelectedContactDetails(e){return{contactId:null==e?void 0:e.id,accountId:""}}setAddressDetails(e,n){e&&(0,l.Fvy)(n)&&this.setAddress(e,n)}onManualEdit(e){const n=this.group.get(`${l.IW3.creditorBank}.${l.IW3.postalAddress}`),s=this.options.isWizardMode?this.getAddressFields(n):[n];this.accountNameControl.patchValue(e),this.manualEdit$.next(!0),this.manualEditControl.setValue(!0),this.saveNewContactControl.setValue(!0),this.setValue(this.arrangementIdControl,""),this.selectedBeneficiaryControl.reset(),this.resetControls([this.group.controls[l.IW3.accountNumber],this.group.get(`${l.IW3.creditorBank}.${l.IW3.bankName}`),this.group.get(`${l.IW3.creditorBank}.${l.IW3.bankBranchCode}`),this.group.get(`${l.IW3.creditorBank}.${l.IW3.bic}`),this.group.get(l.IW3.postalAddress),this.selectedContactControl,...s]),this.setDefaultCountry(),this.visibilityService.showItems(this.config.parent),this.showDependantFields()}setDefaultCountry(){var e,n;const s=this.options.isWizardMode?{country:null===(n=null===(e=this.group.parent)||void 0===e?void 0:e.get(l.X7M.defaultCountry))||void 0===n?void 0:n.value}:null,a=this.group.get(`${l.IW3.creditorBank}.${l.IW3.postalAddress}`);this.setAddress(a,Object.assign({},s),!0)}onSearchBlur(e){this.accountNameControl.patchValue(e),this.accountNameControl.touched||this.accountNameControl.markAsTouched()}getAddressFields(e){const n=[];if(e)for(const s in e.controls)if(e.controls.hasOwnProperty(s)){const a=e.controls[s];s!==l.IW3.country&&n.push(a)}return n}resetControls(e){e.forEach(n=>{n&&n.reset()})}showDependantFields(){var e;(null===(e=this.config.options)||void 0===e?void 0:e.dependants)&&this.visibilityService.showItems(this.config.parent,this.config.options.dependants)}hideDependantFields(){var e;(null===(e=this.config.options)||void 0===e?void 0:e.dependants)&&this.visibilityService.hideItems(this.config.parent,this.config.options.dependants)}getBeneficiaryAddress(e){return{addressLine1:e.addressLine1,addressLine2:e.addressLine2,streetName:e.streetName,town:e.town,postCode:e.postCode,countrySubDivision:e.countrySubDivision,country:e.country}}getAccountHolderAddress(e){return se(e)}getContactBankAddress(e){return ae(e)}setAddress(e,n,s=!1){if(e)if((0,l.Fvy)(n)||s)e.patchValue({addressLine1:n.addressLine1,addressLine2:n.addressLine2,streetName:n.streetName,town:n.town,postCode:n.postCode,countrySubDivision:n.countrySubDivision,country:n.country});else for(const a in e.controls)s&&this.options.retainBankCountry&&"country"===a||e.controls[a].reset()}setValue(e,n){e&&(n?e.patchValue(n):e.reset())}onClearValue(e){this.setValue(this.beneficiaryAccountNameControl,e)}isBeneficiaryDisabled(){return this.isClosedPaymentControl.value&&!this.enableBeneficiaryControl.value||!!this.arrangementIdControl.value}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Q))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-beneficiary-selector"]],decls:4,vars:6,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"],["creditorTmpl",""],["class","form-group bb-dynamic-input",3,"ngClass","formGroup",4,"ngIf"],[1,"form-group","bb-dynamic-input",3,"ngClass","formGroup"],[1,"payment-to","form-group"],[3,"selectedItem","placeholder","tabs","hasError","totalAccounts","totalContacts","accounts","contacts","totalContactsItemsCount","dropdownIcon","aria-label","title","helperText","search","isManualEditDisabled","isClosedPayment","isBeneficiaryDisabled","fetchMoreItems","searchValue","selectedAccount","selectedContact","manualEdit","searchBlur","clear"],["beneficiarySelector",""],[3,"control","validationMessages","label"],["class","bb-dynamic-input__desc bb-text-support bb-subtitle",3,"textContent",4,"ngIf"],[4,"ngIf"],[1,"bb-dynamic-input__desc","bb-text-support","bb-subtitle",3,"textContent"],["class","bb-block bb-block--md",4,"ngIf"],[1,"bb-block","bb-block--md"],["data-role","save-new-contact-checkbox",3,"disabled","formControlName","label"]],template:function(e,n){if(1&e&&(t.YNc(0,on,1,0,"ng-container",0),t.ALo(1,"async"),t.YNc(2,un,1,1,"ng-template",null,1,t.W1O)),2&e){const s=t.MAs(3);t.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",t.VKq(4,X,t.lcZ(1,2,null==n.options?null:n.options.items$)))}},directives:[l.v64,R,E.r,p.tP,p.O5,p.mk,c.JL,c.sg,c.JJ,c.u],pipes:[p.Ov],encapsulation:2}),o})();class q{constructor(i){this.service=i}showDependantFields(){this.config.options&&this.config.options.dependants&&this.service.showItems(this.config.parent,this.config.options.dependants)}hideDependantFields(){this.config.options&&this.service.hideItems(this.config.parent,this.config.options.dependants)}toggleDependants(){var i;const{options:e,parent:n}=this.config;if(e&&e.dependants)if("function"==typeof e.activateDependantsOn){const s=e.activateDependantsOn(null===(i=this.control)||void 0===i?void 0:i.value,this.control)||[],a=it(s,n),r=it(null==e?void 0:e.dependants,n).map(({parent:_,items:u})=>{const d=a.find(y=>y.parent===_);return d?{parent:_,items:u.filter(y=>!d.items.includes(y))}:{parent:_,items:u}});it(s,n).forEach(({parent:_,items:u})=>{u.length&&this.service.showItems(_,u)}),it(r,n).forEach(({parent:_,items:u})=>{u.length&&this.service.hideItems(_,u)})}else this.control.value===this.config.options.activateDependantsOn?this.showDependantFields():this.hideDependantFields()}}let H=(()=>{class o{constructor(e,n,s){this.keyValueDiffers=e,this.hostElem=n,this.renderer=s,this.prependInputId=!0,this.inputSelector=".form-control",this.ariaAttributeName="aria-describedby",this._keyValueDiffer=null,this._rawMap=null}set ariaAttributeMap(e){this._rawMap=e,this._rawMap&&(this.setAriaAttributeIds(this._rawMap),this._keyValueDiffer=null,this._keyValueDiffer=this.keyValueDiffers.find(this._rawMap).create())}ngDoCheck(){if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawMap);e&&this.applyKeyValueChanges(e)}}applyKeyValueChanges(e){const n={};e.forEachAddedItem(s=>n[s.key]=s.currentValue),e.forEachChangedItem(s=>n[s.key]=s.currentValue),e.forEachRemovedItem(s=>{s.previousValue&&(n[s.key]=!1)}),this.setAriaAttributeIds(n)}setAriaAttributeIds(e){const n=this.hostElem.nativeElement.querySelector(this.inputSelector),s=(null==n?void 0:n.id)||"",a=Object.keys(e).reduce((_,u)=>(e[u]&&_.push(this.prependInputId?s+u:u),_),[]);this.removeAriaAttributeIds(n);const r=a.join(" ").trim();n&&r&&this.renderer.setAttribute(n,this.ariaAttributeName,r)}removeAriaAttributeIds(e){e&&this.renderer.removeAttribute(e,this.ariaAttributeName)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.aQg),t.Y36(t.SBq),t.Y36(t.Qsj))},o.\u0275dir=t.lG2({type:o,selectors:[["","bbDynamicAriaAttribute",""]],inputs:{ariaAttributeMap:["bbDynamicAriaAttribute","ariaAttributeMap"],prependInputId:"prependInputId",inputSelector:"inputSelector",ariaAttributeName:"ariaAttributeName"}}),o})(),ce=(()=>{class o extends q{constructor(e){super(e),this.visibilityService=e,this.shouldDisplay=!0}ngOnInit(){this.shouldDisplay=!(this.options.hideInWizardMode&&this.options.isWizardMode),this.control=b(this.group,this.config.name,this.options.validators,this.options.asyncValidators,this.options.defaultValue,this.config),this.toggleDependants(),A(l.k8M.onInit,this)}ngOnDestroy(){A(l.k8M.onDestroy,this)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Q))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-checkbox"]],features:[t.qOj],decls:1,vars:1,consts:[["class","bb-dynamic-input form-group",3,"formGroup","ngClass",4,"ngIf"],[1,"bb-dynamic-input","form-group",3,"formGroup","ngClass"],[3,"formControlName","label","disabled","bbDynamicAriaAttribute","change"],["inputEl",""],[3,"control","validationMessages","label","id"]],template:function(e,n){1&e&&t.YNc(0,_n,4,13,"div",0),2&e&&t.Q6J("ngIf",!(null!=n.config&&n.config.hidden)&&n.shouldDisplay)},directives:[E.r,R,p.O5,c.JL,c.sg,p.mk,c.JJ,c.u,H],encapsulation:2}),o})(),Ft=(()=>{class o{constructor(e){this.cdRef=e,this.initialDebitGroup={[l.dCm.id]:[""],[l.dCm.name]:[""],[l.dCm.accountNumber]:[""],schemeName:[],currency:[""],balance:[""]},this.gc$=new W.x,this.loadDebitAccountAndSelect$=new W.x,this.accountIds=[],this.currentPage=0,this.searchTerm="",this.typeahead$=new W.x,this.loading$=new k.X(!0),this.defaultTypeToSearchText="No items found"}ngOnInit(){var e,n,s,a;this.registerFields(),this.listenSearch(),this.control=this.group.controls.id,this.form=_t(this.control),this.isClosedPaymentControl=b(this.form,l.X7M.isClosedPayment),this.group.value.id&&this.selectItem(this.group.value),this.arrangementItems$=null===(n=null===(e=this.options)||void 0===e?void 0:e.items$)||void 0===n?void 0:n.pipe((0,M.b)(({items:_})=>{if(this.accountIds=_.map(u=>u.id),this.group.value.id){const u=null==_?void 0:_.find(d=>d.id===this.group.value.id);u?this.selectItem(u):this.loadDebitAccountAndSelect$.next()}}),(0,O.K)(_=>(0,J.of)(_))),this.arrangementItems$.pipe((0,v.R)(this.gc$)).subscribe(_=>{this.loading$.next(!1),this.arrangementList=_,this.cdRef.detectChanges()});const r=this.form.get(l.x2z.counterparty);this.options.checkClosedPaymentsAccess&&(null===(s=this.isClosedPaymentControl)||void 0===s||s.valueChanges.pipe((0,v.R)(this.gc$)).subscribe(_=>{_&&($t(r,_),this.control.updateValueAndValidity())}),null===(a=this.options.arrangementPermissions$)||void 0===a||a.pipe((0,v.R)(this.gc$)).subscribe(_=>{var u;null===(u=this.isClosedPaymentControl)||void 0===u||u.setValue((null==_?void 0:_.status)===l.yV8)})),this.loadDebitAccountAndSelect$.pipe((0,v.R)(this.gc$),(0,$.w)(()=>this.options.loadAccountByAccountId(this.group.value.id,this.group.value.accountNumber)),(0,M.b)(_=>{_?this.accountIds.push(_.id):(this.control.setValidators([c.kI.required,(0,l.MK$)(this.getAccountIdsList.bind(this))]),this.control.updateValueAndValidity()),this.selectItem(_||this.group.value)}),(0,O.K)(()=>(0,J.of)(void 0))).subscribe(),A(l.k8M.onInit,this)}fetchArrangementPermissions(e){var n;!this.options.isWizardMode&&this.options.checkClosedPaymentsAccess&&e&&(null===(n=this.options.fetchArrangementPermissions$)||void 0===n||n.next(e))}getAccountIdsList(){return this.accountIds}listenSearch(){this.typeahead$.pipe((0,v.R)(this.gc$),(0,G.b)(300)).subscribe(e=>{this.onSearch(e)})}ngOnDestroy(){this.gc$.next(),this.gc$.complete(),A(l.k8M.onDestroy,this)}registerFields(){const e={[l.dCm.id]:[c.kI.required]};for(const n in this.initialDebitGroup)this.initialDebitGroup.hasOwnProperty(n)&&(n===l.dCm.id&&(this.checkClosedPayment()&&e[l.dCm.id].push(Cs),this.isCounterpartyGroup()&&e[l.dCm.id].push((0,l.VKr)())),b(this.group,n,e[n],[],""))}isCounterpartyGroup(){return this.config.name===l.IW3.counterPartyAccountGroup}checkClosedPayment(){return!this.options.isWizardMode&&this.config.name===l.dCm.initiatorAccountGroup&&this.options.checkClosedPaymentsAccess}selectItem(e){var n;this.group&&e.name&&(this.group.patchValue({id:e.id,name:e.name,accountNumber:e.accountNumber,balance:e.balance,currency:e.currency,accountType:e.accountType,additions:e.additions||{},schemeName:h.B7.ID}),this.selectedAccount=Object.assign(Object.assign({},e),{number:e.accountNumber,currency:e.currency,balance:e.balance}),this.isCounterpartyGroup()||null===(n=this.form.get([l.x2z.counterparty,l.IW3.id]))||void 0===n||n.updateValueAndValidity(),this.fetchArrangementPermissions(e.id)),this.group.markAllAsTouched(),this.group.markAsDirty()}onBlur(){this.options.required&&this.group.markAllAsTouched()}onScrollToEnd(){this.options.fetchItems$.next({from:++this.currentPage,searchTerm:this.searchTerm}),this.loading$.next(!0)}onSearch(e){this.currentPage=0,this.searchTerm=e,this.options.fetchItems$.next({from:this.currentPage,searchTerm:e}),this.loading$.next(!0)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-debit-account-selector"]],decls:1,vars:1,consts:[["class","bb-dynamic-input form-group",3,"ngClass",4,"ngIf"],[1,"bb-dynamic-input","form-group",3,"ngClass"],[1,"payment-from",3,"formGroup"],[1,"d-block"],["class","bb-dynamic-input__label bb-label",4,"ngIf"],[1,"bb-form-field"],["inputSelector",".ng-input input",3,"markFirst","highlight","filterItems","closeOnSelect","dropdownPosition","items","selectedItems","placeholder","required","showBankBranchCode","bbDynamicAriaAttribute","prependInputId","disableScrollEnd","searchFunc","minTermLength","typeToSearchText","typeahead","loading","change","blur","scrollToEnd"],[3,"control","validationMessages","label","id"],["class","bb-dynamic-input__desc bb-text-support bb-subtitle","id","payord-debit-account-selector__desc",3,"textContent",4,"ngIf"],[1,"bb-dynamic-input__label","bb-label"],["class","bb-dynamic-input__helper-text bb-text-support",3,"textContent",4,"ngIf"],[1,"bb-dynamic-input__helper-text","bb-text-support",3,"textContent"],["id","payord-debit-account-selector__desc",1,"bb-dynamic-input__desc","bb-text-support","bb-subtitle",3,"textContent"]],template:function(e,n){1&e&&t.YNc(0,fn,9,33,"div",0),2&e&&t.Q6J("ngIf",!(null!=n.config&&n.config.hidden))},directives:[D.vI,R,p.O5,p.mk,c.JL,c.sg,H],pipes:[p.Ov],encapsulation:2}),o})(),ue=(()=>{class o extends q{constructor(e){super(e),this.visibilityService=e}ngOnInit(){this.control=b(this.group,this.config.name,this.options.validators,this.options.asyncValidators,this.options.defaultValue,this.config),this.toggleDependants(),A(l.k8M.onInit,this)}getDescribedByRefs(e){var n;return{[`${e}__error`]:this.control.touched&&this.control.invalid,[`${e}__desc`]:null===(n=this.options)||void 0===n?void 0:n.description}}ngOnDestroy(){A(l.k8M.onDestroy,this)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Q))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-radio"]],features:[t.qOj],decls:1,vars:1,consts:[["class","bb-dynamic-input form-group",3,"formGroup","ngClass",4,"ngIf"],[1,"bb-dynamic-input","form-group",3,"formGroup","ngClass"],[1,"bb-dynamic-input__label",3,"id","for","textContent"],["labelElem",""],["class","bb-dynamic-input__helper-text bb-text-support",3,"id","textContent",4,"ngIf"],["inputSelector",".bb-input-radio-group",3,"label","formControlName","horizontal","preselect","bbDynamicAriaAttribute","change"],["inputEl",""],[3,"value","label",4,"ngFor","ngForOf"],[3,"control","validationMessages","label","id"],[1,"bb-dynamic-input__desc","bb-text-support","bb-subtitle",3,"hidden","id","textContent"],["descElem",""],[1,"bb-dynamic-input__helper-text","bb-text-support",3,"id","textContent"],[3,"value","label"]],template:function(e,n){1&e&&t.YNc(0,yn,10,21,"div",0),2&e&&t.Q6J("ngIf",!(null!=n.config&&n.config.hidden))},directives:[N.Af,N.f2,R,p.O5,c.JL,c.sg,p.mk,c.JJ,c.u,H,p.sg],encapsulation:2}),o})(),_e=(()=>{class o{constructor(){this.defaultMinOcccurs=2,this.defaultMaxOcccurs=100}ngOnInit(){this.registerFields(this.initScheduleFields(this.options.minOccurs,this.options.maxOccurs)),A(l.k8M.onInit,this)}ngOnDestroy(){A(l.k8M.onDestroy,this)}initScheduleFields(e,n){return{[l.YMR.frequency]:[{value:"ONCE",every:"1"},[c.kI.required]],[l.YMR.startDate]:[(new Date).toISOString(),[c.kI.required,l.Fp1]],[l.YMR.endDate]:[new Date((new Date).getFullYear(),(new Date).getMonth()+1,(new Date).getDate()).toISOString(),[l.bsR,l.Fp1]],[l.YMR.repeat]:[e||this.defaultMinOcccurs,[l.CGB,c.kI.compose([c.kI.min(e||this.defaultMinOcccurs),c.kI.max(n||this.defaultMaxOcccurs)])]],[l.YMR.endType]:[l.cCW.never,[l.Gsv]]}}registerFields(e){for(const n in e)e.hasOwnProperty(n)&&b(this.group,n,e[n].pop(),[],e[n].pop())}get scheduleLabelData(){const{frequency:e,endDate:n,endType:s,repeat:a,startDate:r}=this.group.value;let _={};switch(s){case l.cCW.on:_={endDate:n};break;case l.cCW.after:_={repeat:a}}return Object.assign({frequency:e,endType:s,startDate:r},_)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-schedule"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"payment-schedule","flex-row","bb-dynamic-input",3,"ngClass"],[1,"bb-fieldset"],[4,"ngIf","ngIfElse"],["collapsibleTmpl",""],["header",""],["content",""],[4,"ngTemplateOutlet"],[1,"mt-0"],["data-role","schedule-toggle"],["collapse",""],["bbCollapsibleHeader",""],["bbCollapsibleBody",""],[1,"bb-stack","justify-content-between",3,"click"],["bbButton","","color","outline","aria-label","Schedule toggle",3,"click"],[3,"name"],[1,"bb-label"],[1,"bb-text-support"],[3,"item"],["data-role","payment-schedule",3,"scheduleForm","frequencies","minOccurs","maxOccurs","formSubmitted"]],template:function(e,n){1&e&&t.YNc(0,Dn,10,3,"ng-container",0),2&e&&t.Q6J("ngIf",!(null!=n.config&&n.config.hidden))},directives:[F.tB,Y.o,l.qVN,l.ic1,p.O5,p.mk,p.tP,F.gM,V.Hq,F.rJ],encapsulation:2}),o})(),pe=(()=>{class o extends q{constructor(e){super(e),this.visibilityService=e}ngOnInit(){this.control=b(this.group,this.config.name,this.options.validators,this.options.asyncValidators,this.options.defaultValue,this.config),this.toggleDependants(),A(l.k8M.onInit,this)}ngOnDestroy(){A(l.k8M.onDestroy,this)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Q))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-select"]],features:[t.qOj],decls:1,vars:1,consts:[["class","bb-dynamic-input form-group",3,"formGroup","ngClass",4,"ngIf"],[1,"bb-dynamic-input","form-group",3,"formGroup","ngClass"],[1,"bb-dynamic-input__label",3,"id","for","textContent"],["labelElem",""],["class","bb-dynamic-input__helper-text bb-text-support",3,"id","textContent",4,"ngIf"],[3,"formControlName","placeholder","bbDynamicAriaAttribute","change"],["inputEl",""],[3,"value","label",4,"ngFor","ngForOf"],[3,"control","validationMessages","label","id"],[1,"bb-dynamic-input__desc","bb-text-support","bb-subtitle",3,"hidden","id","textContent"],["descElem",""],[1,"bb-dynamic-input__helper-text","bb-text-support",3,"id","textContent"],[3,"value","label"]],template:function(e,n){1&e&&t.YNc(0,Nn,10,22,"div",0),2&e&&t.Q6J("ngIf",!(null!=n.config&&n.config.hidden))},directives:[mt.Pp,mt.MM,R,p.O5,c.JL,c.sg,p.mk,c.JJ,c.u,H,p.sg],encapsulation:2}),o})(),de=(()=>{class o{constructor(e){this.elRef=e,this.isCollapsed=!1}ngOnInit(){var e;this.control=b(this.group,this.config.name,this.options.validators,this.options.asyncValidators,this.options.defaultValue,this.config),(null===(e=this.control.value)||void 0===e?void 0:e.content)&&this.control.setValue(this.control.value.content),this.isCollapsed=!this.control.value&&(0,l.Nu3)(this.options.collapseOptions),A(l.k8M.onInit,this)}expand(){this.isCollapsed=!1,(0,l.pU_)("textarea",this.elRef.nativeElement)}ngOnDestroy(){A(l.k8M.onDestroy,this)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-textarea"]],decls:1,vars:1,consts:[[4,"ngIf"],["class","bb-dynamic-input form-group",3,"formGroup","ngClass",4,"ngIf"],[1,"bb-dynamic-input","form-group",3,"formGroup","ngClass"],[1,"bb-dynamic-input__label",3,"id","for","textContent"],["labelElem",""],["class","bb-dynamic-input__helper-text bb-text-support",3,"id","textContent",4,"ngIf"],["wrap","hard",3,"placeholder","formControlName","showCharCounter","minLength","maxLength","rows","cols","bbDynamicAriaAttribute"],["inputEl",""],[3,"control","validationMessages","label"],[1,"bb-dynamic-input__desc","bb-text-support","bb-subtitle",3,"hidden","id","textContent"],["descElem",""],[1,"bb-dynamic-input__helper-text","bb-text-support",3,"id","textContent"],[1,"bb-dynamic-input__collapse-btn-container"],["bbButton","",1,"bb-dynamic-input__collapse-btn",3,"color","buttonSize","click"],["class","bb-dynamic-input__collapse-btn-icon mr-2",3,"name","size",4,"ngIf"],[1,"bb-dynamic-input__collapse-btn-label"],[1,"bb-dynamic-input__collapse-btn-icon","mr-2",3,"name","size"]],template:function(e,n){1&e&&t.YNc(0,kn,3,2,"ng-container",0),2&e&&t.Q6J("ngIf",!(null!=n.config&&n.config.hidden))},directives:[Ot.R,R,Y.o,p.O5,c.JL,c.sg,p.mk,c.JJ,c.u,H,V.Hq],encapsulation:2}),o})(),Rt=(()=>{class o{ngOnInit(){if(this.control=b(this.group,this.config.name,this.options.validators,this.options.asyncValidators,this.options.defaultValue,this.config),this.options.isIban){const e=this.group.get(l.IW3.schemeName)||b(this.group,l.IW3.schemeName);e.value!==l.g1M.IBAN&&e.setValue(l.g1M.IBAN)}A(l.k8M.onInit,this)}ngOnDestroy(){A(l.k8M.onDestroy,this)}onBlur(){if(this.options.isIban){const e=this.group.get(this.config.name),n=null==e?void 0:e.value;null==e||e.setValue(null==n?void 0:n.toUpperCase())}}get mask(){return this.options.isIban?l.a$:""}get maxLength(){var e,n,s,a,r;return this.options.isIban&&(null===(e=this.options)||void 0===e?void 0:e.maxLength)?Math.ceil((null!==(s=null===(n=this.options)||void 0===n?void 0:n.maxLength)&&void 0!==s?s:0)/4)+(null===(a=this.options)||void 0===a?void 0:a.maxLength)-1:null===(r=this.options)||void 0===r?void 0:r.maxLength}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-text"]],decls:1,vars:1,consts:[["class","bb-dynamic-input form-group contextual-alternates-off",3,"formGroup","ngClass",4,"ngIf"],[1,"bb-dynamic-input","form-group","contextual-alternates-off",3,"formGroup","ngClass"],[1,"bb-dynamic-input__label",3,"id","for"],["labelElem",""],["class","bb-dynamic-input__helper-text bb-text-support",3,"textContent",4,"ngIf"],[3,"formControlName","disabled","minLength","maxLength","showCharCounter","id","placeholder","autocomplete","autofocus","readonly","bbDynamicAriaAttribute","mask","maskValidator","inputClassName","blur"],["inputEl",""],[3,"control","validationMessages","label","id"],["errorElem",""],[1,"bb-dynamic-input__desc","bb-text-support","bb-subtitle",3,"hidden","id","textContent"],["descElem",""],[1,"bb-dynamic-input__helper-text","bb-text-support",3,"textContent"]],template:function(e,n){1&e&&t.YNc(0,Jn,11,32,"div",0),2&e&&t.Q6J("ngIf",!(null!=n.config&&n.config.hidden))},directives:[st.m,R,p.O5,c.JL,c.sg,p.mk,c.JJ,c.u,H],encapsulation:2}),o})(),me=(()=>{class o{constructor(){this.sanctionedCurrencyAmountId=o._id++,this.initialAmount={[l.IHR.amount]:"",[l.IHR.currency]:""}}ngOnInit(){this.parentForm=_t(this.group),this.control=b(this.group,this.config.name,[c.kI.required,l.jQk,(0,l.PRw)()],this.options.asyncValidators,this.options.defaultValue||this.initialAmount,this.config),this.initiatorCurrencyControl=this.parentForm.get(`${l.x2z.initiator}.${l.dCm.currency}`),this.exchangeRateControl=this.parentForm.get(l.okK.exchangeRate)||b(this.parentForm,l.okK.exchangeRate),this.initiatorCurrencyControl&&this.control&&!this.options.isTemplateMode&&(this.valueChangeSubscription=(0,ot.a)([this.initiatorCurrencyControl.valueChanges.pipe((0,T.O)(this.initiatorCurrencyControl.value),(0,Z.x)(),(0,j.h)(e=>!!e)),this.control.valueChanges.pipe((0,T.O)(this.control.value),(0,x.U)(({currency:e})=>e),(0,Z.x)(),(0,j.h)(e=>!!e))]).subscribe(([e,n])=>{this.options.getExchangeRate$.next({fromCurrency:e,toCurrency:n})})),this.options.exchangeRate$&&(this.exchangeRate$=this.options.exchangeRate$.pipe((0,M.b)(e=>{this.exchangeRateControl.setValue(e)}))),A(l.k8M.onInit,this)}getCalculatedRate(e=0){if(e&&this.initiatorCurrencyControl&&this.control.value.amount)return{currencyFrom:this.initiatorCurrencyControl.value,currencyTo:this.control.value.currency,rate:e,calculatedAmount:this.control.value.amount/e}}ngOnDestroy(){this.valueChangeSubscription&&this.valueChangeSubscription.unsubscribe(),A(l.k8M.onDestroy,this)}getLabelledbyForSelector(){var e,n,s;return(null===(e=this.options)||void 0===e?void 0:e.labelledBy)||`${(null===(n=this.amountLabelEl)||void 0===n?void 0:n.nativeElement.id)||""} ${(null===(s=this.helperTextEL)||void 0===s?void 0:s.nativeElement.id)||""}`.trim()}}return o._id=0,o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-sanctioned-currency-amount"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Gt,5),t.Gf(Zt,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.amountLabelEl=s.first),t.iGM(s=t.CRH())&&(n.helperTextEL=s.first)}},decls:1,vars:1,consts:function(){let i,e,n,s;return i="Something went wrong. Reload the page or contact system administrator.",e="You pay approximately:",n=" (1 " + "\ufffd0\ufffd" + " \u2248 " + "\ufffd1\ufffd" + " " + "\ufffd2\ufffd" + ") ",s="Exchange rate for this currency pair is unavailable.",[["class","bb-dynamic-input form-group payment-amount",3,"formGroup","ngClass",4,"ngIf"],[1,"bb-dynamic-input","form-group","payment-amount",3,"formGroup","ngClass"],["class","bb-dynamic-input__label bb-label",3,"id",4,"ngIf"],["class","bb-dynamic-input__helper-text bb-text-support",3,"id","textContent",4,"ngIf"],[1,"col-md-8","px-0"],[4,"ngIf","ngIfElse"],["loading",""],[4,"ngIf"],["class","bb-dynamic-input__desc bb-text-support bb-subtitle",3,"textContent",4,"ngIf"],[1,"bb-dynamic-input__label","bb-label",3,"id"],["amountLabel",""],[1,"bb-dynamic-input__helper-text","bb-text-support",3,"id","textContent"],["helperText",""],["data-role","sanctioned-currency-amount-selector","resultType","string","ngDefaultControl","",3,"currencies","decMinLen","decMaxLen","allowNegativeValue","currencyLabel","decimalLabel","disabled","integer","integerLabel","isRightAligned","labelClasses","placeholder","readonly","aria-describedby","aria-labelledby","aria-invalid","formControlName","currencySelectorExtended","currencySelectorConfig"],["bbValidationMessage",""],[3,"control","validationMessages","label"],[3,"showErrors"],i,e,[1,"bb-text-bold"],[3,"mapCurrency","amount","currency"],n,s,[1,"bb-dynamic-input__desc","bb-text-support","bb-subtitle",3,"textContent"]]},template:function(e,n){1&e&&t.YNc(0,qn,13,15,"section",0),2&e&&t.Q6J("ngIf",!(null!=n.config&&n.config.hidden))},directives:[l.oU8,R,g.d,at.Q,rt.G4,p.O5,c.JL,c.sg,p.mk,c.Fj,c.JJ,c.u,c.nD],pipes:[p.Ov],encapsulation:2}),o})(),ge=(()=>{class o extends q{constructor(e){super(e),this.visibilityService=e}ngOnInit(){this.defaultCountry=this.options.defaultValue||"",this.control=b(this.group,this.config.name,this.options.validators,this.options.asyncValidators,this.defaultCountry,this.config),this.toggleDependants(),A(l.k8M.onInit,this)}ngOnDestroy(){A(l.k8M.onDestroy,this)}selectItem(e){this.control.setValue(e),this.toggleDependants()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Q))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-country-selector"]],features:[t.qOj],decls:1,vars:1,consts:[["class","bb-dynamic-input form-group",3,"formGroup","ngClass",4,"ngIf"],[1,"bb-dynamic-input","form-group",3,"formGroup","ngClass"],[3,"formControlName","countries","label","helperText","placeholder","searchPlaceholder","dropdownIcon","selectedCountry","selectCountry"],[3,"control","validationMessages","label"],[1,"bb-dynamic-input__desc","bb-text-support","bb-subtitle",3,"hidden","textContent"],["descElem",""]],template:function(e,n){1&e&&t.YNc(0,zn,5,17,"div",0),2&e&&t.Q6J("ngIf",!(null!=n.config&&n.config.hidden))},directives:[l.Rg8,R,p.O5,c.JL,c.sg,p.mk,c.JJ,c.u],encapsulation:2}),o})(),fe=(()=>{class o extends q{constructor(e){super(e),this.visibilityService=e}ngOnInit(){this.control=b(this.group,this.config.name,this.options.validators,this.options.asyncValidators,this.options.defaultValue,this.config),this.toggleDependants(),A(l.k8M.onInit,this)}ngOnDestroy(){A(l.k8M.onDestroy,this)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Q))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-switch"]],features:[t.qOj],decls:5,vars:15,consts:[[1,"form-group","bb-dynamic-input",3,"formGroup","ngClass"],[3,"hidden"],[3,"formControlName","label","labelPosition","bbDynamicAriaAttribute","inputSelector","change"],["inputEl",""],[3,"control","validationMessages","label","id"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"bb-switch-ui",2,3),t.NdJ("change",function(){return n.toggleDependants()}),t.qZA(),t._UZ(4,"bb-payord-validation-message",4),t.qZA()()),2&e){const s=t.MAs(3);t.Q6J("formGroup",n.group)("ngClass",null==n.options?null:n.options.cssClasses),t.xp6(1),t.Q6J("hidden",null==n.config?null:n.config.hidden),t.xp6(1),t.Q6J("formControlName",null==n.config?null:n.config.name)("label",null==n.options?null:n.options.label)("labelPosition",null==n.options?null:n.options.labelPosition)("bbDynamicAriaAttribute",t.VKq(13,Yt,(null==n.control?null:n.control.touched)&&(null==n.control?null:n.control.invalid)))("inputSelector",".bb-switch__checkbox"),t.uIk("data-role",null==n.config?null:n.config.name),t.xp6(2),t.Q6J("control",null==n.group?null:n.group.controls[n.config.name])("validationMessages",null==n.options?null:n.options.validationMessages)("label",null==n.options?null:n.options.label)("id",(null==s?null:s.id)+"__error")}},directives:[gt.q,R,c.JL,c.sg,p.mk,c.JJ,c.u,H],encapsulation:2}),o})(),be=(()=>{class o{constructor(e){this.service=e}ngOnInit(){this.control=b(this.group,this.config.name,this.options.validators,this.options.asyncValidators,this.options.defaultValue,this.config),A(l.k8M.onInit,this)}ngOnDestroy(){A(l.k8M.onDestroy,this)}getCurrentBankDate(){return this.service.getCurrentDateInConfiguredTimeZone()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(we.r))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-date"]],decls:1,vars:1,consts:[["class","bb-dynamic-input form-group payord-date-control",3,"formGroup","ngClass",4,"ngIf"],[1,"bb-dynamic-input","form-group","payord-date-control",3,"formGroup","ngClass"],["class","bb-dynamic-input__label",3,"id","textContent",4,"ngIf"],["class","bb-dynamic-input__helper-text bb-text-support",3,"textContent",4,"ngIf"],[1,"bb-block","bb-block--sm"],[3,"formControlName","minDate","maxDate","overrideDateFormat","placeholder","btnColor","clickOpen","focusOpen","icon","iconColor","iconSize","markDisabled","navigation","placement","rangeSelection","firstDayOfWeek","readonly","bbDynamicAriaAttribute","aria-labelledby"],["inputEl",""],[3,"control","validationMessages","label","id"],[1,"bb-dynamic-input__desc","bb-text-support","bb-subtitle",3,"hidden","id","textContent"],["descElem",""],[1,"bb-dynamic-input__label",3,"id","textContent"],["labelElem",""],[1,"bb-dynamic-input__helper-text","bb-text-support",3,"textContent"]],template:function(e,n){1&e&&t.YNc(0,to,11,37,"div",0),2&e&&t.Q6J("ngIf",!(null!=n.config&&n.config.hidden))},directives:[ct.sO,R,p.O5,c.JL,c.sg,p.mk,ct.Mt,ct.jC,c.JJ,c.u,H],encapsulation:2}),o})(),he=(()=>{class o{ngOnInit(){this.control=b(this.group,this.config.name,this.options.validators,this.options.asyncValidators,this.options.defaultValue,this.config),A(l.k8M.onInit,this)}ngOnDestroy(){A(l.k8M.onDestroy,this)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-number"]],decls:1,vars:1,consts:[["class","bb-dynamic-input form-group",3,"formGroup","ngClass",4,"ngIf"],[1,"bb-dynamic-input","form-group",3,"formGroup","ngClass"],[1,"bb-dynamic-input__label",3,"id","for","textContent"],["labelElem",""],["class","bb-dynamic-input__helper-text bb-text-support",3,"id","textContent",4,"ngIf"],[3,"placeholder","formControlName","max","min","step","bbDynamicAriaAttribute"],["inputEl",""],[3,"control","validationMessages","label","id"],[1,"bb-dynamic-input__desc","bb-text-support","bb-subtitle",3,"hidden","id","textContent"],["descElem",""],[1,"bb-dynamic-input__helper-text","bb-text-support",3,"id","textContent"]],template:function(e,n){1&e&&t.YNc(0,no,10,23,"div",0),2&e&&t.Q6J("ngIf",!(null!=n.config&&n.config.hidden))},directives:[Mt.l,R,p.O5,c.JL,c.sg,p.mk,c.JJ,c.u,H],encapsulation:2}),o})(),ye=(()=>{class o{ngOnInit(){this.control=b(this.group,this.config.name,this.options.validators,this.options.asyncValidators,this.options.defaultValue,this.config),A(l.k8M.onInit,this)}ngOnDestroy(){A(l.k8M.onDestroy,this)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-phone"]],decls:1,vars:1,consts:[["class","bb-dynamic-input form-group",3,"formGroup","ngClass",4,"ngIf"],[1,"bb-dynamic-input","form-group",3,"formGroup","ngClass"],[1,"bb-dynamic-input__label",3,"id","for","textContent"],["labelElem",""],["class","bb-dynamic-input__helper-text bb-text-support",3,"id","textContent",4,"ngIf"],[3,"placeholder","formControlName","minLength","maxLength","bbDynamicAriaAttribute"],["inputEl",""],[3,"control","validationMessages","label","id"],[1,"bb-dynamic-input__desc","bb-subtitle","bb-text-support",3,"hidden","id","textContent"],["descElem",""],[1,"bb-dynamic-input__helper-text","bb-text-support",3,"id","textContent"]],template:function(e,n){1&e&&t.YNc(0,io,10,23,"div",0),2&e&&t.Q6J("ngIf",!(null!=n.config&&n.config.hidden))},directives:[It.W,R,p.O5,c.JL,c.sg,p.mk,c.JJ,c.u,H],encapsulation:2}),o})(),Ce=(()=>{class o extends q{constructor(e){super(e),this.visibilityService=e,this.separator="::",this.defaultTransFerFee={amount:"",currencyCode:""},this.today=(0,l.RRx)(new Date),this.showConfirmOptionModal=!1}ngOnInit(){this.paymentTypecontrol=this.group.get("paymentType"),this.paymentTypeNameControl=b(this.group,l.okK.paymentTypeName),this.control=b(this.group,this.config.name,[c.kI.required]),this.transferFeeControl=this.group.get(l.okK.transferFee)||b(this.group,l.okK.transferFee),this.chargeBearerOptionsControl=this.group.get(l.okK.chargeBearerOptions)||b(this.group,l.okK.chargeBearerOptions),this.remittanceInfoGroup=this.group.get(l.x2z.remittanceInfo),this.isClosedPaymentControl=this.group.get(l.X7M.isClosedPayment),this.isManualEditControl=this.group.get(l.X7M.isManualEdit),this.remittanceInfoGroup&&(this.instructionPriorityControl=this.remittanceInfoGroup.get(l.IHR.urgent)||b(this.remittanceInfoGroup,l.IHR.urgent)),this.paymentOptions$=(this.options.items$||(0,J.of)([])).pipe((0,x.U)(e=>e.map(n=>Object.assign(Object.assign({},n),{hasMin:n.executionTimeFrame&&"number"==typeof n.executionTimeFrame.min,hasMax:n.executionTimeFrame&&"number"==typeof n.executionTimeFrame.max,name:n.name||(this.options.optionLabels||{})[n.paymentType||""]}))),(0,M.b)(e=>{var n;if(this.paymentOptions=e||[],e&&1===e.length){const s=this.getValue(e[0]);s!==this.control.value&&(this.control.setValue(s),this.setPaymentOptionDetails(e[0]))}if((null===(n=this.control)||void 0===n?void 0:n.value)&&e.length){const[s,a]=this.control.value.split(this.separator),r=this.getValueByType(s,a);r?this.setPaymentOptionDetails(r):this.control.reset()}})),this.toggleDependants(),A(l.k8M.onInit,this)}setPaymentOptionDetails(e){var n;this.instructionPriorityControl&&this.instructionPriorityControl.setValue("HIGH"===e.instructionPriority),this.options.isWizardMode&&this.options.checkClosedPaymentsAccess&&(null===(n=this.isClosedPaymentControl)||void 0===n||n.setValue(!e.canEditCounterparty)),this.transferFeeControl.setValue(e.transferFee||this.defaultTransFerFee),this.chargeBearerOptionsControl.setValue(e.chargeBearer),this.paymentTypecontrol.patchValue(e.paymentType),this.paymentTypeNameControl.setValue(e.name)}getValue(e){return`${e.paymentType}${this.separator}${e.instructionPriority||""}`}getValueByType(e,n){return this.paymentOptions.filter(s=>s.paymentType===e&&s.instructionPriority===n)[0]}onRadioChange(e){this.toggleDependants();const[n,s]=e.split(this.separator),a=this.getValueByType(n,s);this.selectedPaymentOptionLabel=a.name,this.previousPaymentOption=this.currentPaymentOption,this.currentPaymentOption=a,n&&s&&(this.shouldShowConfirmationModal(!!(null==a?void 0:a.canEditCounterparty))?this.showConfirmOptionModal=!0:this.setPaymentOptionDetails(this.currentPaymentOption))}shouldShowConfirmationModal(e){var n,s,a;const r=null===(n=this.group.get(l.x2z.counterparty))||void 0===n?void 0:n.getRawValue(),_=null===(s=this.group.get(l.X7M.selectedBeneficiary))||void 0===s?void 0:s.value,u=function As(o){var i,e,n;const s=null===(i=o.get(l.x2z.counterparty))||void 0===i?void 0:i.getRawValue();return{name:null==s?void 0:s.name,accountNumber:null==s?void 0:s.accountNumber,bankBranchCode:null===(e=null==s?void 0:s.creditorBank)||void 0===e?void 0:e.bankBranchCode,BIC:null===(n=null==s?void 0:s.creditorBank)||void 0===n?void 0:n.bic}}(this.group),d=_&&(0,l.QKg)(r,_),y=this.options.isWizardMode&&this.options.checkClosedPaymentsAccess&&!e,I=(0,l.Nu3)(u)&&(null===(a=this.isManualEditControl)||void 0===a?void 0:a.value);return y&&(d||I)}confirmPaymentOption(){this.showConfirmOptionModal=!1,function Is(o){var i,e,n;const s=o.get(l.x2z.counterparty),a=null===(i=o.get(l.X7M.selectedBeneficiary))||void 0===i?void 0:i.value,r=s.get(l.IW3.postalAddress),_=s.get([l.IW3.creditorBank,l.IW3.postalAddress]),u=o.get(l.X7M.isManualEdit);if(a){const d=function Ms(o){var i;const e=null===(i=null==o?void 0:o.accounts)||void 0===i?void 0:i[0];return{bankBranchCode:(null==e?void 0:e.bankCode)||(null==o?void 0:o.bankBranchCode),accountNumber:(null==e?void 0:e.accountNumber)||(null==o?void 0:o.accountNumber),name:null==o?void 0:o.name,BIC:(null==e?void 0:e.BIC)||(null==o?void 0:o.BIC),address:se(e),bankAddress:ae(e)}}(a);null==u||u.reset(),s.patchValue({[l.IW3.name]:d.name,[l.IW3.accountNumber]:d.accountNumber,[l.IW3.creditorBank]:{[l.IW3.bankBranchCode]:d.bankBranchCode,[l.IW3.bic]:d.BIC}}),null==r||r.setValue(Object.assign({},d.address)),null==_||_.setValue(Object.assign(Object.assign({},d.bankAddress),{country:(null===(e=d.bankAddress)||void 0===e?void 0:e.country)||(null===(n=o.get(l.X7M.defaultCountry))||void 0===n?void 0:n.value)}))}else oe(s)}(this.group),this.currentPaymentOption&&this.setPaymentOptionDetails(this.currentPaymentOption)}cancelPaymentOption(){this.showConfirmOptionModal=!1;let e="";if(this.currentPaymentOption=this.previousPaymentOption,this.currentPaymentOption){const n=this.instructionPriorityControl.value?"HIGH":"NORM";e=this.paymentTypecontrol.value,e&&this.control.setValue(`${e}${this.separator}${n}`)}(!e||!this.previousPaymentOption)&&(this.instructionPriorityControl.reset(),this.control.reset())}ngOnDestroy(){A(l.k8M.onDestroy,this)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Q))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-select-payment-option"]],features:[t.qOj],decls:13,vars:5,consts:function(){let i,e,n,s,a,r,_,u,d,y,I,K;return i=" 'Continue with '" + "\ufffd0\ufffd" + "'?' ",e=" Changes to beneficiary will be reset. ",n=" Continue ",s=" Cancel ",a="Delivery",r="Please choose a payment delivery option",_="{VAR_SELECT, select, HIGH {Urgent} NORM {Standard}}",_=t.Zx4(_,{VAR_SELECT:"\ufffd0\ufffd"}),u="{VAR_PLURAL, plural, =0 {{VAR_SELECT, select, HOUR {instantly} CALENDAR_DAY {same day} BUSINESS_DAY {same business day}}} =1 {{VAR_SELECT_1, select, HOUR {within 1 hour} CALENDAR_DAY {within 1 day} BUSINESS_DAY {within 1 business day}}} other {{VAR_SELECT_2, select, HOUR {within {INTERPOLATION}\n          hours} CALENDAR_DAY {within {INTERPOLATION_1} days} BUSINESS_DAY {within\n          {INTERPOLATION_1} business days}}}}",u=t.Zx4(u,{VAR_SELECT:"\ufffd0\ufffd",VAR_SELECT_1:"\ufffd1\ufffd",VAR_SELECT_2:"\ufffd2\ufffd",VAR_PLURAL:"\ufffd3\ufffd",INTERPOLATION:"\ufffd4\ufffd",INTERPOLATION_1:"\ufffd5\ufffd"}),d=" Delivered " + u + " ",y="{VAR_SELECT, select, HOUR {hours} CALENDAR_DAY {days} BUSINESS_DAY {business days}}",y=t.Zx4(y,{VAR_SELECT:"\ufffd2\ufffd"}),I=" Delivered within " + "\ufffd0\ufffd" + "-" + "\ufffd1\ufffd" + " " + y + " ",K=" if received before " + "\ufffd0\ufffd" + " Hrs ",[[4,"ngIf"],["labelTemplate",""],[3,"isOpen","cancel","confirm"],["title","","data-role","confirm-reset-beneficiary-modal-header"],i,["body","","data-role","confirm-reset-beneficiary-modal-message"],e,["confirmActionName","","data-role","continue-action-btn"],n,["cancelActionName","","data-role","cancel-action-btn"],s,["class","form-group col-12 bb-dynamic-input",3,"formGroup","ngClass",4,"ngIf"],[1,"form-group","col-12","bb-dynamic-input",3,"formGroup","ngClass"],[1,"bb-select-payment-option"],[1,"bb-label"],["label",a,"data-role","payment-option-radio-group","inputSelector",".bb-input-radio-group",3,"formControlName","preselect","bbDynamicAriaAttribute","prependInputId","change"],["inputEl",""],[3,"labelTemplate","labelTemplateContext","value",4,"ngFor","ngForOf"],["data-role","input-error","role","alert",3,"showErrors",4,"ngIf"],[3,"labelTemplate","labelTemplateContext","value"],["data-role","input-error","role","alert",3,"showErrors"],["id","select_payment_option__error","data-role","required-error"],r,[1,"row","bb-select-payment-option__label"],[1,"col-6"],["class","bb-text-support font-weight-normal bb-subtitle",4,"ngIf"],[1,"col-6","d-flex","align-items-center","bb-text-support","font-weight-normal"],["name","data-usage",1,"bb-select-payment-option__icon"],["data-role","transfer-fee"],_,[1,"bb-text-support","font-weight-normal","bb-subtitle"],d,I,K]},template:function(e,n){1&e&&(t.YNc(0,_o,2,1,"ng-container",0),t.ALo(1,"async"),t.YNc(2,ho,12,8,"ng-template",null,1,t.W1O),t.TgZ(4,"bb-confirmation-dialog",2),t.NdJ("cancel",function(){return n.cancelPaymentOption()})("confirm",function(){return n.confirmPaymentOption()}),t.TgZ(5,"h2",3),t.SDv(6,4),t.qZA(),t.TgZ(7,"span",5),t.SDv(8,6),t.qZA(),t.TgZ(9,"span",7),t.SDv(10,8),t.qZA(),t.TgZ(11,"span",9),t.SDv(12,10),t.qZA()()),2&e&&(t.Q6J("ngIf",t.lcZ(1,3,n.paymentOptions$)),t.xp6(4),t.Q6J("isOpen",n.showConfirmOptionModal),t.xp6(2),t.pQV(n.selectedPaymentOptionLabel),t.QtT(6))},directives:[N.Af,N.f2,g.d,Y.o,l.fDO,p.O5,c.JL,c.sg,p.mk,c.JJ,c.u,H,p.sg],pipes:[p.Ov,p.uU,p.H9],encapsulation:2}),o})(),Ae=(()=>{class o{constructor(){this.defaultCurrency="USD",this.paymentCostInfo$=new k.X(void 0),this.fromCurrency="",this.exchangeRate=0,this.instructionPriority=!1,this.isTotalAmountDisplayed=!0}ngOnInit(){this.fromCurrencyControl=this.group.get(`${l.x2z.initiator}.${l.dCm.currency}`),this.amountControl=this.group.get(`${l.x2z.remittanceInfo}.${l.IHR.amountCurrencyGroup}`),this.instructionPriorityControl=this.group.get(`${l.x2z.remittanceInfo}.${l.IHR.urgent}`),this.transferFeeControl=this.group.get(l.okK.transferFee)||b(this.group,l.okK.transferFee),this.chargeBearerControl=this.group.get(l.okK.chargeBearer)||b(this.group,l.okK.chargeBearer),this.exchangeRateControl=this.group.get(l.okK.exchangeRate)||b(this.group,l.okK.exchangeRate),this.paymentTypeNameControl=this.group.get(l.okK.paymentTypeName),this.listenChanges()}getTotalCost(e,n=0){const s=new ft((null==e?void 0:e.amount)||"0");return new ft(n||this.amount.amount||"0").plus(s).toString()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}hasForexInfo(e="",n="",s=0){return!!e&&!!n&&e!==n&&0!==s}listenChanges(){this.amountControl&&this.fromCurrencyControl&&this.instructionPriorityControl&&(this.subscription=(0,ot.a)([this.fromCurrencyControl.valueChanges.pipe((0,T.O)(this.fromCurrencyControl.value),(0,Z.x)()),this.amountControl.valueChanges.pipe((0,T.O)(this.amountControl.value),(0,Z.x)()),this.transferFeeControl.valueChanges.pipe((0,T.O)(this.transferFeeControl.value),(0,Z.x)()),this.chargeBearerControl.valueChanges.pipe((0,T.O)(this.chargeBearerControl.value),(0,Z.x)()),this.exchangeRateControl.valueChanges.pipe((0,T.O)(this.exchangeRateControl.value),(0,Z.x)()),this.instructionPriorityControl.valueChanges.pipe((0,T.O)(this.instructionPriorityControl.value),(0,Z.x)())]).subscribe(([e,n,s,a,r,_])=>{var u;this.fromCurrency=e,this.amount=n,this.exchangeRate=r,this.instructionPriority=_,this.isTotalAmountDisplayed=!!this.exchangeRate||this.fromCurrency===this.amount.currency;const d=Object.assign({},s);if(a===l.ZIU.BEN&&(d.amount="0"),a&&!(null===(u=this.options)||void 0===u?void 0:u.isTemplateMode)){const y=new ft(n.amount||"0").dividedBy(r),I=r?y.toString():n.amount;this.paymentCostInfo$.next({transferFee:d,hasForexInfo:this.hasForexInfo(e,n.currency,r),rate:r,fromCurrency:this.fromCurrency,toCurrency:this.amount.currency,calculatedAmount:I})}}))}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payment-cost"]],decls:2,vars:3,consts:function(){let i,e,n,s,a,r,_;return i="Transfer amount",e=" Amount you pay " + "\ufffd#9\ufffd" + "(1 " + "\ufffd0\ufffd" + " \u2248 " + "\ufffd1\ufffd" + " " + "\ufffd2\ufffd" + ")" + "\ufffd/#9\ufffd" + "",n=" Transfer fee - " + "\ufffd0\ufffd" + " ",s="Total",a="Amount",r=" Transfer fee - " + "\ufffd0\ufffd" + " ",_="Total",[["class","bb-block--md col-12 bb-dynamic-input",4,"ngIf"],[1,"bb-block--md","col-12","bb-dynamic-input"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["sameCurrencyTransferTmpl",""],[1,"bb-heading-3","bb-block","bb-block--md","d-flex","justify-content-between"],i,["data-role","transfer-amount",3,"mapCurrency","amount","currency"],[1,"bb-block","bb-block--md","d-flex","justify-content-between",3,"hidden"],e,["data-role","exchange-rate"],["data-role","amount-you-pay"],[3,"mapCurrency","amount","currency"],[1,"bb-block","bb-block--md","d-flex","justify-content-between"],["data-role","payment-fee",3,"mapCurrency","amount","currency"],["class","bb-text-bold bb-block bb-block--md d-flex justify-content-between",4,"ngIf"],n,[1,"bb-text-bold","bb-block","bb-block--md","d-flex","justify-content-between"],s,["data-role","total-amount-to-pay",3,"mapCurrency","amount","currency"],a,["data-role","amount-you-pay",3,"mapCurrency","amount","currency"],r,_,["data-role","total-amount",3,"mapCurrency","amount","currency"]]},template:function(e,n){1&e&&(t.YNc(0,Mo,2,1,"section",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,n.paymentCostInfo$))},directives:[rt.G4,p.O5],pipes:[p.Ov],encapsulation:2}),o})();function ve(o){if(!o)return{};let i=o.snapshot.params;if(i=Object.assign(Object.assign({},o.snapshot.queryParams),i),o.children)for(const e of o.children)i=Object.assign(Object.assign({},ve(e)),i);return i}const Se=(o,i)=>{const e=i.split(".").reduce((n,s)=>null==n?void 0:n[s],o);return["string","number"].includes(typeof e)?e:void 0};let Ee=(()=>{class o extends q{constructor(e,n,s,a){super(a),this.renderer=e,this.cd=n,this.activatedRoute=s,this.destroy$=new W.x,this.connectedAccounts$=(0,J.of)([]),this.productKinds=l.T8N,this.validationId="",this.accountFormat={length:0,maskRange:[0,0],segments:0},this.touched=!1}get peerFieldName(){return this.config.name===l.dCm.initiatorAccountGroup?l.x2z.counterparty:l.x2z.initiator}get isDropdownOpen(){var e,n;return!!(null===(n=null===(e=this.productSelector)||void 0===e?void 0:e.bbDropdown)||void 0===n?void 0:n.isOpen())}get disabledProductKinds(){var e,n;const s=(null===(e=this.options.paymentTypeOptions)||void 0===e?void 0:e.disabledCombinations)||[],a=this.config.name===l.dCm.initiatorAccountGroup,r=null===(n=this.disabledAccount)||void 0===n?void 0:n.productKindName;return s.filter(u=>a?u.to===r:u.from===r).map(u=>a?u.from:u.to)}get isEditScheduledTransfer(){return this.group.root.value.paymentOrderId}ngOnInit(){var e;this.validationId=`account-selector-${this.config.name}-error-message`,this.form=null===(e=this.group)||void 0===e?void 0:e.parent,this.registerFields(),this.control=this.group.controls.name;const{otherFilters:n,connectedItems$:s,items$:a,productKinds:r,connectedAccounts:_,preselect:u}=this.options;_&&(this.connectedAccounts$=s.pipe((0,v.R)(this.destroy$))),this.options.items$=a.pipe((0,v.R)(this.destroy$),(0,x.U)(d=>this.options.mapItems&&(null==d?void 0:d.length)?this.options.mapItems(d):d),(0,x.U)(d=>this.filterByProductKind(d,r)),(0,x.U)(d=>this.filterByOtherProps(d,n)),(0,x.U)(d=>d.map(this.mapBalance.bind(this)))),(0,ot.a)([this.options.items$.pipe((0,v.R)(this.destroy$),(0,O.K)(()=>(0,J.of)([]))),this.connectedAccounts$.pipe((0,v.R)(this.destroy$),(0,O.K)(()=>(0,J.of)([])))]).subscribe(([d,y=[]])=>{var I;const K=[...d,...y];if(this.setAccountInEditMode(K,this.group,this.group.value.id?"id":"accountNumber"),!this.group.value.id){let U;const{transferFrom:St,transferTo:Et}=ve(this.activatedRoute.root),{name:ws}=this.config,ke=ws===l.dCm.initiatorAccountGroup?St:Et;U=ke&&K.find(Js=>Js.id===ke),u&&!U&&Et!==(null===(I=K[0])||void 0===I?void 0:I.id)&&(U=K[0]),U&&this.selectItem(U)}}),this.setDisabledAccount(this.form),A(l.k8M.onInit,this)}ngAfterViewInit(){if(this.productSelector){const{nativeElement:e}=this.productSelector.dropdownToggle;(0,S.R)(e,"blur").pipe((0,P.q)(1)).subscribe(()=>this.setTouched()),(0,S.R)(e,"click").pipe((0,P.q)(1)).subscribe(n=>n.currentTarget.focus()),this.renderer.setAttribute(e,"aria-describedby",this.validationId)}}filterByProductKind(e=[],n=[]){return null==e?void 0:e.filter(s=>!n.length||n.some(a=>a.productKind===s.productKindName))}filterByOtherProps(e=[],n=[]){return e.filter(s=>!n.length||n.every(({key:a,value:r})=>{const _=Se(null==s?void 0:s.defaultRecord,a);return r.some(u=>u===_)}))}setDisabledAccount(e){if(null==e?void 0:e.get(this.peerFieldName)){const n=e.get(this.peerFieldName);this.disabledAccount=null==n?void 0:n.value,null==n||n.valueChanges.pipe((0,T.O)(null==n?void 0:n.value),(0,v.R)(this.destroy$)).subscribe(s=>{this.disabledAccount=s,this.setPaymentConfig(s)})}}setPaymentConfig(e){var n;if(this.config.name===l.IW3.counterPartyAccountGroup&&this.form.get(l.x2z.counterparty)){const s=e.productKindName===l.T8N.connectedAccounts?"DEBTOR":"CREDITOR";null===(n=this.form.get(l.x2z.counterparty))||void 0===n||n.patchValue({role:s})}}setTouched(e=!0){e&&this.group.markAllAsTouched(),this.cd.detectChanges()}pickPaymentType(){var e,n;const s=null===(e=this.form.value.initiator)||void 0===e?void 0:e.productKindName,a=null===(n=this.form.value.counterparty)||void 0===n?void 0:n.productKindName,{paymentTypes:r}=this.options.paymentTypeOptions||{},{connectedAccounts:_}=l.T8N;if(r&&s&&a)return a===_||s===_?r.external:r.internal}setAccountInEditMode(e,n,s){if(e&&(null==n?void 0:n.value[s])){const a=e.find(r=>r[s]===n.value[s]);a&&this.selectItem(a)}}selectAccountGroup(){const e=this.config.name===l.dCm.initiatorAccountGroup?l.dCm:l.IW3;return{[e.id]:[c.kI.required],[e.name]:[c.kI.required],[e.accountNumber]:[c.kI.required],[l.IW3.role]:[c.kI.required],currency:[],schemeName:[c.kI.required],productKindName:[c.kI.required],accountData:[]}}registerFields(){const e=this.selectAccountGroup();for(const n in e)e.hasOwnProperty(n)&&b(this.group,n,e[n],[],"")}mapBalance(e){var n,s,a,r;const _=l.A_h.current,u=null===(s=null===(n=this.options)||void 0===n?void 0:n.productKinds)||void 0===s?void 0:s.find(I=>I.productKind===e.productKindName),d=(null===(a=null==u?void 0:u.balance)||void 0===a?void 0:a.apiField)?u.balance.apiField:_,y=Se(null==e?void 0:e.defaultRecord,d);return Object.assign(Object.assign({},e),{balance:y,balanceLabel:null===(r=null==u?void 0:u.balance)||void 0===r?void 0:r.label})}ngOnDestroy(){A(l.k8M.onDestroy,this),this.destroy$.next(),this.destroy$.complete()}selectItem(e){var n;if(this.group&&(null==e?void 0:e.name)){const{productKindName:a}=e,{connectedAccounts:r}=l.T8N,_=(null===(n=this.disabledAccount)||void 0===n?void 0:n.productKindName)===r;this.group.patchValue({id:e.id,name:e.name,accountNumber:e.accountNumber,currency:e.currency,schemeName:a===r?"EXTERNAL_ID":"ID",productKindName:e.productKindName,role:this.config.name===l.IW3.counterPartyAccountGroup&&_?"DEBTOR":"CREDITOR",accountData:e}),this.selectedAccount=Object.assign({},e)}this.toggleDependants();const s=this.pickPaymentType();s&&this.form.patchValue({paymentType:s}),this.group.markAsDirty(),this.cd.detectChanges()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.Qsj),t.Y36(t.sBO),t.Y36(Je.gz),t.Y36(Q))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-internal-account-selector"]],viewQuery:function(e,n){if(1&e&&t.Gf(Io,5),2&e){let s;t.iGM(s=t.CRH())&&(n.productSelector=s.first)}},features:[t.qOj],decls:5,vars:1,consts:[["class","form-group bb-dynamic-input",3,"ngClass",4,"ngIf"],["selectedProductItemTmp",""],["productSelectorTmp",""],[1,"form-group","bb-dynamic-input",3,"ngClass"],["class","bb-label bb-block bb-block--lg",4,"ngIf"],[1,"payment-from",3,"formGroup"],[1,"bb-form-field"],[4,"ngIf","ngIfElse"],["itemToEditTemplate",""],[4,"ngIf"],[1,"bb-label","bb-block","bb-block--lg"],[4,"ngTemplateOutlet"],[1,"bb-card","bb-card--md","text-muted"],[1,"bb-card__body","bb-text-default"],[3,"id","control","validationMessages","label"],[3,"title","productNumber","amount","currency","productNumberFormat","highlight","showCurrencySymbol","active","balanceLabel"],[3,"autoClose"],["productSelector",""],["bbDropdownToggle",""],["data-role","product-selector-selected-product",4,"ngIf"],["class","bb-stack",4,"ngIf"],["bbDropdownMenu",""],["notFound",""],["data-role","product-selector-selected-product"],[1,"bb-stack"],["data-role","item-empty-state",1,"bb-text-support","bb-product-selector__placeholder"],[4,"ngFor","ngForOf"],["bbButton","","color","unstyled","class","bb-product-selector__dropdown-item",3,"disabled","ngClass","click",4,"ngIf"],["bbButton","","color","unstyled",1,"bb-product-selector__dropdown-item",3,"disabled","ngClass","click"],[3,"title","amount","productNumber","currency","highlight","active","productNumberFormat","showCurrencySymbol","balanceLabel"],["class","bb-subheader bb-text-support bb-block bb-block--no-margin bb-inline-stack bb-internal-account-selector__subheader","tabIndex","-1",4,"ngIf"],["bbButton","","color","unstyled","class","bb-product-selector__dropdown-item",3,"disabled","ngClass","click",4,"ngFor","ngForOf"],["tabIndex","-1",1,"bb-subheader","bb-text-support","bb-block","bb-block--no-margin","bb-inline-stack","bb-internal-account-selector__subheader"],["name","insert-link","cropped","",1,"bb-inline-stack__item--spacing-sm"],[3,"title","productNumber","highlight","active","productNumberFormat","showCurrencySymbol"],["title","No items found",3,"showIcon"]],template:function(e,n){1&e&&(t.YNc(0,Fo,8,6,"div",0),t.YNc(1,Ro,1,9,"ng-template",null,1,t.W1O),t.YNc(3,Ho,11,13,"ng-template",null,2,t.W1O)),2&e&&t.Q6J("ngIf",!(null!=n.config&&n.config.hidden))},directives:[R,xt.mB,Bt.c,Y.o,bt.s,p.O5,p.mk,c.JL,c.sg,p.tP,p.sg,V.Hq],pipes:[p.Ov],encapsulation:2}),o})(),Oe=(()=>{class o{constructor(){this.remittanceInfoFields=l.IHR,this.initialAmount={[l.IHR.amount]:"",[l.IHR.currency]:""},this.id=(new Date).getTime()}ngOnInit(){var e,n,s,a,r,_;this.amountGroup=vt(this.group,this.config.name,{[l.IHR.amount]:[(null===(e=this.options.defaultValue)||void 0===e?void 0:e.amount)||this.initialAmount.amount],[l.IHR.currency]:[(null===(n=this.options.defaultValue)||void 0===n?void 0:n.currency)||this.initialAmount.currency]},[c.kI.required,l.jQk],this.options.asyncValidators),this.fromAccountProduct$=null===(a=null===(s=this.group.parent)||void 0===s?void 0:s.get(l.x2z.initiator))||void 0===a?void 0:a.valueChanges.pipe((0,T.O)(null===(_=null===(r=this.group.parent)||void 0===r?void 0:r.get(l.x2z.initiator))||void 0===_?void 0:_.value),(0,M.b)(u=>{var d;return null===(d=this.amountGroup.get(l.IHR.currency))||void 0===d?void 0:d.patchValue((null==u?void 0:u.currency)||this.options.currency)})),A(l.k8M.onInit,this)}ngOnDestroy(){A(l.k8M.onDestroy,this)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-compact-amount-ui"]],decls:1,vars:1,consts:[["class","form-group bb-dynamic-input",3,"formGroup","ngClass","was-validated",4,"ngIf"],[1,"form-group","bb-dynamic-input",3,"formGroup","ngClass"],[4,"ngIf"],[1,"position-relative"],[3,"id","formControlName","mapCurrency","currency","placeholder","required","wrapperClasses","autoDecimal","maxLength","aria-describedby"],[3,"id","control","validationMessages","label"]],template:function(e,n){1&e&&t.YNc(0,qo,6,21,"section",0),2&e&&t.Q6J("ngIf",!(null!=n.config&&n.config.hidden))},directives:[ht.l,R,p.O5,c.JL,c.sg,p.mk,c.JJ,c.u,c.Q7],pipes:[p.Ov],encapsulation:2}),o})(),Me=(()=>{class o{constructor(){this.confirmModalClose$=new k.X(!1),this.paymentMode=l.x66}ngOnInit(){var e;this.initialFormValue=null===(e=this.group)||void 0===e?void 0:e.value}onCancel(){!function Es(o,i){return o[l.x2z.initiator].id!==i[l.x2z.initiator].id||!(0,l.Gtc)(o[l.x2z.counterparty],i[l.x2z.counterparty])||ee(o[l.x2z.remittanceInfo],i[l.x2z.remittanceInfo])||o[l.ZDt.templateName]!==i[l.ZDt.templateName]}(this.group.value,this.initialFormValue)?this.closeModal():this.confirmModalClose$.next(!0)}closeModal(){this.confirmModalClose$.next(!1),this.options.discard()}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-button-group"]],decls:14,vars:11,consts:function(){let i,e,n,s,a,r,_,u;return i="Discard entered data?",e="Continue",n="Save",s=" Cancel ",a="Clear all fields",r=" Are you sure to exit and discard all changes? Entered data will be lost. ",_=" Discard ",u=" Cancel ",[[1,"btn-container","bb-dynamic-input","bb-button-bar",3,"ngClass"],["type","submit",1,"bb-button-bar__button",3,"isLoading"],[4,"ngIf"],["bbButton","","class","bb-button-bar__button","color","secondary","data-role","cancel-button",3,"disabled","click",4,"ngIf"],["class","bb-button-bar__button bb-button-bar__button--across","bbButton","","type","button","color","link",3,"disabled","click",4,"ngIf"],["data-role","close-discard-modal-dialog",3,"isOpen","cancel","confirm"],["title",i],["bbCustomModalBody",""],["modalFooterRef",""],["bbCustomModalFooter",""],e,n,["bbButton","","color","secondary","data-role","cancel-button",1,"bb-button-bar__button",3,"disabled","click"],s,["bbButton","","type","button","color","link",1,"bb-button-bar__button","bb-button-bar__button--across",3,"disabled","click"],a,r,[1,"bb-button-bar"],["bbButton","","color","danger","data-role","discard-action-btn",1,"bb-button-bar__button",3,"click"],_,["bbButton","","color","link","data-role","cancel-action-btn",1,"bb-button-bar__button",3,"click"],u]},template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"bb-load-button-ui",1),t.ALo(2,"async"),t.YNc(3,zo,2,0,"ng-container",2),t.YNc(4,jo,2,0,"ng-container",2),t.qZA(),t.YNc(5,Xo,3,3,"button",3),t.YNc(6,ti,4,3,"button",4),t.qZA(),t.TgZ(7,"bb-modal-ui",5),t.NdJ("cancel",function(){return n.confirmModalClose$.next(!1)})("confirm",function(){return n.closeModal()}),t._UZ(8,"bb-modal-header-ui",6),t.TgZ(9,"bb-modal-body-ui"),t.YNc(10,ei,2,0,"ng-template",7),t.qZA(),t.TgZ(11,"bb-modal-footer-ui",null,8),t.YNc(13,ni,5,0,"ng-template",9),t.qZA()()),2&e&&(t.Q6J("ngClass",t.VKq(9,oi,!(null!=n.options&&n.options.isModalView))),t.xp6(1),t.Q6J("isLoading",t.lcZ(2,7,null==n.options?null:n.options.submitting$)),t.xp6(2),t.Q6J("ngIf",!(null!=n.options&&n.options.isTemplateMode)),t.xp6(1),t.Q6J("ngIf",null==n.options?null:n.options.isTemplateMode),t.xp6(1),t.Q6J("ngIf",(null==n.options?null:n.options.isModalView)||(null==n.options?null:n.options.paymentMode)===n.paymentMode.COPY_PAYMENT),t.xp6(1),t.Q6J("ngIf",(null==n.options?null:n.options.paymentMode)!==n.paymentMode.EDIT_TEMPLATE&&(null==n.options?null:n.options.paymentMode)!==n.paymentMode.COPY_PAYMENT),t.xp6(1),t.Q6J("isOpen",n.confirmModalClose$.value))},directives:[yt.K,et.zS,et.Rb,et.KF,et.YI,p.mk,p.O5,V.Hq,et.Qd,et.yk],pipes:[p.Ov],encapsulation:2}),o})(),Ie=(()=>{class o{constructor(){this.minOccurrences=2,this.endType=l.KpR,this.frequencies=l.SxI}isToday(e){const n=(0,l.DCK)();return(0,l.RRx)(new Date(e))===n}ngOnInit(){var e;this.dateFormat=(null===(e=this.options)||void 0===e?void 0:e.dateFormat)||"d MMM y",A(l.k8M.onInit,this)}ngOnDestroy(){A(l.k8M.onDestroy,this)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-schedule-header"]],decls:1,vars:1,consts:function(){let i,e,n,s,a;return i="{VAR_SELECT, select, DAILY {Daily} WEEKLY {Weekly} BIWEEKLY {Bi-Weekly} MONTHLY {Monthly} QUARTERLY {Quarterly} YEARLY {Annually}}",i=t.Zx4(i,{VAR_SELECT:"\ufffd0\ufffd"}),e="Schedule",n=" (Today) ",s=" from ",a=" times",[["class","bb-dynamic-input bb-schedule-header bb-fieldset__heading",3,"ngClass",4,"ngIf"],[1,"bb-dynamic-input","bb-schedule-header","bb-fieldset__heading",3,"ngClass"],[4,"ngIf"],[1,"bb-schedule-header__sepatator"],[1,"bb-schedule-header__text"],i,e,["class","bb-schedule-header__relative-text",4,"ngIf"],[1,"bb-schedule-header__relative-text"],n,s,a]},template:function(e,n){1&e&&t.YNc(0,pi,3,2,"div",0),2&e&&t.Q6J("ngIf",!(null!=n.config&&n.config.hidden))},directives:[p.O5,p.mk],pipes:[p.uU],encapsulation:2}),o})(),xe=(()=>{class o extends q{constructor(e){super(e),this.visibilityService=e,this.countries=[],this.inputFormSettings={},this.sanctionedCountries={}}ngOnInit(){this.defaultCountry=this.options.defaultCountry||"",this.parentForm=_t(this.group),this.control=b(this.group,this.config.name,this.options.validators,this.options.asyncValidators,this.defaultCountry,this.config),this.inputFormSettingControl=this.parentForm.get(l.okK.inputFormFromSettings)||b(this.parentForm,l.okK.inputFormFromSettings),this.defaultBankCodeSettingControl=this.parentForm.get(l.X7M.defaultBankCodeSetting)||b(this.parentForm,l.X7M.defaultBankCodeSetting),this.defaultCountryControl=b(this.parentForm,l.X7M.defaultCountry),this.sanctionedCountriesControl=b(this.parentForm,l.X7M.sanctionedCountries),this.options.items$&&(this.httpSubscription=this.options.items$.pipe((0,x.U)(e=>this.mapCountries(e)),(0,M.b)(e=>{var n;this.countries=this.options.isWizardMode?e:e.filter(s=>s!==this.defaultCountry),this.sanctionedCountriesControl.setValue(this.countries),!this.control.value&&this.defaultCountry&&(null===(n=this.parentForm.get("isEditMode"))||void 0===n?void 0:n.value)&&this.control.setValue(this.defaultCountry)})).subscribe()),this.formSubscription=this.control.valueChanges.subscribe(e=>this.onChange(e)),this.counterpartyIdControl=this.parentForm.get([l.x2z.counterparty,l.IW3.id]),this.toggleDependants(),A(l.k8M.onInit,this)}mapCountries(e){return e.map(n=>(n.country===this.control.value&&(this.inputFormSettingControl.reset(),this.inputFormSettingControl.setValue(n)),n.inputFormSettings&&(this.sanctionedCountries[n.country]=n,this.inputFormSettings[n.country]=n.inputFormSettings),n.isDefault&&(this.defaultCountry=n.country,this.defaultCountryControl.setValue(n.country),this.inputFormSettings[n.country]&&this.inputFormSettings[n.country].forEach(s=>{"bank-code"===s.key&&this.defaultBankCodeSettingControl.setValue(s)})),n.country))}onChange(e){this.inputFormSettingControl.setValue(this.sanctionedCountries[e]),this.toggleDependants()}resetAddressGroup(){const e=this.control&&this.control.parent?this.control.parent:null;if((0,l.Fvy)(e.value))for(const n in e.controls)"country"!==n&&e.controls[n].reset()}ngOnDestroy(){this.formSubscription&&this.formSubscription.unsubscribe(),this.httpSubscription&&this.httpSubscription.unsubscribe(),A(l.k8M.onDestroy,this)}resetPurposeOfPayment(){const e=this.parentForm.get([l.x2z.remittanceInfo,l.IHR.purposeOfPayment]);(null==e?void 0:e.value)&&e.reset()}selectItem(e){this.defaultCountry=e,this.control.setValue(e),this.resetAddressGroup(),this.resetPurposeOfPayment()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Q))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-sanctioned-country-selector"]],features:[t.qOj],decls:1,vars:1,consts:[["class","bb-dynamic-input form-group",3,"formGroup","ngClass",4,"ngIf"],[1,"bb-dynamic-input","form-group",3,"formGroup","ngClass"],["data-role","sanctioned-country-selector-dropdown",3,"formControlName","countries","label","helperText","placeholder","searchPlaceholder","dropdownIcon","selectedCountry","isClosedPayment","selectCountry"],[3,"control","validationMessages","label"],[1,"bb-dynamic-input__desc","bb-text-support","bb-subtitle",3,"hidden","textContent"],["descElem",""]],template:function(e,n){1&e&&t.YNc(0,di,5,17,"div",0),2&e&&t.Q6J("ngIf",!(null!=n.config&&n.config.hidden))},directives:[l.Rg8,R,p.O5,c.JL,c.sg,p.mk,c.JJ,c.u],encapsulation:2}),o})(),Lt=(()=>{class o extends q{constructor(e){super(e),this.visibilityService=e,this.chargeBearerOptions$$=new k.X([]),this.chargeBearerOptions$=this.chargeBearerOptions$$.asObservable(),this.chargeBearerOptions=l.ZIU}ngOnInit(){this.control=b(this.group,this.config.name,this.options.validators,this.options.asyncValidators,this.options.defaultValue,this.config),this.chargeBearerOptionsControl=b(this.group,l.okK.chargeBearerOptions),this.chargeBearerOptionsControl&&(this.subscription=this.chargeBearerOptionsControl.valueChanges.pipe((0,T.O)(this.chargeBearerOptionsControl.value),(0,M.b)(e=>{const n=null!=e?e:[];this.control.setValidators(n.length?c.kI.required:null),this.control.updateValueAndValidity(),this.control.value&&n.length&&-1===n.indexOf(this.control.value)&&this.options.templateModeType!==l.ND4.EDIT&&this.control.reset(),this.chargeBearerOptions$$.next(n)})).subscribe()),this.toggleDependants(),A(l.k8M.onInit,this)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe(),A(l.k8M.onDestroy,this)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Q))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-charge-bearer"]],features:[t.qOj],decls:4,vars:3,consts:function(){let i,e,n;return i=" The beneficiary receives the payment amount in full. You pay the fees charged by our bank initially (fees will be charged separately). You will also pay the fees charged by the payee\u2019s bank, including any correspondent/intermediary fees (this could be days or weeks after you have made the payment). ",e=" The beneficiary pays any fees charged by our bank and/or the recipient bank (including any correspondent/intermediary fees). The beneficiary will typically receive the payment minus the transfer charges. ",n=" You pay the fees charged by our bank (fees will be charged separately). The beneficiary will pay all fees charged by their bank, including any correspondent/intermediary fees. ",[[4,"ngIf"],["paymentOptionTmpl",""],["class","bb-dynamic-input form-group charge-bearer-options",3,"formGroup","ngClass",4,"ngIf"],[1,"bb-dynamic-input","form-group","charge-bearer-options",3,"formGroup","ngClass"],[1,"bb-label",3,"textContent"],["class","bb-dynamic-input__helper-text bb-text-support",3,"id","textContent",4,"ngIf"],["data-role","charge-bearer-radio-group","inputSelector",".bb-input-radio-group",3,"label","formControlName","horizontal","preselect","bbDynamicAriaAttribute","prependInputId","change"],["inputEl",""],[3,"value","labelTemplate","labelTemplateContext",4,"ngFor","ngForOf"],[3,"control","validationMessages","label","id"],[1,"bb-dynamic-input__desc","bb-text-support","bb-subtitle",3,"hidden","id","textContent"],["descElem",""],[1,"bb-dynamic-input__helper-text","bb-text-support",3,"id","textContent"],[3,"value","labelTemplate","labelTemplateContext"],[1,"font-weight-normal",3,"option"],[3,"ngSwitch"],["class","bb-text-support bb-subtitle","data-role","charge-bearer-option-description__OUR",4,"ngSwitchCase"],["class","bb-text-support bb-subtitle","data-role","charge-bearer-option-description__BEN",4,"ngSwitchCase"],["class","bb-text-support bb-subtitle","data-role","charge-bearer-option-description__SHA",4,"ngSwitchCase"],["data-role","charge-bearer-option-description__OUR",1,"bb-text-support","bb-subtitle"],i,["data-role","charge-bearer-option-description__BEN",1,"bb-text-support","bb-subtitle"],e,["data-role","charge-bearer-option-description__SHA",1,"bb-text-support","bb-subtitle"],n]},template:function(e,n){1&e&&(t.YNc(0,Ci,2,1,"ng-container",0),t.ALo(1,"async"),t.YNc(2,Oi,2,2,"ng-template",null,1,t.W1O)),2&e&&t.Q6J("ngIf",t.lcZ(1,1,n.chargeBearerOptions$))},directives:[N.Af,N.f2,R,l.wN8,p.O5,c.JL,c.sg,p.mk,c.JJ,c.u,H,p.sg,p.RF,p.n9],pipes:[p.Ov],encapsulation:2}),o})(),Be=(()=>{class o extends q{constructor(e,n,s){super(n),this.stateService=e,this.locale=s,this.productKinds=l.T8N,this.remittanceInfoFields=l.IHR,this.touched=!1,this.id=`bb-compact-amount-${(new Date).getTime()}`,this.groupSeparator=(0,p.dv)(this.locale,p.wE.CurrencyGroup),this.decimalSeparator=(0,p.dv)(this.locale,p.wE.CurrencyDecimal),this.format={groupSeparator:this.groupSeparator,decimalSeparator:this.decimalSeparator,groupSize:3}}ngOnInit(){var e,n,s,a;this.registerFields(),A(l.k8M.onInit,this),this.control=this.group.controls[this.config.name],this.listenAmountOptionChanges(),this.toAccountProduct$=null===(n=null===(e=this.group.parent)||void 0===e?void 0:e.get(l.x2z.counterparty))||void 0===n?void 0:n.valueChanges.pipe((0,T.O)(null===(a=null===(s=this.group.parent)||void 0===s?void 0:s.get(l.x2z.counterparty))||void 0===a?void 0:a.value),(0,x.U)(({accountData:r})=>r),(0,j.h)(r=>!!r),(0,Z.x)((r,_)=>r.id===_.id),(0,M.b)(r=>{var _,u,d,y;const I=null===(_=this.control)||void 0===_?void 0:_.value;(I||0===I)&&(this.stateService.currentState!==l.KyD.EDIT&&(null===(u=this.control)||void 0===u||u.reset(),this.group.controls[l.IHR.amountOptionLabel].reset(),this.group.controls[l.IHR.amountCurrencyGroup].reset(),this.group.controls.scheduleFrequency.reset(),this.group.controls.showFrequencySwitch.reset()),this.customAmount=new ft(null===(d=this.group.controls[l.IHR.amountCurrencyGroup].value)||void 0===d?void 0:d.amount).toFormat(this.format)),this.toggleDependants(),this.toAccountDefaultRecord=r.defaultRecord,this.setAmountOptions(r),this.stateService.setPaymentState(l.KyD.INITIAL),this.options.noBalanceText&&(this.isAmountOptionsZero(r)&&this.control?this.group.removeControl(this.config.name):this.control||(b(this.group,this.config.name,[c.kI.required],this.options.asyncValidators),this.listenAmountOptionChanges())),r.currency&&(null===(y=this.group.get(`${l.IHR.amountCurrencyGroup}.${l.IHR.currency}`))||void 0===y||y.patchValue(r.currency))}))}ngOnDestroy(){var e;A(l.k8M.onDestroy,this),null===(e=this.subscription$)||void 0===e||e.unsubscribe()}registerFields(){b(this.group,l.IHR.amountOptionLabel),b(this.group,this.config.name,this.options.validators,this.options.asyncValidators),b(this.group,"scheduleFrequency"),b(this.group,"showFrequencySwitch")}amountOptionChange(e){var n,s,a,r;const _=(null===(n=this.amountOptions)||void 0===n?void 0:n[e])||{},u=_.label,d=null===(s=this.toAccountDefaultRecord)||void 0===s?void 0:s.currency,y=null===(r=null===(a=this.toAccountDefaultRecord)||void 0===a?void 0:a[_.amountApiField||""])||void 0===r?void 0:r.toString();_.hasCustomAmountInput&&(this.group.controls[l.IHR.amountCurrencyGroup].reset({amount:"",currency:d}),this.group.controls[l.IHR.amountOptionLabel].patchValue(u),this.group.controls.scheduleFrequency.patchValue(_.scheduleFrequency),this.group.controls.showFrequencySwitch.patchValue(_.showFrequencySwitch)),y&&this.group.patchValue({[l.IHR.amountCurrencyGroup]:{amount:y,currency:d},[l.IHR.amountOptionLabel]:u,scheduleFrequency:_.scheduleFrequency,showFrequencySwitch:_.showFrequencySwitch}),this.toggleDependants()}setAmountOptions(e){var n;const{creditCard:s,loan:a}=(null===(n=this.options)||void 0===n?void 0:n.amountOptions)||{};switch(e.productKindName){case l.T8N.creditCard:this.amountOptions=(null==s?void 0:s.map(Kt))||[];break;case l.T8N.loanAccount:this.amountOptions=(null==a?void 0:a.map(Kt))||[];break;default:this.amountOptions=[]}}isAmountOptionsZero(e){var n,s;if((null===(n=this.amountOptions)||void 0===n?void 0:n.length)&&e)return null===(s=this.amountOptions)||void 0===s?void 0:s.every(a=>{var r;return!(null==a?void 0:a.amountApiField)||0===Number(null===(r=e.defaultRecord)||void 0===r?void 0:r[a.amountApiField])})}listenAmountOptionChanges(){var e,n;this.subscription$=null===(e=this.control)||void 0===e?void 0:e.valueChanges.pipe((0,T.O)(null===(n=this.control)||void 0===n?void 0:n.value),(0,Z.x)(),(0,j.h)(s=>(s||0===s)&&this.stateService.currentState!==l.KyD.EDIT)).subscribe(this.amountOptionChange.bind(this))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(l.b2t),t.Y36(Q),t.Y36(t.soG))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-internal-amount-options"]],features:[t.qOj],decls:6,vars:3,consts:[[4,"ngIf"],["labelTemplate",""],["otherTemplate",""],["class","bb-fieldset bb-amount-options",3,"ngClass","formGroup",4,"ngIf"],[1,"bb-fieldset","bb-amount-options",3,"ngClass","formGroup"],["class","bb-block bb-block--md",4,"ngIf","ngIfElse"],["noBalanceMessage",""],[1,"bb-block","bb-block--md"],["id","amount-option-error-message",1,"d-block","bb-block","bb-block--md",3,"control","validationMessages"],[3,"formControlName","aria-describedby","preselect","horizontal"],[3,"aria-labelledby","aria-describedby","labelTemplate","labelTemplateContext","value",4,"ngFor","ngForOf"],[3,"aria-labelledby","aria-describedby","labelTemplate","labelTemplateContext","value"],[1,"bb-block","bb-block--md","bb-amount-options__no-balance-text"],[1,"bb-stack","bb-stack--wrap",3,"ngClass"],[1,"bb-stack__item","bb-stack__item--fill"],[1,"bb-stack__item","bb-stack__break--sm-down"],[3,"amount","currency","mapCurrency","bbHighlight","abbreviate","showPlusSign","trailingZeroes"],[1,"bb-text-support","bb-subtitle","bb-input-radio-group__radio-label"],[1,"bb-amount-input__field--large","bb-form-field","bb-form-field--md",3,"ngClass"],["class","bb-block bb-block--sm",4,"ngIf"],[1,"bb-block","bb-block--sm"],[1,"position-relative",3,"formGroup"],[3,"formControlName","mapCurrency","wrapperClasses","currency","required","autoDecimal","aria-describedby","placeholder","maxLength","focusout"],[3,"id","control","validationMessages"]],template:function(e,n){1&e&&(t.YNc(0,Ti,2,1,"ng-container",0),t.ALo(1,"async"),t.YNc(2,Ni,7,12,"ng-template",null,1,t.W1O),t.YNc(4,Li,5,6,"ng-template",null,2,t.W1O)),2&e&&t.Q6J("ngIf",t.lcZ(1,1,n.toAccountProduct$))},directives:[R,N.Af,N.f2,rt.G4,ht.l,p.O5,p.mk,c.JL,c.sg,c.JJ,c.u,p.sg,Ge.Z,c.Q7],pipes:[p.Ov],encapsulation:2}),o})(),De=(()=>{class o{ngOnInit(){var e;const n=null===(e=this.group.parent)||void 0===e?void 0:e.get(l.x2z.remittanceInfo);this.headerAddition$=null==n?void 0:n.valueChanges.pipe((0,x.U)(s=>s[l.IHR.amountOptionLabel])),A(l.k8M.onInit,this)}ngOnDestroy(){A(l.k8M.onDestroy,this)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-header-ui"]],decls:1,vars:1,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"bb-stack"],[3,"headingType","heading","headingClasses"],["class","bb-text-support bb-highlight bb-highlight--regular",4,"ngIf"],["class","bb-schedule-header__sepatator",4,"ngIf"],[1,"bb-text-support","bb-highlight","bb-highlight--regular"],[1,"bb-schedule-header__sepatator"]],template:function(e,n){1&e&&t.YNc(0,wi,6,8,"div",0),2&e&&t.Q6J("ngIf",!(null!=n.config&&n.config.hidden))},directives:[Dt.G,p.O5,p.mk],pipes:[p.Ov],encapsulation:2,changeDetection:0}),o})(),Te=(()=>{class o{constructor(e){this.elRef=e}ngOnInit(){this.control=this.group.get(l.IHR.purposeOfPayment)||b(this.group,this.config.name,this.options.validators,this.options.asyncValidators,this.options.defaultValue,this.config),this.options.isCollapsed=!this.control.value&&(void 0===this.options.isCollapsed||this.options.isCollapsed),A(l.k8M.onInit,this)}expand(){this.options.isCollapsed=!1,(0,l.pU_)(".form-control",this.elRef.nativeElement)}selectPurpose(e){this.control.setValue(e)}ngOnDestroy(){A(l.k8M.onDestroy,this)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-purpose-of-payment"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["collapsedTmpl",""],[1,"bb-dynamic-input","form-group",3,"formGroup","ngClass"],[3,"hidden"],[4,"ngIf"],[3,"control","validationMessages","label"],["data-role","purpose-of-payment-label",1,"bb-dynamic-input__label",3,"id","for","textContent"],["class","bb-dynamic-input__helper-text bb-text-support","data-role","purpose-of-payment-optional-label",3,"id","textContent",4,"ngIf"],["data-role","purpose-of-payment-selector",3,"formControlName","minLength","maxLength","showCharCounter","placeholder","autocomplete","aria-describedby"],["inputEl",""],[1,"bb-dynamic-input__desc","bb-text-support","bb-subtitle",3,"hidden","id","textContent"],["descElem",""],["data-role","purpose-of-payment-optional-label",1,"bb-dynamic-input__helper-text","bb-text-support",3,"id","textContent"],["data-role","purpose-of-payment-selector-dropdown",3,"formControlName","label","purposes","isOptional","helperText","placeholder","searchPlaceholder","dropdownIcon","selectedPurpose","selectPurpose"],[1,"bb-dynamic-input__collapse-btn-container",3,"hidden"],["data-role","purpose-of-payment-btn","bbButton","",1,"bb-dynamic-input__collapse-btn",3,"color","buttonSize","click"],["class","bb-dynamic-input__collapse-btn-icon mr-2",3,"name","size",4,"ngIf"],[1,"bb-dynamic-input__collapse-btn-label"],[1,"bb-dynamic-input__collapse-btn-icon","mr-2",3,"name","size"]],template:function(e,n){if(1&e&&(t.YNc(0,Yi,6,9,"ng-container",0),t.YNc(1,Wi,6,9,"ng-template",null,1,t.W1O)),2&e){const s=t.MAs(2);t.Q6J("ngIf",(null==n.control?null:n.control.value)||!(null!=n.options&&n.options.isCollapsed))("ngIfElse",s)}},directives:[st.m,l.GDP,R,Y.o,p.O5,c.JL,c.sg,p.mk,c.JJ,c.u,V.Hq],encapsulation:2}),o})(),Pe=(()=>{class o{ngOnInit(){A(l.k8M.onInit,this)}ngOnDestroy(){A(l.k8M.onDestroy,this)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-alert"]],decls:1,vars:1,consts:[[4,"ngIf"],["role","alert",3,"ngClass"],[3,"title","modifier","dismissible",4,"ngIf"],[3,"title","modifier","dismissible"],[1,"bb-block","bb-block--no-margin"]],template:function(e,n){1&e&&t.YNc(0,$i,3,2,"ng-container",0),2&e&&t.Q6J("ngIf",!(null!=n.config&&n.config.hidden))},directives:[Ct.w,p.O5,p.mk],encapsulation:2}),o})(),Ne=(()=>{class o{constructor(){this.destroy$=new W.x,this.id=(new Date).getTime()}ngOnInit(){b(this.group,this.config.name,this.options.validators,this.options.asyncValidators,this.options.defaultValue,this.config),b(this.group,l.YMR.frequency),b(this.group,l.YMR.scheduleInfo),A(l.k8M.onInit,this),this.setValue()}ngOnDestroy(){A(l.k8M.onDestroy,this),this.destroy$.next(),this.destroy$.complete()}setValue(){var e;null===(e=this.group.controls[this.config.name])||void 0===e||e.valueChanges.pipe((0,Z.x)(),(0,v.R)(this.destroy$)).subscribe(n=>{var s,a,r,_;if(!this.config.hidden){const u=n?null===(s=this.options.values)||void 0===s?void 0:s.on:null===(a=this.options.values)||void 0===a?void 0:a.off,d=n?this.options.description:void 0;null===(r=this.group.controls[l.YMR.frequency])||void 0===r||r.patchValue(u),null===(_=this.group.controls[l.YMR.scheduleInfo])||void 0===_||_.patchValue(d)}})}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-schedule-switch-ui"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"form-group","bb-dynamic-input","bb-schedule-switch",3,"formGroup","ngClass"],[1,"bb-inline-stack","bb-stack--align-top"],[1,"bb-inline-stack__item--spacing-md"],[3,"id","formControlName"],[1,"b-block","bb-block--xs","bb-stack","bb-schedule-switch__label"],["class","bb-stack__item bb-stack__item--spacing-xs bb-block bb-block--no-margin",4,"ngIf"],["placement","bottom",3,"bbTooltip","triggers"],["name","info","color","secondary","size","sm",1,""],[1,"bb-subtitle","bb-text-support","bb-schedule-switch__description"],[3,"control","validationMessages","label"],[1,"bb-stack__item","bb-stack__item--spacing-xs","bb-block","bb-block--no-margin"]],template:function(e,n){1&e&&t.YNc(0,qi,13,11,"ng-container",0),2&e&&t.Q6J("ngIf",!(null!=n.config&&n.config.hidden))},directives:[gt.q,Y.o,R,p.O5,c.JL,c.sg,p.mk,c.JJ,c.u,Tt.i],encapsulation:2}),o})(),Fe=(()=>{class o{constructor(){this.iconName="clear"}ngOnInit(){var e;this.hideBeneficiaryFieldsControl=b(this.group,l.X7M.hideBeneficiaryFields),this.initiatorIdControl=null===(e=this.group.parent)||void 0===e?void 0:e.get([l.x2z.initiator,l.dCm.id]),A(l.k8M.onInit,this)}onClearValues(){var e,n,s,a;const _=this.group.parent.get([l.x2z.initiator,l.dCm.name]);_.value&&_.setErrors(null),"function"==typeof(null===(n=null===(e=this.options)||void 0===e?void 0:e.clearOptions)||void 0===n?void 0:n.onClear)?this.options.clearOptions.onClear(this.group):oe(this.group),null===(s=this.hideBeneficiaryFieldsControl)||void 0===s||s.setValue(!0),null===(a=this.initiatorIdControl)||void 0===a||a.updateValueAndValidity()}showClearBtn(){const e=this.group.get(l.IW3.name),n=this.group.get(l.IW3.accountNumber),s=this.group.get([l.IW3.creditorBank,l.IW3.bankBranchCode]),a=this.group.get([l.IW3.creditorBank,l.IW3.bic]);return(null==e?void 0:e.value)||(null==n?void 0:n.value)||(null==s?void 0:s.value)||(null==a?void 0:a.value)}ngOnDestroy(){A(l.k8M.onDestroy,this)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-beneficiary-header"]],decls:1,vars:1,consts:function(){let i;return i="Clear",[["class","bb-stack",3,"ngClass",4,"ngIf"],[1,"bb-stack",3,"ngClass"],[1,"bb-inline-stack__item","bb-fieldset__heading","break-word"],[4,"ngIf"],["class","bb-stack__item--push-right","bbButton","","color","link","data-role","clear-beneficiary-button",3,"click",4,"ngIf"],["bbButton","","color","link","data-role","clear-beneficiary-button",1,"bb-stack__item--push-right",3,"click"],[3,"name"],i]},template:function(e,n){1&e&&t.YNc(0,ol,5,4,"div",0),2&e&&t.Q6J("ngIf",null==n.config||null==n.config.options?null:n.config.options.label)},directives:[Y.o,p.O5,p.mk,V.Hq],encapsulation:2}),o})();var nt=(()=>{return(o=nt||(nt={})).ERROR="error",o.EMPTY="empty",o.LIST="list",o.LOADING="loading",nt;var o})();const xs={[l.fUi.text]:Rt,[l.fUi.textarea]:de,[l.fUi.address]:ie,[l.fUi.select]:pe,[l.fUi.radio]:ue,[l.fUi.debitAccountSelector]:Ft,[l.fUi.beneficiarySelector]:re,[l.fUi.schedule]:_e,[l.fUi.amount]:le,[l.fUi.sanctionedCurrencyAmount]:me,[l.fUi.checkbox]:ce,[l.fUi.switch]:fe,[l.fUi.date]:be,[l.fUi.number]:he,[l.fUi.phone]:ye,[l.fUi.selectPaymentOption]:Ce,[l.fUi.paymentCost]:Ae,[l.fUi.chargeBearer]:Lt,[l.fUi.internalAccountSelector]:Ee,[l.fUi.compactAmount]:Oe,[l.fUi.scheduleHeader]:Ie,[l.fUi.buttonGroup]:Me,[l.fUi.countrySelector]:ge,[l.fUi.sanctionedCountrySelector]:xe,[l.fUi.internalAmountOptions]:Be,[l.fUi.header]:De,[l.fUi.purposeOfPayment]:Te,[l.fUi.alert]:Pe,[l.fUi.scheduleSwitch]:Ne,[l.fUi.beneficiaryGroupHeader]:Fe,[l.fUi.contactSelector]:(()=>{class o{constructor(){this.listStateType=nt,this.inputFocused=!1,this.destroy$=new W.x,this.searchQuery="",this.defaultEmptyStateTitle="No contacts",this.defaultEmptyStateSubtitle="You don't have any contacts to be displayed.",this.defaultErrorStateTitle="Oops! Something went wrong",this.defaultErrorStateSubtitle="We are unable to load your contacts Please try again."}ngOnInit(){this.registerFields(),A(l.k8M.onInit,this),this.listState=nt.LOADING,this.contacts$=this.options.items$.pipe((0,x.U)(e=>e instanceof Ze.UA?null:e),(0,x.U)(e=>this.options.mapItems&&(null==e?void 0:e.length)?this.options.mapItems(e):e),(0,x.U)(e=>null==e?void 0:e.map(n=>Object.assign(Object.assign({},n),{transferKey:this.getTransferEntry(n)}))),(0,M.b)(e=>{var n,s;this.setStatus(e),this.inputFocused&&this.searchQuery&&(e&&e.length?null===(n=this.dropdownItem)||void 0===n||n.open():null===(s=this.dropdownItem)||void 0===s||s.close())})),this.group.valueChanges.pipe((0,v.R)(this.destroy$),(0,G.b)(1e3),(0,x.U)(({accountNumber:e})=>e)).subscribe(this.setScheme.bind(this))}registerFields(){b(this.group,this.config.name,this.options.validators,this.options.asyncValidators,this.options.defaultValue),b(this.group,l.IW3.role,[],[],"CREDITOR"),b(this.group,l.IW3.selectedContact,[],[]),b(this.group,l.IW3.schemeName),b(this.group,l.X7M.selectedBeneficiary)}fetchCreditorItems(e){var n;(null===(n=this.options)||void 0===n?void 0:n.fetchItems$)&&this.options.fetchItems$.next(e)}onSelectContact(e,n){var s,a,r,_,u;null===(s=this.group.get(this.config.name))||void 0===s||s.patchValue(n.name),null===(a=this.group.get(l.IW3.accountNumber))||void 0===a||a.patchValue(null===(r=this.getTransferEntry(n))||void 0===r?void 0:r.value),null===(_=this.group.get([l.X7M.selectedBeneficiary]))||void 0===_||_.patchValue(n),null===(u=this.dropdownItem)||void 0===u||u.close(),this.setContactId(n)}handleSearch(e){var n;this.inputFocused&&(this.searchQuery=e,this.fetchCreditorItems({params:{query:e},type:l.AZU.CONTACTS}),e||null===(n=this.dropdownItem)||void 0===n||n.close())}setStatus(e){e?e.length?e.length&&(this.listState=nt.LIST):this.listState=nt.EMPTY:this.listState=nt.ERROR}onClear(){var e;null===(e=this.group.get(this.config.name))||void 0===e||e.reset(),this.fetchCreditorItems({type:l.AZU.CONTACTS})}focusHandler(){this.inputFocused=!0}onBlur(){this.inputFocused=!1}setContactId(e){var n;null===(n=this.group.get([l.IW3.selectedContact]))||void 0===n||n.patchValue({contactId:null==e?void 0:e.id})}setScheme(e){var n;if(!e)return;const s=null===(n=this.options.contactSchemes)||void 0===n?void 0:n.find(({regex:r})=>null==r?void 0:r.test(e));let a;switch(null==s?void 0:s.name){case l._be.email:a=h.B7.EMAIL;break;case l._be.phoneNumber:a=h.B7.MOBILE;break;case l._be.accountNumber:a=h.B7.BBAN}a&&this.group.controls[l.IW3.schemeName].patchValue(a,{emitEvent:!1})}getTransferEntry(e){var n,s;const a=l._be.accountNumber,r=(null===(s=null===(n=this.options.contactSchemes)||void 0===n?void 0:n.find(_=>!!e.accounts[0][_.name]))||void 0===s?void 0:s.name)||a;return{scheme:r,value:e.accounts[0][r]}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),A(l.k8M.onDestroy,this)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-contact-selector"]],viewQuery:function(e,n){if(1&e&&t.Gf(il,5),2&e){let s;t.iGM(s=t.CRH())&&(n.dropdownItem=s.first)}},decls:9,vars:1,consts:function(){let i,e,n,s;return i="Contact",e=" Contact name: ",n="{VAR_SELECT, select, accountNumber {Account Number } email {Email } phoneNumber {Phone Number }}",n=t.Zx4(n,{VAR_SELECT:"\ufffd0\ufffd"}),s=" " + n + " ",[["class","form-group bb-dynamic-input",3,"ngClass",4,"ngIf"],["contactTemp",""],["emptyState",""],["errorState",""],["loading",""],[1,"form-group","bb-dynamic-input",3,"ngClass"],[3,"for",4,"ngIf"],["ngbDropdown","",1,"full-width-typeahead","bb-payment-card-state","bb-block","bb-block--md"],["dd","ngbDropdown"],["class","bb-dynamic-input__helper-text bb-text-support",3,"textContent",4,"ngIf"],["ngbDropdownAnchor","",3,"formControl","placeholder","squareBorder","autocomplete","showClear","id","clear","focus","blur","ngModelChange"],["bbButton","","ngbDropdownToggle","","color","unstyled"],["name","contacts"],["ngbDropdownMenu","",1,"dropdown-menu","bb-product-selector__dropdown-menu","dropdown-menu-right","pre-scrollable-typeahead"],[1,"dropdown-menu-inner-container"],[4,"ngIf"],[3,"control","validationMessages","label"],[3,"for"],[1,"bb-dynamic-input__helper-text","bb-text-support",3,"textContent"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngTemplateOutlet"],["role","menuitem","type","button","ngbDropdownItem","",1,"bb-stack",3,"click"],[1,"bb-stack__item"],[1,"sr-only"],i,["size","xl","name","account-box",1,"bb-stack","text-muted"],["class","text-left bb-stack__item",4,"ngIf"],[1,"text-left","bb-stack__item"],["id","contact_accountNameLabel",1,"sr-only"],e,["attr.aria-labelledby","contact_accountNameLabel",1,"bb-text-bold"],["id","contact_accountNumberLabel",1,"sr-only"],s,["class","text-dark","attr.aria-labelledby","contact_accountNumberLabel","class","bb-subtitle bb-text-support",4,"ngIf"],["attr.aria-labelledby","contact_accountNumberLabel",1,"bb-subtitle","bb-text-support"],["data-role","contacts-empty-state","iconSize","xxl","iconModifier","contacts",1,"bb-state-container",3,"title","subtitle"],["data-role","contacts-error-state","iconSize","xxl","iconModifier","error-outline",1,"bb-state-container",3,"title","subtitle"],[1,"bb-state-container"],["loaderSize","md"]]},template:function(e,n){1&e&&(t.YNc(0,bl,16,20,"div",0),t.YNc(1,Cl,6,1,"ng-template",null,1,t.W1O),t.YNc(3,Al,1,2,"ng-template",null,2,t.W1O),t.YNc(5,vl,1,2,"ng-template",null,3,t.W1O),t.YNc(7,Sl,2,0,"ng-template",null,4,t.W1O)),2&e&&t.Q6J("ngIf",!(null!=n.config&&n.config.hidden))},directives:[Ye.B,Y.o,R,bt.s,at.Q,p.O5,p.mk,ut.jt,ut.YE,c.JJ,c.oH,V.Hq,ut.iD,ut.Vi,p.sg,p.tP,ut.TH],pipes:[p.Ov],encapsulation:2}),o})(),[l.fUi.accountSelector]:Ft};let pt=(()=>{class o{constructor(){this.componentsMap=Object.assign({},xs)}registerCustomFields(e={}){for(const n in e)e.hasOwnProperty(n)&&(this.componentsMap[n]=e[n])}registerCustomFieldsForPaymentConfigs(e){for(const n of e)n.customFields&&this.registerCustomFields(n.customFields)}getFormField(e){return this.componentsMap[e]||Rt}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})(),Ut=(()=>{class o{constructor(e){this.visibilityService=e,this.gc$=new t.vpe}ngOnInit(){this.eventName=this.config.parent?`${this.config.parent}.${this.config.name}`:this.config.name,this.visibilityService.show$.pipe((0,x.U)(({name:e,items:n})=>it(n,e).find(s=>s.parent===this.eventName)),(0,v.R)(this.gc$)).subscribe(e=>{var n;(null===(n=null==e?void 0:e.items)||void 0===n?void 0:n.length)&&this.showFields(e.items)}),this.visibilityService.hide$.pipe((0,x.U)(({name:e,items:n})=>it(n,e).find(s=>s.parent===this.eventName)),(0,v.R)(this.gc$)).subscribe(e=>{var n;(null===(n=null==e?void 0:e.items)||void 0===n?void 0:n.length)&&this.hideFields(e.items)})}scanHideableItems(e){const n={};return e.forEach(s=>{n[s]=!0}),n}showFields(e){const n=this.scanHideableItems(e);let s;this.config.fields.forEach(a=>{var r;n[a.name]&&(a.hidden=!1,s=this.group.get(`${this.config.name}.${a.name}`),s&&(null===(r=null==a?void 0:a.options)||void 0===r?void 0:r.isConditionalMandatory)&&(s.setValidators([c.kI.required,...a.options.validators||[]]),s.setAsyncValidators([...a.options.asyncValidators||[]]),s.updateValueAndValidity()))})}hideFields(e){const n=this.scanHideableItems(e);let s;this.config.fields.forEach(a=>{var r,_,u,d,y,I;n[a.name]&&(a.hidden=!0,s=(null===(r=null==a?void 0:a.options)||void 0===r?void 0:r.mapToField)?this.getMappedField(a.name,a.options.mapToField):this.group.get(`${this.config.name}.${a.name}`),s&&!(null===(_=null==a?void 0:a.options)||void 0===_?void 0:_.keepValueOnHidden)&&((null===(u=null==a?void 0:a.options)||void 0===u?void 0:u.isConditionalMandatory)&&(s.setValidators(null),s.setAsyncValidators(null),s.updateValueAndValidity()),s.reset(),(null===(d=null==a?void 0:a.options)||void 0===d?void 0:d.defaultValue)&&s.patchValue(a.options.defaultValue)),this.hideNestedField(a),(null===(y=null==a?void 0:a.fields)||void 0===y?void 0:y.length)&&(null===(I=null==a?void 0:a.fields)||void 0===I||I.forEach(K=>this.hideNestedField(K))))})}hideNestedField(e){var n,s;(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.dependants)&&!(null===(s=null==e?void 0:e.options)||void 0===s?void 0:s.keepDependantsOnHide)&&it(e.options.dependants,e.parent).forEach(({parent:a,items:r})=>{this.visibilityService.hideItems(a,r)})}getMappedField(e,n){let a,s=this.group;for(;s;){if(a=s.get(`${n}.${e}`),a)return a;s=s.parent}return null}ngOnDestroy(){this.gc$.next(),this.gc$.complete()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Q))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-group"]],inputs:{config:"config",group:"group"},ngContentSelectors:Wt,decls:9,vars:1,consts:[[4,"ngIf"],["defaultTmpl",""],["subGroup",""],["collapsibleTmpl",""],["content",""],[3,"ngClass",4,"ngIf","ngIfElse"],[3,"ngClass"],[4,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],[3,"heading",4,"ngIf","ngIfElse"],[3,"heading"],["class","bb-fieldset",4,"ngIf"],[1,"bb-fieldset"],[1,"d-block","mt-5",3,"options"],["data-role","schedule-toggle"],["collapse",""],["bbCollapsibleHeader",""],["bbCollapsibleBody",""],[1,"bb-stack","justify-content-between","col-12",3,"click"],[1,"bb-label"],["bbButton","","color","outline",3,"click"],[3,"name"],[1,"mt-0","mx-3"]],template:function(e,n){1&e&&(t.F$t(),t.YNc(0,Ml,2,2,"ng-container",0),t.YNc(1,Pl,1,2,"ng-template",null,1,t.W1O),t.YNc(3,Fl,1,1,"ng-template",null,2,t.W1O),t.YNc(5,kl,5,0,"ng-template",null,3,t.W1O),t.YNc(7,wl,1,0,"ng-template",null,4,t.W1O)),2&e&&t.Q6J("ngIf",!(null!=n.config&&n.config.hidden))},directives:[Pt.e,l.yHh,F.tB,Y.o,p.O5,p.mk,p.tP,F.gM,V.Hq,F.rJ],encapsulation:2}),o})(),kt=(()=>{class o{constructor(e,n,s){this.resolver=e,this.container=n,this.componentsFactory=s}ngOnInit(){const e=this.componentsFactory.getFormField(this.config.type),n=this.resolver.resolveComponentFactory(e);this.component=this.container.createComponent(n),this.component.instance.config=this.config,this.component.instance.group=this.group,this.component.instance.options=this.options}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t._Vd),t.Y36(t.s_b),t.Y36(pt))},o.\u0275dir=t.lG2({type:o,selectors:[["","bbPaymentFormField",""]],inputs:{options:"options",config:"config",group:"group"}}),o})(),Le=(()=>{class o{constructor(e,n,s){this.fb=e,this.componentsFactory=n,this.formEl=s,this.isModalView=!1,this.isTemplateMode=!1,this.isDebitPayment=!1,this.isEditPaymentModal=!1,this.paymentMode=l.x66.CREATE_PAYMENT,this.submitted=new t.vpe,this.clear=new t.vpe,this.discard=new t.vpe,this.editPaymentCancel=new t.vpe,this.editPaymentSubmit=new t.vpe,this.isSubmitting$=new k.X(!1),this.controls=[],this.paymentModeType=l.x66,this.isSubmittingShared$=this.isSubmitting$.asObservable().pipe((0,m.d)(1))}set submitting(e){this.isSubmitting$.next(e)}discardForm(){this.discard.emit()}resetForm(){this.clear.emit()}scrollToError(){var e;(0,l.$ZS)(null===(e=this.formEl)||void 0===e?void 0:e.nativeElement,"small.bb-input-validation-message")}createFormFields(e,n,s,a){e.forEach(r=>{const _=r.options&&r.options.mapToField,u=_?this.form.get(_):n,d=_||a,y=[];if(r.fields instanceof Array){const I=u.get(r.name)||this.fb.group({});this.createFormFields(r.fields,I,y,d?`${d}.${r.name}`:r.name),u.addControl(r.name,I),s.push(Object.assign(Object.assign({},r),{fields:y,parent:a}))}else s.push(Object.assign(Object.assign({},r),{parent:d}))})}getButtonGroupConfig(){return{type:l.fUi.buttonGroup,name:l.fUi.buttonGroup,options:{submitting$:this.isSubmitting$,isModalView:this.isModalView,isTemplateMode:this.isTemplateMode,templateModeType:this.templateModeType,paymentMode:this.paymentMode,discard:this.discardForm.bind(this),submit:this.onSubmit.bind(this),reset:this.resetForm.bind(this)}}}listenDefaultBankCodeSettingChange(){this.defaultBankCodeSettingSubscription=this.defaultBankCodeSettingControl.valueChanges.subscribe(()=>{Ht(this.form,this.config)})}listenFormSettingChange(){this.inputFormSettingSubscription=this.inputFormSettingControl.valueChanges.pipe((0,T.O)(this.inputFormSettingControl.value),(0,Z.x)(),(0,j.h)(e=>!!e)).subscribe(e=>{for(const n of e.inputFormSettings||[])Nt({inputFormSetting:n,form:this.form,config:this.config});ne({form:this.form,config:this.config})})}ngOnInit(){this.form=this.formItem||this.fb.group({}),this.buttonGroupConfig=this.getButtonGroupConfig(),this.componentsFactory.registerCustomFields(this.config.customFields),this.createFormFields(this.config.fields,this.form,this.controls),b(this.form,"paymentType",[],[],this.config.paymentType),this.defaultBankCodeSettingControl=b(this.form,"defaultBankCodeSetting"),this.inputFormSettingControl=this.form.get(l.okK.inputFormFromSettings)||b(this.form,l.okK.inputFormFromSettings),this.isTemplateMode&&(this.templateNameControl=b(this.form,l.ZDt.templateName,[c.kI.required]),this.paymentMode===l.x66.EDIT_TEMPLATE&&b(this.form,l.ZDt.paymentTemplateId)),this.isDebitPayment&&b(this.form,l.X7M.isDebitPayment,[],[],!0),this.listenDefaultBankCodeSettingChange(),this.listenFormSettingChange()}ngOnDestroy(){this.inputFormSettingSubscription&&this.inputFormSettingSubscription.unsubscribe(),this.defaultBankCodeSettingSubscription&&this.defaultBankCodeSettingSubscription.unsubscribe()}onEditionSubmit(){this.form.markAllAsTouched(),this.form.valid?this.editPaymentSubmit.emit(this.form):this.scrollToError()}onEditionCancel(){this.editPaymentCancel.emit(this.form)}getIcon(){return(0,l.Bod)(this.config.paymentType)}onSubmit(){this.form.markAsDirty(),this.form.markAllAsTouched(),this.form.updateValueAndValidity(),this.form.valid?this.form.valid&&!this.submitting&&this.submitted.emit(this.form):this.scrollToError()}getFormGroup(e){return this.form.get(e.parent)||this.form}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(c.qu),t.Y36(pt),t.Y36(t.SBq))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-payord-form"]],inputs:{config:"config",isModalView:"isModalView",isTemplateMode:"isTemplateMode",isDebitPayment:"isDebitPayment",isEditPaymentModal:"isEditPaymentModal",templateModeType:"templateModeType",formItem:"formItem",submitting:"submitting",paymentMode:"paymentMode"},outputs:{submitted:"submitted",clear:"clear",discard:"discard",editPaymentCancel:"editPaymentCancel",editPaymentSubmit:"editPaymentSubmit"},features:[t._Bn([Q,pt])],decls:11,vars:6,consts:function(){let i,e,n,s;return i="Name of the template",e=" Template name is required ",n=" Next ",s=" Cancel ",[[1,"dynamic-form",3,"formGroup","ngSubmit"],["class","bb-stack bb-stack--density-sm bb-text-support bb-block bb-block--lg col-12",4,"ngIf"],["class","form-group col-12",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["editButtonGroup",""],["formGroupTmpl",""],["formControlTmpl",""],[1,"bb-stack","bb-stack--density-sm","bb-text-support","bb-block","bb-block--lg","col-12"],["class","bb-stack__item",3,"name",4,"ngIf"],["data-role","payment-type-label",1,"bb-stack__item"],[1,"bb-stack__item",3,"name"],[1,"form-group","col-12"],["label",i,"autocomplete","off",3,"formControl","maxLength","showCharCounter"],[3,"showErrors"],[4,"ngIf"],["data-role","required-template-name-error"],e,[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"btn-container","bb-button-bar"],["color","primary","data-role","submit-button",1,"bb-button-bar__button",3,"isLoading","click"],n,["bbButton","","color","link","data-role","cancel-button",1,"bb-button-bar__button",3,"disabled","click"],s,[3,"config","group"],["bbPaymentFormField","",3,"config","options","group"]]},template:function(e,n){if(1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.YNc(1,Gl,4,2,"div",1),t.YNc(2,Yl,4,5,"div",2),t.YNc(3,Wl,2,4,"ng-container",3),t.YNc(4,$l,2,4,"ng-container",4),t.YNc(5,Hl,7,6,"ng-template",null,5,t.W1O),t.YNc(7,zl,2,3,"ng-template",null,6,t.W1O),t.YNc(9,jl,1,3,"ng-template",null,7,t.W1O),t.qZA()),2&e){const s=t.MAs(6);t.Q6J("formGroup",n.form),t.xp6(1),t.Q6J("ngIf",n.paymentMode===n.paymentModeType.EDIT_TEMPLATE||n.paymentMode===n.paymentModeType.COPY_PAYMENT),t.xp6(1),t.Q6J("ngIf",n.isTemplateMode&&n.templateNameControl),t.xp6(1),t.Q6J("ngForOf",n.controls),t.xp6(1),t.Q6J("ngIf",n.paymentMode!==n.paymentModeType.EDIT_PAYMENT)("ngIfElse",s)}},directives:[Y.o,st.m,g.d,yt.K,Ut,c._Y,c.JL,c.sg,p.O5,c.JJ,c.oH,p.sg,p.tP,V.Hq,kt],pipes:[p.Ov],encapsulation:2}),o})();const wt=(o,i,e,n,s="")=>{o.forEach(a=>{const r=a.options&&a.options.mapToField,_=r?((o,i)=>{let e=i.get(o),n=i;const s=o.split(".");if(e)return e;for(const a of s)n.get(a)||n.addControl(a,new c.cw({})),e=n.get(a),n=e;return e})(r,n):i,u=r||s,d=[];if(a.fields instanceof Array){const y=_.get(a.name)||new c.cw({});wt(a.fields,y,d,n,u?`${u}.${a.name}`:a.name),_.addControl(a.name,y),e.push(Object.assign(Object.assign({},a),{fields:d,parent:s}))}else e.push(Object.assign(Object.assign({},a),{parent:u}))})};let Ue=(()=>{class o{constructor(e){this.formEl=e,this.baseFields=[],this.paymentTypes=[],this.paymentState=l.KyD.INITIAL,this.isDebitPayment=!1,this.paymentOptionsError=!1,this.checkClosedPaymentsAccess=!1,this.shouldApplyTemplate=!1,this.isModalView=!1,this.applyPaymentTemplate=new t.vpe,this.discard=new t.vpe,this.submitted=new t.vpe,this.selectPaymentOption=new t.vpe,this.clear=new t.vpe,this.selectConfig=new t.vpe,this.gc$=new W.x,this.isSubmitting$=new k.X(!1),this.fetchingOptions$=new k.X(!1),this.currentControls=[],this.shouldResetPaymentOptions=!1,this.debounceInput=(0,C.z)((0,v.R)(this.gc$),(0,G.b)(500),(0,Z.x)()),this.controls$=new k.X([]),this.paymentOptionControls$=new k.X(void 0),this.baseControls$=new k.X([]),this.taggedBaseFields=[],this.retainableFields=[`${l.x2z.counterparty}.${l.IW3.postalAddress}`,`${l.x2z.counterparty}.${l.IW3.creditorBank}.${l.IW3.postalAddress}`,`${l.x2z.counterparty}.${l.IW3.creditorBank}.${l.IW3.bic}`,`${l.x2z.counterparty}.${l.IW3.creditorBank}.${l.IW3.bankName}`]}set fetchingOptions(e){this.fetchingOptions$.next(!!e)}set submitting(e){this.isSubmitting$.next(e)}discardForm(){this.discard.emit()}resetForm(){this.selectConfig.next(void 0),this.selectPaymentOption.next(void 0),this.gc$.next(),this.clear.next()}ngOnInit(){this.form=this.formItem||new c.cw({}),this.paymentTypeControl=b(this.form,"paymentType"),this.registerPaymentOptionControls(),this.listenPaymentOptionsChange(),this.listenFormSettingChange(),wt(this.baseFields,this.form,this.taggedBaseFields,this.form),this.baseControls$.next(this.taggedBaseFields),this.currentControls=this.baseFields,this.listenChanges=this.fetchPaymentOptionsListener||this.listenCriticalFieldChanges,this.registerPostalAddressFormGroups(),b(this.form,"isEditMode",[],[],this.paymentState===l.KyD.EDIT),this.paymentState===l.KyD.EDIT&&this.selectedPaymentConfig&&this.listenPaymentType(this.selectedPaymentConfig.paymentType),this.isDebitPayment&&b(this.form,l.X7M.isDebitPayment,[],[],!0),this.buttonGroupConfig=this.getButtonGroupConfig(),this.renderPaymentOptionControls()}ngAfterViewInit(){this.listenChanges(this.form,this.fetchOptions$),this.listenPaymentTypeChanges(),this.shouldApplyTemplate&&this.applyPaymentTemplate.emit(this.form)}ngOnDestroy(){this.gc$.next(),this.gc$.complete(),this.controls$.complete(),this.paymentOptionControls$.next([]),this.paymentOptionControls$.complete()}getButtonGroupConfig(){return{type:l.fUi.buttonGroup,name:l.fUi.buttonGroup,options:{submitting$:this.isSubmitting$,isLoading$:this.fetchingOptions$,submit:this.onSubmit.bind(this),reset:this.resetForm.bind(this),discard:this.discardForm.bind(this),isModalView:this.isModalView}}}registerPaymentOptionControls(){this.chargeBearerControl=b(this.form,l.okK.chargeBearer),this.chargeBearerOptionsControl=b(this.form,l.okK.chargeBearerOptions),this.transferFeeControl=b(this.form,l.okK.transferFee),this.selectPaymentOptionControl=b(this.form,l.okK.selectPaymentOption),this.inputFormSettingControl=b(this.form,l.okK.inputFormFromSettings)}registerPostalAddressFormGroups(){const e=this.form.get(l.x2z.counterparty);let n=e.get(l.IW3.creditorBank);n||(n=new c.cw({}),e.addControl(l.IW3.creditorBank,n));let s=n.get(l.IW3.postalAddress),a=n.get(l.IW3.postalAddress);s||(s=new c.cw({}),e.addControl(l.IW3.postalAddress,s)),a||(a=new c.cw({}),n.addControl(l.IW3.postalAddress,a)),Xt(s),Xt(a)}renderPaymentConfig(e){const n=[];let s=[];wt(e.fields,this.form,n,this.form),Ht(this.form,e),this.currentControls.length&&(s=this.deleteControls(this.currentControls,n));const a=this.groupDeltaFields(n,s);this.currentControls=n,this.controls$.next(a),this.paymentTypeControl&&this.paymentTypeControl.patchValue(e.paymentType)}groupDeltaFields(e,n){const s=[];for(const a of n)if(Array.isArray(s[s.length-1])){const r=s[s.length-1][0].parent;a.parent!==l.x2z.counterparty&&r===a.parent?s[s.length-1].push(a):s.push(a)}else if(a.parent!==l.x2z.counterparty&&s.length&&s[s.length-1].parent===a.parent){const r=s.pop();s.push([r,a])}else s.push(a);return this.mapGroupedFields(s,e)}mapGroupedFields(e,n){const s=e.map(a=>{if(Array.isArray(a)){const r=a[0].parent.split("."),_=r.pop(),u=r.length?1===r.length?r[0]:r.join("."):"",d=(0,l.iEs)(u,n),y=(0,l.iEs)(_,d||n);return Object.assign(Object.assign({},y),{fields:a,title:""})}return a});return this.organiseConfigs(s)}organiseConfigs(e){const n=[],s=[],a=[];for(const u of e)u.parent=u.parent||"",u.name===l.IW3.remittanceInformation||u.name===l.IW3.messageToBank?s.push(u):u.parent===l.x2z.counterparty||0===u.parent.indexOf(`${l.x2z.counterparty}`)?n.push(u):u.name===l.x2z.schedule||u.parent===l.x2z.schedule?(0,l.pVL)(u)?a.push(...u.fields):a.push(u):s.push(u);const r={name:"paymentInfo",title:"Payment Infomation",fields:[...s]},_={name:l.x2z.schedule,fields:[...a]};return[...n,r,_]}deleteControls(e,n){const s=At(this.taggedBaseFields),a=At(e),r=At(n),_=[];for(const u in r)!s.hasOwnProperty(u)&&!l.okK[u]&&u!==`${l.x2z.counterparty}.${l.IW3.counterPartyAccountGroup}`&&_.push(r[u]);for(const u in a)if(a.hasOwnProperty(u)){const d=u.split(".").pop(),y=this.form.get(u)||this.form.get(d);s.hasOwnProperty(u)||l.okK[u]||r.hasOwnProperty(u)||-1!==this.retainableFields.indexOf(u)||!y||!y.parent?-1!==this.retainableFields.indexOf(u)&&(null==y||y.setValidators(null),null==y||y.updateValueAndValidity()):y.parent.removeControl(d)}return _}listenCriticalFieldChanges(e,n){const s=e.get([l.x2z.initiator,l.dCm.accountNumber]),a=e.get([l.x2z.counterparty,l.IW3.accountNumber]),r=e.get([l.x2z.counterparty,l.IW3.creditorBank,l.IW3.postalAddress,l.IW3.country]),_=e.get([l.x2z.remittanceInfo,l.IHR.amountCurrencyGroup]);this.currentDebitAccount=s.value,s&&a&&_&&(this.debounceInput(s.valueChanges).pipe(function w(o){return(0,L.e)((i,e)=>{let n=!1,s=0;i.subscribe(new z.Q(e,a=>(n||(n=!o(a,s++)))&&e.next(a)))})}(u=>this.currentDebitAccount===u),(0,M.b)(()=>{this.currentDebitAccount=s.value})).subscribe(this.fetchPaymentOptions.bind(this,e,n)),this.debounceInput(a.valueChanges).subscribe(this.fetchPaymentOptions.bind(this,e,n)),this.debounceInput(_.valueChanges).subscribe(this.fetchPaymentOptions.bind(this,e,n)),r&&this.debounceInput(r.valueChanges).subscribe(this.fetchPaymentOptions.bind(this,e,n)))}listenPaymentTypeChanges(){this.paymentTypeControl.valueChanges.pipe((0,Z.x)(),(0,v.R)(this.gc$)).subscribe(()=>{this.listenPaymentType(this.paymentTypeControl.value)})}listenPaymentType(e){if(e){const n=this.paymentTypes.filter(s=>e===s.paymentType)[0];this.selectConfig.next(n),this.renderPaymentConfig(n)}}getPaymentConfigByType(e,n){return n.filter(s=>e===s.paymentType)[0]}listenPaymentOptionsChange(){this.paymentOptions$&&this.paymentOptions$.pipe((0,v.R)(this.gc$),(0,M.b)(e=>{this.onPaymentOptionsChange(e),this.applyCountrySpecificSettings(this.inputFormSettingControl.value)})).subscribe()}listenFormSettingChange(){this.inputFormSettingControl.valueChanges.pipe((0,T.O)(this.inputFormSettingControl.value),(0,v.R)(this.gc$),(0,Z.x)(),(0,j.h)(e=>!!e)).subscribe(e=>this.applyCountrySpecificSettings(e))}applyCountrySpecificSettings(e){const n=this.getPaymentConfigByType(this.paymentTypeControl.value,this.paymentTypes);if(e){for(const s of e.inputFormSettings||[])Nt({inputFormSetting:s,form:this.form,config:{fields:this.baseFields,name:"",paymentType:""}}),n&&Nt({inputFormSetting:s,form:this.form,config:n});n&&ne({form:this.form,config:n})}}renderPaymentOptionControls(){const e=[];e.push(((o,i,e=!1)=>{const n=this.paymentTypes.reduce((s,a)=>(s[a.paymentType]=a.name,s),{});return{name:l.okK.selectPaymentOption,type:l.fUi.selectPaymentOption,options:{items$:o,optionLabels:n,isWizardMode:!0,checkClosedPaymentsAccess:e}}})(this.paymentOptions$,0,this.checkClosedPaymentsAccess)),e.push({name:l.okK.chargeBearer,type:l.fUi.chargeBearer,options:{label:"How fees are paid",isWizardMode:!0}}),e.push({name:l.okK.paymentCost,type:l.fUi.paymentCost,options:{isWizardMode:!0}}),this.paymentOptionControls$.next(e)}shouldResetSelectedPaymentOption(e){const n=(this.selectPaymentOptionControl.value||"").split("::")[0];return!!n&&!e.some(s=>s.paymentType===n)}onPaymentOptionsChange(e=[]){if(this.resetPaymentOptions(e),this.shouldResetPaymentOptions=!0,!e||!e.length)return;const n=((o,i)=>o.map(e=>i.filter(n=>e.paymentType===n.paymentType)[0]))(e,this.paymentTypes);1===e.length||(o=>{let i=!1;const e=(o=>o.filter(i=>i&&!!i.relatedPaymentTypes)[0])(o);if(e&&e.relatedPaymentTypes){const n=[e.paymentType,...e.relatedPaymentTypes];i=o.every(s=>-1!==n.indexOf(s.paymentType))}else i=o.every(n=>n.paymentType===o[0].paymentType);return i})(n)?(this.renderPaymentConfig(n[0]),this.selectConfig.next(n[0])):this.shouldResetSelectedPaymentOption(e)&&this.controls$.next([])}fetchPaymentOptions(e,n){const s=e.get(`${l.x2z.initiator}.${l.dCm.accountNumber}`),a=e.get(`${l.x2z.counterparty}.${l.IW3.accountNumber}`),r=e.get(`${l.x2z.remittanceInfo}.${l.IHR.amountCurrencyGroup}`),_=e.get([l.x2z.counterparty,l.IW3.creditorBank,l.IW3.postalAddress,l.IW3.country]),u=e.get(l.X7M.isClosedPayment),d=e.get([l.x2z.counterparty,l.IW3.id]);s&&a&&r&&_&&_.valid&&s.value&&(a.valid||(null==u?void 0:u.value)||(null==d?void 0:d.value))&&r.valid&&n.next(e)}resetPaymentOptions(e){this.shouldResetPaymentOptions&&(this.shouldResetSelectedPaymentOption(e)&&this.selectPaymentOptionControl.reset(),this.chargeBearerOptionsControl.reset(),this.transferFeeControl.reset())}getFormGroup(e){return this.form.get(e.parent)||this.form}onSubmit(){var e;this.form.markAsDirty(),this.form.markAllAsTouched(),this.form.valid?this.form.valid&&!this.submitting&&(this.submitted.next(this.form),this.selectPaymentOption.next(this.selectedPaymentOption)):(0,l.$ZS)(null===(e=this.formEl)||void 0===e?void 0:e.nativeElement)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bb-adaptive-form"]],inputs:{formItem:"formItem",baseFields:"baseFields",paymentTypes:"paymentTypes",paymentState:"paymentState",isDebitPayment:"isDebitPayment",selectedPaymentConfig:"selectedPaymentConfig",selectedPaymentOption:"selectedPaymentOption",paymentOptionsError:"paymentOptionsError",checkClosedPaymentsAccess:"checkClosedPaymentsAccess",paymentOptions$:"paymentOptions$",fetchingOptions:"fetchingOptions",fetchPaymentOptionsListener:"fetchPaymentOptionsListener",submitting:"submitting",fetchOptions$:"fetchOptions$",shouldApplyTemplate:"shouldApplyTemplate",isModalView:"isModalView"},outputs:{applyPaymentTemplate:"applyPaymentTemplate",discard:"discard",submitted:"submitted",selectPaymentOption:"selectPaymentOption",clear:"clear",selectConfig:"selectConfig"},decls:19,vars:18,consts:function(){let i;return i=" A Payment transfer is not possible with provided details. Please update the details and try again. ",[[1,"payment-wizard-form",3,"formGroup","ngSubmit"],[4,"ngFor","ngForOf"],[1,"position-relative"],[1,"delta-container"],["class","wizard-loader-container position-absolute w-100 h-100 top-0 fixed-top bg-white",3,"opacity",4,"ngIf"],["formGroupTmpl",""],["formControlTmpl",""],["class","text-danger bb-block--md col-12",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["fetchingOptions",""],[1,"wizard-loader-container","position-absolute","w-100","h-100","top-0","fixed-top","bg-white"],["loaderSize","lg",1,"absolute-center"],[3,"config","group"],["bbPaymentFormField","",3,"config","options","group"],[1,"text-danger","bb-block--md","col-12"],i,["loaderSize","sm",1,"bb-load-button__loading-indicator"]]},template:function(e,n){if(1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.YNc(1,ts,2,4,"ng-container",1),t.ALo(2,"async"),t.TgZ(3,"div",2)(4,"div",3),t.YNc(5,ns,2,4,"ng-container",1),t.ALo(6,"async"),t.qZA(),t.YNc(7,is,2,4,"ng-container",1),t.ALo(8,"async"),t.YNc(9,ls,2,2,"div",4),t.ALo(10,"async"),t.qZA(),t.YNc(11,rs,2,3,"ng-template",null,5,t.W1O),t.YNc(13,cs,1,3,"ng-template",null,6,t.W1O),t.YNc(15,us,2,0,"div",7),t.YNc(16,_s,1,0,"ng-container",8),t.YNc(17,ps,1,0,"ng-template",null,9,t.W1O),t.qZA()),2&e){const s=t.MAs(14);t.Q6J("formGroup",n.form),t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,8,n.baseControls$)),t.xp6(4),t.Q6J("ngForOf",t.lcZ(6,10,n.controls$)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(8,12,n.paymentOptionControls$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(10,14,n.fetchingOptions$)),t.xp6(6),t.Q6J("ngIf",n.paymentOptionsError),t.xp6(1),t.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",t.VKq(16,X,n.buttonGroupConfig))}},directives:[at.Q,Ut,c._Y,c.JL,c.sg,p.sg,p.tP,p.O5,kt],pipes:[p.Ov],encapsulation:2}),o})();const Us=[st.j,N.m8,E.b,ct.tE,Mt.L,It.F,B.v,Ot.J,gt.o,mt.CS,c.u5,c.UX,N.m8,D.db,F.d8,Ct.n,l.Mdx,rt.i7,Pt.L,yt.C,at.p,Bt.T,xt.gn,V.hJ,Y.Q,bt.P,Jt.BX,Tt.z,ht.P,et.zk,Dt.O];let ks=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[p.uU,p.H9,Q,pt],imports:[[p.ez,...Us],st.j,N.m8,E.b,ct.tE,Mt.L,It.F,B.v,Ot.J,gt.o,mt.CS,c.u5,c.UX,N.m8,D.db,F.d8,Ct.n,l.Mdx,rt.i7,Pt.L,yt.C,at.p,Bt.T,xt.gn,V.hJ,Y.Q,bt.P,Jt.BX,Tt.z,ht.P,et.zk,Dt.O]}),o})()},6014:(dt,tt,f)=>{f.d(tt,{r:()=>l});var p=f(5e3);const t=new p.OlP("BB_TIMEZONE_CONFIGURATION_INJECTION_TOKEN",{providedIn:"root",factory:()=>""});let l=(()=>{class L{constructor(w){this._configuredTimeZone=w}get userTimeZone(){return Intl.DateTimeFormat().resolvedOptions().timeZone}get configuredTimeZone(){return this._configuredTimeZone}convertToDateInConfiguredTimeZone(w){return this.convertDateToDateInTimezone(w,this._configuredTimeZone)}getCurrentDateInConfiguredTimeZone(){return this.convertDateToDateInTimezone(new Date,this._configuredTimeZone)}getCurrentDateInUserTimezone(){return new Date}convertDateToDateInTimezone(w,x){return w&&x&&this.isValidTimeZone(x)?new Date(w.toLocaleString("en-US",{timeZone:x})):w}isValidTimeZone(w){try{return Intl.DateTimeFormat(void 0,{timeZone:w}),!0}catch(x){throw new Error(`Invalid timezone configuration specified: ${x}`)}}}return L.\u0275fac=function(w){return new(w||L)(p.LFG(t,8))},L.\u0275prov=p.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})()},4291:(dt,tt,f)=>{f.d(tt,{F:()=>j,W:()=>Z});var p=f(9808),t=f(5e3),c=f(4376),l=f(9287),L=f(3075),z=f(9144),w=f(4483),x=f(5413),J=f(3203);const k=["inputPhone"];function W(S,P){if(1&S&&(t.TgZ(0,"label",6),t._uU(1),t.qZA()),2&S){const m=t.oxw();t.s9C("for",m.id),t.xp6(1),t.Oqu(m.label)}}function v(S,P){if(1&S&&(t._UZ(0,"i",12),t.ALo(1,"countryFlag"),t._uU(2)),2&S){const m=P.item;t.Q6J("ngClass",t.lcZ(1,2,m.isoCode)),t.xp6(2),t.hij(" ",m.countryCode," ")}}function T(S,P){if(1&S){const m=t.EpF();t.TgZ(0,"bb-search-box-ui",13),t.NdJ("clear",function(){return t.CHM(m),t.oxw(2).onClear()})("valueChange",function(B){return t.CHM(m),t.oxw(2).onFilterChange(B)}),t.qZA(),t.TgZ(1,"div",14),t.SDv(2,15),t.qZA()}if(2&S){const m=t.oxw(2);t.Q6J("showSearch",!0)("showClear",!0)("autofocus",!0)("aria-controls",m.statusId)("aria-expanded",null==m.ngSelect?null:m.ngSelect.isOpen)("aria-owns",null!=m.ngSelect&&m.ngSelect.isOpen?null==m.ngSelect?null:m.ngSelect.dropdownId:null)("aria-activedescendant",null!=m.ngSelect&&m.ngSelect.isOpen?null==m.ngSelect||null==m.ngSelect.itemsList||null==m.ngSelect.itemsList.markedItem?null:m.ngSelect.itemsList.markedItem.htmlId:null),t.xp6(1),t.Q6J("id",m.statusId),t.xp6(1),t.pQV(m.resultCount),t.QtT(2)}}function M(S,P){1&S&&t._UZ(0,"bb-icon-ui",21)}function O(S,P){if(1&S&&(t.TgZ(0,"div",16),t._UZ(1,"i",17),t.ALo(2,"countryFlag"),t.TgZ(3,"span",18),t._uU(4),t.qZA(),t._uU(5,"\xa0 "),t.TgZ(6,"span",19),t._uU(7),t.qZA(),t.YNc(8,M,1,0,"bb-icon-ui",20),t.qZA()),2&S){const m=P.item,C=P.index,B=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.lcZ(2,4,m.isoCode)),t.xp6(3),t.Oqu(m.countryCode),t.xp6(3),t.Oqu(m.countryName),t.xp6(1),t.Q6J("ngIf",null==B.ngSelect?null:B.ngSelect.itemsList.items[C].selected)}}function $(S,P){if(1&S){const m=t.EpF();t.TgZ(0,"ng-select",7,8),t.NdJ("change",function(B){return t.CHM(m),t.oxw().onChanges(B)})("close",function(){return t.CHM(m),t.oxw().onClose()})("ngModelChange",function(B){return t.CHM(m),t.oxw().defaultCountryCode=B}),t.YNc(2,v,3,4,"ng-template",9),t.YNc(3,T,3,9,"ng-template",10),t.YNc(4,O,9,6,"ng-template",11),t.qZA()}if(2&S){const m=t.oxw();t.Q6J("dropdownPosition",m.dropdownPosition)("clearable",m.clearable)("searchable",m.searchable)("items",m.countryList)("ngModel",m.defaultCountryCode)("searchFn",m.searchFunc)("readonly",m.countryDropdowndisabled),t.uIk("aria-label",m.defaultCountryCode+" "+m.defaultCountryName)}}function G(S,P){if(1&S&&(t.TgZ(0,"div",22)(1,"span"),t.SDv(2,23),t.qZA(),t._uU(3),t.TgZ(4,"span"),t.SDv(5,24),t.qZA(),t._uU(6),t.qZA()),2&S){const m=t.oxw();t.MGl("id","",m.id,"-country-code"),t.xp6(3),t.hij("",m.defaultCountryName," "),t.xp6(3),t.hij("",m.defaultCountryCode," ")}}let ot=(()=>{class S{transform(m){return"flag-icon-"+m.toLowerCase()}}return S.\u0275fac=function(m){return new(m||S)},S.\u0275pipe=t.Yjl({name:"countryFlag",type:S,pure:!0}),S})(),Z=(()=>{class S extends z.rA{constructor(m,C,B,g){super(g),this.domAttrService=m,this.elem=C,this.renderer2=B,this.cd=g,this.placeholder="",this.readonly=!1,this.ariaLabel="Phone Input",this.clearable=!1,this.searchable=!1,this.enableCountryCode=!1,this.resultCount=0,this._statusId=this.domAttrService.generateId()}get statusId(){return this._statusId}constructCountryData(){if(this.enableCountryCode&&this.countryList)if(this.countryDropdowndisabled=1===this.countryList.length,this.countryDropdowndisabled)this.defaultCountryCode=this.countryList[0].countryCode,this.defaultCountryName=this.countryList[0].countryName;else{const m=this.countryList.find(C=>C.isoCode===this.defaultCountryIsoCode);this.defaultCountryCode=null==m?void 0:m.countryCode,this.defaultCountryName=null==m?void 0:m.countryName}}ngAfterViewInit(){this.ariaLabel||this.domAttrService.moveAriaAttributes(this.elem.nativeElement,this.inputEl&&this.inputEl.nativeElement,this.renderer2),this.constructCountryData()}onChanges(m){this.defaultCountryName=m.countryName}onClose(){this.ngSelect&&!this.ngSelect.isOpen&&this.ngSelect.constructor.prototype.focus.call(this.ngSelect)}onClear(){this.onFilterChange(void 0)}onFilterChange(m){this.ngSelect&&this.ngSelect.filter(m||""),this.updateResultCount()}updateResultCount(){var m;this.resultCount=(null===(m=this.ngSelect)||void 0===m?void 0:m.itemsList.filteredItems.filter(({children:C})=>!C).length)||0}searchFunc(m,C){return m=m.toLocaleLowerCase(),C.countryCode.toLocaleLowerCase().indexOf(m)>-1||C.countryName.toLocaleLowerCase().indexOf(m)>-1||C.isoCode.toLocaleLowerCase().indexOf(m)>-1}}return S.\u0275fac=function(m){return new(m||S)(t.Y36(w.JE),t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.sBO))},S.\u0275cmp=t.Xpm({type:S,selectors:[["bb-input-phone-ui"]],viewQuery:function(m,C){if(1&m&&(t.Gf(k,5),t.Gf(c.w9,5)),2&m){let B;t.iGM(B=t.CRH())&&(C.inputEl=B.first),t.iGM(B=t.CRH())&&(C.ngSelect=B.first)}},inputs:{placeholder:"placeholder",maxLength:"maxLength",minLength:"minLength",readonly:"readonly",ariaLabel:"ariaLabel",autocomplete:"autocomplete",countryList:"countryList",dropdownPosition:"dropdownPosition",clearable:"clearable",searchable:"searchable",defaultCountryIsoCode:"defaultCountryIsoCode",enableCountryCode:"enableCountryCode"},features:[t._Bn([{provide:L.JU,useExisting:(0,t.Gpc)(()=>S),multi:!0}]),t.qOj],decls:6,vars:25,consts:function(){let P,m,C,B;return P="Search",m=" " + "\ufffd0\ufffd" + " options ",C="Selected Country is ",B="and code is ",[[3,"for",4,"ngIf"],[1,"bb-phone"],["bindLabel","countryCode","bindValue","countryCode","class","bb-phone-country-code",3,"dropdownPosition","clearable","searchable","items","ngModel","searchFn","readonly","change","close","ngModelChange",4,"ngIf"],["type","tel",1,"form-control",3,"id","ngModel","disabled","readOnly","placeholder","required","bbFocus","ngClass","ngModelChange","blur","focus"],["inputPhone",""],["class","sr-only",3,"id",4,"ngIf"],[3,"for"],["bindLabel","countryCode","bindValue","countryCode",1,"bb-phone-country-code",3,"dropdownPosition","clearable","searchable","items","ngModel","searchFn","readonly","change","close","ngModelChange"],["countryCodeSelector",""],["ng-label-tmp",""],["ng-header-tmp",""],["ng-option-tmp",""],["aria-hidden","true",1,"flag-icon",3,"ngClass"],["placeholder",P,3,"showSearch","showClear","autofocus","aria-controls","aria-expanded","aria-owns","aria-activedescendant","clear","valueChange"],["aria-live","polite","aria-atomic","true","role","status",1,"sr-only",3,"id"],m,[1,"dropdown-option-item"],["aria-hidden","true",1,"flag-icon","col-md-1",3,"ngClass"],[1,"col-md-3","pr-0"],[1,"col-md-6","px-0","dropdown-option-item__country-name"],["class","col-md-2 px-0","name","check","color","color-neutral-dark",4,"ngIf"],["name","check","color","color-neutral-dark",1,"col-md-2","px-0"],[1,"sr-only",3,"id"],C,B]},template:function(m,C){1&m&&(t.YNc(0,W,2,2,"label",0),t.TgZ(1,"div",1),t.YNc(2,$,5,8,"ng-select",2),t.TgZ(3,"input",3,4),t.NdJ("ngModelChange",function(g){return C.onValueChange(g)})("blur",function(){return C.onBlur()})("focus",function(){return C.onFocus()}),t.qZA(),t.YNc(5,G,7,3,"div",5),t.qZA()),2&m&&(t.Q6J("ngIf",C.label),t.xp6(2),t.Q6J("ngIf",C.enableCountryCode),t.xp6(1),t.s9C("id",C.id),t.Q6J("ngModel",C.value)("disabled",C.disabled)("readOnly",C.readonly)("placeholder",C.placeholder)("required",C.required)("bbFocus",C.autofocus)("ngClass",C.inputClassName),t.uIk("aria-autocomplete",C.ariaAutocomplete)("aria-controls",C.ariaControls)("aria-describedby",C.ariaDescribedby?C.ariaDescribedby:C.id+"-country-code")("aria-labelledby",C.ariaLabelledby)("aria-expanded",C.ariaExpanded)("aria-activedescendant",C.ariaActivedescendant)("role",C.role)("aria-invalid",C.ariaInvalid)("aria-owns",C.ariaOwns)("aria-label",!C.label&&C.ariaLabel||null)("maxlength",C.maxLength)("minlength",C.minLength)("size",C.size)("autocomplete",C.autocomplete),t.xp6(2),t.Q6J("ngIf",!C.ariaDescribedby&&C.countryDropdowndisabled))},directives:[c.w9,x.B,l.o,p.O5,L.JJ,L.On,c.mR,p.mk,c.Cm,c.ir,L.Fj,L.Q7,L.nD,L.wO,J.R],pipes:[ot],encapsulation:2,changeDetection:0}),S})(),j=(()=>{class S{}return S.\u0275fac=function(m){return new(m||S)},S.\u0275mod=t.oAB({type:S}),S.\u0275inj=t.cJS({imports:[[p.ez,l.Q,L.u5,z.$B,J.J,c.A0,x.F]]}),S})()},3623:(dt,tt,f)=>{f.d(tt,{BX:()=>B,Ml:()=>P,vO:()=>C});var p=f(9808),t=f(5e3),c=f(9287);function l(g,E){1&g&&t.GkF(0)}function L(g,E){1&g&&t._UZ(0,"div",7)}const z=function(g,E,h){return{$implicit:g,number:E,isLast:h,isChild:!1}};function w(g,E){if(1&g&&(t.ynx(0),t.YNc(1,l,1,0,"ng-container",5),t.YNc(2,L,1,0,"div",6),t.BQk()),2&g){const h=E.$implicit,D=E.last,N=E.index,F=t.oxw(),Y=t.MAs(3);t.xp6(1),t.Q6J("ngTemplateOutlet",F.stepperStepTemplate||Y)("ngTemplateOutletContext",t.kEZ(3,z,h,N+1,D)),t.xp6(1),t.Q6J("ngIf",!D)}}function x(g,E){if(1&g&&(t.ynx(0),t._uU(1),t.BQk()),2&g){const h=t.oxw().number;t.xp6(1),t.hij(" ",h," ")}}function J(g,E){1&g&&t.GkF(0)}const k=function(g){return{$implicit:g}};function W(g,E){if(1&g){const h=t.EpF();t.TgZ(0,"a",15),t.NdJ("click",function(){t.CHM(h);const N=t.oxw(2).$implicit;return t.oxw().onClickHandler(N.data)}),t.YNc(1,J,1,0,"ng-container",5),t.qZA()}if(2&g){const h=t.oxw(2).$implicit;t.oxw();const D=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",D)("ngTemplateOutletContext",t.VKq(2,k,h))}}function v(g,E){1&g&&t.GkF(0)}function T(g,E){if(1&g&&(t.ynx(0),t.YNc(1,v,1,0,"ng-container",5),t.BQk()),2&g){const h=t.oxw(2).$implicit;t.oxw();const D=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",D)("ngTemplateOutletContext",t.VKq(2,k,h))}}function M(g,E){if(1&g&&(t.TgZ(0,"div",12),t.YNc(1,W,2,4,"a",13),t.YNc(2,T,2,4,"ng-container",14),t.qZA()),2&g){const h=t.oxw().$implicit;t.ekj("text-support",!h.isActive),t.Q6J("title",h.label),t.xp6(1),t.Q6J("ngIf",h.data&&!h.isCurrent),t.xp6(1),t.Q6J("ngIf",!h.data||h.isCurrent)}}function O(g,E){1&g&&t.GkF(0)}const $=function(g,E){return{$implicit:g,isChild:!0,isLast:E}};function G(g,E){if(1&g&&(t.ynx(0),t.YNc(1,O,1,0,"ng-container",5),t.BQk()),2&g){const h=E.$implicit,D=E.last,N=t.oxw().isLast;t.oxw();const F=t.MAs(3);t.xp6(1),t.Q6J("ngTemplateOutlet",F)("ngTemplateOutletContext",t.WLB(2,$,h,!N&&D))}}function ot(g,E){if(1&g&&(t.TgZ(0,"div",8)(1,"div",9),t.YNc(2,x,2,1,"ng-container",10),t.qZA(),t.YNc(3,M,3,5,"div",11),t.qZA(),t.YNc(4,G,2,5,"ng-container",1)),2&g){const h=E.$implicit,D=E.isLast,N=E.isChild,F=t.oxw(),Y=t.MAs(5);t.ekj("bb-step--active",h.isActive)("bb-step--current",h.isCurrent&&(N||!F.hasCurrentChildStep(h)))("bb-step--child",N)("bb-step--last",D)("bb-step--container",null==h.steps?null:h.steps.length),t.uIk("aria-label",h.ariaLabel)("aria-current",h.isActive?"step":null),t.xp6(2),t.Q6J("ngIf",h.isCurrent||!h.isChecked)("ngIfElse",Y),t.xp6(1),t.Q6J("ngIf",h.label),t.xp6(1),t.Q6J("ngForOf",h.steps)}}function Z(g,E){1&g&&t._UZ(0,"bb-icon-ui",16)}function j(g,E){if(1&g&&(t.TgZ(0,"span",18),t._uU(1),t.qZA()),2&g){const h=t.oxw().$implicit;t.Q6J("title",h.stateLabel),t.xp6(1),t.Oqu(h.stateLabel)}}function S(g,E){if(1&g&&(t._uU(0),t.YNc(1,j,2,2,"span",17)),2&g){const h=E.$implicit;t.hij(" ",h.label," "),t.xp6(1),t.Q6J("ngIf",!(null!=h.steps&&h.steps.length))}}let P=(()=>{class g{constructor(){this.isCurrent=!1,this.isChecked=!1,this.isActive=!1}ngAfterContentChecked(){var h;this.steps=null===(h=this._steps)||void 0===h?void 0:h.filter(D=>D!==this)}}return g.\u0275fac=function(h){return new(h||g)},g.\u0275cmp=t.Xpm({type:g,selectors:[["bb-stepper-step-ui"]],contentQueries:function(h,D,N){if(1&h&&t.Suo(N,g,4),2&h){let F;t.iGM(F=t.CRH())&&(D._steps=F)}},inputs:{label:"label",stateLabel:"stateLabel",data:"data",ariaLabel:"ariaLabel",isCurrent:"isCurrent",isChecked:"isChecked",isActive:"isActive"},decls:0,vars:0,template:function(h,D){},encapsulation:2}),g})(),m=(()=>{class g{constructor(h){this.templateRef=h}}return g.\u0275fac=function(h){return new(h||g)(t.Y36(t.Rgc))},g.\u0275dir=t.lG2({type:g,selectors:[["ng-template","bbCustomStepperStep",""]]}),g})(),C=(()=>{class g{constructor(){this.select=new t.vpe}get currentStep(){return this.steps&&this.steps.find(h=>h.isCurrent)}hasCurrentChildStep({steps:h}){return null==h?void 0:h.find(({isCurrent:D})=>D)}onClickHandler(h){this.select.emit(h)}}return g.\u0275fac=function(h){return new(h||g)},g.\u0275cmp=t.Xpm({type:g,selectors:[["bb-stepper-ui"]],contentQueries:function(h,D,N){if(1&h&&(t.Suo(N,m,7,t.Rgc),t.Suo(N,P,4)),2&h){let F;t.iGM(F=t.CRH())&&(D.stepperStepTemplate=F.first),t.iGM(F=t.CRH())&&(D.steps=F)}},outputs:{select:"select"},decls:8,vars:3,consts:[[1,"bb-stepper"],[4,"ngFor","ngForOf"],["defaultStepperStepTemplate",""],["checkIcon",""],["simpleStep",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true","class","bb-stepper__separator",4,"ngIf"],["aria-hidden","true",1,"bb-stepper__separator"],[1,"bb-step"],[1,"bb-step__icon"],[4,"ngIf","ngIfElse"],["class","bb-step__label",3,"title","text-support",4,"ngIf"],[1,"bb-step__label",3,"title"],["href","javascript:void(0)",3,"click",4,"ngIf"],[4,"ngIf"],["href","javascript:void(0)",3,"click"],["name","check","size","sm"],["class","bb-step__state-label",3,"title",4,"ngIf"],[1,"bb-step__state-label",3,"title"]],template:function(h,D){1&h&&(t.TgZ(0,"div",0),t.YNc(1,w,3,7,"ng-container",1),t.qZA(),t.YNc(2,ot,5,16,"ng-template",null,2,t.W1O),t.YNc(4,Z,1,0,"ng-template",null,3,t.W1O),t.YNc(6,S,2,2,"ng-template",null,4,t.W1O)),2&h&&(t.ekj("bb-stepper__label",null==D.currentStep?null:D.currentStep.label),t.xp6(1),t.Q6J("ngForOf",D.steps))},directives:[c.o,p.sg,p.tP,p.O5],encapsulation:2}),g})(),B=(()=>{class g{}return g.\u0275fac=function(h){return new(h||g)},g.\u0275mod=t.oAB({type:g}),g.\u0275inj=t.cJS({imports:[[p.ez,c.Q]]}),g})()},8451:(dt,tt,f)=>{f.d(tt,{o:()=>W,q:()=>k});var p=f(9808),t=f(3075),c=f(5e3),l=f(9144),L=f(4619);function z(v,T){if(1&v&&(c.TgZ(0,"label",5),c._uU(1),c.qZA()),2&v){const M=c.oxw();c.uIk("for",M.id),c.xp6(1),c.hij(" ",M.label," ")}}const w=function(v){return{"bb-switch--align-end":v}},x=function(v,T,M){return{"bb-switch__element--checked":v,"bb-switch__element--disabled":T,"bb-switch__element--focused":M}};var J=(()=>{return(v=J||(J={})).left="left",v.right="right",J;var v})();let k=(()=>{class v extends l.rA{constructor(M,O){super(M),this.cd=M,this.el=O,this.labelPosition=J.left,this.keyboardFocus=!1,this.focused=!1}ngOnInit(){super.ngOnInit(),this.role=this.role||"switch"}toggleSwitch(M){var O;if("LABEL"!==(null===(O=M.target)||void 0===O?void 0:O.tagName))if(window.MSInputMethodContext&&document.documentMode){"checkbox"===M.target.type?this.onValueChange():this.onValueChange(!this.value);const G=document.createEvent("Event");G.initEvent("change",!0,!1),this.el.nativeElement.dispatchEvent(G)}else this.onValueChange(!this.value),this.el.nativeElement.dispatchEvent(new Event("change",{bubbles:!0}))}onBlur(M){this.focused=!1,super.onBlur(M)}isLabelLeft(){return this.labelPosition===J.left}isLabelRight(){return this.labelPosition===J.right}}return v.\u0275fac=function(M){return new(M||v)(c.Y36(c.sBO),c.Y36(c.SBq))},v.\u0275cmp=c.Xpm({type:v,selectors:[["bb-switch-ui"]],inputs:{labelPosition:"labelPosition"},features:[c._Bn([{provide:t.JU,multi:!0,useExisting:(0,c.Gpc)(()=>v)}]),c.qOj],decls:5,vars:21,consts:[[1,"bb-switch",3,"ngClass","click"],["class","bb-switch__label",4,"ngIf"],[1,"bb-switch__checkbox","sr-only","sr-only-focusable",3,"id","ngModel","disabled","aria-label","required","aria-describedby","aria-labelledby","aria-expanded","role","aria-invalid","aria-owns","aria-activedescendant","ngModelChange","change","focus","blur"],[1,"bb-switch__element",3,"ngClass","focus","blur"],[1,"bb-switch__slider","slider"],[1,"bb-switch__label"]],template:function(M,O){1&M&&(c.TgZ(0,"div",0),c.NdJ("click",function(G){return!O.disabled&&O.toggleSwitch(G)}),c.YNc(1,z,2,2,"label",1),c.TgZ(2,"bb-input-checkbox-ui",2),c.NdJ("ngModelChange",function(G){return O.value=G})("change",function(G){return G.stopPropagation()&&!O.disabled&&O.toggleSwitch(G)})("focus",function(){return O.focused=!0})("blur",function(G){return O.onBlur(G)}),c.qZA(),c.TgZ(3,"span",3),c.NdJ("focus",function(){return O.keyboardFocus=!0})("blur",function(){return O.keyboardFocus=!1}),c._UZ(4,"span",4),c.qZA()()),2&M&&(c.Q6J("ngClass",c.VKq(15,w,O.isLabelRight())),c.xp6(1),c.Q6J("ngIf",O.label),c.xp6(1),c.Q6J("id",O.id)("ngModel",O.value)("disabled",O.disabled)("aria-label",O.ariaLabel)("required",O.required)("aria-describedby",O.ariaDescribedby)("aria-labelledby",O.ariaLabelledby)("aria-expanded",O.ariaExpanded)("role",O.role)("aria-invalid",O.ariaInvalid)("aria-owns",O.ariaOwns)("aria-activedescendant",O.ariaActivedescendant),c.xp6(1),c.Q6J("ngClass",c.kEZ(17,x,O.value,O.disabled,O.focused)))},directives:[L.r,p.mk,p.O5,t.JJ,t.On,t.Q7],encapsulation:2,changeDetection:0}),v})(),W=(()=>{class v{}return v.\u0275fac=function(M){return new(M||v)},v.\u0275mod=c.oAB({type:v}),v.\u0275inj=c.cJS({imports:[[p.ez,t.u5,L.b]]}),v})()}}]);