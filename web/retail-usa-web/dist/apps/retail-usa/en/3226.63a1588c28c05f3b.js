"use strict";(self.webpackChunkretail_usa=self.webpackChunkretail_usa||[]).push([[3226],{2658:(D,g,l)=>{l.d(g,{P:()=>E,l:()=>b});var i=l(9808),e=l(5e3),p=l(3075),m=l(9144),h=l(9774),C=l(682);const u=["amountInput"];function _(s,r){if(1&s&&(e.TgZ(0,"label",5),e._uU(1),e.qZA()),2&s){const n=e.oxw();e.s9C("for",n.id),e.xp6(1),e.hij(" ",n.label," ")}}function d(s,r){if(1&s&&(e.TgZ(0,"span",6)(1,"span",7),e.SDv(2,8),e.qZA(),e._uU(3),e.qZA()),2&s){const n=e.oxw();e.Q6J("id",n.componentUniqueId),e.xp6(3),e.hij(" ",n.currency," ")}}let b=(()=>{class s extends m.rA{constructor(n,t,o){super(n),this.locale=t,this.renderer=o,this.inputClass="bb-amount-input",this.componentUniqueId=`${this.id}-currency`,this.idListAttr=C.hQ,this.placeholder="",this.wrapperClasses="",this.mapCurrency=!0,this._currency="",this._decimals=2,this.autoDecimal=!1,this.groupSeparator=(0,i.dv)(this.locale,i.wE.CurrencyGroup),this.decimalSeparator=(0,i.dv)(this.locale,i.wE.CurrencyDecimal),this.nonNumbersAndDecimalSeparatorRegex=new RegExp(`[^${this.decimalSeparator}\\d]`,"g"),this.endWithDecimal=new RegExp(`[${this.decimalSeparator}]$`,"g"),this.format={groupSeparator:this.groupSeparator,decimalSeparator:this.decimalSeparator,groupSize:3}}set currency(n){n&&(this._currency=this.mapCurrency?(0,i.jK)(n,"wide",this.locale):n,this._decimals=(0,i.E5)(n))}get currency(){return this._currency}writeValue(n){const t=null!=n?n:"";if("string"==typeof t){const o=t.replace(this.nonNumbersAndDecimalSeparatorRegex,"").slice(0,this.maxLength)||"";this.renderer.setProperty(this.amountEl.nativeElement,"value",this.formatAmount(o))}}formatAmount(n){if(n){if(n.includes(this.decimalSeparator)){const[t,o]=n.split(this.decimalSeparator);return new h(t||0).toFormat(this.format)+this.decimalSeparator+o.slice(0,this._decimals)}return new h(n).toFormat(this.format)}return n}updateAmountInput(){var n;const t=this.amountEl.nativeElement,o=(null===(n=t.value)||void 0===n?void 0:n.replace(this.nonNumbersAndDecimalSeparatorRegex,"").slice(0,this.maxLength))||"";this.renderer.setProperty(t,"value",this.formatAmount(o))}setSelection(n,t){const o=this.amountEl.nativeElement;this.renderer.setProperty(o,"selectionStart",n),this.renderer.setProperty(o,"selectionEnd",t)}correctInputValue(){var n;this.onBlur();const t=null===(n=this.amountEl)||void 0===n?void 0:n.nativeElement;if(t.value){const o=t.value.replace(this.endWithDecimal,"");this.renderer.setProperty(t,"value",o),this.updateOutputValue(o.replace(this.nonNumbersAndDecimalSeparatorRegex,""))}}onBackspace(n){this.autoDecimal&&n.selectionStart&&n.value[n.selectionStart-1]===this.groupSeparator&&this.setSelection(n.selectionStart-1,n.selectionStart-1)}onPress(n){const t=n.key,o=this.amountEl.nativeElement,a=o.value;if(a){const c=a.includes(this.decimalSeparator)&&t===this.decimalSeparator,S=new RegExp(`^[\\d${this.groupSeparator}]*[${this.decimalSeparator}]?\\d{0,${this._decimals}}$`,"g").test(a);if(c||!S){const I=o.selectionStart;a.indexOf(this.decimalSeparator)===I&&this.setSelection(I+1,I+1),n.preventDefault()}}}onInput(){const n=this.amountEl.nativeElement,t=n.value.trim(),o=n.selectionStart||0,a=t.length-o;this.updateAmountInput();const c=n.value.replace(this.nonNumbersAndDecimalSeparatorRegex,"").replace(this.endWithDecimal,"");if(c)if(1===t.length&&t!==this.decimalSeparator){const f=this.autoDecimal?t+this.decimalSeparator+"0".repeat(this._decimals):t;this.renderer.setProperty(n,"value",f),this.setSelection(1,1)}else{let f=n.value.length-a;t.includes(this.decimalSeparator)&&o>t.indexOf(this.decimalSeparator)&&f++,this.setSelection(f,f)}this.updateOutputValue(c)}updateOutputValue(n){this.onValueChange(n.replace(this.decimalSeparator,"."))}}return s.\u0275fac=function(n){return new(n||s)(e.Y36(e.sBO),e.Y36(e.soG),e.Y36(e.Qsj))},s.\u0275cmp=e.Xpm({type:s,selectors:[["bb-amount-input-ui"]],viewQuery:function(n,t){if(1&n&&e.Gf(u,7),2&n){let o;e.iGM(o=e.CRH())&&(t.amountEl=o.first)}},hostVars:2,hostBindings:function(n,t){2&n&&e.Tol(t.inputClass)},inputs:{placeholder:"placeholder",maxLength:"maxLength",wrapperClasses:"wrapperClasses",mapCurrency:"mapCurrency",currency:"currency",autoDecimal:"autoDecimal"},features:[e._Bn([{provide:p.JU,useExisting:(0,e.Gpc)(()=>s),multi:!0}]),e.qOj],decls:5,vars:12,consts:function(){let r;return r="Currency",[[3,"for",4,"ngIf"],[1,"bb-amount-input__field",3,"ngClass"],["type","text","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false","data-role","bb-amount-input-ui",1,"form-control","bb-text-align-end",3,"id","readOnly","disabled","required","placeholder","keydown","keydown.backspace","blur","input"],["amountInput",""],["data-role","bb-amount-input-currency","class","bb-amount-input__symbol",3,"id",4,"ngIf"],[3,"for"],["data-role","bb-amount-input-currency",1,"bb-amount-input__symbol",3,"id"],[1,"sr-only"],r]},template:function(n,t){if(1&n){const o=e.EpF();e.YNc(0,_,2,2,"label",0),e.TgZ(1,"div",1)(2,"input",2,3),e.NdJ("keydown",function(c){return t.onPress(c)})("keydown.backspace",function(){e.CHM(o);const c=e.MAs(3);return t.onBackspace(c)})("blur",function(){return t.correctInputValue()})("input",function(){return t.onInput()}),e.qZA(),e.YNc(4,d,4,2,"span",4),e.qZA()}2&n&&(e.Q6J("ngIf",t.label),e.xp6(1),e.Q6J("ngClass",t.wrapperClasses),e.xp6(1),e.s9C("id",t.id),e.Q6J("readOnly",t.readonly)("disabled",t.disabled)("required",t.required)("placeholder",t.placeholder),e.uIk("maxlength",t.maxLength)("aria-describedby",t.idListAttr(t.ariaDescribedby,t.componentUniqueId))("aria-invalid",t.ariaInvalid)("aria-labelledby",t.ariaLabelledby),e.xp6(2),e.Q6J("ngIf",t.currency))},directives:[i.O5,i.mk],encapsulation:2,changeDetection:0}),s})(),E=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[i.ez,p.u5,m.$B]]}),s})()},4899:(D,g,l)=>{l.d(g,{L:()=>C,e:()=>h});var i=l(5e3),e=l(9808);function p(u,_){if(1&u&&(i.TgZ(0,"legend",2),i._uU(1),i.qZA()),2&u){const d=i.oxw();i.xp6(1),i.hij(" ",d.heading," ")}}const m=["*"];let h=(()=>{class u{constructor(){this.disabled=!1}}return u.\u0275fac=function(d){return new(d||u)},u.\u0275cmp=i.Xpm({type:u,selectors:[["bb-fieldset-ui"]],inputs:{heading:"heading",disabled:"disabled"},ngContentSelectors:m,decls:3,vars:2,consts:[[1,"bb-fieldset",3,"disabled"],["class","bb-fieldset__heading",4,"ngIf"],[1,"bb-fieldset__heading"]],template:function(d,b){1&d&&(i.F$t(),i.TgZ(0,"fieldset",0),i.YNc(1,p,2,1,"legend",1),i.Hsn(2),i.qZA()),2&d&&(i.Q6J("disabled",b.disabled),i.xp6(1),i.Q6J("ngIf",b.heading))},directives:[e.O5],encapsulation:2,changeDetection:0}),u})(),C=(()=>{class u{}return u.\u0275fac=function(d){return new(d||u)},u.\u0275mod=i.oAB({type:u}),u.\u0275inj=i.cJS({imports:[[e.ez]]}),u})()},679:(D,g,l)=>{l.d(g,{T:()=>s,c:()=>E});var i=l(9808),e=l(5e3),p=l(7656),m=l(9287),h=l(7605);const C=["listItem"],u=["bbDropdown"],_=["dropdownToggle"],d=[[["","bbDropdownToggle",""]],[["","bbDropdownMenu",""]]],b=["[bbDropdownToggle]","[bbDropdownMenu]"];let E=(()=>{class r{constructor(){this.focusedItemIndex=-1,this.focusState="",this.isOpen=!1,this.autoClose=!0,this.position="bottom",this.container="",this.isIE=navigator.userAgent.indexOf("MSIE ")>-1||navigator.userAgent.indexOf("Trident/")>-1}onKeyEvent(t){if(this.isOpen){switch(this.isIE?t.keyCode:t.key){case 40:case"ArrowDown":this.focusedItemIndex=Math.min(this.focusedItemIndex+1,this.listItems.length-1),this.focusItem();break;case 38:case"ArrowUp":this.focusedItemIndex=Math.max(this.focusedItemIndex-1,0),this.focusItem();break;default:return}t.preventDefault()}}close(){this.bbDropdown&&this.autoClose&&this.bbDropdown.isOpen()&&this.bbDropdown.close()}open(){this.bbDropdown&&!this.bbDropdown.isOpen()&&this.bbDropdown.open()}onClose(){this.autoClose&&(this.close(),this.dropdownToggle.nativeElement.focus())}focusItem(){this.listItems.forEach((t,o)=>{o===this.focusedItemIndex&&(t.nativeElement.tabIndex=0,t.nativeElement.focus())})}onOpenChange(t){this.isOpen=t,this.isOpen||(this.focusedItemIndex=-1)}onBlur(){this.bbDropdown&&this.bbDropdown.isOpen()&&this.bbDropdown.close()}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["bb-product-selector-ui"]],contentQueries:function(t,o,a){if(1&t&&e.Suo(a,C,4),2&t){let c;e.iGM(c=e.CRH())&&(o.listItems=c)}},viewQuery:function(t,o){if(1&t&&(e.Gf(u,7),e.Gf(_,5)),2&t){let a;e.iGM(a=e.CRH())&&(o.bbDropdown=a.first),e.iGM(a=e.CRH())&&(o.dropdownToggle=a.first)}},hostBindings:function(t,o){1&t&&e.NdJ("keydown",function(c){return o.onKeyEvent(c)},!1,e.Jf7)},inputs:{autoClose:"autoClose",position:"position",container:"container"},ngContentSelectors:b,decls:11,vars:7,consts:[[1,"bb-product-selector"],["ngbDropdown","",1,"bb-product-selector__dropdown",3,"autoClose","container","placement","blur","openChange"],["bbDropdown","ngbDropdown"],["ngbDropdownToggle","","bbButton","","color","unstyled","type","button",1,"bb-product-selector__item"],["dropdownToggle",""],[1,"bb-product-selector__item-content"],["cropped","",1,"bb-product-selector__icon",3,"name"],["ngbDropdownMenu","","role","menu",1,"bb-product-selector__dropdown-menu-panel",3,"click"],[1,"bb-product-selector__dropdown-menu"]],template:function(t,o){1&t&&(e.F$t(d),e.TgZ(0,"div",0)(1,"div",1,2),e.NdJ("blur",function(){return o.onBlur()})("openChange",function(c){return o.onOpenChange(c)}),e.TgZ(3,"button",3,4)(5,"div",5),e.Hsn(6),e.qZA(),e._UZ(7,"bb-icon-ui",6),e.qZA(),e.TgZ(8,"div",7),e.NdJ("click",function(){return o.onClose()}),e.TgZ(9,"div",8),e.Hsn(10,1),e.qZA()()()()),2&t&&(e.xp6(1),e.Q6J("autoClose",o.autoClose)("container",o.container)("placement",o.position),e.xp6(2),e.uIk("data-role","product-selector-expand-button"),e.xp6(2),e.uIk("data-role","product-selector-selected-content"),e.xp6(2),e.Q6J("name",o.isOpen?"toggle-up":"toggle-down"),e.xp6(1),e.uIk("data-role","product-selector-dropdown-menu"))},directives:[m.o,p.jt,h.Hq,p.iD,p.Vi],encapsulation:2}),r})(),s=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[i.ez,p.XC,m.Q,h.hJ]]}),r})()}}]);