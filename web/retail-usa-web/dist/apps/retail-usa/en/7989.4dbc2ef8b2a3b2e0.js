(self.webpackChunkretail_usa=self.webpackChunkretail_usa||[]).push([[7989],{7354:(Ge,X,E)=>{"use strict";E.r(X),E.d(X,{ConnectExternalAccountsJourneyBundleModule:()=>S_});var O=E(2929),e=E(5e3),l=(E(7586),E(429)),I=E(3533),g=E(9287),A=E(9808),m=E(6888),u=E(4058),T=E(5460),q=E(9136),r=E(3075),B=E(7605),Q=E(1892),z=E(6706),W=E(8639),K=E(3508),w=E(6966),L=E(5622),j=E(3759),Z=E(7287),P=E(4951),h=E(5556),f=E(1135),Fe=E(3900),ee=E(262),le=E(2843),Ye=E(4004),re=E(5698),ue=E(8505),H=E(7579),v=E(2722),ke=E(515),p=E(5357);function Xe(_,o){if(1&_&&e._UZ(0,"bb-badge-ui",10),2&_){e.oxw();const t=e.MAs(6),n=e.oxw();e.Q6J("color",n.statuses[n.account.status])("text",t.textContent||"")}}function We(_,o){1&_&&e._UZ(0,"bb-badge-ui",11)}function we(_,o){if(1&_){const t=e.EpF();e.TgZ(0,"div")(1,"div",1)(2,"h2")(3,"span",2),e._uU(4),e.qZA()(),e.TgZ(5,"span",3,4),e.SDv(7,5),e.qZA(),e.YNc(8,Xe,1,2,"bb-badge-ui",6),e.YNc(9,We,1,0,"bb-badge-ui",7),e.qZA()(),e.TgZ(10,"div")(11,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeDetailModal()}),e._UZ(12,"bb-icon-ui",9),e.qZA()()}if(2&_){const t=e.oxw();e.xp6(2),e.uIk("aria-label",t.account.accountNickName||t.account.bankName),e.xp6(2),e.hij(" ",(null==t.account?null:t.account.accountNickName)||(null==t.account?null:t.account.bankName)," "),e.xp6(3),e.pQV(t.account.status),e.QtT(7),e.xp6(1),e.Q6J("ngIf","Active"!==t.account.status&&!t.attemptsExceeded),e.xp6(1),e.Q6J("ngIf",t.attemptsExceeded)}}const Ce=function(_){return{"col-md-6":_}};function Ze(_,o){1&_&&e._UZ(0,"bb-alert-ui",10),2&_&&e.Q6J("dismissible",!1)}function Pe(_,o){1&_&&e._UZ(0,"bb-alert-ui",11),2&_&&e.Q6J("dismissible",!1)}function He(_,o){1&_&&e._UZ(0,"bb-alert-ui",12),2&_&&e.Q6J("dismissible",!1)}function $e(_,o){1&_&&e._UZ(0,"bb-alert-ui",13),2&_&&e.Q6J("dismissible",!1)}function Ve(_,o){if(1&_&&(e.TgZ(0,"div",4),e.YNc(1,Ze,1,1,"bb-alert-ui",5),e.YNc(2,Pe,1,1,"bb-alert-ui",6),e.YNc(3,He,1,1,"bb-alert-ui",7),e.YNc(4,$e,1,1,"bb-alert-ui",8),e.qZA(),e._UZ(5,"bb-a2a-account-information",9)),2&_){const t=e.oxw().ngIf,n=e.oxw();e.Q6J("ngSwitch",t.status),e.xp6(1),e.Q6J("ngSwitchCase",n.statuses.DisabledForExcessiveReturns),e.xp6(1),e.Q6J("ngSwitchCase",n.statuses.DisabledForFraud),e.xp6(1),e.Q6J("ngSwitchCase",n.statuses.FailedVerification),e.xp6(1),e.Q6J("ngSwitchCase",n.statuses.RejectedByExternalBank),e.xp6(1),e.Q6J("account",t)}}function qe(_,o){if(1&_){const t=e.EpF();e.TgZ(0,"bb-modal-ui",1)(1,"bb-a2a-details-header",2),e.NdJ("closeModal",function(){return e.CHM(t),e.oxw().onClose()}),e.qZA(),e.TgZ(2,"bb-modal-body-ui"),e.YNc(3,Ve,6,6,"ng-template",3),e.qZA()()}if(2&_){const t=o.ngIf,n=e.oxw();e.Q6J("isOpen",n.isOpen)("modalOptions",n.modalOptions),e.xp6(1),e.Q6J("account",t)}}function Qe(_,o){if(1&_&&(e.TgZ(0,"span",4,5),e.Hsn(2),e.qZA(),e._UZ(3,"bb-header-ui",6)),2&_){const t=e.MAs(1);e.xp6(3),e.Q6J("heading",t.textContent||""),e.uIk("data-role","confirmation-header")}}function ze(_,o){if(1&_){const t=e.EpF();e.ynx(0),e.TgZ(1,"label",9),e.SDv(2,10),e.qZA(),e.TgZ(3,"span",11),e._uU(4," ("),e.ynx(5),e.SDv(6,12),e.BQk(),e._uU(7,") "),e.qZA(),e.TgZ(8,"bb-textarea-ui",13,14),e.NdJ("ngModelChange",function(a){return e.CHM(t),e.oxw(2).comment=a}),e.qZA(),e.BQk()}if(2&_){const t=e.MAs(9),n=e.oxw(2);e.xp6(1),e.Q6J("for",t.id),e.xp6(1),e.pQV(n.commentFieldLabel),e.QtT(2),e.xp6(6),e.Q6J("rows",3)("cols",50)("minLength",3)("maxLength",140)("ngModel",n.comment)("showCharCounter",!0)}}const je=function(_){return{"bb-block bb-block--md":_}};function et(_,o){if(1&_&&(e.TgZ(0,"div",7),e.Hsn(1,1),e.qZA(),e.YNc(2,ze,10,8,"ng-container",8)),2&_){const t=e.oxw();e.Q6J("ngClass",e.VKq(2,je,t.attachComment)),e.xp6(2),e.Q6J("ngIf",t.attachComment&&t.isOpen)}}function tt(_,o){if(1&_){const t=e.EpF();e.TgZ(0,"div",15)(1,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().onConfirmAction()}),e.Hsn(2,2),e.qZA(),e.TgZ(3,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().onCancelAction()}),e.Hsn(4,3),e.qZA()()}if(2&_){const t=e.oxw();e.xp6(1),e.Q6J("color",t.confirmButtonColor||""),e.uIk("data-role","confirm-action-btn"),e.xp6(2),e.Q6J("color",t.cancelButtonColor||""),e.uIk("data-role","cancel-action-btn")}}const _t=[[["","title",""]],[["","body",""]],[["","confirmActionName",""]],[["","cancelActionName",""]]],nt=["[title]","[body]","[confirmActionName]","[cancelActionName]"];function ot(_,o){if(1&_&&e._UZ(0,"bb-badge-ui",31),2&_){const t=e.oxw().$implicit,n=e.MAs(5),a=e.oxw();e.Q6J("color",a.statuses[t.status])("text",n.textContent||"")}}function at(_,o){1&_&&(e.TgZ(0,"span",32),e.SDv(1,33),e.qZA(),e._UZ(2,"bb-icon-ui",34))}function it(_,o){if(1&_){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("bbKeyboardClick",function(){e.CHM(t);const a=e.oxw(2).$implicit;return e.oxw().populateAccount(a)}),e.SDv(1,43),e.qZA()}}function ct(_,o){if(1&_){const t=e.EpF();e.YNc(0,it,2,0,"button",35),e.TgZ(1,"button",36),e.NdJ("bbKeyboardClick",function(){e.CHM(t);const a=e.oxw().$implicit;return e.oxw().onMakeTransfer(a)}),e.SDv(2,37),e.qZA(),e.TgZ(3,"button",38),e.NdJ("bbKeyboardClick",function(){e.CHM(t);const a=e.oxw().$implicit;return e.oxw().populateAccount(a)}),e.SDv(4,39),e.qZA(),e.TgZ(5,"button",40),e.NdJ("bbKeyboardClick",function(){e.CHM(t);const a=e.oxw().$implicit;return e.oxw().manageConfirmationModal(a)}),e.SDv(6,41),e.qZA()}if(2&_){const t=e.oxw().$implicit;e.Q6J("ngIf","PendingActivation"===t.status),e.xp6(1),e.Q6J("hidden","Active"!==t.status)}}function st(_,o){1&_&&(e.TgZ(0,"button",44)(1,"span"),e.SDv(2,45),e.qZA()())}function Et(_,o){if(1&_){const t=e.EpF();e.TgZ(0,"div",13),e.NdJ("bbKeyboardClick",function(){const i=e.CHM(t).$implicit;return e.oxw().populateAccount(i)}),e.TgZ(1,"div",14)(2,"div",15)(3,"div",16)(4,"span",17,18),e.SDv(6,19),e.qZA(),e.YNc(7,ot,1,2,"bb-badge-ui",20),e.qZA(),e.TgZ(8,"div",21)(9,"span",22),e._uU(10),e.qZA()(),e.TgZ(11,"div",23)(12,"span",24),e._uU(13),e.qZA()()(),e.TgZ(14,"div",25)(15,"div",26),e.NdJ("bbKeyboardClick",function(){const i=e.CHM(t).$implicit;return e.oxw().populateAccount(i)}),e.TgZ(16,"bb-dropdown-menu-ui",27),e.NdJ("bbKeyboardClick",function(a){return e.CHM(t),e.oxw().stopPropagation(a)}),e.YNc(17,at,3,0,"ng-template",28),e.YNc(18,ct,7,2,"ng-template",29),e.qZA(),e.YNc(19,st,3,0,"button",30),e.qZA()()()()}if(2&_){const t=o.$implicit;e.xp6(3),e.ekj("d-none","Active"===t.status),e.xp6(3),e.pQV(t.status),e.QtT(6),e.xp6(1),e.Q6J("ngIf","Active"!==t.status),e.xp6(3),e.hij(" ",(null==t?null:t.accountNickName)||(null==t?null:t.bankName)," "),e.xp6(3),e.hij(" ",t.accountNumber," "),e.xp6(3),e.Q6J("btnCircle",!0),e.xp6(3),e.Q6J("ngIf","PendingActivation"===t.status)}}function At(_,o){1&_&&(e.TgZ(0,"span",13),e.SDv(1,14),e.qZA())}function lt(_,o){1&_&&(e.TgZ(0,"span",15),e.SDv(1,16),e.qZA())}function rt(_,o){if(1&_&&(e.ynx(0),e.YNc(1,At,2,0,"span",11),e.YNc(2,lt,2,0,"span",12),e.BQk()),2&_){const t=o.ngIf;e.xp6(1),e.Q6J("ngIf",t.invalidAmount),e.xp6(1),e.Q6J("ngIf",t.minValue&&!t.invalidAmount)}}function ut(_,o){1&_&&(e.TgZ(0,"span",19),e.SDv(1,20),e.qZA())}function Ct(_,o){1&_&&(e.TgZ(0,"span",21),e.SDv(1,22),e.qZA())}function Nt(_,o){if(1&_&&(e.ynx(0),e.YNc(1,ut,2,0,"span",17),e.YNc(2,Ct,2,0,"span",18),e.BQk()),2&_){const t=o.ngIf;e.xp6(1),e.Q6J("ngIf",t.invalidAmount),e.xp6(1),e.Q6J("ngIf",t.minValue&&!t.invalidAmount)}}const dt=function(_){return{"bb-block bb-block--xl":_}};function St(_,o){1&_&&(e.TgZ(0,"div",14),e.SDv(1,15),e.qZA())}function Ot(_,o){1&_&&(e.TgZ(0,"span",49),e.SDv(1,50),e.qZA())}function mt(_,o){1&_&&(e.TgZ(0,"span",51),e.SDv(1,52),e.qZA())}function Tt(_,o){1&_&&(e.TgZ(0,"span",53),e.SDv(1,54),e.qZA())}function pt(_,o){1&_&&(e.TgZ(0,"span",56),e.SDv(1,57),e.qZA())}function Mt(_,o){if(1&_&&(e.ynx(0),e.YNc(1,pt,2,0,"span",55),e.BQk()),2&_){const t=o.ngIf;e.xp6(1),e.Q6J("ngIf",t.touched&&(null==t||null==t.errors?null:t.errors.pattern))}}function gt(_,o){1&_&&e.GkF(0)}function Bt(_,o){if(1&_&&(e.ynx(0),e.YNc(1,gt,1,0,"ng-container",20),e.BQk()),2&_){e.oxw();const t=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function ft(_,o){1&_&&e.GkF(0)}function Ut(_,o){if(1&_&&(e.ynx(0),e.YNc(1,ft,1,0,"ng-container",20),e.BQk()),2&_){e.oxw();const t=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function bt(_,o){if(1&_&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&_){const t=e.oxw().$implicit,n=e.oxw(3);e.uIk("data-role","payord-a2a-link-account-RoutingNumber-"+t.key+"-message"),e.xp6(1),e.hij(" ",n.erorToMessageMap.get(t.key)," ")}}function Rt(_,o){if(1&_&&(e.ynx(0),e.YNc(1,Bt,2,1,"ng-container",40),e.YNc(2,Ut,2,1,"ng-container",40),e.YNc(3,bt,2,2,"ng-template",null,58,e.W1O),e.BQk()),2&_){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.value&&"required"===t.key&&n.submitted),e.xp6(1),e.Q6J("ngIf",t.value&&"required"!==t.key&&n.accountForm.controls.inputRoutingNumber.touched)}}function Lt(_,o){if(1&_){const t=e.EpF();e.TgZ(0,"form",21)(1,"div",22)(2,"label",23),e.SDv(3,24),e.qZA(),e._UZ(4,"bb-input-text-ui",25,26),e.TgZ(6,"bb-input-validation-message-ui",27),e.YNc(7,Ot,2,0,"span",28),e.qZA()(),e.TgZ(8,"div",22)(9,"label",23),e.SDv(10,29),e.qZA(),e.TgZ(11,"bb-dropdown-single-select-ui",30,31),e._UZ(13,"bb-dropdown-single-select-option-ui",32)(14,"bb-dropdown-single-select-option-ui",33),e.qZA(),e.TgZ(15,"bb-input-validation-message-ui",27),e.YNc(16,mt,2,0,"span",34),e.qZA()(),e.TgZ(17,"div",35)(18,"label",23),e.SDv(19,36),e.qZA(),e.TgZ(20,"bb-input-text-ui",37,38),e.NdJ("keydown",function(a){return e.CHM(t),e.oxw(2).numberValidator(a)}),e.qZA(),e.TgZ(22,"bb-input-validation-message-ui",27),e.YNc(23,Tt,2,0,"span",39),e.YNc(24,Mt,2,1,"ng-container",40),e.qZA()(),e.TgZ(25,"div",41),e.SDv(26,42),e.qZA(),e.TgZ(27,"div",35)(28,"label",23),e.SDv(29,43),e.qZA(),e.TgZ(30,"bb-input-text-ui",44,45),e.NdJ("keydown",function(a){return e.CHM(t),e.oxw(2).numberValidator(a)}),e.qZA(),e.TgZ(32,"bb-input-validation-message-ui",27),e.YNc(33,Rt,5,2,"ng-container",46),e.ALo(34,"keyvalue"),e.qZA()(),e.TgZ(35,"span",47),e.SDv(36,48),e.qZA()()}if(2&_){const t=e.MAs(5),n=e.MAs(12),a=e.MAs(21),i=e.MAs(31),c=e.oxw(2);e.Q6J("formGroup",c.accountForm),e.xp6(2),e.Q6J("for",t.id),e.xp6(2),e.Q6J("aria-label","Account Name")("readonly",!1)("maxLength",null==c.formInputLengths?null:c.formInputLengths.name)("autocomplete","name"),e.xp6(2),e.Q6J("showErrors",!c.isFieldValid("inputAccountName")),e.xp6(1),e.Q6J("ngIf",c.submitted&&c.hasRequiredError("inputAccountName")),e.xp6(2),e.Q6J("for",n.id),e.xp6(4),e.Q6J("value","Savings")("label","Savings Account"),e.xp6(1),e.Q6J("value","Checking")("label","Checking Account"),e.xp6(1),e.Q6J("showErrors",!c.isFieldValid("accountTypeSelect")),e.xp6(1),e.Q6J("ngIf",c.submitted&&c.hasRequiredError("accountTypeSelect")),e.xp6(2),e.Q6J("for",a.id),e.xp6(2),e.Q6J("readonly",!1)("maxLength",null==c.formInputLengths?null:c.formInputLengths.number)("autocomplete","name"),e.xp6(2),e.Q6J("showErrors",!c.isFieldValid("inputAccountNumber")),e.xp6(1),e.Q6J("ngIf",c.submitted&&c.hasRequiredError("inputAccountNumber")),e.xp6(1),e.Q6J("ngIf",c.accountForm.controls.inputAccountNumber),e.xp6(4),e.Q6J("for",i.id),e.xp6(2),e.Q6J("readonly",!1)("maxLength",null==c.formInputLengths?null:c.formInputLengths.routingNumber),e.xp6(2),e.Q6J("showErrors",!c.isFieldValid("inputRoutingNumber")),e.xp6(1),e.Q6J("ngForOf",e.lcZ(34,27,c.accountForm.controls.inputRoutingNumber.errors))}}function vt(_,o){1&_&&e.GkF(0)}function Dt(_,o){if(1&_&&(e.TgZ(0,"div",16)(1,"div",17)(2,"div",18),e.YNc(3,Lt,37,29,"form",19),e.qZA()(),e.TgZ(4,"div",17),e.YNc(5,vt,1,0,"ng-container",20),e.qZA()()),2&_){const t=e.oxw(),n=e.MAs(17);e.xp6(3),e.Q6J("ngIf",t.accountForm),e.xp6(2),e.Q6J("ngTemplateOutlet",n)}}function It(_,o){if(1&_){const t=e.EpF();e.TgZ(0,"div",59)(1,"bb-load-button-ui",60),e.NdJ("click",function(){return e.CHM(t),e.oxw().onSubmit()}),e.SDv(2,61),e.qZA(),e.TgZ(3,"button",62),e.NdJ("click",function(){return e.CHM(t),e.oxw().manageConfirmationModal()}),e.TgZ(4,"span"),e.SDv(5,63),e.qZA()()()}if(2&_){const t=e.oxw();e.xp6(1),e.Q6J("isLoading",t.isLoading)}}function ht(_,o){1&_&&e._UZ(0,"bb-a2a-link-account-steps",64)(1,"bb-a2a-link-account-steps",65),2&_&&(e.Q6J("stepIcon","access-time"),e.xp6(1),e.Q6J("stepIcon","check"))}function Jt(_,o){1&_&&(e.TgZ(0,"div"),e._UZ(1,"bb-alert-ui",22),e.qZA()),2&_&&(e.xp6(1),e.Q6J("dismissible",!1))}function yt(_,o){1&_&&(e.TgZ(0,"div"),e._UZ(1,"bb-alert-ui",23),e.qZA()),2&_&&(e.xp6(1),e.Q6J("dismissible",!1))}function xt(_,o){1&_&&(e.TgZ(0,"div"),e._UZ(1,"bb-alert-ui",24),e.qZA()),2&_&&(e.xp6(1),e.Q6J("dismissible",!1))}function Kt(_,o){if(1&_&&e._UZ(0,"bb-activate-a2a-account",25),2&_){const t=e.oxw(3);e.Q6J("activateAccountForm",t.activateAccountForm)("submitted",t.submitted)("isDisabled",t.attemptsExceeded)("currencies",t.currencies)}}function Gt(_,o){1&_&&(e.TgZ(0,"p",31),e.SDv(1,32),e.qZA())}function Ft(_,o){1&_&&(e.TgZ(0,"p",33),e.SDv(1,34),e.qZA())}function Yt(_,o){if(1&_){const t=e.EpF();e.TgZ(0,"div",26)(1,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).toggleDisplayDetails()}),e._UZ(2,"bb-icon-ui",28),e.YNc(3,Gt,2,0,"p",29),e.YNc(4,Ft,2,0,"p",30),e.qZA()()}if(2&_){const t=o.isOpen;e.xp6(1),e.Q6J("color","link-text"),e.xp6(1),e.Q6J("name",t?"toggle-up":"toggle-down"),e.xp6(1),e.Q6J("ngIf",t),e.xp6(1),e.Q6J("ngIf",!t)}}function kt(_,o){if(1&_&&e._UZ(0,"bb-a2a-account-information",35),2&_){const t=e.oxw(2).ngIf;e.Q6J("account",t)}}function Xt(_,o){if(1&_&&(e.YNc(0,Jt,2,1,"div",13),e.YNc(1,yt,2,1,"div",13),e.YNc(2,xt,2,1,"div",13),e.ynx(3),e.TgZ(4,"div",14)(5,"span",15),e.tHW(6,16),e._UZ(7,"br"),e.N_p(),e.qZA()(),e.YNc(8,Kt,1,4,"bb-activate-a2a-account",17),e.BQk(),e.TgZ(9,"bb-collapsible-ui",18,19),e.YNc(11,Yt,5,4,"ng-template",20),e.YNc(12,kt,1,1,"ng-template",21),e.qZA()),2&_){const t=e.oxw(2);e.Q6J("ngIf",t.activationFailed&&!t.attemptsExceeded),e.xp6(1),e.Q6J("ngIf",t.attemptsExceeded),e.xp6(1),e.Q6J("ngIf",t.invalidAmount),e.xp6(6),e.Q6J("ngIf",t.isOpen),e.xp6(1),e.Q6J("isOpen",t.areDetailsOpen)}}function Wt(_,o){if(1&_){const t=e.EpF();e.TgZ(0,"div",37)(1,"bb-load-button-ui",38),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).onSubmit()}),e.SDv(2,39),e.qZA(),e.TgZ(3,"button",40),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).onClose()}),e.SDv(4,41),e.qZA()()}if(2&_){const t=e.oxw(3);e.xp6(1),e.Q6J("isLoading",t.loading)}}function wt(_,o){1&_&&(e.TgZ(0,"bb-modal-footer-ui"),e.YNc(1,Wt,5,1,"ng-template",36),e.qZA())}function Zt(_,o){if(1&_){const t=e.EpF();e.TgZ(0,"bb-modal-ui",10)(1,"bb-a2a-details-header",11),e.NdJ("closeModal",function(){return e.CHM(t),e.oxw().onClose()}),e.qZA(),e.TgZ(2,"bb-modal-body-ui"),e.YNc(3,Xt,13,5,"ng-template",12),e.qZA(),e.YNc(4,wt,2,0,"bb-modal-footer-ui",13),e.qZA()}if(2&_){const t=o.ngIf,n=e.oxw();e.Q6J("isOpen",n.isOpen)("modalOptions",n.modalOptions),e.xp6(1),e.Q6J("account",t)("attemptsExceeded",n.attemptsExceeded),e.xp6(3),e.Q6J("ngIf",!n.attemptsExceeded)}}function Pt(_,o){if(1&_){const t=e.EpF();e.ynx(0),e.TgZ(1,"bb-a2a-account-details",1),e.NdJ("closeModal",function(){return e.CHM(t),e.oxw().closeDetailsModal()}),e.qZA(),e.BQk()}if(2&_){const t=o.ngIf;e.xp6(1),e.Q6J("isOpen",!!t)("externalAccount",t)}}function Ht(_,o){if(1&_){const t=e.EpF();e.TgZ(0,"div")(1,"bb-a2a-accounts-list",4),e.NdJ("selectExternalAccount",function(a){return e.CHM(t),e.oxw(3).setExternalAccount(a)})("deleteAccount",function(a){return e.CHM(t),e.oxw(3).deleteAccount(a)})("makeTransfer",function(a){return e.CHM(t),e.oxw(3).onCreatePayment(a)}),e.qZA()()}if(2&_){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("accounts",t)}}function $t(_,o){if(1&_){const t=e.EpF();e.TgZ(0,"bb-a2a-empty-list",5),e.NdJ("openModal",function(){return e.CHM(t),e.oxw(3).openConnectAccountModal()}),e.qZA()}}function Vt(_,o){if(1&_&&(e.ynx(0),e.YNc(1,Ht,2,1,"div",0),e.YNc(2,$t,1,0,"ng-template",null,3,e.W1O),e.BQk()),2&_){const t=o.ngIf,n=e.MAs(3);e.xp6(1),e.Q6J("ngIf",null==t?null:t.length)("ngIfElse",n)}}function qt(_,o){if(1&_&&(e.ynx(0),e.YNc(1,Vt,4,2,"ng-container",0),e.ALo(2,"async"),e.BQk()),2&_){const t=e.oxw(),n=e.MAs(3);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,t.a2aAccounts$))("ngIfElse",n)}}function Qt(_,o){1&_&&(e.TgZ(0,"div",6),e._UZ(1,"bb-loading-indicator-ui",7),e.qZA())}function zt(_,o){1&_&&(e.TgZ(0,"div",6),e._UZ(1,"bb-empty-state-ui",8),e.qZA())}function jt(_,o){if(1&_){const t=e.EpF();e.ynx(0),e.TgZ(1,"bb-pending-activation-account-details",1),e.NdJ("closeModal",function(){return e.CHM(t),e.oxw().closeModal()})("submitForm",function(){const i=e.CHM(t).ngIf;return e.oxw().onActivateAccount(i)})("refreshList",function(){return e.CHM(t),e.oxw().refreshAccountsList()})("setAccountStatus",function(){return e.CHM(t),e.oxw().activationFailed=!1})("setAttemptsExceeded",function(){return e.CHM(t),e.oxw().attemptsExceeded=!1})("setInvalidAmount",function(){return e.CHM(t),e.oxw().invalidAmount=!1}),e.ALo(2,"async"),e.qZA(),e.BQk()}if(2&_){const t=o.ngIf,n=e.oxw();e.xp6(1),e.Q6J("isOpen",!0)("externalAccount",t)("activateAccountForm",n.activateForm)("loading",!!e.lcZ(2,9,n.loading$))("submitted",n.activateAccountSubmitted)("activationFailed",n.activationFailed)("attemptsExceeded",n.attemptsExceeded)("invalidAmount",n.invalidAmount)("currencies",n.currencies)}}class te{}const Ne={name:30,number:17,routingNumber:9},J="EXTERNAL_ACCOUNT_VERIFICATION_",y_unmatchedKey=`${J}FAILURE`,y_exceededKey=`${J}EXCEEDED_MAX_ATTEMPTS`,y_invalidAmount=`${J}INVALID_DEPOSIT_AMOUNTS`,de={InProcess:"warning",PendingActivation:"warning",FailedVerification:"danger",RejectedByExternalBank:"danger",DisabledForExcessiveReturns:"secondary",DisabledForFraud:"secondary"},i_={FailedVerification:"FailedVerification",RejectedByExternalBank:"RejectedByExternalBank",DisabledForExcessiveReturns:"DisabledForExcessiveReturns",DisabledForFraud:"DisabledForFraud"},_e="EXTERNAL_ACCOUNT_ROUTING_NUMBER_INVALID",c_=new Map([["required","Field is required."],["size","Branch code can only be 9 digit code."],["pattern","Branch code you have entered is invalid."],[_e,"Invalid Bank Routing Number."]]);let ne=(()=>{class _{constructor(){this.statuses=de,this.attemptsExceeded=!1,this.closeModal=new e.vpe}closeDetailModal(){this.closeModal.emit()}}return _.\u0275fac=function(t){return new(t||_)},_.\u0275cmp=e.Xpm({type:_,selectors:[["bb-a2a-details-header"]],inputs:{account:"account",attemptsExceeded:"attemptsExceeded"},outputs:{closeModal:"closeModal"},decls:2,vars:0,consts:function(){let o,t,n,a;return o="{VAR_SELECT, select, InProcess {IN PROCESS} PendingActivation {PENDING ACTIVATION} FailedVerification {FAILED ACTIVATION} RejectedByExternalBank {FAILED ACTIVATION} DisabledForExcessiveReturns {DISABLED} DisabledForFraud {DISABLED}}",o=e.Zx4(o,{VAR_SELECT:"\ufffd0\ufffd"}),t=" " + o + " ",n="FAILED ACTIVATION",a="Close payment detail dialog",[["bbCustomModalHeader",""],["data-role","payord-a2a-account-details-modal-header"],["data-role","payord-a2a-account-details-modal-name",1,"modal-title"],["aria-hidden","true",1,"d-none"],["label",""],t,["data-role","payord-a2a-account-details-modal-account-status",3,"color","text",4,"ngIf"],["color","danger","text",n,"data-role","payord-a2a-account-details-modal-account-disabled-status",4,"ngIf"],["type","button","aria-label",a,"data-role","close-payord-a2a-account-details-modal",1,"close","m-0","p-0",3,"click"],["name","clear"],["data-role","payord-a2a-account-details-modal-account-status",3,"color","text"],["color","danger","text",n,"data-role","payord-a2a-account-details-modal-account-disabled-status"]]},template:function(t,n){1&t&&(e.TgZ(0,"bb-modal-header-ui"),e.YNc(1,we,13,5,"ng-template",0),e.qZA())},directives:[l.Rb,I.F,g.o,l.cA,A.O5],encapsulation:2}),_})(),oe=(()=>{class _{}return _.\u0275fac=function(t){return new(t||_)},_.\u0275cmp=e.Xpm({type:_,selectors:[["bb-a2a-account-information"]],inputs:{account:"account"},decls:24,vars:10,consts:function(){let o,t,n,a,i,c;return o=" Account type ",t="{VAR_SELECT, select, Savings {Saving's account} Checking {Checking's account}}",t=e.Zx4(t,{VAR_SELECT:"\ufffd0\ufffd"}),n=" " + t + " ",a=" Account number ",i=" Bank name ",c=" Routing transit number ",[[1,"row"],[1,"col-12",3,"ngClass"],[1,"bb-block","bb-block--md"],["data-role","payord-a2a-account-details-modal-account-type-title",1,"bb-label"],o,[1,"bb-text-support"],["data-role","payord-a2a-account-details-modal-account-type"],n,[1,"bb-block--md"],["data-role","payord-a2a-account-details-modal-account-number-title",1,"bb-label"],a,["data-role","payord-a2a-account-details-modal-account-number",1,"bb-text-support"],["data-role","payord-a2a-account-details-modal-bank-name-title",1,"bb-label"],i,["data-role","payord-a2a-account-details-modal-bank-name",1,"bb-text-support"],["data-role","payord-a2a-account-details-modal-routing-number-title",1,"bb-label"],c,["data-role","payord-a2a-account-details-modal-routing-number",1,"bb-text-support"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.SDv(4,4),e.qZA(),e.TgZ(5,"div",5)(6,"span",6),e.SDv(7,7),e.qZA()()(),e.TgZ(8,"div",8)(9,"div",9),e.SDv(10,10),e.qZA(),e.TgZ(11,"div",11),e._uU(12),e.qZA()()(),e.TgZ(13,"div",1)(14,"div",8)(15,"div",12),e.SDv(16,13),e.qZA(),e.TgZ(17,"div",14),e._uU(18),e.qZA()(),e.TgZ(19,"div",8)(20,"div",15),e.SDv(21,16),e.qZA(),e.TgZ(22,"div",17),e._uU(23),e.qZA()()()()),2&t&&(e.xp6(1),e.Q6J("ngClass",e.VKq(6,Ce,"PendingActivation"===(null==n.account?null:n.account.status))),e.xp6(6),e.pQV(null==n.account?null:n.account.accountType),e.QtT(7),e.xp6(5),e.hij(" ",null==n.account?null:n.account.accountNumber," "),e.xp6(1),e.Q6J("ngClass",e.VKq(8,Ce,"PendingActivation"===(null==n.account?null:n.account.status))),e.xp6(5),e.hij(" ",null==n.account?null:n.account.bankName," "),e.xp6(5),e.hij(" ",null==n.account?null:n.account.routingNumber," "))},directives:[A.mk],encapsulation:2}),_})(),ae=(()=>{class _{constructor(){this.modalOptions={backdrop:"static",keyboard:!1},this.statuses=i_,this.isOpen=!1,this.closeModal=new e.vpe}onClose(){this.closeModal.emit()}}return _.\u0275fac=function(t){return new(t||_)},_.\u0275cmp=e.Xpm({type:_,selectors:[["bb-a2a-account-details"]],inputs:{isOpen:"isOpen",externalAccount:"externalAccount"},outputs:{closeModal:"closeModal"},decls:1,vars:1,consts:function(){let o,t,n,a,i,c;return o="Your account was disabled for excessive returns",t="Your account was disabled for fraud",n="The activation of your account has failed",a="You have exceeded the number of attempts to activate your account. To continue, please raise a new request.",i="The activation of your account was rejected by the external bank",c="For more information contact your provider.",[["aria-modal","true",3,"isOpen","modalOptions",4,"ngIf"],["aria-modal","true",3,"isOpen","modalOptions"],[3,"account","closeModal"],["bbCustomModalBody",""],[3,"ngSwitch"],["title",o,"data-role","payord-a2a-account-details-modal-excessive-returns-error",3,"dismissible",4,"ngSwitchCase"],["title",t,"data-role","payord-a2a-account-details-modal-fraud-error",3,"dismissible",4,"ngSwitchCase"],["title",n,"message",a,"data-role","payord-a2a-account-details-modal-failed-verification-error",3,"dismissible",4,"ngSwitchCase"],["title",i,"message",c,"data-role","payord-a2a-account-details-modal-rejected-external-error",3,"dismissible",4,"ngSwitchCase"],[3,"account"],["title",o,"data-role","payord-a2a-account-details-modal-excessive-returns-error",3,"dismissible"],["title",t,"data-role","payord-a2a-account-details-modal-fraud-error",3,"dismissible"],["title",n,"message",a,"data-role","payord-a2a-account-details-modal-failed-verification-error",3,"dismissible"],["title",i,"message",c,"data-role","payord-a2a-account-details-modal-rejected-external-error",3,"dismissible"]]},template:function(t,n){1&t&&e.YNc(0,qe,4,3,"bb-modal-ui",0),2&t&&e.Q6J("ngIf",n.externalAccount)},directives:[l.zS,ne,l.KF,m.w,oe,A.O5,l.Qd,A.RF,A.n9],encapsulation:2}),_})(),$=(()=>{class _{constructor(){this.modalOptions={backdrop:"static",keyboard:!1},this.comment="",this.confirmButtonColor="primary",this.cancelButtonColor="link",this.isOpen=!1,this.confirm=new e.vpe,this.cancel=new e.vpe,this.attachComment=!1,this.commentFieldLabel="Add comment"}resetComment(){this.attachComment&&(this.comment="")}onCancelAction(){this.cancel.emit(),this.resetComment()}onConfirmAction(){var t,n;const a=this.comment.trim();let i=null===(t=this.confirmActionPayload)||void 0===t?void 0:t.payload;this.attachComment&&!!a&&(i={payload:null===(n=this.confirmActionPayload)||void 0===n?void 0:n.payload,comment:a}),this.confirm.emit(i),this.resetComment()}}return _.\u0275fac=function(t){return new(t||_)},_.\u0275cmp=e.Xpm({type:_,selectors:[["bb-confirmation-dialog"]],inputs:{confirmButtonColor:"confirmButtonColor",cancelButtonColor:"cancelButtonColor",isOpen:"isOpen",confirmActionPayload:"confirmActionPayload",attachComment:"attachComment",commentFieldLabel:"commentFieldLabel"},outputs:{confirm:"confirm",cancel:"cancel"},ngContentSelectors:nt,decls:7,vars:2,consts:function(){let o,t;return o="" + "\ufffd0\ufffd" + "",t="Optional",[["aria-modal","true",3,"isOpen","modalOptions"],["bbCustomModalHeader",""],["bbCustomModalBody",""],["bbCustomModalFooter",""],["aria-hidden","true",1,"d-none"],["headerContent",""],["headingType","h2",3,"heading"],[3,"ngClass"],[4,"ngIf"],[3,"for"],o,[1,"bb-text-support"],t,["wrap","hard","data-role","confirmation-comment",3,"rows","cols","minLength","maxLength","ngModel","showCharCounter","ngModelChange"],["commentField",""],[1,"bb-button-bar"],["bbButton","",1,"bb-button-bar__button",3,"color","click"]]},template:function(t,n){1&t&&(e.F$t(_t),e.TgZ(0,"bb-modal-ui",0)(1,"bb-modal-header-ui"),e.YNc(2,Qe,4,2,"ng-template",1),e.qZA(),e.TgZ(3,"bb-modal-body-ui"),e.YNc(4,et,3,4,"ng-template",2),e.qZA(),e.TgZ(5,"bb-modal-footer-ui"),e.YNc(6,tt,5,4,"ng-template",3),e.qZA()()),2&t&&e.Q6J("isOpen",n.isOpen)("modalOptions",n.modalOptions)},directives:[l.zS,l.Rb,T.G,l.KF,q.R,l.YI,l.cA,l.Qd,A.mk,A.O5,r.JJ,r.On,l.yk,B.Hq],encapsulation:2,changeDetection:0}),_})(),ie=(()=>{class _{constructor(){this.isOpen=!1,this.isPendigAccountOpen=!1,this.statuses=de,this.openModal=new e.vpe,this.isLoading=!1,this.selectExternalAccount=new e.vpe,this.deleteAccount=new e.vpe,this.makeTransfer=new e.vpe,this.confirmationModalOpen=!1}populateAccount(t){this.selectExternalAccount.emit(t)}stopPropagation(t){t.stopPropagation()}manageConfirmationModal(t){this.accountInfo=t,this.confirmationModalOpen=!0}onDeleteAccount(t){this.deleteAccount.emit(t)}onMakeTransfer(t){this.makeTransfer.emit(t.externalAccountId)}}return _.\u0275fac=function(t){return new(t||_)},_.\u0275cmp=e.Xpm({type:_,selectors:[["bb-a2a-accounts-list"]],inputs:{accounts:"accounts",activateForm:"activateForm",isLoading:"isLoading"},outputs:{openModal:"openModal",selectExternalAccount:"selectExternalAccount",deleteAccount:"deleteAccount",makeTransfer:"makeTransfer"},decls:13,vars:4,consts:function(){let o,t,n,a,i,c,s,S,M,U,b,R;return o=" Remove \"" + "\ufffd0\ufffd" + "\" account? ",t=" Removing this account will permanently erase the data entered. ",n=" Remove ",a=" Cancel ",i="{VAR_SELECT, select, InProcess {IN PROCESS} PendingActivation {PENDING ACTIVATION} FailedVerification {FAILED ACTIVATION} RejectedByExternalBank {FAILED ACTIVATION} DisabledForExcessiveReturns {DISABLED} DisabledForFraud {DISABLED}}",i=e.Zx4(i,{VAR_SELECT:"\ufffd0\ufffd"}),c=" " + i + " ",s="Actions dropdown button",S=" Make transfer ",M=" See details ",U=" Remove ",b=" Activate ",R=" Activate ",[[1,"card"],[1,"card-body"],[1,"bb-list"],["tabindex","0","role","button","class","bb-list__item","data-role","a2a-accounts-list-item",3,"bbKeyboardClick",4,"ngFor","ngForOf"],[3,"isOpen","confirmButtonColor","cancel","confirm"],["title","","data-role","payord-a2a-remove-modal-title"],o,["body","","data-role","payord-a2a-remove-modal-message"],t,["confirmActionName",""],n,["cancelActionName",""],a,["tabindex","0","role","button","data-role","a2a-accounts-list-item",1,"bb-list__item",3,"bbKeyboardClick"],[1,"bb-stack"],[1,"bb-stack__item"],["data-role","payord-a2a-accounts-list-status-badge",1,"bb-block--sm"],["aria-hidden","true",1,"d-none"],["label",""],c,[3,"color","text",4,"ngIf"],[1,"bb-text-bold","bb-block--sm"],["data-role","payord-a2a-accounts-list-name"],[1,"bb-text-support"],["data-role","payord-a2a-accounts-list-account-number"],[1,"bb-stack__item--push-right","btn-group-toggle"],[1,"bb-button-bar",3,"bbKeyboardClick"],["btnColor","link","container","body","data-role","a2a-more-options",1,"bb-button-bar__button",3,"btnCircle","bbKeyboardClick"],["bbDropdownLabel",""],["bbDropdownMenuItem",""],["class","d-none d-sm-block bb-button-bar__button","bbButton","","color","primary","type","submit","data-role","payord-a2a-activate-account.modal-activate-btn-text",4,"ngIf"],[3,"color","text"],[1,"sr-only"],s,["name","ellipsis-h"],["role","menuitem","type","button","class","d-block d-sm-none dropdown-item","placement","left","data-role","transfer-a2a-dropdown",3,"bbKeyboardClick",4,"ngIf"],["role","menuitem","type","button","placement","left","data-role","transfer-a2a-dropdown",1,"dropdown-item",3,"hidden","bbKeyboardClick"],S,["role","menuitem","type","button","placement","left","data-role","details-a2a-dropdown",1,"dropdown-item",3,"bbKeyboardClick"],M,["role","menuitem","type","button","placement","left","data-role","remove-a2a-dropdown",1,"dropdown-item","text-danger",3,"bbKeyboardClick"],U,["role","menuitem","type","button","placement","left","data-role","transfer-a2a-dropdown",1,"d-block","d-sm-none","dropdown-item",3,"bbKeyboardClick"],b,["bbButton","","color","primary","type","submit","data-role","payord-a2a-activate-account.modal-activate-btn-text",1,"d-none","d-sm-block","bb-button-bar__button"],R]},template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,Et,20,8,"div",3),e.qZA()()(),e.TgZ(4,"bb-confirmation-dialog",4),e.NdJ("cancel",function(){return n.confirmationModalOpen=!1})("confirm",function(){return n.confirmationModalOpen=!1,n.onDeleteAccount((null==n.accountInfo?null:n.accountInfo.externalAccountId)||"")}),e.TgZ(5,"span",5),e.SDv(6,6),e.qZA(),e.TgZ(7,"span",7),e.SDv(8,8),e.qZA(),e.TgZ(9,"span",9),e.SDv(10,10),e.qZA(),e.TgZ(11,"span",11),e.SDv(12,12),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("ngForOf",n.accounts),e.xp6(1),e.Q6J("isOpen",n.confirmationModalOpen)("confirmButtonColor","danger"),e.xp6(2),e.pQV((null==n.accountInfo?null:n.accountInfo.accountNickName)||(null==n.accountInfo?null:n.accountInfo.bankName)),e.QtT(6))},directives:[I.F,u.N9,g.o,$,A.sg,Q.w,A.O5,u.RG,u.i4,B.Hq],encapsulation:2}),_})();const Se=_=>_&&_.replace(/\s+/g,"")||"",Oe=_=>{const{metaKey:o,ctrlKey:t,keyCode:n,key:a}=_,M=(o||t)&&[65,67,86,88].includes(n);!/^\d+$/.test(a)&&![8,16,37,38,93,39,9].includes(n)&&!M&&_.preventDefault()};function V(_){return _.value&&_.value.amount>0&&_.value.currency.length>0?void 0:{invalidAmount:{value:_.value}}}function me(_){let{value:o}=_;const t={pattern:!1,size:!1};if(o){o=o.toString(10);const n=s=>parseInt(s,10);9!==o.length&&(t.size=!0),(3*(n(o[0])+n(o[3])+n(o[6]))+7*(n(o[1])+n(o[4])+n(o[7]))+(n(o[2])+n(o[5])+n(o[8])))%10!=0&&o.length>=9&&(t.pattern=!0)}return t.size||t.pattern?t:null}let Te=(()=>{class _{constructor(){this.numberValidation=Oe,this.submitted=!1,this.isDisabled=!1,this.currencies=[],this.setDecimalsValues=new e.vpe,this.currencyState={currency:!0,integer:!0,decimal:!1}}isFieldValid(t){const n=this.getControl(t);return null==n?void 0:n.valid}getControl(t){var n;return null===(n=this.activateAccountForm)||void 0===n?void 0:n.controls[t]}onSetDecimalsValues(t){this.setDecimalsValues.emit({name:t,value:this.activateAccountForm.controls[t].value})}}return _.\u0275fac=function(t){return new(t||_)},_.\u0275cmp=e.Xpm({type:_,selectors:[["bb-activate-a2a-account"]],inputs:{submitted:"submitted",activateAccountForm:"activateAccountForm",isDisabled:"isDisabled",currencies:"currencies"},outputs:{setDecimalsValues:"setDecimalsValues"},decls:15,vars:17,consts:function(){let o,t,n,a,i,c;return o="First amount",t="Second amount",n=" Amount is required. ",a=" Amount is invalid. ",i=" Amount is required. ",c=" Amount is invalid. ",[[1,"form-group",3,"formGroup"],["id","firstAmountLabel",1,"bb-label"],o,[1,"row","col-md-8","col-sm-8"],["aria-labelledby","firstAmountLabel","formControlName","firstAmount",3,"disabled","currencies","placeholder","required","isRightAligned"],[1,"form-group"],[3,"showErrors"],[4,"ngIf"],["id","secondAmountLabel",1,"bb-label"],t,["aria-labelledby","secondAmountLabel","formControlName","secondAmount",3,"disabled","currencies","required","placeholder","isRightAligned"],["data-role","payord-a2a-activate-account-first-decimals-required-message",4,"ngIf"],["data-role","payord-a2a-activate-account-first-Decimals-pattern-message",4,"ngIf"],["data-role","payord-a2a-activate-account-first-decimals-required-message"],n,["data-role","payord-a2a-activate-account-first-Decimals-pattern-message"],a,["data-role","payord-a2a-activate-account-second-decimals-required-message",4,"ngIf"],["data-role","payord-a2a-activate-account-second-Decimals-pattern-message",4,"ngIf"],["data-role","payord-a2a-activate-account-second-decimals-required-message"],i,["data-role","payord-a2a-activate-account-second-Decimals-pattern-message"],c]},template:function(t,n){if(1&t&&(e.TgZ(0,"form",0)(1,"div",1),e.SDv(2,2),e.qZA(),e.TgZ(3,"div",3),e._UZ(4,"bb-currency-input-ui",4),e.qZA(),e.TgZ(5,"div",5)(6,"bb-input-validation-message-ui",6),e.YNc(7,rt,3,2,"ng-container",7),e.qZA()(),e.TgZ(8,"div",8),e.SDv(9,9),e.qZA(),e.TgZ(10,"div",3),e._UZ(11,"bb-currency-input-ui",10),e.qZA(),e.TgZ(12,"div")(13,"bb-input-validation-message-ui",6),e.YNc(14,Nt,3,2,"ng-container",7),e.qZA()()()),2&t){let a,i;e.Q6J("formGroup",n.activateAccountForm),e.xp6(4),e.Q6J("disabled",n.currencyState)("currencies",n.currencies)("placeholder","00")("required",!0)("isRightAligned",!0),e.uIk("data-role","first-decimal-input"),e.xp6(2),e.Q6J("showErrors",!n.isFieldValid("firstAmount")),e.xp6(1),e.Q6J("ngIf",n.submitted&&(null==n.activateAccountForm||null==(a=n.activateAccountForm.get("firstAmount"))?null:a.errors)),e.xp6(4),e.Q6J("disabled",n.currencyState)("currencies",n.currencies)("required",!0)("placeholder","00")("isRightAligned",!0),e.uIk("data-role","second-decimal-input"),e.xp6(2),e.Q6J("showErrors",!n.isFieldValid("secondAmount")),e.xp6(1),e.Q6J("ngIf",n.submitted&&(null==n.activateAccountForm||null==(i=n.activateAccountForm.get("secondAmount"))?null:i.errors))}},directives:[z.K,W.d,r._Y,r.JL,r.sg,r.JJ,r.u,r.Q7,A.O5],encapsulation:2}),_})(),ce=(()=>{class _{constructor(){this.openModal=new e.vpe}openAccountModal(){this.openModal.emit()}}return _.\u0275fac=function(t){return new(t||_)},_.\u0275cmp=e.Xpm({type:_,selectors:[["bb-a2a-empty-list"]],outputs:{openModal:"openModal"},decls:6,vars:0,consts:function(){let o,t,n;return o="You have not connected any account yet",t="You need to connect your accounts before starting free fees transfers.",n=" Connect account ",[[1,"bb-state-container","card"],["title",o,"subtitle",t,"iconSize","xxl","iconModifier","swap-horiz",1,"bb-empty-state__container","bb-block","bb-block--md"],[1,"bb-text-align-center","bb-block","bb-block--md"],["bbButton","","data-role","payord-a2a-linked-external-account-action-btn","buttonSize","md",3,"click"],["data-role","payord-a2a-linked-external-account-action-btn-text"],n]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"bb-empty-state-ui",1),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.openAccountModal()}),e.TgZ(4,"span",4),e.SDv(5,5),e.qZA()()()())},directives:[L.s,B.Hq],encapsulation:2}),_})(),pe=(()=>{class _{}return _.\u0275fac=function(t){return new(t||_)},_.\u0275cmp=e.Xpm({type:_,selectors:[["bb-a2a-link-account-steps"]],inputs:{step:"step",stepIcon:"stepIcon",stepName:"stepName",stepDescription:"stepDescription"},decls:6,vars:6,consts:[["data-role","payord-a2a-link-account-info-step-info",1,"bb-stack","bb-stack--density-sm","bb-subtitle"],["color","primary","size","sm","data-role","icon-insert-link-sm",1,"bb-stack__item",3,"name"],["data-role","payord-a2a-link-account-info-step-name",1,"bb-stack__item"],["data-role","payord-a2a-link-account-info-step-description",1,"bb-text-support","bb-subtitle",3,"ngClass"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"bb-icon-ui",1),e.TgZ(2,"span",2),e._uU(3),e.qZA()(),e.TgZ(4,"div",3),e._uU(5),e.qZA()),2&t&&(e.xp6(1),e.s9C("name",n.stepIcon),e.xp6(2),e.hij(" ",n.stepName," "),e.xp6(1),e.Q6J("ngClass",e.VKq(4,dt,"access-time"===n.stepIcon)),e.xp6(1),e.hij(" ",n.stepDescription," "))},directives:[g.o,A.mk],encapsulation:2}),_})(),se=(()=>{class _{constructor(){this.modalOpen=!1,this.submitted=!1,this.isLoading=!1,this.submitForm=new e.vpe,this.discardData=new e.vpe,this.buildForm=new e.vpe,this.confirmationModalOpen=!1,this.modalOptions={backdrop:"static",keyboard:!1},this.numberValidator=Oe,this.erorToMessageMap=c_}isFieldValid(t){const n=this.getControl(t);return null==n?void 0:n.valid}hasRequiredError(t){var n;const a=this.getControl(t);return null===(n=null==a?void 0:a.errors)||void 0===n?void 0:n.required}onSubmit(){this.submitForm.emit()}onDiscard(){this.discardData.emit()}manageConfirmationModal(){Object.values(this.accountForm.value).some(n=>!!n)?this.confirmationModalOpen=!0:this.onDiscard()}getControl(t){var n;return null===(n=this.accountForm)||void 0===n?void 0:n.controls[t]}}return _.\u0275fac=function(t){return new(t||_)},_.\u0275cmp=e.Xpm({type:_,selectors:[["bb-a2a-link-account-form"]],inputs:{modalOpen:"modalOpen",accountForm:"accountForm",submitted:"submitted",isLoading:"isLoading",formInputLengths:"formInputLengths",modalState:"modalState"},outputs:{submitForm:"submitForm",discardData:"discardData",buildForm:"buildForm"},decls:18,vars:4,consts:function(){let o,t,n,a,i,c,s,S,M,U,b,R,N,k,d,Re,Le,ve,De,Ie,he,Je,ye,xe,Ke;return o=" Discard account ",t=" Are you sure you want to discard the account? The data you have entered will be lost. ",n=" Yes, Discard ",a=" Keep data ",i=" Connect external account ",c=" Account name ",s=" Account type ",S="Account Type",M="- select an account type -",U=" Account number ",b="Account Number",R=" E.g. 001234567890 ",N=" Routing transit number ",k="Routing Number",d=" E.g. 021000021 ",Re=" Field is required. ",Le=" Field is required. ",ve=" Field is required. ",De=" Account number you have entered is invalid. ",Ie=" Connect ",he=" Cancel ",Je="Wait 1-3 business days",ye="You will receive two micro deposits in your external account",xe="Activate account",Ke="Use the two micro deposits to activate your account",[["aria-modal","true",3,"isOpen","modalOptions"],["bbCustomModalHeader",""],["bbCustomModalBody",""],["bbCustomModalFooter",""],[3,"isOpen","confirmButtonColor","cancel","confirm"],["title","","data-role","payord-a2a-link-account.confirmation-dialog-content",1,"modal-title"],o,["body","","data-role","payord-a2a-link-account.confirmation-dialog.discard.body"],t,["confirmActionName",""],n,["cancelActionName",""],a,["bbPayordA2ALinkAccountModalInformation",""],["data-role","payord-a2a-link-account-dialog-header",1,"modal-title"],i,[1,"bb-list"],[1,"bb-list__item"],[1,"row"],["class","col-md-6",3,"formGroup",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"col-md-6",3,"formGroup"],[1,"form-group"],["data-role","payord-debit-create-CountrySubDivision-label",1,"bb-label",3,"for"],c,["data-role","payord-a2a-link-account-AccountName-input","formControlName","inputAccountName",3,"aria-label","readonly","maxLength","autocomplete"],["AccountName",""],[3,"showErrors"],["data-role","payord-a2a-link-account-AccountName-required-message",4,"ngIf"],s,["data-role","payord-a2a-link-account-AccountType-select","aria-label",S,"formControlName","accountTypeSelect","placeholder",M],["AccountType",""],["data-role","payord-a2a-link-account-AccountType-savings",1,"text-capitalize",3,"value","label"],["data-role","payord-a2a-link-account-AccountType-checking",1,"text-capitalize",3,"value","label"],["data-role","payord-a2a-link-account-AccountType-required-message",4,"ngIf"],[1,"bb-block","bb-block--sm"],U,["data-role","payord-a2a-link-account-AccountNumber-input","aria-label",b,"formControlName","inputAccountNumber",3,"readonly","maxLength","autocomplete","keydown"],["AccountNumber",""],["data-role","payord-a2a-link-account-AccountNumber-required-message",4,"ngIf"],[4,"ngIf"],["data-role","payord-a2a-link-account-AccountNumber-example",1,"bb-block","bb-block--md","bb-text-support","bb-subtitle"],R,N,["data-role","payord-a2a-link-account-RoutingNumber-input","aria-label",k,"formControlName","inputRoutingNumber",3,"readonly","maxLength","keydown"],["TransitNumber",""],[4,"ngFor","ngForOf"],["data-role","payord-a2a-link-account-RoutingNumber-example",1,"bb-text-support","bb-subtitle"],d,["data-role","payord-a2a-link-account-AccountName-required-message"],Re,["data-role","payord-a2a-link-account-AccountType-required-message"],Le,["data-role","payord-a2a-link-account-AccountNumber-required-message"],ve,["data-role","payord-a2a-link-account-AccountNumber-pattern-message",4,"ngIf"],["data-role","payord-a2a-link-account-AccountNumber-pattern-message"],De,["errorMessageTemplate",""],[1,"bb-button-bar"],["color","primary","type","submit","data-role","payord-a2a-link-account.modal-link-btn-text",1,"bb-button-bar__button",3,"isLoading","click"],Ie,["bbButton","","color","link","type","reset","data-role","payord-a2a-link-account.modal-cancel-btn-text",1,"bb-button-bar__button",3,"click"],he,["stepName",Je,"stepDescription",ye,3,"stepIcon"],["stepName",xe,"stepDescription",Ke,3,"stepIcon"]]},template:function(t,n){1&t&&(e.TgZ(0,"bb-modal-ui",0)(1,"bb-modal-header-ui"),e.YNc(2,St,2,0,"ng-template",1),e.qZA(),e.TgZ(3,"bb-modal-body-ui"),e.YNc(4,Dt,6,2,"ng-template",2),e.qZA(),e.TgZ(5,"bb-modal-footer-ui"),e.YNc(6,It,6,1,"ng-template",3),e.qZA()(),e.TgZ(7,"bb-confirmation-dialog",4),e.NdJ("cancel",function(){return n.confirmationModalOpen=!1})("confirm",function(){return n.onDiscard(),n.confirmationModalOpen=!1}),e.TgZ(8,"span",5),e.SDv(9,6),e.qZA(),e.TgZ(10,"span",7),e.SDv(11,8),e.qZA(),e.TgZ(12,"span",9),e.SDv(13,10),e.qZA(),e.TgZ(14,"span",11),e.SDv(15,12),e.qZA()(),e.YNc(16,ht,2,2,"ng-template",null,13,e.W1O)),2&t&&(e.Q6J("isOpen",n.modalOpen)("modalOptions",n.modalOptions),e.xp6(7),e.Q6J("isOpen",n.confirmationModalOpen)("confirmButtonColor","danger"))},directives:[l.zS,l.Rb,l.KF,j.m,W.d,w.Pp,w.MM,l.YI,Z.K,$,pe,l.cA,l.Qd,A.O5,r._Y,r.JL,r.sg,r.JJ,r.u,A.sg,A.tP,l.yk,B.Hq],pipes:[A.Nd],encapsulation:2,changeDetection:0}),_})(),Ee=(()=>{class _{constructor(){this.modalOptions={backdrop:"static",keyboard:!1},this.isOpen=!1,this.loading=!1,this.submitted=!1,this.activationFailed=!1,this.attemptsExceeded=!1,this.invalidAmount=!1,this.currencies=[],this.openDetailsModal=new e.vpe,this.closeModal=new e.vpe,this.refreshList=new e.vpe,this.submitForm=new e.vpe,this.setAccountStatus=new e.vpe,this.setAttemptsExceeded=new e.vpe,this.setInvalidAmount=new e.vpe,this.isAccountOpen=!0,this.confirmationModalOpen=!1,this.areDetailsOpen=!1,this.mequieromorir=!0}onClose(){const t=this.activateAccountForm.controls;!t.firstAmount.value.amount&&!t.secondAmount.value.amount||this.attemptsExceeded?(this.closeModal.emit(),this.setAccountStatus.emit(),this.areDetailsOpen=!1,this.refreshAccountsList()):this.confirmationModalOpen=!0}setOpenValue(){this.isAccountOpen=!this.isAccountOpen}onSubmit(){this.submitForm.emit()}refreshAccountsList(){this.attemptsExceeded?(this.refreshList.emit(),this.setAttemptsExceeded.emit()):this.invalidAmount&&this.setInvalidAmount.emit()}toggleDisplayDetails(){this.areDetailsOpen=!this.areDetailsOpen}onCloseConfirmationModal(){this.setAccountStatus.emit(),this.areDetailsOpen=!1,this.confirmationModalOpen=!1}}return _.\u0275fac=function(t){return new(t||_)},_.\u0275cmp=e.Xpm({type:_,selectors:[["bb-pending-activation-account-details"]],inputs:{isOpen:"isOpen",externalAccount:"externalAccount",activateAccountForm:"activateAccountForm",loading:"loading",submitted:"submitted",activationFailed:"activationFailed",attemptsExceeded:"attemptsExceeded",invalidAmount:"invalidAmount",currencies:"currencies"},outputs:{openDetailsModal:"openDetailsModal",closeModal:"closeModal",refreshList:"refreshList",submitForm:"submitForm",setAccountStatus:"setAccountStatus",setAttemptsExceeded:"setAttemptsExceeded",setInvalidAmount:"setInvalidAmount"},decls:10,vars:3,consts:function(){let o,t,n,a,i,c,s,S,M,U,b,R,N,k;return o=" Discard amount(s) ",t=" Are you sure you want to discard the amount(s)? The data you have entered will be lost. ",n=" Yes, Discard ",a=" Keep data ",i=" Insert below the two amounts under 50 cents that were credited to your connected account." + "\ufffd#7\ufffd\ufffd/#7\ufffd" + " The order of the payments does not influence the activation. ",c="The entered deposit amounts are incorrect. Please try again.",s="The activation of your account has failed",S="You have exceeded the number of attempts to activate your account. To continue, please raise a new request.",M="The activation of your account has failed",U="Value must be between 0 and 51 cents.",b=" Hide account details ",R=" Show account details ",N=" Activate ",k=" Cancel ",[["aria-modal","true",3,"isOpen","modalOptions",4,"ngIf"],[3,"isOpen","confirmButtonColor","cancel","confirm"],["title","","data-role","payord-a2a-activate-account.confirmation-dialog-content",1,"modal-title"],o,["body","","data-role","payord-a2a-activate-account.confirmation-dialog.discard.body"],t,["confirmActionName","","data-role","payord-a2a-activate-account-confirmation-dialog-cancel"],n,["cancelActionName","","data-role","payord-a2a-activate-account-confirmation-dialog-keep"],a,["aria-modal","true",3,"isOpen","modalOptions"],[3,"account","attemptsExceeded","closeModal"],["bbCustomModalBody",""],[4,"ngIf"],[1,"bb-block","bb-block--lg"],["data-role","payord-a2a-pending-activation-activate-account.information.message"],i,[3,"activateAccountForm","submitted","isDisabled","currencies",4,"ngIf"],[3,"isOpen"],["collapse",""],["bbCollapsibleHeader",""],["bbCollapsibleBody",""],["title",c,"data-role","payord-a2a-account-details-modal-excessive-returns-error",3,"dismissible"],["title",s,"message",S,"data-role","payord-a2a-pending-activation-failed-verification-error",3,"dismissible"],["title",M,"message",U,"data-role","payord-a2a-pending-activation-invalid-amount-error",3,"dismissible"],[3,"activateAccountForm","submitted","isDisabled","currencies"],[1,"bb-block","bb-block--lg","bb-stack"],["bbButton","","buttonSize","md","data-role","toggle-details-button",1,"text-primary","bb-text-bold",3,"color","click"],["size","md",1,"bb-stack__item","bb-stack__item--spacing-sm",3,"name"],["class","bb-stack__item bb-block bb-block--no-margin","data-role","payord-a2a-account-details-modal-hide-info-text",4,"ngIf"],["class","bb-stack__item bb-block bb-block--no-margin","data-role","payord-a2a-account-details-modal-show-info-text",4,"ngIf"],["data-role","payord-a2a-account-details-modal-hide-info-text",1,"bb-stack__item","bb-block","bb-block--no-margin"],b,["data-role","payord-a2a-account-details-modal-show-info-text",1,"bb-stack__item","bb-block","bb-block--no-margin"],R,[3,"account"],["bbCustomModalFooter",""],[1,"bb-button-bar"],["color","primary","data-role","payord-a2a-activate-account-modal",1,"bb-button-bar__button",3,"isLoading","click"],N,["bbButton","","color","link","data-role","payord-a2a-activate-account-modal-cancel",1,"bb-button-bar__button",3,"click"],k]},template:function(t,n){1&t&&(e.YNc(0,Zt,5,5,"bb-modal-ui",0),e.TgZ(1,"bb-confirmation-dialog",1),e.NdJ("cancel",function(){return n.confirmationModalOpen=!1})("confirm",function(){return n.closeModal.emit(),n.refreshAccountsList(),n.onCloseConfirmationModal()}),e.TgZ(2,"span",2),e.SDv(3,3),e.qZA(),e.TgZ(4,"span",4),e.SDv(5,5),e.qZA(),e.TgZ(6,"span",6),e.SDv(7,7),e.qZA(),e.TgZ(8,"span",8),e.SDv(9,9),e.qZA()()),2&t&&(e.Q6J("ngIf",n.externalAccount),e.xp6(1),e.Q6J("isOpen",n.confirmationModalOpen)("confirmButtonColor","danger"))},directives:[l.zS,ne,l.KF,m.w,Te,K.tB,g.o,oe,l.YI,Z.K,$,A.O5,l.Qd,K.gM,B.Hq,K.rJ,l.yk],encapsulation:2}),_})();const s_=[L.P,B.hJ,l.zk,j.j,w.CS,W.w,g.Q,m.n,h.PQ,I.T,P.p,z.v,K.d8,u.CK,T.O,Z.C,m.n,q.J,Q.O];let E_=(()=>{class _{}return _.\u0275fac=function(t){return new(t||_)},_.\u0275mod=e.oAB({type:_}),_.\u0275inj=e.cJS({imports:[[A.ez,r.UX,...s_],L.P,B.hJ,l.zk,j.j,w.CS,W.w,g.Q,m.n,h.PQ,I.T,P.p,z.v,K.d8,u.CK,T.O,Z.C,m.n,q.J,Q.O]}),_})();var D=(()=>{return(_=D||(D={})).ACCOUNT_DETAILS="account-details",_.CONNECT_ACCOUNT="connect-account",_.ACTIVATE_ACCOUNT="activate-account",D;var _})();let F=(()=>{class _{constructor(t){this.paymentOrdersA2ADataHttpService=t,this.isFormModalOpen=new f.X(!1),this.refreshAccounts$=new f.X(void 0),this.responseError$=new f.X(void 0),this.accounts$=this.refreshAccounts$.pipe((0,Fe.w)(()=>this.paymentOrdersA2ADataHttpService.getAll().pipe((0,ee.K)(n=>(this.responseError$.next(n),(0,le._)(n))),(0,Ye.U)(n=>n&&n.accounts?n.accounts:[]))))}postNewAccount(t){return this.paymentOrdersA2ADataHttpService.create({externalAccountPostRequest:t})}putNewAccountVerification(t,n){return this.paymentOrdersA2ADataHttpService.verify({externalAccountId:t,externalAccountVerificationPutRequest:n})}removeAccount(t){return this.paymentOrdersA2ADataHttpService._delete({externalAccountId:t})}get isModalOpen(){return this.isFormModalOpen}openModal(t=!0){this.isFormModalOpen.next(t)}refreshAccounts(){this.refreshAccounts$.next(void 0)}}return _.\u0275fac=function(t){return new(t||_)(e.LFG(O.Px))},_.\u0275prov=e.Yz7({token:_,factory:_.\u0275fac}),_})(),x=(()=>{class _{constructor(t){this.router=t,this.selectedA2ARecord$=new f.X(void 0)}openModal(t,n,a={}){n&&this.selectedA2ARecord$.next(n),this.router.navigate([t],a)}closeModal(t={}){this.selectedA2ARecord$.next(void 0),this.router.navigate(["../"],t)}get a2aRecord$(){return this.selectedA2ARecord$.asObservable()}}return _.\u0275fac=function(t){return new(t||_)(e.LFG(p.F0))},_.\u0275prov=e.Yz7({token:_,factory:_.\u0275fac}),_})(),Me=(()=>{class _{constructor(t,n){this.viewService=t,this.route=n}initiateConnectAccount(){this.viewService.openModal(D.CONNECT_ACCOUNT,void 0,{relativeTo:this.route})}}return _.\u0275fac=function(t){return new(t||_)(e.Y36(x),e.Y36(p.gz))},_.\u0275cmp=e.Xpm({type:_,selectors:[["bb-connect-external-accounts-journey"]],features:[e._Bn([F])],decls:9,vars:0,consts:function(){let o,t;return o="Connected Accounts",t="Connect account ",[[1,"bb-stack","bb-block","bb-block--lg"],[1,"bb-stack__item","bb-stack__item--fill"],["headingType","h1","heading",o,"data-role","connect-external-accounts-title"],[1,"bb-stack__item"],["bbButton","","color","secondary","data-role","initiate-connect-account",3,"click"],[1,"bb-icon","bb-icon-add"],[1,"bb-accounts-overview-table__header-row"],t]},template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"bb-header-ui",2),e.qZA(),e.TgZ(3,"div",3)(4,"button",4),e.NdJ("click",function(){return n.initiateConnectAccount()}),e._UZ(5,"i",5),e.TgZ(6,"span",6),e.SDv(7,7),e.qZA()()()(),e._UZ(8,"router-outlet"))},directives:[T.G,B.Hq,p.lC],encapsulation:2}),_})();const A_=new e.OlP("ConnectExternalAccountsJourneyConfigurationToken injection token"),ge={currencies:["USD"],dismissMessageTime:3e3};let Y=(()=>{class _{constructor(t){this.config=t,this._config=Object.assign(Object.assign({},ge),this.config||{})}get defaults(){return ge}get currencies(){return this._config.currencies}get dismissMessageTime(){return this._config.dismissMessageTime}}return _.\u0275fac=function(t){return new(t||_)(e.LFG(A_,8))},_.\u0275prov=e.Yz7({token:_,factory:_.\u0275fac}),_})(),Be=(()=>{class _{constructor(t,n){this.route=t,this.viewService=n,this.account$=this.viewService.a2aRecord$.pipe((0,re.q)(1),(0,ue.b)(a=>!a&&this.closeDetailsModal()))}closeDetailsModal(){this.viewService.closeModal({relativeTo:this.route})}}return _.\u0275fac=function(t){return new(t||_)(e.Y36(p.gz),e.Y36(x))},_.\u0275cmp=e.Xpm({type:_,selectors:[["bb-account-details-modal-view"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"isOpen","externalAccount","closeModal"]],template:function(t,n){1&t&&(e.YNc(0,Pt,2,2,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,n.account$))},directives:[ae,A.O5],pipes:[A.Ov],encapsulation:2,changeDetection:0}),_})(),fe=(()=>{class _{constructor(t,n,a,i,c,s){this.notificationService=t,this.linkAccountService=n,this.viewService=a,this.config=i,this.activatedRoute=c,this.communicationService=s,this.a2aAccounts$=this.linkAccountService.accounts$,this.httpResponseError$=this.linkAccountService.responseError$,this.destroy$=new H.x}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}openConnectAccountModal(){this.viewService.openModal(D.CONNECT_ACCOUNT,void 0,{relativeTo:this.activatedRoute})}setExternalAccount(t){this.viewService.openModal("PendingActivation"===t.status?D.ACTIVATE_ACCOUNT:D.ACCOUNT_DETAILS,t,{relativeTo:this.activatedRoute})}deleteAccount(t){this.linkAccountService.removeAccount(t).pipe((0,v.R)(this.destroy$)).subscribe(()=>{this.refreshAccountsList(),this.showNotification(!0,{header:"Account removed successfully",message:""})},()=>{this.showNotification(!1,{header:"Account could not be removed",message:""})})}onCreatePayment(t){var n;null===(n=this.communicationService)||void 0===n||n.navigateToMakeTransfer(t)}showNotification(t,n){this.notificationService.showNotification(Object.assign({dismissible:!0,ttl:this.config.dismissMessageTime,modifier:t?"success":"error"},n))}refreshAccountsList(){this.linkAccountService.refreshAccounts()}}return _.\u0275fac=function(t){return new(t||_)(e.Y36(h.gq),e.Y36(F),e.Y36(x),e.Y36(Y),e.Y36(p.gz),e.Y36(te,8))},_.\u0275cmp=e.Xpm({type:_,selectors:[["bb-connect-external-accounts-view"]],decls:7,vars:4,consts:function(){let o,t;return o="Page couldn't load",t="Try to reload the page or contact the system administrator.",[[4,"ngIf","ngIfElse"],["loadingA2AList",""],["errorState",""],["emptyList",""],[3,"accounts","selectExternalAccount","deleteAccount","makeTransfer"],[3,"openModal"],[1,"bb-state-container","card"],["text","Loading data...","text-i18n","@@bb-connected-external-accounts-journey.connected-external-accounts-view.loading-placeholder"],["title",o,"subtitle",t,"iconSize","xxl","iconModifier","error"]]},template:function(t,n){if(1&t&&(e.YNc(0,qt,3,4,"ng-container",0),e.ALo(1,"async"),e.YNc(2,Qt,2,0,"ng-template",null,1,e.W1O),e.YNc(4,zt,2,0,"ng-template",null,2,e.W1O),e._UZ(6,"router-outlet")),2&t){const a=e.MAs(5);e.Q6J("ngIf",!e.lcZ(1,2,n.httpResponseError$))("ngIfElse",a)}},directives:[ie,ce,P.Q,L.s,A.O5,p.lC],pipes:[A.Ov],encapsulation:2}),_})(),Ue=(()=>{class _{constructor(t,n,a,i,c,s){this.viewService=t,this.linkAccountService=n,this.notificationService=a,this.formBuilder=i,this.config=c,this.activatedRoute=s,this.activateAccountSubmitted=!1,this.activationFailed=!1,this.attemptsExceeded=!1,this.invalidAmount=!1,this.loading$=new f.X(!1),this.activateForm=this.buildActivateAccountForm(),this.account$=this.viewService.a2aRecord$.pipe((0,re.q)(1),(0,ue.b)(S=>!S&&this.closeModal())),this.destroy$=new H.x}get currencies(){return this.config.currencies}closeModal(){this.activateAccountSubmitted=!1,this.viewService.closeModal({relativeTo:this.activatedRoute})}onActivateAccount(t){var n;const a=null==t?void 0:t.externalAccountId;this.activateAccountSubmitted=!0,this.loading$.next(!0),!(null===(n=this.activateForm)||void 0===n?void 0:n.invalid)&&a?this.linkAccountService.putNewAccountVerification(a,{value1:this.activateForm.value.firstAmount.amount,value2:this.activateForm.value.secondAmount.amount}).pipe((0,v.R)(this.destroy$)).subscribe(()=>{this.closeModal(),this.loading$.next(!1),this.showNotification(!0,{header:"Information submitted successfully",message:""}),this.activateForm.reset(),this.activateAccountSubmitted=!1,this.linkAccountService.refreshAccounts()},({error:c})=>{const{errors:s}=c;(null==s?void 0:s.length)?this.manageResponseError(s[0].key):this.activationFailed=!1,this.showNotification(!1,{header:"Account activation failed",message:""}),this.loading$.next(!1)}):this.loading$.next(!1)}manageResponseError(t){switch(t){case y_unmatchedKey:this.activationFailed=!0,this.invalidAmount=!1;break;case y_exceededKey:this.attemptsExceeded=!0,this.invalidAmount=!1;break;case y_invalidAmount:this.activationFailed=!1,this.attemptsExceeded=!1,this.invalidAmount=!0}}refreshAccountsList(){this.linkAccountService.refreshAccounts(),this.attemptsExceeded&&(this.activateForm.controls.firstAmount.disable(),this.activateForm.controls.secondAmount.disable())}showNotification(t,n){this.notificationService.showNotification(Object.assign({dismissible:!0,ttl:this.config.dismissMessageTime,modifier:t?"success":"error"},n))}buildActivateAccountForm(){const t={currency:"",amount:""};return this.formBuilder.group({firstAmount:[t,[V]],secondAmount:[t,[V]]})}}return _.\u0275fac=function(t){return new(t||_)(e.Y36(x),e.Y36(F),e.Y36(h.gq),e.Y36(r.qu),e.Y36(Y),e.Y36(p.gz))},_.\u0275cmp=e.Xpm({type:_,selectors:[["bb-activate-account-modal-view"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"isOpen","externalAccount","activateAccountForm","loading","submitted","activationFailed","attemptsExceeded","invalidAmount","currencies","closeModal","submitForm","refreshList","setAccountStatus","setAttemptsExceeded","setInvalidAmount"]],template:function(t,n){1&t&&(e.YNc(0,jt,3,11,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,n.account$))},directives:[Ee,A.O5],pipes:[A.Ov],encapsulation:2,changeDetection:0}),_})();const r_={path:"",component:Me,children:[{path:"",component:fe,children:[{path:"account-details",component:Be},{path:"connect-account",component:(()=>{class _{constructor(t,n,a,i,c,s){this.linkAccountService=t,this.notificationService=n,this.config=a,this.formBuilder=i,this.viewService=c,this.route=s,this.submitted=!1,this.loading$=new f.X(!1),this.accountForm=this.buildAccountForm(),this.formInputLengths=Ne,this.destroy$=new H.x}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onDiscardData(){this.viewService.closeModal({relativeTo:this.route}),this.submitted=!1,this.accountForm.reset()}onSubmit(){if(this.submitted=!0,this.loading$.next(!0),this.accountForm.invalid)return void this.loading$.next(!1);const{inputRoutingNumber:t,inputAccountName:n,inputAccountNumber:a,accountTypeSelect:i}=this.accountForm.value,c={routingNumber:t,accountNickName:n.trim(),accountNumber:Se(a),accountType:i};this.linkAccountService.postNewAccount(c).pipe((0,v.R)(this.destroy$),(0,ee.K)(s=>{var S;return this.handleErrors(null===(S=s.error)||void 0===S?void 0:S.errors),this.loading$.next(!1),ke.E})).subscribe(()=>{this.loading$.next(!1),this.showNotification(!0,{header:"Information submitted successfully",message:""}),this.accountForm.reset(),this.submitted=!1,this.linkAccountService.refreshAccounts(),this.viewService.closeModal({relativeTo:this.route})})}handleErrors(t){var n;Array.isArray(t)&&t.some(a=>a.key===_e)?null===(n=this.accountForm.get("inputRoutingNumber"))||void 0===n||n.setErrors({[_e]:!0}):this.showNotification(!1,{header:"Account creation failed",message:""})}noWhitespaceValidator(t){return 0!==(t.value||"").trim().length?null:{required:!0}}showNotification(t,n){this.notificationService.showNotification(Object.assign({dismissible:!0,ttl:this.config.dismissMessageTime,modifier:t?"success":"error"},n))}buildAccountForm(){return this.formBuilder.group({inputAccountName:["",[r.kI.required,this.noWhitespaceValidator]],accountTypeSelect:["",r.kI.required],inputAccountNumber:["",[r.kI.required,this.noWhitespaceValidator,r.kI.pattern(/^\d+$/)]],inputRoutingNumber:["",[r.kI.required,me]]})}}return _.\u0275fac=function(t){return new(t||_)(e.Y36(F),e.Y36(h.gq),e.Y36(Y),e.Y36(r.qu),e.Y36(x),e.Y36(p.gz))},_.\u0275cmp=e.Xpm({type:_,selectors:[["bb-connect-account-modal-view"]],decls:2,vars:7,consts:[[3,"modalOpen","accountForm","submitted","isLoading","formInputLengths","submitForm","discardData"]],template:function(t,n){1&t&&(e.TgZ(0,"bb-a2a-link-account-form",0),e.NdJ("submitForm",function(){return n.onSubmit()})("discardData",function(){return n.onDiscardData()}),e.ALo(1,"async"),e.qZA()),2&t&&e.Q6J("modalOpen",!0)("accountForm",n.accountForm)("submitted",n.submitted)("isLoading",!!e.lcZ(1,5,n.loading$))("formInputLengths",n.formInputLengths)},directives:[se],pipes:[A.Ov],encapsulation:2,changeDetection:0}),_})()},{path:"activate-account",component:Ue}]}]},u_=[L.P,T.O];let C_=(()=>{class _{static forRoot(t={route:r_}){return{ngModule:_,providers:[(0,p.co)([t.route])]}}}return _.\u0275fac=function(t){return new(t||_)},_.\u0275mod=e.oAB({type:_}),_.\u0275inj=e.cJS({providers:[Y,x,O.Px],imports:[[A.ez,p.Bz,E_,...u_],L.P,T.O]}),_})();var N_=E(6393),d_=E(570);let S_=(()=>{class _{}return _.\u0275fac=function(t){return new(t||_)},_.\u0275mod=e.oAB({type:_}),_.\u0275inj=e.cJS({providers:[{provide:te,useExisting:N_.m},{provide:O.Vo,useExisting:d_.Wq}],imports:[[C_.forRoot()]]}),_})()},7586:()=>{},3823:(Ge,X,E)=>{"use strict";E.d(X,{Z:()=>I,_:()=>g});var O=E(5e3),e=E(9808);let I=(()=>{class A{constructor(u,T){this.renderer=u,this.elementRef=T,this.negativeClass="bb-amount--negative",this.positiveClass="bb-amount--positive",this.amountValue=0,this.highlightValue=!0}set amount(u){this.amountValue="number"==typeof u?u:parseFloat(u)}set bbHighlight(u){this.highlightValue=""===u||u}get isPositive(){return this.amountValue>=0}ngOnChanges(u){u.negativeClass&&this.renderer.removeClass(this.elementRef.nativeElement,u.negativeClass.previousValue),u.positiveClass&&this.renderer.removeClass(this.elementRef.nativeElement,u.positiveClass.previousValue),(u.amount||u.highlight||u.bbHighlight)&&(this.renderer.removeClass(this.elementRef.nativeElement,this.negativeClass),this.renderer.removeClass(this.elementRef.nativeElement,this.positiveClass)),this.highlightValue&&this.renderer.addClass(this.elementRef.nativeElement,this.isPositive?this.positiveClass:this.negativeClass)}}return A.\u0275fac=function(u){return new(u||A)(O.Y36(O.Qsj),O.Y36(O.SBq))},A.\u0275dir=O.lG2({type:A,selectors:[["","bbHighlight",""]],inputs:{amount:"amount",bbHighlight:"bbHighlight",negativeClass:"negativeClass",positiveClass:"positiveClass"},features:[O.TTD]}),A})(),g=(()=>{class A{}return A.\u0275fac=function(u){return new(u||A)},A.\u0275mod=O.oAB({type:A}),A.\u0275inj=O.cJS({imports:[[e.ez]]}),A})()}}]);